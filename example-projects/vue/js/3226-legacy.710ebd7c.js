(self["webpackChunkelements_vue_example"]=self["webpackChunkelements_vue_example"]||[]).push([[3226],{1720:function(t,e,n){var r=n(5968),i=n(8885),o=n(3326),s=/"/g,a=r("".replace);t.exports=function(t,e,n,r){var u=o(i(t)),c="<"+e;return""!==n&&(c+=" "+n+'="'+a(o(r),s,"&quot;")+'"'),c+">"+u+"</"+e+">"}},2671:function(t,e,n){var r=n(598),i=r.match(/firefox\/(\d+)/i);t.exports=!!i&&+i[1]},8506:function(t,e,n){var r=n(598);t.exports=/MSIE|Trident/.test(r)},9811:function(t,e,n){var r=n(598),i=r.match(/AppleWebKit\/(\d+)\./);t.exports=!!i&&+i[1]},4990:function(t,e,n){"use strict";var r=n(3718),i=n(9646),o=n(3064),s=n(7636),a=function(t,e,n,u,c,l,h,d){var f,p,v=c,m=0,g=!!h&&s(h,d);while(m<u)m in n&&(f=g?g(n[m],m,e):n[m],l>0&&r(f)?(p=i(f),v=a(t,e,f,p,v,l-1)-1):(o(v+1),t[v]=f),v++),m++;return v};t.exports=a},193:function(t,e,n){var r=n(8270);t.exports=function(t){return void 0!==t&&(r(t,"value")||r(t,"writable"))}},2101:function(t){t.exports=Object.is||function(t,e){return t===e?0!==t||1/t===1/e:t!=t&&e!=e}},3689:function(t,e,n){var r=n(4229);t.exports=function(t){return r((function(){var e=""[t]('"');return e!==e.toLowerCase()||e.split('"').length>3}))}},3124:function(t,e,n){"use strict";var r=n(3329),i=n(3326),o=n(8885),s=RangeError;t.exports=function(t){var e=i(o(this)),n="",a=r(t);if(a<0||a==1/0)throw s("Wrong number of repetitions");for(;a>0;(a>>>=1)&&(e+=e))1&a&&(n+=e);return n}},724:function(t,e,n){"use strict";var r=n(3103),i=n(2991),o=n(9646),s=n(3329),a=n(9736);r({target:"Array",proto:!0},{at:function(t){var e=i(this),n=o(e),r=s(t),a=r>=0?r:n+r;return a<0||a>=n?void 0:e[a]}}),a("at")},9949:function(t,e,n){"use strict";var r=n(3103),i=n(9996).findIndex,o=n(9736),s="findIndex",a=!0;s in[]&&Array(1)[s]((function(){a=!1})),r({target:"Array",proto:!0,forced:a},{findIndex:function(t){return i(this,t,arguments.length>1?arguments[1]:void 0)}}),o(s)},7072:function(t,e,n){"use strict";var r=n(3103),i=n(4990),o=n(2991),s=n(9646),a=n(3329),u=n(7501);r({target:"Array",proto:!0},{flat:function(){var t=arguments.length?arguments[0]:void 0,e=o(this),n=s(e),r=u(e,0);return r.length=i(r,e,e,n,0,void 0===t?1:a(t)),r}})},3430:function(t,e,n){"use strict";var r=n(3103),i=n(5968),o=n(7111),s=n(2991),a=n(9646),u=n(9563),c=n(3326),l=n(4229),h=n(3867),d=n(6038),f=n(2671),p=n(8506),v=n(6358),m=n(9811),g=[],y=i(g.sort),k=i(g.push),b=l((function(){g.sort(void 0)})),w=l((function(){g.sort(null)})),D=d("sort"),x=!l((function(){if(v)return v<70;if(!(f&&f>3)){if(p)return!0;if(m)return m<603;var t,e,n,r,i="";for(t=65;t<76;t++){switch(e=String.fromCharCode(t),t){case 66:case 69:case 70:case 72:n=3;break;case 68:case 71:n=4;break;default:n=2}for(r=0;r<47;r++)g.push({k:e+r,v:n})}for(g.sort((function(t,e){return e.v-t.v})),r=0;r<g.length;r++)e=g[r].k.charAt(0),i.charAt(i.length-1)!==e&&(i+=e);return"DGBEFHACIJK"!==i}})),C=b||!w||!D||!x,A=function(t){return function(e,n){return void 0===n?-1:void 0===e?1:void 0!==t?+t(e,n)||0:c(e)>c(n)?1:-1}};r({target:"Array",proto:!0,forced:C},{sort:function(t){void 0!==t&&o(t);var e=s(this);if(x)return void 0===t?y(e):y(e,t);var n,r,i=[],c=a(e);for(r=0;r<c;r++)r in e&&k(i,e[r]);h(i,A(t)),n=a(i),r=0;while(r<n)e[r]=i[r++];while(r<c)u(e,r++);return e}})},7694:function(t,e,n){var r=n(9736);r("flat")},1951:function(t,e,n){"use strict";var r=n(3103),i=n(2991),o=n(9646),s=n(6554),a=n(9563),u=n(3064),c=1!==[].unshift(0),l=function(){try{Object.defineProperty([],"length",{writable:!1}).unshift()}catch(t){return t instanceof TypeError}},h=c||!l();r({target:"Array",proto:!0,arity:1,forced:h},{unshift:function(t){var e=i(this),n=o(e),r=arguments.length;if(r){u(n+r);var c=n;while(c--){var l=c+r;c in e?e[l]=e[c]:a(e,l)}for(var h=0;h<r;h++)e[h]=arguments[h]}return s(e,n+r)}})},4173:function(t,e,n){var r=n(3103),i=n(9859);r({global:!0,forced:i.globalThis!==i},{globalThis:i})},2144:function(t,e,n){var r=n(3103),i=n(8476),o=n(4229),s=n(5052),a=n(5926).onFreeze,u=Object.freeze,c=o((function(){u(1)}));r({target:"Object",stat:!0,forced:c,sham:!i},{freeze:function(t){return u&&s(t)?u(a(t)):t}})},1804:function(t,e,n){var r=n(3103),i=n(9003),o=n(2324);r({target:"Object",stat:!0},{fromEntries:function(t){var e={};return i(t,(function(t,n){o(e,t,n)}),{AS_ENTRIES:!0}),e}})},8625:function(t,e,n){var r=n(3103),i=n(4229),o=n(905),s=n(7933).f,a=n(7400),u=!a||i((function(){s(1)}));r({target:"Object",stat:!0,forced:u,sham:!a},{getOwnPropertyDescriptor:function(t,e){return s(o(t),e)}})},2775:function(t,e,n){var r=n(3103),i=n(7400),o=n(4826),s=n(905),a=n(7933),u=n(2324);r({target:"Object",stat:!0,sham:!i},{getOwnPropertyDescriptors:function(t){var e,n,r=s(t),i=a.f,c=o(r),l={},h=0;while(c.length>h)n=i(r,e=c[h++]),void 0!==n&&u(l,e,n);return l}})},7890:function(t,e,n){var r=n(3103),i=n(7664).values;r({target:"Object",stat:!0},{values:function(t){return i(t)}})},4565:function(t,e,n){var r=n(3103),i=n(266),o=n(5052),s=n(1176),a=n(193),u=n(7933),c=n(7567);function l(t,e){var n,r,h=arguments.length<3?t:arguments[2];return s(t)===h?t[e]:(n=u.f(t,e),n?a(n)?n.value:void 0===n.get?void 0:i(n.get,h):o(r=c(t))?l(r,e,h):void 0)}r({target:"Reflect",stat:!0},{get:l})},7368:function(t,e,n){var r=n(7400),i=n(9859),o=n(5968),s=n(6541),a=n(835),u=n(5762),c=n(8151).f,l=n(1321),h=n(8311),d=n(3326),f=n(3349),p=n(5650),v=n(6060),m=n(4768),g=n(4229),y=n(8270),k=n(6407).enforce,b=n(1832),w=n(95),D=n(2926),x=n(461),C=w("match"),A=i.RegExp,E=A.prototype,S=i.SyntaxError,_=o(E.exec),M=o("".charAt),O=o("".replace),T=o("".indexOf),F=o("".slice),N=/^\?<[^\s\d!#%&*+<=>@^][^\s!#%&*+<=>@^]*>/,B=/a/g,I=/a/g,L=new A(B)!==B,R=p.MISSED_STICKY,z=p.UNSUPPORTED_Y,P=r&&(!L||R||D||x||g((function(){return I[C]=!1,A(B)!=B||A(I)==I||"/a/i"!=A(B,"i")}))),Z=function(t){for(var e,n=t.length,r=0,i="",o=!1;r<=n;r++)e=M(t,r),"\\"!==e?o||"."!==e?("["===e?o=!0:"]"===e&&(o=!1),i+=e):i+="[\\s\\S]":i+=e+M(t,++r);return i},q=function(t){for(var e,n=t.length,r=0,i="",o=[],s={},a=!1,u=!1,c=0,l="";r<=n;r++){if(e=M(t,r),"\\"===e)e+=M(t,++r);else if("]"===e)a=!1;else if(!a)switch(!0){case"["===e:a=!0;break;case"("===e:_(N,F(t,r+1))&&(r+=2,u=!0),i+=e,c++;continue;case">"===e&&u:if(""===l||y(s,l))throw new S("Invalid capture group name");s[l]=!0,o[o.length]=[l,c],u=!1,l="";continue}u?l+=e:i+=e}return[i,o]};if(s("RegExp",P)){for(var j=function(t,e){var n,r,i,o,s,c,p=l(E,this),v=h(t),m=void 0===e,g=[],y=t;if(!p&&v&&m&&t.constructor===j)return t;if((v||l(E,t))&&(t=t.source,m&&(e=f(y))),t=void 0===t?"":d(t),e=void 0===e?"":d(e),y=t,D&&"dotAll"in B&&(r=!!e&&T(e,"s")>-1,r&&(e=O(e,/s/g,""))),n=e,R&&"sticky"in B&&(i=!!e&&T(e,"y")>-1,i&&z&&(e=O(e,/y/g,""))),x&&(o=q(t),t=o[0],g=o[1]),s=a(A(t,e),p?this:E,j),(r||i||g.length)&&(c=k(s),r&&(c.dotAll=!0,c.raw=j(Z(t),n)),i&&(c.sticky=!0),g.length&&(c.groups=g)),t!==y)try{u(s,"source",""===y?"(?:)":y)}catch(b){}return s},$=c(A),V=0;$.length>V;)v(j,A,$[V++]);E.constructor=j,j.prototype=E,m(i,"RegExp",j,{constructor:!0})}b("RegExp")},4471:function(t,e,n){var r=n(7400),i=n(2926),o=n(7079),s=n(6616),a=n(6407).get,u=RegExp.prototype,c=TypeError;r&&i&&s(u,"dotAll",{configurable:!0,get:function(){if(this!==u){if("RegExp"===o(this))return!!a(this).dotAll;throw c("Incompatible receiver, RegExp required")}}})},1172:function(t,e,n){var r=n(7400),i=n(5650).MISSED_STICKY,o=n(7079),s=n(6616),a=n(6407).get,u=RegExp.prototype,c=TypeError;r&&i&&s(u,"sticky",{configurable:!0,get:function(){if(this!==u){if("RegExp"===o(this))return!!a(this).sticky;throw c("Incompatible receiver, RegExp required")}}})},1549:function(t,e,n){"use strict";var r=n(3103),i=n(1720),o=n(3689);r({target:"String",proto:!0,forced:o("anchor")},{anchor:function(t){return i(this,"a","name",t)}})},6406:function(t,e,n){"use strict";var r=n(3103),i=n(5968),o=n(8885),s=n(3329),a=n(3326),u=n(4229),c=i("".charAt),l=u((function(){return"\ud842"!=="𠮷".at(-2)}));r({target:"String",proto:!0,forced:l},{at:function(t){var e=a(o(this)),n=e.length,r=s(t),i=r>=0?r:n+r;return i<0||i>=n?void 0:c(e,i)}})},5744:function(t,e,n){"use strict";var r=n(3103),i=n(1720),o=n(3689);r({target:"String",proto:!0,forced:o("bold")},{bold:function(){return i(this,"b","","")}})},4605:function(t,e,n){var r=n(3103),i=n(5968),o=n(3231),s=RangeError,a=String.fromCharCode,u=String.fromCodePoint,c=i([].join),l=!!u&&1!=u.length;r({target:"String",stat:!0,arity:1,forced:l},{fromCodePoint:function(t){var e,n=[],r=arguments.length,i=0;while(r>i){if(e=+arguments[i++],o(e,1114111)!==e)throw s(e+" is not a valid code point");n[i]=e<65536?a(e):a(55296+((e-=65536)>>10),e%1024+56320)}return c(n,"")}})},3969:function(t,e,n){"use strict";var r=n(3103),i=n(1720),o=n(3689);r({target:"String",proto:!0,forced:o("italics")},{italics:function(){return i(this,"i","","")}})},2508:function(t,e,n){"use strict";var r=n(3103),i=n(1720),o=n(3689);r({target:"String",proto:!0,forced:o("link")},{link:function(t){return i(this,"a","href",t)}})},6920:function(t,e,n){"use strict";var r=n(3103),i=n(266),o=n(4745),s=n(2247),a=n(3684),u=n(8885),c=n(4237),l=n(3326),h=n(1176),d=n(9650),f=n(7079),p=n(8311),v=n(3349),m=n(5300),g=n(4768),y=n(4229),k=n(95),b=n(7942),w=n(6637),D=n(8115),x=n(6407),C=n(4231),A=k("matchAll"),E="RegExp String",S=E+" Iterator",_=x.set,M=x.getterFor(S),O=RegExp.prototype,T=TypeError,F=o("".indexOf),N=o("".matchAll),B=!!N&&!y((function(){N("a",/./)})),I=s((function(t,e,n,r){_(this,{type:S,regexp:t,string:e,global:n,unicode:r,done:!1})}),E,(function(){var t=M(this);if(t.done)return a(void 0,!0);var e=t.regexp,n=t.string,r=D(e,n);return null===r?(t.done=!0,a(void 0,!0)):t.global?(""===l(r[0])&&(e.lastIndex=w(n,c(e.lastIndex),t.unicode)),a(r,!1)):(t.done=!0,a(r,!1))})),L=function(t){var e,n,r,i=h(this),o=l(t),s=b(i,RegExp),a=l(v(i));return e=new s(s===RegExp?i.source:i,a),n=!!~F(a,"g"),r=!!~F(a,"u"),e.lastIndex=c(i.lastIndex),new I(e,o,n,r)};r({target:"String",proto:!0,forced:B},{matchAll:function(t){var e,n,r,o,s=u(this);if(d(t)){if(B)return N(s,t)}else{if(p(t)&&(e=l(u(v(t))),!~F(e,"g")))throw T("`.matchAll` does not allow non-global regexes");if(B)return N(s,t);if(r=m(t,A),void 0===r&&C&&"RegExp"==f(t)&&(r=L),r)return i(r,t,s)}return n=l(s),o=new RegExp(t,"g"),C?i(L,o,n):o[A](n)}}),C||A in O||g(O,A,L)},4069:function(t,e,n){"use strict";var r=n(266),i=n(4954),o=n(1176),s=n(9650),a=n(4237),u=n(3326),c=n(8885),l=n(5300),h=n(6637),d=n(8115);i("match",(function(t,e,n){return[function(e){var n=c(this),i=s(e)?void 0:l(e,t);return i?r(i,e,n):new RegExp(e)[t](u(n))},function(t){var r=o(this),i=u(t),s=n(e,r,i);if(s.done)return s.value;if(!r.global)return d(r,i);var c=r.unicode;r.lastIndex=0;var l,f=[],p=0;while(null!==(l=d(r,i))){var v=u(l[0]);f[p]=v,""===v&&(r.lastIndex=h(i,a(r.lastIndex),c)),p++}return 0===p?null:f}]}))},7789:function(t,e,n){var r=n(3103),i=n(3124);r({target:"String",proto:!0},{repeat:i})},4908:function(t,e,n){"use strict";var r=n(266),i=n(4954),o=n(1176),s=n(9650),a=n(8885),u=n(2101),c=n(3326),l=n(5300),h=n(8115);i("search",(function(t,e,n){return[function(e){var n=a(this),i=s(e)?void 0:l(e,t);return i?r(i,e,n):new RegExp(e)[t](c(n))},function(t){var r=o(this),i=c(t),s=n(e,r,i);if(s.done)return s.value;var a=r.lastIndex;u(a,0)||(r.lastIndex=0);var l=h(r,i);return u(r.lastIndex,a)||(r.lastIndex=a),null===l?-1:l.index}]}))},8101:function(t,e,n){"use strict";var r=n(3103),i=n(1720),o=n(3689);r({target:"String",proto:!0,forced:o("strike")},{strike:function(){return i(this,"strike","","")}})},5371:function(t,e,n){"use strict";var r=n(3103),i=n(266);r({target:"URL",proto:!0,enumerable:!0},{toJSON:function(){return i(URL.prototype.toString,this)}})},1231:function(t,e,n){"use strict";n.d(e,{a:function(){return r},c:function(){return o},g:function(){return i}});n(4173),n(1372);var r="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof n.g?n.g:"undefined"!==typeof self?self:{};function i(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t["default"]:t}function o(t,e,n){return n={path:e,exports:{},require:function(t,e){return s()}},t(n,n.exports),n.exports}function s(){throw new Error("Dynamic requires are not currently supported by @rollup/plugin-commonjs")}},9776:function(t,e,n){"use strict";n.d(e,{c:function(){return o}});var r=n(6632),i=(n(6728),n(8188),n(8233),n(9529),n(1235),n(6781),n(1231)),o=(0,i.c)((function(t){
/*!
  	Copyright (c) 2018 Jed Watson.
  	Licensed under the MIT License (MIT), see
  	http://jedwatson.github.io/classnames
  */
(function(){var e={}.hasOwnProperty;function n(){for(var t=[],i=0;i<arguments.length;i++){var o=arguments[i];if(o){var s=(0,r.Z)(o);if("string"===s||"number"===s)t.push(o);else if(Array.isArray(o)){if(o.length){var a=n.apply(null,o);a&&t.push(a)}}else if("object"===s){if(o.toString!==Object.prototype.toString&&!o.toString.toString().includes("[native code]")){t.push(o.toString());continue}for(var u in o)e.call(o,u)&&o[u]&&t.push(u)}}}return t.join(" ")}t.exports?(n.default=n,t.exports=n):window.classNames=n})()}))},3226:function(t,e,n){"use strict";n.r(e),n.d(e,{ino_markdown_editor:function(){return l4}});n(4115),n(4769);function r(t,e){if(null==t)return{};var n,r,i={},o=Object.keys(t);for(r=0;r<o.length;r++)n=o[r],e.indexOf(n)>=0||(i[n]=t[n]);return i}function i(t,e){if(null==t)return{};var n,i,o=r(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)n=s[i],e.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(t,n)&&(o[n]=t[n])}return o}var o=n(6274),s=n(6041);n(5342),n(8188),n(8625),n(6728),n(1939),n(2775);function a(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function u(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?a(Object(n),!0).forEach((function(e){(0,o.Z)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var c=n(4282),l=n(9519),h=n(8571),d=(n(2215),n(4565),n(5049));function f(t,e){while(!Object.prototype.hasOwnProperty.call(t,e))if(t=(0,d.Z)(t),null===t)break;return t}function p(){return p="undefined"!==typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var r=f(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(arguments.length<3?t:n):i.value}},p.apply(this,arguments)}var v,m,g=n(2784),y=n(6208),k=n(3681),b=n(6632),w=n(4567),D=n(6812),x=(n(9228),n(2501),n(9805),n(8178),n(1372),n(6781),n(3450),n(5371),n(6936),n(3430),n(9949),n(6710),n(7950),n(4069),n(8319),n(1850),n(1245),n(8233),n(5940),n(1951),n(9764),n(1549),n(5794),n(9321),n(8673),n(6886),n(3244),n(2356),n(6928),n(1804),n(5883),n(9529),n(1235),n(6920),n(7072),n(7694),n(4112),n(2144),n(7890),n(4908),n(6708),n(7368),n(4471),n(1172),n(5744),n(3969),n(8101),n(724),n(6406),n(4605),n(7789),n(2508),n(1297)),C=n(9776),A=n(1231),E=["start"];
/*!
 * Crafted with ❤ by inovex GmbH
 */
function S(t){this.content=t}function _(t,e,n){for(var r=0;;r++){if(r==t.childCount||r==e.childCount)return t.childCount==e.childCount?null:n;var i=t.child(r),o=e.child(r);if(i!=o){if(!i.sameMarkup(o))return n;if(i.isText&&i.text!=o.text){for(var s=0;i.text[s]==o.text[s];s++)n++;return n}if(i.content.size||o.content.size){var a=_(i.content,o.content,n+1);if(null!=a)return a}n+=i.nodeSize}else n+=i.nodeSize}}function M(t,e,n,r){for(var i=t.childCount,o=e.childCount;;){if(0==i||0==o)return i==o?null:{a:n,b:r};var s=t.child(--i),a=e.child(--o),u=s.nodeSize;if(s!=a){if(!s.sameMarkup(a))return{a:n,b:r};if(s.isText&&s.text!=a.text){var c=0,l=Math.min(s.text.length,a.text.length);while(c<l&&s.text[s.text.length-c-1]==a.text[a.text.length-c-1])c++,n--,r--;return{a:n,b:r}}if(s.content.size||a.content.size){var h=M(s.content,a.content,n-1,r-1);if(h)return h}n-=u,r-=u}else n-=u,r-=u}}S.prototype={constructor:S,find:function(t){for(var e=0;e<this.content.length;e+=2)if(this.content[e]===t)return e;return-1},get:function(t){var e=this.find(t);return-1==e?void 0:this.content[e+1]},update:function(t,e,n){var r=n&&n!=t?this.remove(n):this,i=r.find(t),o=r.content.slice();return-1==i?o.push(n||t,e):(o[i+1]=e,n&&(o[i]=n)),new S(o)},remove:function(t){var e=this.find(t);if(-1==e)return this;var n=this.content.slice();return n.splice(e,2),new S(n)},addToStart:function(t,e){return new S([t,e].concat(this.remove(t).content))},addToEnd:function(t,e){var n=this.remove(t).content.slice();return n.push(t,e),new S(n)},addBefore:function(t,e,n){var r=this.remove(e),i=r.content.slice(),o=r.find(t);return i.splice(-1==o?i.length:o,0,e,n),new S(i)},forEach:function(t){for(var e=0;e<this.content.length;e+=2)t(this.content[e],this.content[e+1])},prepend:function(t){return t=S.from(t),t.size?new S(t.content.concat(this.subtract(t).content)):this},append:function(t){return t=S.from(t),t.size?new S(this.subtract(t).content.concat(t.content)):this},subtract:function(t){var e=this;t=S.from(t);for(var n=0;n<t.content.length;n+=2)e=e.remove(t.content[n]);return e},toObject:function(){var t={};return this.forEach((function(e,n){t[e]=n})),t},get size(){return this.content.length>>1}},S.from=function(t){if(t instanceof S)return t;var e=[];if(t)for(var n in t)e.push(n,t[n]);return new S(e)};var O=function(){function t(e,n){if((0,w.Z)(this,t),this.content=e,this.size=n||0,null==n)for(var r=0;r<e.length;r++)this.size+=e[r].nodeSize}return(0,D.Z)(t,[{key:"nodesBetween",value:function(t,e,n){for(var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,i=arguments.length>4?arguments[4]:void 0,o=0,s=0;s<e;o++){var a=this.content[o],u=s+a.nodeSize;if(u>t&&!1!==n(a,r+s,i||null,o)&&a.content.size){var c=s+1;a.nodesBetween(Math.max(0,t-c),Math.min(a.content.size,e-c),n,r+c)}s=u}}},{key:"descendants",value:function(t){this.nodesBetween(0,this.size,t)}},{key:"textBetween",value:function(t,e,n,r){var i="",o=!0;return this.nodesBetween(t,e,(function(s,a){s.isText?(i+=s.text.slice(Math.max(t,a)-a,e-a),o=!n):s.isLeaf?(r?i+="function"===typeof r?r(s):r:s.type.spec.leafText&&(i+=s.type.spec.leafText(s)),o=!n):!o&&s.isBlock&&(i+=n,o=!0)}),0),i}},{key:"append",value:function(e){if(!e.size)return this;if(!this.size)return e;var n=this.lastChild,r=e.firstChild,i=this.content.slice(),o=0;for(n.isText&&n.sameMarkup(r)&&(i[i.length-1]=n.withText(n.text+r.text),o=1);o<e.content.length;o++)i.push(e.content[o]);return new t(i,this.size+e.size)}},{key:"cut",value:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.size;if(0==e&&n==this.size)return this;var r=[],i=0;if(n>e)for(var o=0,s=0;s<n;o++){var a=this.content[o],u=s+a.nodeSize;u>e&&((s<e||u>n)&&(a=a.isText?a.cut(Math.max(0,e-s),Math.min(a.text.length,n-s)):a.cut(Math.max(0,e-s-1),Math.min(a.content.size,n-s-1))),r.push(a),i+=a.nodeSize),s=u}return new t(r,i)}},{key:"cutByIndex",value:function(e,n){return e==n?t.empty:0==e&&n==this.content.length?this:new t(this.content.slice(e,n))}},{key:"replaceChild",value:function(e,n){var r=this.content[e];if(r==n)return this;var i=this.content.slice(),o=this.size+n.nodeSize-r.nodeSize;return i[e]=n,new t(i,o)}},{key:"addToStart",value:function(e){return new t([e].concat(this.content),this.size+e.nodeSize)}},{key:"addToEnd",value:function(e){return new t(this.content.concat(e),this.size+e.nodeSize)}},{key:"eq",value:function(t){if(this.content.length!=t.content.length)return!1;for(var e=0;e<this.content.length;e++)if(!this.content[e].eq(t.content[e]))return!1;return!0}},{key:"firstChild",get:function(){return this.content.length?this.content[0]:null}},{key:"lastChild",get:function(){return this.content.length?this.content[this.content.length-1]:null}},{key:"childCount",get:function(){return this.content.length}},{key:"child",value:function(t){var e=this.content[t];if(!e)throw new RangeError("Index "+t+" out of range for "+this);return e}},{key:"maybeChild",value:function(t){return this.content[t]||null}},{key:"forEach",value:function(t){for(var e=0,n=0;e<this.content.length;e++){var r=this.content[e];t(r,n,e),n+=r.nodeSize}}},{key:"findDiffStart",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return _(this,t,e)}},{key:"findDiffEnd",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.size,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:t.size;return M(this,t,e,n)}},{key:"findIndex",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1;if(0==t)return F(0,t);if(t==this.size)return F(this.content.length,t);if(t>this.size||t<0)throw new RangeError("Position ".concat(t," outside of fragment (").concat(this,")"));for(var n=0,r=0;;n++){var i=this.child(n),o=r+i.nodeSize;if(o>=t)return o==t||e>0?F(n+1,o):F(n,r);r=o}}},{key:"toString",value:function(){return"<"+this.toStringInner()+">"}},{key:"toStringInner",value:function(){return this.content.join(", ")}},{key:"toJSON",value:function(){return this.content.length?this.content.map((function(t){return t.toJSON()})):null}}],[{key:"fromJSON",value:function(e,n){if(!n)return t.empty;if(!Array.isArray(n))throw new RangeError("Invalid input for Fragment.fromJSON");return new t(n.map(e.nodeFromJSON))}},{key:"fromArray",value:function(e){if(!e.length)return t.empty;for(var n,r=0,i=0;i<e.length;i++){var o=e[i];r+=o.nodeSize,i&&o.isText&&e[i-1].sameMarkup(o)?(n||(n=e.slice(0,i)),n[n.length-1]=o.withText(n[n.length-1].text+o.text)):n&&n.push(o)}return new t(n||e,r)}},{key:"from",value:function(e){if(!e)return t.empty;if(e instanceof t)return e;if(Array.isArray(e))return this.fromArray(e);if(e.attrs)return new t([e],e.nodeSize);throw new RangeError("Can not convert "+e+" to a Fragment"+(e.nodesBetween?" (looks like multiple versions of prosemirror-model were loaded)":""))}}]),t}();O.empty=new O([],0);var T={index:0,offset:0};function F(t,e){return T.index=t,T.offset=e,T}function N(t,e){if(t===e)return!0;if(!t||"object"!=(0,b.Z)(t)||!e||"object"!=(0,b.Z)(e))return!1;var n=Array.isArray(t);if(Array.isArray(e)!=n)return!1;if(n){if(t.length!=e.length)return!1;for(var r=0;r<t.length;r++)if(!N(t[r],e[r]))return!1}else{for(var i in t)if(!(i in e)||!N(t[i],e[i]))return!1;for(var o in e)if(!(o in t))return!1}return!0}var B=function(){function t(e,n){(0,w.Z)(this,t),this.type=e,this.attrs=n}return(0,D.Z)(t,[{key:"addToSet",value:function(t){for(var e,n=!1,r=0;r<t.length;r++){var i=t[r];if(this.eq(i))return t;if(this.type.excludes(i.type))e||(e=t.slice(0,r));else{if(i.type.excludes(this.type))return t;!n&&i.type.rank>this.type.rank&&(e||(e=t.slice(0,r)),e.push(this),n=!0),e&&e.push(i)}}return e||(e=t.slice()),n||e.push(this),e}},{key:"removeFromSet",value:function(t){for(var e=0;e<t.length;e++)if(this.eq(t[e]))return t.slice(0,e).concat(t.slice(e+1));return t}},{key:"isInSet",value:function(t){for(var e=0;e<t.length;e++)if(this.eq(t[e]))return!0;return!1}},{key:"eq",value:function(t){return this==t||this.type==t.type&&N(this.attrs,t.attrs)}},{key:"toJSON",value:function(){var t={type:this.type.name};for(var e in this.attrs){t.attrs=this.attrs;break}return t}}],[{key:"fromJSON",value:function(t,e){if(!e)throw new RangeError("Invalid input for Mark.fromJSON");var n=t.marks[e.type];if(!n)throw new RangeError("There is no mark type ".concat(e.type," in this schema"));return n.create(e.attrs)}},{key:"sameSet",value:function(t,e){if(t==e)return!0;if(t.length!=e.length)return!1;for(var n=0;n<t.length;n++)if(!t[n].eq(e[n]))return!1;return!0}},{key:"setFrom",value:function(e){if(!e||Array.isArray(e)&&0==e.length)return t.none;if(e instanceof t)return[e];var n=e.slice();return n.sort((function(t,e){return t.type.rank-e.type.rank})),n}}]),t}();B.none=[];var I=function(t){(0,g.Z)(n,t);var e=(0,y.Z)(n);function n(){return(0,w.Z)(this,n),e.apply(this,arguments)}return(0,D.Z)(n)}((0,k.Z)(Error)),L=function(){function t(e,n,r){(0,w.Z)(this,t),this.content=e,this.openStart=n,this.openEnd=r}return(0,D.Z)(t,[{key:"size",get:function(){return this.content.size-this.openStart-this.openEnd}},{key:"insertAt",value:function(e,n){var r=z(this.content,e+this.openStart,n);return r&&new t(r,this.openStart,this.openEnd)}},{key:"removeBetween",value:function(e,n){return new t(R(this.content,e+this.openStart,n+this.openStart),this.openStart,this.openEnd)}},{key:"eq",value:function(t){return this.content.eq(t.content)&&this.openStart==t.openStart&&this.openEnd==t.openEnd}},{key:"toString",value:function(){return this.content+"("+this.openStart+","+this.openEnd+")"}},{key:"toJSON",value:function(){if(!this.content.size)return null;var t={content:this.content.toJSON()};return this.openStart>0&&(t.openStart=this.openStart),this.openEnd>0&&(t.openEnd=this.openEnd),t}}],[{key:"fromJSON",value:function(e,n){if(!n)return t.empty;var r=n.openStart||0,i=n.openEnd||0;if("number"!=typeof r||"number"!=typeof i)throw new RangeError("Invalid input for Slice.fromJSON");return new t(O.fromJSON(e,n.content),r,i)}},{key:"maxOpen",value:function(e){for(var n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r=0,i=0,o=e.firstChild;o&&!o.isLeaf&&(n||!o.type.spec.isolating);o=o.firstChild)r++;for(var s=e.lastChild;s&&!s.isLeaf&&(n||!s.type.spec.isolating);s=s.lastChild)i++;return new t(e,r,i)}}]),t}();function R(t,e,n){var r=t.findIndex(e),i=r.index,o=r.offset,s=t.maybeChild(i),a=t.findIndex(n),u=a.index,c=a.offset;if(o==e||s.isText){if(c!=n&&!t.child(u).isText)throw new RangeError("Removing non-flat range");return t.cut(0,e).append(t.cut(n))}if(i!=u)throw new RangeError("Removing non-flat range");return t.replaceChild(i,s.copy(R(s.content,e-o-1,n-o-1)))}function z(t,e,n,r){var i=t.findIndex(e),o=i.index,s=i.offset,a=t.maybeChild(o);if(s==e||a.isText)return r&&!r.canReplace(o,o,n)?null:t.cut(0,e).append(n).append(t.cut(e));var u=z(a.content,e-s-1,n);return u&&t.replaceChild(o,a.copy(u))}function P(t,e,n){if(n.openStart>t.depth)throw new I("Inserted content deeper than insertion position");if(t.depth-n.openStart!=e.depth-n.openEnd)throw new I("Inconsistent open depths");return Z(t,e,n,0)}function Z(t,e,n,r){var i=t.index(r),o=t.node(r);if(i==e.index(r)&&r<t.depth-n.openStart){var s=Z(t,e,n,r+1);return o.copy(o.content.replaceChild(i,s))}if(n.content.size){if(n.openStart||n.openEnd||t.depth!=r||e.depth!=r){var a=W(n,t),u=a.start,c=a.end;return H(o,J(t,u,c,e,r))}var l=t.parent,h=l.content;return H(l,h.cut(0,t.parentOffset).append(n.content).append(h.cut(e.parentOffset)))}return H(o,K(t,e,r))}function q(t,e){if(!e.type.compatibleContent(t.type))throw new I("Cannot join "+e.type.name+" onto "+t.type.name)}function j(t,e,n){var r=t.node(n);return q(r,e.node(n)),r}function $(t,e){var n=e.length-1;n>=0&&t.isText&&t.sameMarkup(e[n])?e[n]=t.withText(e[n].text+t.text):e.push(t)}function V(t,e,n,r){var i=(e||t).node(n),o=0,s=e?e.index(n):i.childCount;t&&(o=t.index(n),t.depth>n?o++:t.textOffset&&($(t.nodeAfter,r),o++));for(var a=o;a<s;a++)$(i.child(a),r);e&&e.depth==n&&e.textOffset&&$(e.nodeBefore,r)}function H(t,e){return t.type.checkContent(e),t.copy(e)}function J(t,e,n,r,i){var o=t.depth>i&&j(t,e,i+1),s=r.depth>i&&j(n,r,i+1),a=[];return V(null,t,i,a),o&&s&&e.index(i)==n.index(i)?(q(o,s),$(H(o,J(t,e,n,r,i+1)),a)):(o&&$(H(o,K(t,e,i+1)),a),V(e,n,i,a),s&&$(H(s,K(n,r,i+1)),a)),V(r,null,i,a),new O(a)}function K(t,e,n){var r=[];if(V(null,t,n,r),t.depth>n){var i=j(t,e,n+1);$(H(i,K(t,e,n+1)),r)}return V(e,null,n,r),new O(r)}function W(t,e){for(var n=e.depth-t.openStart,r=e.node(n),i=r.copy(t.content),o=n-1;o>=0;o--)i=e.node(o).copy(O.from(i));return{start:i.resolveNoCache(t.openStart+n),end:i.resolveNoCache(i.content.size-t.openEnd-n)}}L.empty=new L(O.empty,0,0);var U=function(){function t(e,n,r){(0,w.Z)(this,t),this.pos=e,this.path=n,this.parentOffset=r,this.depth=n.length/3-1}return(0,D.Z)(t,[{key:"resolveDepth",value:function(t){return null==t?this.depth:t<0?this.depth+t:t}},{key:"parent",get:function(){return this.node(this.depth)}},{key:"doc",get:function(){return this.node(0)}},{key:"node",value:function(t){return this.path[3*this.resolveDepth(t)]}},{key:"index",value:function(t){return this.path[3*this.resolveDepth(t)+1]}},{key:"indexAfter",value:function(t){return t=this.resolveDepth(t),this.index(t)+(t!=this.depth||this.textOffset?1:0)}},{key:"start",value:function(t){return t=this.resolveDepth(t),0==t?0:this.path[3*t-1]+1}},{key:"end",value:function(t){return t=this.resolveDepth(t),this.start(t)+this.node(t).content.size}},{key:"before",value:function(t){if(t=this.resolveDepth(t),!t)throw new RangeError("There is no position before the top-level node");return t==this.depth+1?this.pos:this.path[3*t-1]}},{key:"after",value:function(t){if(t=this.resolveDepth(t),!t)throw new RangeError("There is no position after the top-level node");return t==this.depth+1?this.pos:this.path[3*t-1]+this.path[3*t].nodeSize}},{key:"textOffset",get:function(){return this.pos-this.path[this.path.length-1]}},{key:"nodeAfter",get:function(){var t=this.parent,e=this.index(this.depth);if(e==t.childCount)return null;var n=this.pos-this.path[this.path.length-1],r=t.child(e);return n?t.child(e).cut(n):r}},{key:"nodeBefore",get:function(){var t=this.index(this.depth),e=this.pos-this.path[this.path.length-1];return e?this.parent.child(t).cut(0,e):0==t?null:this.parent.child(t-1)}},{key:"posAtIndex",value:function(t,e){e=this.resolveDepth(e);for(var n=this.path[3*e],r=0==e?0:this.path[3*e-1]+1,i=0;i<t;i++)r+=n.child(i).nodeSize;return r}},{key:"marks",value:function(){var t=this.parent,e=this.index();if(0==t.content.size)return B.none;if(this.textOffset)return t.child(e).marks;var n=t.maybeChild(e-1),r=t.maybeChild(e);if(!n){var i=n;n=r,r=i}for(var o=n.marks,s=0;s<o.length;s++)!1!==o[s].type.spec.inclusive||r&&o[s].isInSet(r.marks)||(o=o[s--].removeFromSet(o));return o}},{key:"marksAcross",value:function(t){var e=this.parent.maybeChild(this.index());if(!e||!e.isInline)return null;for(var n=e.marks,r=t.parent.maybeChild(t.index()),i=0;i<n.length;i++)!1!==n[i].type.spec.inclusive||r&&n[i].isInSet(r.marks)||(n=n[i--].removeFromSet(n));return n}},{key:"sharedDepth",value:function(t){for(var e=this.depth;e>0;e--)if(this.start(e)<=t&&this.end(e)>=t)return e;return 0}},{key:"blockRange",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this,e=arguments.length>1?arguments[1]:void 0;if(t.pos<this.pos)return t.blockRange(this);for(var n=this.depth-(this.parent.inlineContent||this.pos==t.pos?1:0);n>=0;n--)if(t.pos<=this.end(n)&&(!e||e(this.node(n))))return new X(this,t,n);return null}},{key:"sameParent",value:function(t){return this.pos-this.parentOffset==t.pos-t.parentOffset}},{key:"max",value:function(t){return t.pos>this.pos?t:this}},{key:"min",value:function(t){return t.pos<this.pos?t:this}},{key:"toString",value:function(){for(var t="",e=1;e<=this.depth;e++)t+=(t?"/":"")+this.node(e).type.name+"_"+this.index(e-1);return t+":"+this.parentOffset}}],[{key:"resolve",value:function(e,n){if(!(n>=0&&n<=e.content.size))throw new RangeError("Position "+n+" out of range");for(var r=[],i=0,o=n,s=e;;){var a=s.content.findIndex(o),u=a.index,c=a.offset,l=o-c;if(r.push(s,u,i+c),!l)break;if(s=s.child(u),s.isText)break;o=l-1,i+=c+1}return new t(n,r,o)}},{key:"resolveCached",value:function(e,n){for(var r=0;r<G.length;r++){var i=G[r];if(i.pos==n&&i.doc==e)return i}var o=G[Y]=t.resolve(e,n);return Y=(Y+1)%Q,o}}]),t}(),G=[],Y=0,Q=12,X=function(){function t(e,n,r){(0,w.Z)(this,t),this.$from=e,this.$to=n,this.depth=r}return(0,D.Z)(t,[{key:"start",get:function(){return this.$from.before(this.depth+1)}},{key:"end",get:function(){return this.$to.after(this.depth+1)}},{key:"parent",get:function(){return this.$from.node(this.depth)}},{key:"startIndex",get:function(){return this.$from.index(this.depth)}},{key:"endIndex",get:function(){return this.$to.indexAfter(this.depth)}}]),t}(),tt=Object.create(null),et=function(){function t(e,n,r){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:B.none;(0,w.Z)(this,t),this.type=e,this.attrs=n,this.marks=i,this.content=r||O.empty}return(0,D.Z)(t,[{key:"nodeSize",get:function(){return this.isLeaf?1:2+this.content.size}},{key:"childCount",get:function(){return this.content.childCount}},{key:"child",value:function(t){return this.content.child(t)}},{key:"maybeChild",value:function(t){return this.content.maybeChild(t)}},{key:"forEach",value:function(t){this.content.forEach(t)}},{key:"nodesBetween",value:function(t,e,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;this.content.nodesBetween(t,e,n,r,this)}},{key:"descendants",value:function(t){this.nodesBetween(0,this.content.size,t)}},{key:"textContent",get:function(){return this.isLeaf&&this.type.spec.leafText?this.type.spec.leafText(this):this.textBetween(0,this.content.size,"")}},{key:"textBetween",value:function(t,e,n,r){return this.content.textBetween(t,e,n,r)}},{key:"firstChild",get:function(){return this.content.firstChild}},{key:"lastChild",get:function(){return this.content.lastChild}},{key:"eq",value:function(t){return this==t||this.sameMarkup(t)&&this.content.eq(t.content)}},{key:"sameMarkup",value:function(t){return this.hasMarkup(t.type,t.attrs,t.marks)}},{key:"hasMarkup",value:function(t,e,n){return this.type==t&&N(this.attrs,e||t.defaultAttrs||tt)&&B.sameSet(this.marks,n||B.none)}},{key:"copy",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return e==this.content?this:new t(this.type,this.attrs,e,this.marks)}},{key:"mark",value:function(e){return e==this.marks?this:new t(this.type,this.attrs,this.content,e)}},{key:"cut",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.content.size;return 0==t&&e==this.content.size?this:this.copy(this.content.cut(t,e))}},{key:"slice",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.content.size,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(t==e)return L.empty;var r=this.resolve(t),i=this.resolve(e),o=n?0:r.sharedDepth(e),s=r.start(o),a=r.node(o),u=a.content.cut(r.pos-s,i.pos-s);return new L(u,r.depth-o,i.depth-o)}},{key:"replace",value:function(t,e,n){return P(this.resolve(t),this.resolve(e),n)}},{key:"nodeAt",value:function(t){for(var e=this;;){var n=e.content.findIndex(t),r=n.index,i=n.offset;if(e=e.maybeChild(r),!e)return null;if(i==t||e.isText)return e;t-=i+1}}},{key:"childAfter",value:function(t){var e=this.content.findIndex(t),n=e.index,r=e.offset;return{node:this.content.maybeChild(n),index:n,offset:r}}},{key:"childBefore",value:function(t){if(0==t)return{node:null,index:0,offset:0};var e=this.content.findIndex(t),n=e.index,r=e.offset;if(r<t)return{node:this.content.child(n),index:n,offset:r};var i=this.content.child(n-1);return{node:i,index:n-1,offset:r-i.nodeSize}}},{key:"resolve",value:function(t){return U.resolveCached(this,t)}},{key:"resolveNoCache",value:function(t){return U.resolve(this,t)}},{key:"rangeHasMark",value:function(t,e,n){var r=!1;return e>t&&this.nodesBetween(t,e,(function(t){return n.isInSet(t.marks)&&(r=!0),!r})),r}},{key:"isBlock",get:function(){return this.type.isBlock}},{key:"isTextblock",get:function(){return this.type.isTextblock}},{key:"inlineContent",get:function(){return this.type.inlineContent}},{key:"isInline",get:function(){return this.type.isInline}},{key:"isText",get:function(){return this.type.isText}},{key:"isLeaf",get:function(){return this.type.isLeaf}},{key:"isAtom",get:function(){return this.type.isAtom}},{key:"toString",value:function(){if(this.type.spec.toDebugString)return this.type.spec.toDebugString(this);var t=this.type.name;return this.content.size&&(t+="("+this.content.toStringInner()+")"),rt(this.marks,t)}},{key:"contentMatchAt",value:function(t){var e=this.type.contentMatch.matchFragment(this.content,0,t);if(!e)throw new Error("Called contentMatchAt on a node with invalid content");return e}},{key:"canReplace",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:O.empty,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:n.childCount,o=this.contentMatchAt(t).matchFragment(n,r,i),s=o&&o.matchFragment(this.content,e);if(!s||!s.validEnd)return!1;for(var a=r;a<i;a++)if(!this.type.allowsMarks(n.child(a).marks))return!1;return!0}},{key:"canReplaceWith",value:function(t,e,n,r){if(r&&!this.type.allowsMarks(r))return!1;var i=this.contentMatchAt(t).matchType(n),o=i&&i.matchFragment(this.content,e);return!!o&&o.validEnd}},{key:"canAppend",value:function(t){return t.content.size?this.canReplace(this.childCount,this.childCount,t.content):this.type.compatibleContent(t.type)}},{key:"check",value:function(){this.type.checkContent(this.content);for(var t=B.none,e=0;e<this.marks.length;e++)t=this.marks[e].addToSet(t);if(!B.sameSet(t,this.marks))throw new RangeError("Invalid collection of marks for node ".concat(this.type.name,": ").concat(this.marks.map((function(t){return t.type.name}))));this.content.forEach((function(t){return t.check()}))}},{key:"toJSON",value:function(){var t={type:this.type.name};for(var e in this.attrs){t.attrs=this.attrs;break}return this.content.size&&(t.content=this.content.toJSON()),this.marks.length&&(t.marks=this.marks.map((function(t){return t.toJSON()}))),t}}],[{key:"fromJSON",value:function(t,e){if(!e)throw new RangeError("Invalid input for Node.fromJSON");var n=null;if(e.marks){if(!Array.isArray(e.marks))throw new RangeError("Invalid mark data for Node.fromJSON");n=e.marks.map(t.markFromJSON)}if("text"==e.type){if("string"!=typeof e.text)throw new RangeError("Invalid text node in JSON");return t.text(e.text,n)}var r=O.fromJSON(t,e.content);return t.nodeType(e.type).create(e.attrs,r,n)}}]),t}();et.prototype.text=void 0;var nt=function(t){(0,g.Z)(n,t);var e=(0,y.Z)(n);function n(t,r,i,o){var s;if((0,w.Z)(this,n),s=e.call(this,t,r,null,o),!i)throw new RangeError("Empty text nodes are not allowed");return s.text=i,s}return(0,D.Z)(n,[{key:"toString",value:function(){return this.type.spec.toDebugString?this.type.spec.toDebugString(this):rt(this.marks,JSON.stringify(this.text))}},{key:"textContent",get:function(){return this.text}},{key:"textBetween",value:function(t,e){return this.text.slice(t,e)}},{key:"nodeSize",get:function(){return this.text.length}},{key:"mark",value:function(t){return t==this.marks?this:new n(this.type,this.attrs,this.text,t)}},{key:"withText",value:function(t){return t==this.text?this:new n(this.type,this.attrs,t,this.marks)}},{key:"cut",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.text.length;return 0==t&&e==this.text.length?this:this.withText(this.text.slice(t,e))}},{key:"eq",value:function(t){return this.sameMarkup(t)&&this.text==t.text}},{key:"toJSON",value:function(){var t=p((0,d.Z)(n.prototype),"toJSON",this).call(this);return t.text=this.text,t}}]),n}(et);function rt(t,e){for(var n=t.length-1;n>=0;n--)e=t[n].type.name+"("+e+")";return e}var it=function(){function t(e){(0,w.Z)(this,t),this.validEnd=e,this.next=[],this.wrapCache=[]}return(0,D.Z)(t,[{key:"matchType",value:function(t){for(var e=0;e<this.next.length;e++)if(this.next[e].type==t)return this.next[e].next;return null}},{key:"matchFragment",value:function(t){for(var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:t.childCount,r=this,i=e;r&&i<n;i++)r=r.matchType(t.child(i).type);return r}},{key:"inlineContent",get:function(){return 0!=this.next.length&&this.next[0].type.isInline}},{key:"defaultType",get:function(){for(var t=0;t<this.next.length;t++){var e=this.next[t].type;if(!e.isText&&!e.hasRequiredAttrs())return e}return null}},{key:"compatible",value:function(t){for(var e=0;e<this.next.length;e++)for(var n=0;n<t.next.length;n++)if(this.next[e].type==t.next[n].type)return!0;return!1}},{key:"fillBefore",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=[this];function i(o,s){var a=o.matchFragment(t,n);if(a&&(!e||a.validEnd))return O.from(s.map((function(t){return t.createAndFill()})));for(var u=0;u<o.next.length;u++){var c=o.next[u],l=c.type,h=c.next;if(!l.isText&&!l.hasRequiredAttrs()&&-1==r.indexOf(h)){r.push(h);var d=i(h,s.concat(l));if(d)return d}}return null}return i(this,[])}},{key:"findWrapping",value:function(t){for(var e=0;e<this.wrapCache.length;e+=2)if(this.wrapCache[e]==t)return this.wrapCache[e+1];var n=this.computeWrapping(t);return this.wrapCache.push(t,n),n}},{key:"computeWrapping",value:function(t){var e=Object.create(null),n=[{match:this,type:null,via:null}];while(n.length){var r=n.shift(),i=r.match;if(i.matchType(t)){for(var o=[],s=r;s.type;s=s.via)o.push(s.type);return o.reverse()}for(var a=0;a<i.next.length;a++){var u=i.next[a],c=u.type,l=u.next;c.isLeaf||c.hasRequiredAttrs()||c.name in e||r.type&&!l.validEnd||(n.push({match:c.contentMatch,type:c,via:r}),e[c.name]=!0)}}return null}},{key:"edgeCount",get:function(){return this.next.length}},{key:"edge",value:function(t){if(t>=this.next.length)throw new RangeError("There's no ".concat(t,"th edge in this content match"));return this.next[t]}},{key:"toString",value:function(){var t=[];function e(n){t.push(n);for(var r=0;r<n.next.length;r++)-1==t.indexOf(n.next[r].next)&&e(n.next[r].next)}return e(this),t.map((function(e,n){for(var r=n+(e.validEnd?"*":" ")+" ",i=0;i<e.next.length;i++)r+=(i?", ":"")+e.next[i].type.name+"->"+t.indexOf(e.next[i].next);return r})).join("\n")}}],[{key:"parse",value:function(e,n){var r=new ot(e,n);if(null==r.next)return t.empty;var i=st(r);r.next&&r.err("Unexpected trailing text");var o=mt(ft(i));return gt(o,r),o}}]),t}();it.empty=new it(!0);var ot=function(){function t(e,n){(0,w.Z)(this,t),this.string=e,this.nodeTypes=n,this.inline=null,this.pos=0,this.tokens=e.split(/\s*(?=\b|\W|$)/),""==this.tokens[this.tokens.length-1]&&this.tokens.pop(),""==this.tokens[0]&&this.tokens.shift()}return(0,D.Z)(t,[{key:"next",get:function(){return this.tokens[this.pos]}},{key:"eat",value:function(t){return this.next==t&&(this.pos++||!0)}},{key:"err",value:function(t){throw new SyntaxError(t+" (in content expression '"+this.string+"')")}}]),t}();function st(t){var e=[];do{e.push(at(t))}while(t.eat("|"));return 1==e.length?e[0]:{type:"choice",exprs:e}}function at(t){var e=[];do{e.push(ut(t))}while(t.next&&")"!=t.next&&"|"!=t.next);return 1==e.length?e[0]:{type:"seq",exprs:e}}function ut(t){for(var e=dt(t);;)if(t.eat("+"))e={type:"plus",expr:e};else if(t.eat("*"))e={type:"star",expr:e};else if(t.eat("?"))e={type:"opt",expr:e};else{if(!t.eat("{"))break;e=lt(t,e)}return e}function ct(t){/\D/.test(t.next)&&t.err("Expected number, got '"+t.next+"'");var e=Number(t.next);return t.pos++,e}function lt(t,e){var n=ct(t),r=n;return t.eat(",")&&(r="}"!=t.next?ct(t):-1),t.eat("}")||t.err("Unclosed braced range"),{type:"range",min:n,max:r,expr:e}}function ht(t,e){var n=t.nodeTypes,r=n[e];if(r)return[r];var i=[];for(var o in n){var s=n[o];s.groups.indexOf(e)>-1&&i.push(s)}return 0==i.length&&t.err("No node type or group '"+e+"' found"),i}function dt(t){if(t.eat("(")){var e=st(t);return t.eat(")")||t.err("Missing closing paren"),e}if(!/\W/.test(t.next)){var n=ht(t,t.next).map((function(e){return null==t.inline?t.inline=e.isInline:t.inline!=e.isInline&&t.err("Mixing inline and block content"),{type:"name",value:e}}));return t.pos++,1==n.length?n[0]:{type:"choice",exprs:n}}t.err("Unexpected token '"+t.next+"'")}function ft(t){var e=[[]];return i(o(t,0),n()),e;function n(){return e.push([])-1}function r(t,n,r){var i={term:r,to:n};return e[t].push(i),i}function i(t,e){t.forEach((function(t){return t.to=e}))}function o(t,e){if("choice"==t.type)return t.exprs.reduce((function(t,n){return t.concat(o(n,e))}),[]);if("seq"!=t.type){if("star"==t.type){var s=n();return r(e,s),i(o(t.expr,s),s),[r(s)]}if("plus"==t.type){var a=n();return i(o(t.expr,e),a),i(o(t.expr,a),a),[r(a)]}if("opt"==t.type)return[r(e)].concat(o(t.expr,e));if("range"==t.type){for(var u=e,c=0;c<t.min;c++){var l=n();i(o(t.expr,u),l),u=l}if(-1==t.max)i(o(t.expr,u),u);else for(var h=t.min;h<t.max;h++){var d=n();r(u,d),i(o(t.expr,u),d),u=d}return[r(u)]}if("name"==t.type)return[r(e,void 0,t.value)];throw new Error("Unknown expr type")}for(var f=0;;f++){var p=o(t.exprs[f],e);if(f==t.exprs.length-1)return p;i(p,e=n())}}}function pt(t,e){return e-t}function vt(t,e){var n=[];return r(e),n.sort(pt);function r(e){var i=t[e];if(1==i.length&&!i[0].term)return r(i[0].to);n.push(e);for(var o=0;o<i.length;o++){var s=i[o],a=s.term,u=s.to;a||-1!=n.indexOf(u)||r(u)}}}function mt(t){var e=Object.create(null);return n(vt(t,0));function n(r){var i=[];r.forEach((function(e){t[e].forEach((function(e){var n=e.term,r=e.to;if(n){for(var o,s=0;s<i.length;s++)i[s][0]==n&&(o=i[s][1]);vt(t,r).forEach((function(t){o||i.push([n,o=[]]),-1==o.indexOf(t)&&o.push(t)}))}}))}));for(var o=e[r.join(",")]=new it(r.indexOf(t.length-1)>-1),s=0;s<i.length;s++){var a=i[s][1].sort(pt);o.next.push({type:i[s][0],next:e[a.join(",")]||n(a)})}return o}}function gt(t,e){for(var n=0,r=[t];n<r.length;n++){for(var i=r[n],o=!i.validEnd,s=[],a=0;a<i.next.length;a++){var u=i.next[a],c=u.type,l=u.next;s.push(c.name),!o||c.isText||c.hasRequiredAttrs()||(o=!1),-1==r.indexOf(l)&&r.push(l)}o&&e.err("Only non-generatable nodes ("+s.join(", ")+") in a required position (see https://prosemirror.net/docs/guide/#generatable)")}}function yt(t){var e=Object.create(null);for(var n in t){var r=t[n];if(!r.hasDefault)return null;e[n]=r.default}return e}function kt(t,e){var n=Object.create(null);for(var r in t){var i=e&&e[r];if(void 0===i){var o=t[r];if(!o.hasDefault)throw new RangeError("No value supplied for attribute "+r);i=o.default}n[r]=i}return n}function bt(t){var e=Object.create(null);if(t)for(var n in t)e[n]=new Dt(t[n]);return e}var wt=function(){function t(e,n,r){(0,w.Z)(this,t),this.name=e,this.schema=n,this.spec=r,this.markSet=null,this.groups=r.group?r.group.split(" "):[],this.attrs=bt(r.attrs),this.defaultAttrs=yt(this.attrs),this.contentMatch=null,this.inlineContent=null,this.isBlock=!(r.inline||"text"==e),this.isText="text"==e}return(0,D.Z)(t,[{key:"isInline",get:function(){return!this.isBlock}},{key:"isTextblock",get:function(){return this.isBlock&&this.inlineContent}},{key:"isLeaf",get:function(){return this.contentMatch==it.empty}},{key:"isAtom",get:function(){return this.isLeaf||!!this.spec.atom}},{key:"whitespace",get:function(){return this.spec.whitespace||(this.spec.code?"pre":"normal")}},{key:"hasRequiredAttrs",value:function(){for(var t in this.attrs)if(this.attrs[t].isRequired)return!0;return!1}},{key:"compatibleContent",value:function(t){return this==t||this.contentMatch.compatible(t.contentMatch)}},{key:"computeAttrs",value:function(t){return!t&&this.defaultAttrs?this.defaultAttrs:kt(this.attrs,t)}},{key:"create",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,e=arguments.length>1?arguments[1]:void 0,n=arguments.length>2?arguments[2]:void 0;if(this.isText)throw new Error("NodeType.create can't construct text nodes");return new et(this,this.computeAttrs(t),O.from(e),B.setFrom(n))}},{key:"createChecked",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,e=arguments.length>1?arguments[1]:void 0,n=arguments.length>2?arguments[2]:void 0;return e=O.from(e),this.checkContent(e),new et(this,this.computeAttrs(t),e,B.setFrom(n))}},{key:"createAndFill",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,e=arguments.length>1?arguments[1]:void 0,n=arguments.length>2?arguments[2]:void 0;if(t=this.computeAttrs(t),e=O.from(e),e.size){var r=this.contentMatch.fillBefore(e);if(!r)return null;e=r.append(e)}var i=this.contentMatch.matchFragment(e),o=i&&i.fillBefore(O.empty,!0);return o?new et(this,t,e.append(o),B.setFrom(n)):null}},{key:"validContent",value:function(t){var e=this.contentMatch.matchFragment(t);if(!e||!e.validEnd)return!1;for(var n=0;n<t.childCount;n++)if(!this.allowsMarks(t.child(n).marks))return!1;return!0}},{key:"checkContent",value:function(t){if(!this.validContent(t))throw new RangeError("Invalid content for node ".concat(this.name,": ").concat(t.toString().slice(0,50)))}},{key:"allowsMarkType",value:function(t){return null==this.markSet||this.markSet.indexOf(t)>-1}},{key:"allowsMarks",value:function(t){if(null==this.markSet)return!0;for(var e=0;e<t.length;e++)if(!this.allowsMarkType(t[e].type))return!1;return!0}},{key:"allowedMarks",value:function(t){if(null==this.markSet)return t;for(var e,n=0;n<t.length;n++)this.allowsMarkType(t[n].type)?e&&e.push(t[n]):e||(e=t.slice(0,n));return e?e.length?e:B.none:t}}],[{key:"compile",value:function(e,n){var r=Object.create(null);e.forEach((function(e,i){return r[e]=new t(e,n,i)}));var i=n.spec.topNode||"doc";if(!r[i])throw new RangeError("Schema is missing its top node type ('"+i+"')");if(!r.text)throw new RangeError("Every schema needs a 'text' type");for(var o in r.text.attrs)throw new RangeError("The text node type should not have attributes");return r}}]),t}(),Dt=function(){function t(e){(0,w.Z)(this,t),this.hasDefault=Object.prototype.hasOwnProperty.call(e,"default"),this.default=e.default}return(0,D.Z)(t,[{key:"isRequired",get:function(){return!this.hasDefault}}]),t}(),xt=function(){function t(e,n,r,i){(0,w.Z)(this,t),this.name=e,this.rank=n,this.schema=r,this.spec=i,this.attrs=bt(i.attrs),this.excluded=null;var o=yt(this.attrs);this.instance=o?new B(this,o):null}return(0,D.Z)(t,[{key:"create",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return!t&&this.instance?this.instance:new B(this,kt(this.attrs,t))}},{key:"removeFromSet",value:function(t){for(var e=0;e<t.length;e++)t[e].type==this&&(t=t.slice(0,e).concat(t.slice(e+1)),e--);return t}},{key:"isInSet",value:function(t){for(var e=0;e<t.length;e++)if(t[e].type==this)return t[e]}},{key:"excludes",value:function(t){return this.excluded.indexOf(t)>-1}}],[{key:"compile",value:function(e,n){var r=Object.create(null),i=0;return e.forEach((function(e,o){return r[e]=new t(e,i++,n,o)})),r}}]),t}(),Ct=function(){function t(e){(0,w.Z)(this,t),this.cached=Object.create(null);var n=this.spec={};for(var r in e)n[r]=e[r];n.nodes=S.from(e.nodes),n.marks=S.from(e.marks||{}),this.nodes=wt.compile(this.spec.nodes,this),this.marks=xt.compile(this.spec.marks,this);var i=Object.create(null);for(var o in this.nodes){if(o in this.marks)throw new RangeError(o+" can not be both a node and a mark");var s=this.nodes[o],a=s.spec.content||"",u=s.spec.marks;s.contentMatch=i[a]||(i[a]=it.parse(a,this.nodes)),s.inlineContent=s.contentMatch.inlineContent,s.markSet="_"==u?null:u?At(this,u.split(" ")):""!=u&&s.inlineContent?null:[]}for(var c in this.marks){var l=this.marks[c],h=l.spec.excludes;l.excluded=null==h?[l]:""==h?[]:At(this,h.split(" "))}this.nodeFromJSON=this.nodeFromJSON.bind(this),this.markFromJSON=this.markFromJSON.bind(this),this.topNodeType=this.nodes[this.spec.topNode||"doc"],this.cached.wrappings=Object.create(null)}return(0,D.Z)(t,[{key:"node",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2?arguments[2]:void 0,r=arguments.length>3?arguments[3]:void 0;if("string"==typeof t)t=this.nodeType(t);else{if(!(t instanceof wt))throw new RangeError("Invalid node type: "+t);if(t.schema!=this)throw new RangeError("Node type from different schema used ("+t.name+")")}return t.createChecked(e,n,r)}},{key:"text",value:function(t,e){var n=this.nodes.text;return new nt(n,n.defaultAttrs,t,B.setFrom(e))}},{key:"mark",value:function(t,e){return"string"==typeof t&&(t=this.marks[t]),t.create(e)}},{key:"nodeFromJSON",value:function(t){return et.fromJSON(this,t)}},{key:"markFromJSON",value:function(t){return B.fromJSON(this,t)}},{key:"nodeType",value:function(t){var e=this.nodes[t];if(!e)throw new RangeError("Unknown node type: "+t);return e}}]),t}();function At(t,e){for(var n=[],r=0;r<e.length;r++){var i=e[r],o=t.marks[i],s=o;if(o)n.push(o);else for(var a in t.marks){var u=t.marks[a];("_"==i||u.spec.group&&u.spec.group.split(" ").indexOf(i)>-1)&&n.push(s=u)}if(!s)throw new SyntaxError("Unknown mark type: '"+e[r]+"'")}return n}var Et=65535,St=Math.pow(2,16);function _t(t,e){return t+e*St}function Mt(t){return t&Et}function Ot(t){return(t-(t&Et))/St}var Tt=1,Ft=2,Nt=4,Bt=8,It=function(){function t(e,n,r){(0,w.Z)(this,t),this.pos=e,this.delInfo=n,this.recover=r}return(0,D.Z)(t,[{key:"deleted",get:function(){return(this.delInfo&Bt)>0}},{key:"deletedBefore",get:function(){return(this.delInfo&(Tt|Nt))>0}},{key:"deletedAfter",get:function(){return(this.delInfo&(Ft|Nt))>0}},{key:"deletedAcross",get:function(){return(this.delInfo&Nt)>0}}]),t}(),Lt=function(){function t(e){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if((0,w.Z)(this,t),this.ranges=e,this.inverted=n,!e.length&&t.empty)return t.empty}return(0,D.Z)(t,[{key:"recover",value:function(t){var e=0,n=Mt(t);if(!this.inverted)for(var r=0;r<n;r++)e+=this.ranges[3*r+2]-this.ranges[3*r+1];return this.ranges[3*n]+e+Ot(t)}},{key:"mapResult",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return this._map(t,e,!1)}},{key:"map",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return this._map(t,e,!0)}},{key:"_map",value:function(t,e,n){for(var r=0,i=this.inverted?2:1,o=this.inverted?1:2,s=0;s<this.ranges.length;s+=3){var a=this.ranges[s]-(this.inverted?r:0);if(a>t)break;var u=this.ranges[s+i],c=this.ranges[s+o],l=a+u;if(t<=l){var h=u?t==a?-1:t==l?1:e:e,d=a+r+(h<0?0:c);if(n)return d;var f=t==(e<0?a:l)?null:_t(s/3,t-a),p=t==a?Ft:t==l?Tt:Nt;return(e<0?t!=a:t!=l)&&(p|=Bt),new It(d,p,f)}r+=c-u}return n?t+r:new It(t+r,0,null)}},{key:"touches",value:function(t,e){for(var n=0,r=Mt(e),i=this.inverted?2:1,o=this.inverted?1:2,s=0;s<this.ranges.length;s+=3){var a=this.ranges[s]-(this.inverted?n:0);if(a>t)break;var u=this.ranges[s+i],c=a+u;if(t<=c&&s==3*r)return!0;n+=this.ranges[s+o]-u}return!1}},{key:"forEach",value:function(t){for(var e=this.inverted?2:1,n=this.inverted?1:2,r=0,i=0;r<this.ranges.length;r+=3){var o=this.ranges[r],s=o-(this.inverted?i:0),a=o+(this.inverted?0:i),u=this.ranges[r+e],c=this.ranges[r+n];t(s,s+u,a,a+c),i+=c-u}}},{key:"invert",value:function(){return new t(this.ranges,!this.inverted)}},{key:"toString",value:function(){return(this.inverted?"-":"")+JSON.stringify(this.ranges)}}],[{key:"offset",value:function(e){return 0==e?t.empty:new t(e<0?[0,-e,0]:[0,0,e])}}]),t}();Lt.empty=new Lt([]);var Rt=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=arguments.length>1?arguments[1]:void 0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:e.length;(0,w.Z)(this,t),this.maps=e,this.mirror=n,this.from=r,this.to=i}return(0,D.Z)(t,[{key:"slice",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.maps.length;return new t(this.maps,this.mirror,e,n)}},{key:"copy",value:function(){return new t(this.maps.slice(),this.mirror&&this.mirror.slice(),this.from,this.to)}},{key:"appendMap",value:function(t,e){this.to=this.maps.push(t),null!=e&&this.setMirror(this.maps.length-1,e)}},{key:"appendMapping",value:function(t){for(var e=0,n=this.maps.length;e<t.maps.length;e++){var r=t.getMirror(e);this.appendMap(t.maps[e],null!=r&&r<e?n+r:void 0)}}},{key:"getMirror",value:function(t){if(this.mirror)for(var e=0;e<this.mirror.length;e++)if(this.mirror[e]==t)return this.mirror[e+(e%2?-1:1)]}},{key:"setMirror",value:function(t,e){this.mirror||(this.mirror=[]),this.mirror.push(t,e)}},{key:"appendMappingInverted",value:function(t){for(var e=t.maps.length-1,n=this.maps.length+t.maps.length;e>=0;e--){var r=t.getMirror(e);this.appendMap(t.maps[e].invert(),null!=r&&r>e?n-r-1:void 0)}}},{key:"invert",value:function(){var e=new t;return e.appendMappingInverted(this),e}},{key:"map",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;if(this.mirror)return this._map(t,e,!0);for(var n=this.from;n<this.to;n++)t=this.maps[n].map(t,e);return t}},{key:"mapResult",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return this._map(t,e,!1)}},{key:"_map",value:function(t,e,n){for(var r=0,i=this.from;i<this.to;i++){var o=this.maps[i],s=o.mapResult(t,e);if(null!=s.recover){var a=this.getMirror(i);if(null!=a&&a>i&&a<this.to){i=a,t=this.maps[a].recover(s.recover);continue}}r|=s.delInfo,t=s.pos}return n?t:new It(t,r,null)}}]),t}(),zt=Object.create(null),Pt=function(){function t(){(0,w.Z)(this,t)}return(0,D.Z)(t,[{key:"getMap",value:function(){return Lt.empty}},{key:"merge",value:function(t){return null}}],[{key:"fromJSON",value:function(t,e){if(!e||!e.stepType)throw new RangeError("Invalid input for Step.fromJSON");var n=zt[e.stepType];if(!n)throw new RangeError("No step type ".concat(e.stepType," defined"));return n.fromJSON(t,e)}},{key:"jsonID",value:function(t,e){if(t in zt)throw new RangeError("Duplicate use of step JSON ID "+t);return zt[t]=e,e.prototype.jsonID=t,e}}]),t}(),Zt=function(){function t(e,n){(0,w.Z)(this,t),this.doc=e,this.failed=n}return(0,D.Z)(t,null,[{key:"ok",value:function(e){return new t(e,null)}},{key:"fail",value:function(e){return new t(null,e)}},{key:"fromReplace",value:function(e,n,r,i){try{return t.ok(e.replace(n,r,i))}catch(o){if(o instanceof I)return t.fail(o.message);throw o}}}]),t}();function qt(t,e,n){for(var r=[],i=0;i<t.childCount;i++){var o=t.child(i);o.content.size&&(o=o.copy(qt(o.content,e,o))),o.isInline&&(o=e(o,n,i)),r.push(o)}return O.fromArray(r)}var jt=function(t){(0,g.Z)(n,t);var e=(0,y.Z)(n);function n(t,r,i){var o;return(0,w.Z)(this,n),o=e.call(this),o.from=t,o.to=r,o.mark=i,o}return(0,D.Z)(n,[{key:"apply",value:function(t){var e=this,n=t.slice(this.from,this.to),r=t.resolve(this.from),i=r.node(r.sharedDepth(this.to)),o=new L(qt(n.content,(function(t,n){return t.isAtom&&n.type.allowsMarkType(e.mark.type)?t.mark(e.mark.addToSet(t.marks)):t}),i),n.openStart,n.openEnd);return Zt.fromReplace(t,this.from,this.to,o)}},{key:"invert",value:function(){return new $t(this.from,this.to,this.mark)}},{key:"map",value:function(t){var e=t.mapResult(this.from,1),r=t.mapResult(this.to,-1);return e.deleted&&r.deleted||e.pos>=r.pos?null:new n(e.pos,r.pos,this.mark)}},{key:"merge",value:function(t){return t instanceof n&&t.mark.eq(this.mark)&&this.from<=t.to&&this.to>=t.from?new n(Math.min(this.from,t.from),Math.max(this.to,t.to),this.mark):null}},{key:"toJSON",value:function(){return{stepType:"addMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}}],[{key:"fromJSON",value:function(t,e){if("number"!=typeof e.from||"number"!=typeof e.to)throw new RangeError("Invalid input for AddMarkStep.fromJSON");return new n(e.from,e.to,t.markFromJSON(e.mark))}}]),n}(Pt);Pt.jsonID("addMark",jt);var $t=function(t){(0,g.Z)(n,t);var e=(0,y.Z)(n);function n(t,r,i){var o;return(0,w.Z)(this,n),o=e.call(this),o.from=t,o.to=r,o.mark=i,o}return(0,D.Z)(n,[{key:"apply",value:function(t){var e=this,n=t.slice(this.from,this.to),r=new L(qt(n.content,(function(t){return t.mark(e.mark.removeFromSet(t.marks))}),t),n.openStart,n.openEnd);return Zt.fromReplace(t,this.from,this.to,r)}},{key:"invert",value:function(){return new jt(this.from,this.to,this.mark)}},{key:"map",value:function(t){var e=t.mapResult(this.from,1),r=t.mapResult(this.to,-1);return e.deleted&&r.deleted||e.pos>=r.pos?null:new n(e.pos,r.pos,this.mark)}},{key:"merge",value:function(t){return t instanceof n&&t.mark.eq(this.mark)&&this.from<=t.to&&this.to>=t.from?new n(Math.min(this.from,t.from),Math.max(this.to,t.to),this.mark):null}},{key:"toJSON",value:function(){return{stepType:"removeMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}}],[{key:"fromJSON",value:function(t,e){if("number"!=typeof e.from||"number"!=typeof e.to)throw new RangeError("Invalid input for RemoveMarkStep.fromJSON");return new n(e.from,e.to,t.markFromJSON(e.mark))}}]),n}(Pt);Pt.jsonID("removeMark",$t);var Vt=function(t){(0,g.Z)(n,t);var e=(0,y.Z)(n);function n(t,r){var i;return(0,w.Z)(this,n),i=e.call(this),i.pos=t,i.mark=r,i}return(0,D.Z)(n,[{key:"apply",value:function(t){var e=t.nodeAt(this.pos);if(!e)return Zt.fail("No node at mark step's position");var n=e.type.create(e.attrs,null,this.mark.addToSet(e.marks));return Zt.fromReplace(t,this.pos,this.pos+1,new L(O.from(n),0,e.isLeaf?0:1))}},{key:"invert",value:function(t){var e=t.nodeAt(this.pos);if(e){var r=this.mark.addToSet(e.marks);if(r.length==e.marks.length){for(var i=0;i<e.marks.length;i++)if(!e.marks[i].isInSet(r))return new n(this.pos,e.marks[i]);return new n(this.pos,this.mark)}}return new Ht(this.pos,this.mark)}},{key:"map",value:function(t){var e=t.mapResult(this.pos,1);return e.deletedAfter?null:new n(e.pos,this.mark)}},{key:"toJSON",value:function(){return{stepType:"addNodeMark",pos:this.pos,mark:this.mark.toJSON()}}}],[{key:"fromJSON",value:function(t,e){if("number"!=typeof e.pos)throw new RangeError("Invalid input for AddNodeMarkStep.fromJSON");return new n(e.pos,t.markFromJSON(e.mark))}}]),n}(Pt);Pt.jsonID("addNodeMark",Vt);var Ht=function(t){(0,g.Z)(n,t);var e=(0,y.Z)(n);function n(t,r){var i;return(0,w.Z)(this,n),i=e.call(this),i.pos=t,i.mark=r,i}return(0,D.Z)(n,[{key:"apply",value:function(t){var e=t.nodeAt(this.pos);if(!e)return Zt.fail("No node at mark step's position");var n=e.type.create(e.attrs,null,this.mark.removeFromSet(e.marks));return Zt.fromReplace(t,this.pos,this.pos+1,new L(O.from(n),0,e.isLeaf?0:1))}},{key:"invert",value:function(t){var e=t.nodeAt(this.pos);return e&&this.mark.isInSet(e.marks)?new Vt(this.pos,this.mark):this}},{key:"map",value:function(t){var e=t.mapResult(this.pos,1);return e.deletedAfter?null:new n(e.pos,this.mark)}},{key:"toJSON",value:function(){return{stepType:"removeNodeMark",pos:this.pos,mark:this.mark.toJSON()}}}],[{key:"fromJSON",value:function(t,e){if("number"!=typeof e.pos)throw new RangeError("Invalid input for RemoveNodeMarkStep.fromJSON");return new n(e.pos,t.markFromJSON(e.mark))}}]),n}(Pt);Pt.jsonID("removeNodeMark",Ht);var Jt=function(t){(0,g.Z)(n,t);var e=(0,y.Z)(n);function n(t,r,i){var o,s=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return(0,w.Z)(this,n),o=e.call(this),o.from=t,o.to=r,o.slice=i,o.structure=s,o}return(0,D.Z)(n,[{key:"apply",value:function(t){return this.structure&&Wt(t,this.from,this.to)?Zt.fail("Structure replace would overwrite content"):Zt.fromReplace(t,this.from,this.to,this.slice)}},{key:"getMap",value:function(){return new Lt([this.from,this.to-this.from,this.slice.size])}},{key:"invert",value:function(t){return new n(this.from,this.from+this.slice.size,t.slice(this.from,this.to))}},{key:"map",value:function(t){var e=t.mapResult(this.from,1),r=t.mapResult(this.to,-1);return e.deletedAcross&&r.deletedAcross?null:new n(e.pos,Math.max(e.pos,r.pos),this.slice)}},{key:"merge",value:function(t){if(!(t instanceof n)||t.structure||this.structure)return null;if(this.from+this.slice.size!=t.from||this.slice.openEnd||t.slice.openStart){if(t.to!=this.from||this.slice.openStart||t.slice.openEnd)return null;var e=this.slice.size+t.slice.size==0?L.empty:new L(t.slice.content.append(this.slice.content),t.slice.openStart,this.slice.openEnd);return new n(t.from,this.to,e,this.structure)}var r=this.slice.size+t.slice.size==0?L.empty:new L(this.slice.content.append(t.slice.content),this.slice.openStart,t.slice.openEnd);return new n(this.from,this.to+(t.to-t.from),r,this.structure)}},{key:"toJSON",value:function(){var t={stepType:"replace",from:this.from,to:this.to};return this.slice.size&&(t.slice=this.slice.toJSON()),this.structure&&(t.structure=!0),t}}],[{key:"fromJSON",value:function(t,e){if("number"!=typeof e.from||"number"!=typeof e.to)throw new RangeError("Invalid input for ReplaceStep.fromJSON");return new n(e.from,e.to,L.fromJSON(t,e.slice),!!e.structure)}}]),n}(Pt);Pt.jsonID("replace",Jt);var Kt=function(t){(0,g.Z)(n,t);var e=(0,y.Z)(n);function n(t,r,i,o,s,a){var u,c=arguments.length>6&&void 0!==arguments[6]&&arguments[6];return(0,w.Z)(this,n),u=e.call(this),u.from=t,u.to=r,u.gapFrom=i,u.gapTo=o,u.slice=s,u.insert=a,u.structure=c,u}return(0,D.Z)(n,[{key:"apply",value:function(t){if(this.structure&&(Wt(t,this.from,this.gapFrom)||Wt(t,this.gapTo,this.to)))return Zt.fail("Structure gap-replace would overwrite content");var e=t.slice(this.gapFrom,this.gapTo);if(e.openStart||e.openEnd)return Zt.fail("Gap is not a flat range");var n=this.slice.insertAt(this.insert,e.content);return n?Zt.fromReplace(t,this.from,this.to,n):Zt.fail("Content does not fit in gap")}},{key:"getMap",value:function(){return new Lt([this.from,this.gapFrom-this.from,this.insert,this.gapTo,this.to-this.gapTo,this.slice.size-this.insert])}},{key:"invert",value:function(t){var e=this.gapTo-this.gapFrom;return new n(this.from,this.from+this.slice.size+e,this.from+this.insert,this.from+this.insert+e,t.slice(this.from,this.to).removeBetween(this.gapFrom-this.from,this.gapTo-this.from),this.gapFrom-this.from,this.structure)}},{key:"map",value:function(t){var e=t.mapResult(this.from,1),r=t.mapResult(this.to,-1),i=t.map(this.gapFrom,-1),o=t.map(this.gapTo,1);return e.deletedAcross&&r.deletedAcross||i<e.pos||o>r.pos?null:new n(e.pos,r.pos,i,o,this.slice,this.insert,this.structure)}},{key:"toJSON",value:function(){var t={stepType:"replaceAround",from:this.from,to:this.to,gapFrom:this.gapFrom,gapTo:this.gapTo,insert:this.insert};return this.slice.size&&(t.slice=this.slice.toJSON()),this.structure&&(t.structure=!0),t}}],[{key:"fromJSON",value:function(t,e){if("number"!=typeof e.from||"number"!=typeof e.to||"number"!=typeof e.gapFrom||"number"!=typeof e.gapTo||"number"!=typeof e.insert)throw new RangeError("Invalid input for ReplaceAroundStep.fromJSON");return new n(e.from,e.to,e.gapFrom,e.gapTo,L.fromJSON(t,e.slice),e.insert,!!e.structure)}}]),n}(Pt);function Wt(t,e,n){var r=t.resolve(e),i=n-e,o=r.depth;while(i>0&&o>0&&r.indexAfter(o)==r.node(o).childCount)o--,i--;if(i>0){var s=r.node(o).maybeChild(r.indexAfter(o));while(i>0){if(!s||s.isLeaf)return!0;s=s.firstChild,i--}}return!1}function Ut(t,e,n,r){var i,o,s=[],a=[];t.doc.nodesBetween(e,n,(function(t,u,c){if(t.isInline){var l=t.marks;if(!r.isInSet(l)&&c.type.allowsMarkType(r.type)){for(var h=Math.max(u,e),d=Math.min(u+t.nodeSize,n),f=r.addToSet(l),p=0;p<l.length;p++)l[p].isInSet(f)||(i&&i.to==h&&i.mark.eq(l[p])?i.to=d:s.push(i=new $t(h,d,l[p])));o&&o.to==h?o.to=d:a.push(o=new jt(h,d,r))}}})),s.forEach((function(e){return t.step(e)})),a.forEach((function(e){return t.step(e)}))}function Gt(t,e,n,r){var i=[],o=0;t.doc.nodesBetween(e,n,(function(t,s){if(t.isInline){o++;var a=null;if(r instanceof xt){var u,c=t.marks;while(u=r.isInSet(c))(a||(a=[])).push(u),c=u.removeFromSet(c)}else r?r.isInSet(t.marks)&&(a=[r]):a=t.marks;if(a&&a.length)for(var l=Math.min(s+t.nodeSize,n),h=0;h<a.length;h++){for(var d=a[h],f=void 0,p=0;p<i.length;p++){var v=i[p];v.step==o-1&&d.eq(i[p].style)&&(f=v)}f?(f.to=l,f.step=o):i.push({style:d,from:Math.max(s,e),to:l,step:o})}}})),i.forEach((function(e){return t.step(new $t(e.from,e.to,e.style))}))}function Yt(t,e,n){for(var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:n.contentMatch,i=t.doc.nodeAt(e),o=[],s=e+1,a=0;a<i.childCount;a++){var u=i.child(a),c=s+u.nodeSize,l=r.matchType(u.type);if(l){r=l;for(var h=0;h<u.marks.length;h++)n.allowsMarkType(u.marks[h].type)||t.step(new $t(s,c,u.marks[h]))}else o.push(new Jt(s,c,L.empty));s=c}if(!r.validEnd){var d=r.fillBefore(O.empty,!0);t.replace(s,s,new L(d,0,0))}for(var f=o.length-1;f>=0;f--)t.step(o[f])}function Qt(t,e,n){return(0==e||t.canReplace(e,t.childCount))&&(n==t.childCount||t.canReplace(0,n))}function Xt(t){for(var e=t.parent,n=e.content.cutByIndex(t.startIndex,t.endIndex),r=t.depth;;--r){var i=t.$from.node(r),o=t.$from.index(r),s=t.$to.indexAfter(r);if(r<t.depth&&i.canReplace(o,s,n))return r;if(0==r||i.type.spec.isolating||!Qt(i,o,s))break}return null}function te(t,e,n){for(var r=e.$from,i=e.$to,o=e.depth,s=r.before(o+1),a=i.after(o+1),u=s,c=a,l=O.empty,h=0,d=o,f=!1;d>n;d--)f||r.index(d)>0?(f=!0,l=O.from(r.node(d).copy(l)),h++):u--;for(var p=O.empty,v=0,m=o,g=!1;m>n;m--)g||i.after(m+1)<i.end(m)?(g=!0,p=O.from(i.node(m).copy(p)),v++):c++;t.step(new Kt(u,c,s,a,new L(l.append(p),h,v),l.size-h,!0))}function ee(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:t,i=re(t,e),o=i&&ie(r,e);return o?i.map(ne).concat({type:e,attrs:n}).concat(o.map(ne)):null}function ne(t){return{type:t,attrs:null}}function re(t,e){var n=t.parent,r=t.startIndex,i=t.endIndex,o=n.contentMatchAt(r).findWrapping(e);if(!o)return null;var s=o.length?o[0]:e;return n.canReplaceWith(r,i,s)?o:null}function ie(t,e){var n=t.parent,r=t.startIndex,i=t.endIndex,o=n.child(r),s=e.contentMatch.findWrapping(o.type);if(!s)return null;for(var a=s.length?s[s.length-1]:e,u=a.contentMatch,c=r;u&&c<i;c++)u=u.matchType(n.child(c).type);return u&&u.validEnd?s:null}function oe(t,e,n){for(var r=O.empty,i=n.length-1;i>=0;i--){if(r.size){var o=n[i].type.contentMatch.matchFragment(r);if(!o||!o.validEnd)throw new RangeError("Wrapper type given to Transform.wrap does not form valid content of its parent wrapper")}r=O.from(n[i].type.create(n[i].attrs,r))}var s=e.start,a=e.end;t.step(new Kt(s,a,s,a,new L(r,0,0),n.length,!0))}function se(t,e,n,r,i){if(!r.isTextblock)throw new RangeError("Type given to setBlockType should be a textblock");var o=t.steps.length;t.doc.nodesBetween(e,n,(function(e,n){if(e.isTextblock&&!e.hasMarkup(r,i)&&ae(t.doc,t.mapping.slice(o).map(n),r)){t.clearIncompatible(t.mapping.slice(o).map(n,1),r);var s=t.mapping.slice(o),a=s.map(n,1),u=s.map(n+e.nodeSize,1);return t.step(new Kt(a,u,a+1,u-1,new L(O.from(r.create(i,null,e.marks)),0,0),1,!0)),!1}}))}function ae(t,e,n){var r=t.resolve(e),i=r.index();return r.parent.canReplaceWith(i,i+1,n)}function ue(t,e,n,r,i){var o=t.doc.nodeAt(e);if(!o)throw new RangeError("No node at given position");n||(n=o.type);var s=n.create(r,null,i||o.marks);if(o.isLeaf)return t.replaceWith(e,e+o.nodeSize,s);if(!n.validContent(o.content))throw new RangeError("Invalid content for node type "+n.name);t.step(new Kt(e,e+o.nodeSize,e+1,e+o.nodeSize-1,new L(O.from(s),0,0),1,!0))}function ce(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3?arguments[3]:void 0,i=t.resolve(e),o=i.depth-n,s=r&&r[r.length-1]||i.parent;if(o<0||i.parent.type.spec.isolating||!i.parent.canReplace(i.index(),i.parent.childCount)||!s.type.validContent(i.parent.content.cutByIndex(i.index(),i.parent.childCount)))return!1;for(var a=i.depth-1,u=n-2;a>o;a--,u--){var c=i.node(a),l=i.index(a);if(c.type.spec.isolating)return!1;var h=c.content.cutByIndex(l,c.childCount),d=r&&r[u+1];d&&(h=h.replaceChild(0,d.type.create(d.attrs)));var f=r&&r[u]||c;if(!c.canReplace(l+1,c.childCount)||!f.type.validContent(h))return!1}var p=i.indexAfter(o),v=r&&r[0];return i.node(o).canReplaceWith(p,p,v?v.type:i.node(o+1).type)}function le(t,e){for(var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3?arguments[3]:void 0,i=t.doc.resolve(e),o=O.empty,s=O.empty,a=i.depth,u=i.depth-n,c=n-1;a>u;a--,c--){o=O.from(i.node(a).copy(o));var l=r&&r[c];s=O.from(l?l.type.create(l.attrs,s):i.node(a).copy(s))}t.step(new Jt(e,e,new L(o.append(s),n,n),!0))}function he(t,e){var n=t.resolve(e),r=n.index();return de(n.nodeBefore,n.nodeAfter)&&n.parent.canReplace(r,r+1)}function de(t,e){return!(!t||!e||t.isLeaf||!t.canAppend(e))}function fe(t,e){for(var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:-1,r=t.resolve(e),i=r.depth;;i--){var o=void 0,s=void 0,a=r.index(i);if(i==r.depth?(o=r.nodeBefore,s=r.nodeAfter):n>0?(o=r.node(i+1),a++,s=r.node(i).maybeChild(a)):(o=r.node(i).maybeChild(a-1),s=r.node(i+1)),o&&!o.isTextblock&&de(o,s)&&r.node(i).canReplace(a,a+1))return e;if(0==i)break;e=n<0?r.before(i):r.after(i)}}function pe(t,e,n){var r=new Jt(e-n,e+n,L.empty,!0);t.step(r)}function ve(t,e,n){var r=t.resolve(e);if(r.parent.canReplaceWith(r.index(),r.index(),n))return e;if(0==r.parentOffset)for(var i=r.depth-1;i>=0;i--){var o=r.index(i);if(r.node(i).canReplaceWith(o,o,n))return r.before(i+1);if(o>0)return null}if(r.parentOffset==r.parent.content.size)for(var s=r.depth-1;s>=0;s--){var a=r.indexAfter(s);if(r.node(s).canReplaceWith(a,a,n))return r.after(s+1);if(a<r.node(s).childCount)return null}return null}function me(t,e,n){var r=t.resolve(e);if(!n.content.size)return e;for(var i=n.content,o=0;o<n.openStart;o++)i=i.firstChild.content;for(var s=1;s<=(0==n.openStart&&n.size?2:1);s++)for(var a=r.depth;a>=0;a--){var u=a==r.depth?0:r.pos<=(r.start(a+1)+r.end(a+1))/2?-1:1,c=r.index(a)+(u>0?1:0),l=r.node(a),h=!1;if(1==s)h=l.canReplace(c,c,i);else{var d=l.contentMatchAt(c).findWrapping(i.firstChild.type);h=d&&l.canReplaceWith(c,c,d[0])}if(h)return 0==u?r.pos:u<0?r.before(a+1):r.after(a+1)}return null}function ge(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:L.empty;if(e==n&&!r.size)return null;var i=t.resolve(e),o=t.resolve(n);return ye(i,o,r)?new Jt(e,n,r):new ke(i,o,r).fit()}function ye(t,e,n){return!n.openStart&&!n.openEnd&&t.start()==e.start()&&t.parent.canReplace(t.index(),e.index(),n.content)}Pt.jsonID("replaceAround",Kt);var ke=function(){function t(e,n,r){(0,w.Z)(this,t),this.$from=e,this.$to=n,this.unplaced=r,this.frontier=[],this.placed=O.empty;for(var i=0;i<=e.depth;i++){var o=e.node(i);this.frontier.push({type:o.type,match:o.contentMatchAt(e.indexAfter(i))})}for(var s=e.depth;s>0;s--)this.placed=O.from(e.node(s).copy(this.placed))}return(0,D.Z)(t,[{key:"depth",get:function(){return this.frontier.length-1}},{key:"fit",value:function(){while(this.unplaced.size){var t=this.findFittable();t?this.placeNodes(t):this.openMore()||this.dropNode()}var e=this.mustMoveInline(),n=this.placed.size-this.depth-this.$from.depth,r=this.$from,i=this.close(e<0?this.$to:r.doc.resolve(e));if(!i)return null;var o=this.placed,s=r.depth,a=i.depth;while(s&&a&&1==o.childCount)o=o.firstChild.content,s--,a--;var u=new L(o,s,a);return e>-1?new Kt(r.pos,e,this.$to.pos,this.$to.end(),u,n):u.size||r.pos!=this.$to.pos?new Jt(r.pos,i.pos,u):null}},{key:"findFittable",value:function(){for(var t=this.unplaced.openStart,e=this.unplaced.content,n=0,r=this.unplaced.openEnd;n<t;n++){var i=e.firstChild;if(e.childCount>1&&(r=0),i.type.spec.isolating&&r<=n){t=n;break}e=i.content}for(var o=1;o<=2;o++)for(var s=1==o?t:this.unplaced.openStart;s>=0;s--){var a=void 0,u=null;s?(u=De(this.unplaced.content,s-1).firstChild,a=u.content):a=this.unplaced.content;for(var c=a.firstChild,l=this.depth;l>=0;l--){var h=this.frontier[l],d=h.type,f=h.match,p=void 0,v=null;if(1==o&&(c?f.matchType(c.type)||(v=f.fillBefore(O.from(c),!1)):u&&d.compatibleContent(u.type)))return{sliceDepth:s,frontierDepth:l,parent:u,inject:v};if(2==o&&c&&(p=f.findWrapping(c.type)))return{sliceDepth:s,frontierDepth:l,parent:u,wrap:p};if(u&&f.matchType(u.type))break}}}},{key:"openMore",value:function(){var t=this.unplaced,e=t.content,n=t.openStart,r=t.openEnd,i=De(e,n);return!(!i.childCount||i.firstChild.isLeaf)&&(this.unplaced=new L(e,n+1,Math.max(r,i.size+n>=e.size-r?n+1:0)),!0)}},{key:"dropNode",value:function(){var t=this.unplaced,e=t.content,n=t.openStart,r=t.openEnd,i=De(e,n);if(i.childCount<=1&&n>0){var o=e.size-n<=n+i.size;this.unplaced=new L(be(e,n-1,1),n-1,o?n-1:r)}else this.unplaced=new L(be(e,n,1),n,r)}},{key:"placeNodes",value:function(t){var e=t.sliceDepth,n=t.frontierDepth,r=t.parent,i=t.inject,o=t.wrap;while(this.depth>n)this.closeFrontierNode();if(o)for(var s=0;s<o.length;s++)this.openFrontierNode(o[s]);var a=this.unplaced,u=r?r.content:a.content,c=a.openStart-e,l=0,h=[],d=this.frontier[n],f=d.match,p=d.type;if(i){for(var v=0;v<i.childCount;v++)h.push(i.child(v));f=f.matchFragment(i)}var m=u.size+e-(a.content.size-a.openEnd);while(l<u.childCount){var g=u.child(l),y=f.matchType(g.type);if(!y)break;l++,(l>1||0==c||g.content.size)&&(f=y,h.push(xe(g.mark(p.allowedMarks(g.marks)),1==l?c:0,l==u.childCount?m:-1)))}var k=l==u.childCount;k||(m=-1),this.placed=we(this.placed,n,O.from(h)),this.frontier[n].match=f,k&&m<0&&r&&r.type==this.frontier[this.depth].type&&this.frontier.length>1&&this.closeFrontierNode();for(var b=0,w=u;b<m;b++){var D=w.lastChild;this.frontier.push({type:D.type,match:D.contentMatchAt(D.childCount)}),w=D.content}this.unplaced=k?0==e?L.empty:new L(be(a.content,e-1,1),e-1,m<0?a.openEnd:e-1):new L(be(a.content,e,l),a.openStart,a.openEnd)}},{key:"mustMoveInline",value:function(){if(!this.$to.parent.isTextblock)return-1;var t,e=this.frontier[this.depth];if(!e.type.isTextblock||!Ce(this.$to,this.$to.depth,e.type,e.match,!1)||this.$to.depth==this.depth&&(t=this.findCloseLevel(this.$to))&&t.depth==this.depth)return-1;var n=this.$to.depth,r=this.$to.after(n);while(n>1&&r==this.$to.end(--n))++r;return r}},{key:"findCloseLevel",value:function(t){t:for(var e=Math.min(this.depth,t.depth);e>=0;e--){var n=this.frontier[e],r=n.match,i=n.type,o=e<t.depth&&t.end(e+1)==t.pos+(t.depth-(e+1)),s=Ce(t,e,i,r,o);if(s){for(var a=e-1;a>=0;a--){var u=this.frontier[a],c=u.match,l=u.type,h=Ce(t,a,l,c,!0);if(!h||h.childCount)continue t}return{depth:e,fit:s,move:o?t.doc.resolve(t.after(e+1)):t}}}}},{key:"close",value:function(t){var e=this.findCloseLevel(t);if(!e)return null;while(this.depth>e.depth)this.closeFrontierNode();e.fit.childCount&&(this.placed=we(this.placed,e.depth,e.fit)),t=e.move;for(var n=e.depth+1;n<=t.depth;n++){var r=t.node(n),i=r.type.contentMatch.fillBefore(r.content,!0,t.index(n));this.openFrontierNode(r.type,r.attrs,i)}return t}},{key:"openFrontierNode",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2?arguments[2]:void 0,r=this.frontier[this.depth];r.match=r.match.matchType(t),this.placed=we(this.placed,this.depth,O.from(t.create(e,n))),this.frontier.push({type:t,match:t.contentMatch})}},{key:"closeFrontierNode",value:function(){var t=this.frontier.pop(),e=t.match.fillBefore(O.empty,!0);e.childCount&&(this.placed=we(this.placed,this.frontier.length,e))}}]),t}();function be(t,e,n){return 0==e?t.cutByIndex(n,t.childCount):t.replaceChild(0,t.firstChild.copy(be(t.firstChild.content,e-1,n)))}function we(t,e,n){return 0==e?t.append(n):t.replaceChild(t.childCount-1,t.lastChild.copy(we(t.lastChild.content,e-1,n)))}function De(t,e){for(var n=0;n<e;n++)t=t.firstChild.content;return t}function xe(t,e,n){if(e<=0)return t;var r=t.content;return e>1&&(r=r.replaceChild(0,xe(r.firstChild,e-1,1==r.childCount?n-1:0))),e>0&&(r=t.type.contentMatch.fillBefore(r).append(r),n<=0&&(r=r.append(t.type.contentMatch.matchFragment(r).fillBefore(O.empty,!0)))),t.copy(r)}function Ce(t,e,n,r,i){var o=t.node(e),s=i?t.indexAfter(e):t.index(e);if(s==o.childCount&&!n.compatibleContent(o.type))return null;var a=r.fillBefore(o.content,!0,s);return a&&!Ae(n,o.content,s)?a:null}function Ae(t,e,n){for(var r=n;r<e.childCount;r++)if(!t.allowsMarks(e.child(r).marks))return!0;return!1}function Ee(t){return t.spec.defining||t.spec.definingForContent}function Se(t,e,n,r){if(!r.size)return t.deleteRange(e,n);var i=t.doc.resolve(e),o=t.doc.resolve(n);if(ye(i,o,r))return t.step(new Jt(e,n,r));var s=Te(i,t.doc.resolve(n));0==s[s.length-1]&&s.pop();var a=-(i.depth+1);s.unshift(a);for(var u=i.depth,c=i.pos-1;u>0;u--,c--){var l=i.node(u).type.spec;if(l.defining||l.definingAsContext||l.isolating)break;s.indexOf(u)>-1?a=u:i.before(u)==c&&s.splice(1,0,-u)}for(var h=s.indexOf(a),d=[],f=r.openStart,p=r.content,v=0;;v++){var m=p.firstChild;if(d.push(m),v==r.openStart)break;p=m.content}for(var g=f-1;g>=0;g--){var y=d[g].type,k=Ee(y);if(k&&i.node(h).type!=y)f=g;else if(k||!y.isTextblock)break}for(var b=r.openStart;b>=0;b--){var w=(b+f+1)%(r.openStart+1),D=d[w];if(D)for(var x=0;x<s.length;x++){var C=s[(x+h)%s.length],A=!0;C<0&&(A=!1,C=-C);var E=i.node(C-1),S=i.index(C-1);if(E.canReplaceWith(S,S,D.type,D.marks))return t.replace(i.before(C),A?o.after(C):n,new L(_e(r.content,0,r.openStart,w),w,r.openEnd))}}for(var _=t.steps.length,M=s.length-1;M>=0;M--){if(t.replace(e,n,r),t.steps.length>_)break;var O=s[M];O<0||(e=i.before(O),n=o.after(O))}}function _e(t,e,n,r,i){if(e<n){var o=t.firstChild;t=t.replaceChild(0,o.copy(_e(o.content,e+1,n,r,o)))}if(e>r){var s=i.contentMatchAt(0),a=s.fillBefore(t).append(t);t=a.append(s.matchFragment(a).fillBefore(O.empty,!0))}return t}function Me(t,e,n,r){if(!r.isInline&&e==n&&t.doc.resolve(e).parent.content.size){var i=ve(t.doc,e,r.type);null!=i&&(e=n=i)}t.replaceRange(e,n,new L(O.from(r),0,0))}function Oe(t,e,n){for(var r=t.doc.resolve(e),i=t.doc.resolve(n),o=Te(r,i),s=0;s<o.length;s++){var a=o[s],u=s==o.length-1;if(u&&0==a||r.node(a).type.contentMatch.validEnd)return t.delete(r.start(a),i.end(a));if(a>0&&(u||r.node(a-1).canReplace(r.index(a-1),i.indexAfter(a-1))))return t.delete(r.before(a),i.after(a))}for(var c=1;c<=r.depth&&c<=i.depth;c++)if(e-r.start(c)==r.depth-c&&n>r.end(c)&&i.end(c)-n!=i.depth-c)return t.delete(r.before(c),n);t.delete(e,n)}function Te(t,e){for(var n=[],r=Math.min(t.depth,e.depth),i=r;i>=0;i--){var o=t.start(i);if(o<t.pos-(t.depth-i)||e.end(i)>e.pos+(e.depth-i)||t.node(i).type.spec.isolating||e.node(i).type.spec.isolating)break;(o==e.start(i)||i==t.depth&&i==e.depth&&t.parent.inlineContent&&e.parent.inlineContent&&i&&e.start(i-1)==o-1)&&n.push(i)}return n}var Fe=function(t){(0,g.Z)(n,t);var e=(0,y.Z)(n);function n(t,r,i){var o;return(0,w.Z)(this,n),o=e.call(this),o.pos=t,o.attr=r,o.value=i,o}return(0,D.Z)(n,[{key:"apply",value:function(t){var e=t.nodeAt(this.pos);if(!e)return Zt.fail("No node at attribute step's position");var n=Object.create(null);for(var r in e.attrs)n[r]=e.attrs[r];n[this.attr]=this.value;var i=e.type.create(n,null,e.marks);return Zt.fromReplace(t,this.pos,this.pos+1,new L(O.from(i),0,e.isLeaf?0:1))}},{key:"getMap",value:function(){return Lt.empty}},{key:"invert",value:function(t){return new n(this.pos,this.attr,t.nodeAt(this.pos).attrs[this.attr])}},{key:"map",value:function(t){var e=t.mapResult(this.pos,1);return e.deletedAfter?null:new n(e.pos,this.attr,this.value)}},{key:"toJSON",value:function(){return{stepType:"attr",pos:this.pos,attr:this.attr,value:this.value}}}],[{key:"fromJSON",value:function(t,e){if("number"!=typeof e.pos||"string"!=typeof e.attr)throw new RangeError("Invalid input for AttrStep.fromJSON");return new n(e.pos,e.attr,e.value)}}]),n}(Pt);Pt.jsonID("attr",Fe);var Ne=function(t){(0,g.Z)(n,t);var e=(0,y.Z)(n);function n(){return(0,w.Z)(this,n),e.apply(this,arguments)}return(0,D.Z)(n)}((0,k.Z)(Error));Ne=function t(e){var n=Error.call(this,e);return n.__proto__=t.prototype,n},Ne.prototype=Object.create(Error.prototype),Ne.prototype.constructor=Ne,Ne.prototype.name="TransformError";var Be=function(){function t(e){(0,w.Z)(this,t),this.doc=e,this.steps=[],this.docs=[],this.mapping=new Rt}return(0,D.Z)(t,[{key:"before",get:function(){return this.docs.length?this.docs[0]:this.doc}},{key:"step",value:function(t){var e=this.maybeStep(t);if(e.failed)throw new Ne(e.failed);return this}},{key:"maybeStep",value:function(t){var e=t.apply(this.doc);return e.failed||this.addStep(t,e.doc),e}},{key:"docChanged",get:function(){return this.steps.length>0}},{key:"addStep",value:function(t,e){this.docs.push(this.doc),this.steps.push(t),this.mapping.appendMap(t.getMap()),this.doc=e}},{key:"replace",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:t,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:L.empty,r=ge(this.doc,t,e,n);return r&&this.step(r),this}},{key:"replaceWith",value:function(t,e,n){return this.replace(t,e,new L(O.from(n),0,0))}},{key:"delete",value:function(t,e){return this.replace(t,e,L.empty)}},{key:"insert",value:function(t,e){return this.replaceWith(t,t,e)}},{key:"replaceRange",value:function(t,e,n){return Se(this,t,e,n),this}},{key:"replaceRangeWith",value:function(t,e,n){return Me(this,t,e,n),this}},{key:"deleteRange",value:function(t,e){return Oe(this,t,e),this}},{key:"lift",value:function(t,e){return te(this,t,e),this}},{key:"join",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return pe(this,t,e),this}},{key:"wrap",value:function(t,e){return oe(this,t,e),this}},{key:"setBlockType",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:t,n=arguments.length>2?arguments[2]:void 0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;return se(this,t,e,n,r),this}},{key:"setNodeMarkup",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=arguments.length>3?arguments[3]:void 0;return ue(this,t,e,n,r),this}},{key:"setNodeAttribute",value:function(t,e,n){return this.step(new Fe(t,e,n)),this}},{key:"addNodeMark",value:function(t,e){return this.step(new Vt(t,e)),this}},{key:"removeNodeMark",value:function(t,e){if(!(e instanceof B)){var n=this.doc.nodeAt(t);if(!n)throw new RangeError("No node at position "+t);if(e=e.isInSet(n.marks),!e)return this}return this.step(new Ht(t,e)),this}},{key:"split",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2?arguments[2]:void 0;return le(this,t,e,n),this}},{key:"addMark",value:function(t,e,n){return Ut(this,t,e,n),this}},{key:"removeMark",value:function(t,e,n){return Gt(this,t,e,n),this}},{key:"clearIncompatible",value:function(t,e,n){return Yt(this,t,e,n),this}}]),t}(),Ie=Object.create(null),Le=function(){function t(e,n,r){(0,w.Z)(this,t),this.$anchor=e,this.$head=n,this.ranges=r||[new Re(e.min(n),e.max(n))]}return(0,D.Z)(t,[{key:"anchor",get:function(){return this.$anchor.pos}},{key:"head",get:function(){return this.$head.pos}},{key:"from",get:function(){return this.$from.pos}},{key:"to",get:function(){return this.$to.pos}},{key:"$from",get:function(){return this.ranges[0].$from}},{key:"$to",get:function(){return this.ranges[0].$to}},{key:"empty",get:function(){for(var t=this.ranges,e=0;e<t.length;e++)if(t[e].$from.pos!=t[e].$to.pos)return!1;return!0}},{key:"content",value:function(){return this.$from.doc.slice(this.from,this.to,!0)}},{key:"replace",value:function(t){for(var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:L.empty,n=e.content.lastChild,r=null,i=0;i<e.openEnd;i++)r=n,n=n.lastChild;for(var o=t.steps.length,s=this.ranges,a=0;a<s.length;a++){var u=s[a],c=u.$from,l=u.$to,h=t.mapping.slice(o);t.replaceRange(h.map(c.pos),h.map(l.pos),a?L.empty:e),0==a&&Ke(t,o,(n?n.isInline:r&&r.isTextblock)?-1:1)}}},{key:"replaceWith",value:function(t,e){for(var n=t.steps.length,r=this.ranges,i=0;i<r.length;i++){var o=r[i],s=o.$from,a=o.$to,u=t.mapping.slice(n),c=u.map(s.pos),l=u.map(a.pos);i?t.deleteRange(c,l):(t.replaceRangeWith(c,l,e),Ke(t,n,e.isInline?-1:1))}}},{key:"getBookmark",value:function(){return Ze.between(this.$anchor,this.$head).getBookmark()}}],[{key:"findFrom",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=t.parent.inlineContent?new Ze(t):Je(t.node(0),t.parent,t.pos,t.index(),e,n);if(r)return r;for(var i=t.depth-1;i>=0;i--){var o=e<0?Je(t.node(0),t.node(i),t.before(i+1),t.index(i),e,n):Je(t.node(0),t.node(i),t.after(i+1),t.index(i)+1,e,n);if(o)return o}return null}},{key:"near",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return this.findFrom(t,e)||this.findFrom(t,-e)||new Ve(t.node(0))}},{key:"atStart",value:function(t){return Je(t,t,0,0,1)||new Ve(t)}},{key:"atEnd",value:function(t){return Je(t,t,t.content.size,t.childCount,-1)||new Ve(t)}},{key:"fromJSON",value:function(t,e){if(!e||!e.type)throw new RangeError("Invalid input for Selection.fromJSON");var n=Ie[e.type];if(!n)throw new RangeError("No selection type ".concat(e.type," defined"));return n.fromJSON(t,e)}},{key:"jsonID",value:function(t,e){if(t in Ie)throw new RangeError("Duplicate use of selection JSON ID "+t);return Ie[t]=e,e.prototype.jsonID=t,e}}]),t}();Le.prototype.visible=!0;var Re=(0,D.Z)((function t(e,n){(0,w.Z)(this,t),this.$from=e,this.$to=n})),ze=!1;function Pe(t){ze||t.parent.inlineContent||(ze=!0,console["warn"]("TextSelection endpoint not pointing into a node with inline content ("+t.parent.type.name+")"))}var Ze=function(t){(0,g.Z)(n,t);var e=(0,y.Z)(n);function n(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:t;return(0,w.Z)(this,n),Pe(t),Pe(r),e.call(this,t,r)}return(0,D.Z)(n,[{key:"$cursor",get:function(){return this.$anchor.pos==this.$head.pos?this.$head:null}},{key:"map",value:function(t,e){var r=t.resolve(e.map(this.head));if(!r.parent.inlineContent)return Le.near(r);var i=t.resolve(e.map(this.anchor));return new n(i.parent.inlineContent?i:r,r)}},{key:"replace",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:L.empty;if(p((0,d.Z)(n.prototype),"replace",this).call(this,t,e),e==L.empty){var r=this.$from.marksAcross(this.$to);r&&t.ensureMarks(r)}}},{key:"eq",value:function(t){return t instanceof n&&t.anchor==this.anchor&&t.head==this.head}},{key:"getBookmark",value:function(){return new qe(this.anchor,this.head)}},{key:"toJSON",value:function(){return{type:"text",anchor:this.anchor,head:this.head}}}],[{key:"fromJSON",value:function(t,e){if("number"!=typeof e.anchor||"number"!=typeof e.head)throw new RangeError("Invalid input for TextSelection.fromJSON");return new n(t.resolve(e.anchor),t.resolve(e.head))}},{key:"create",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e,r=t.resolve(e);return new this(r,n==e?r:t.resolve(n))}},{key:"between",value:function(t,e,r){var i=t.pos-e.pos;if(r&&!i||(r=i>=0?1:-1),!e.parent.inlineContent){var o=Le.findFrom(e,r,!0)||Le.findFrom(e,-r,!0);if(!o)return Le.near(e,r);e=o.$head}return t.parent.inlineContent||(0==i?t=e:(t=(Le.findFrom(t,-r,!0)||Le.findFrom(t,r,!0)).$anchor,t.pos<e.pos!=i<0&&(t=e))),new n(t,e)}}]),n}(Le);Le.jsonID("text",Ze);var qe=function(){function t(e,n){(0,w.Z)(this,t),this.anchor=e,this.head=n}return(0,D.Z)(t,[{key:"map",value:function(e){return new t(e.map(this.anchor),e.map(this.head))}},{key:"resolve",value:function(t){return Ze.between(t.resolve(this.anchor),t.resolve(this.head))}}]),t}(),je=function(t){(0,g.Z)(n,t);var e=(0,y.Z)(n);function n(t){var r;(0,w.Z)(this,n);var i=t.nodeAfter,o=t.node(0).resolve(t.pos+i.nodeSize);return r=e.call(this,t,o),r.node=i,r}return(0,D.Z)(n,[{key:"map",value:function(t,e){var r=e.mapResult(this.anchor),i=r.deleted,o=r.pos,s=t.resolve(o);return i?Le.near(s):new n(s)}},{key:"content",value:function(){return new L(O.from(this.node),0,0)}},{key:"eq",value:function(t){return t instanceof n&&t.anchor==this.anchor}},{key:"toJSON",value:function(){return{type:"node",anchor:this.anchor}}},{key:"getBookmark",value:function(){return new $e(this.anchor)}}],[{key:"fromJSON",value:function(t,e){if("number"!=typeof e.anchor)throw new RangeError("Invalid input for NodeSelection.fromJSON");return new n(t.resolve(e.anchor))}},{key:"create",value:function(t,e){return new n(t.resolve(e))}},{key:"isSelectable",value:function(t){return!t.isText&&!1!==t.type.spec.selectable}}]),n}(Le);je.prototype.visible=!1,Le.jsonID("node",je);var $e=function(){function t(e){(0,w.Z)(this,t),this.anchor=e}return(0,D.Z)(t,[{key:"map",value:function(e){var n=e.mapResult(this.anchor),r=n.deleted,i=n.pos;return r?new qe(i,i):new t(i)}},{key:"resolve",value:function(t){var e=t.resolve(this.anchor),n=e.nodeAfter;return n&&je.isSelectable(n)?new je(e):Le.near(e)}}]),t}(),Ve=function(t){(0,g.Z)(n,t);var e=(0,y.Z)(n);function n(t){return(0,w.Z)(this,n),e.call(this,t.resolve(0),t.resolve(t.content.size))}return(0,D.Z)(n,[{key:"replace",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:L.empty;if(e==L.empty){t.delete(0,t.doc.content.size);var r=Le.atStart(t.doc);r.eq(t.selection)||t.setSelection(r)}else p((0,d.Z)(n.prototype),"replace",this).call(this,t,e)}},{key:"toJSON",value:function(){return{type:"all"}}},{key:"map",value:function(t){return new n(t)}},{key:"eq",value:function(t){return t instanceof n}},{key:"getBookmark",value:function(){return He}}],[{key:"fromJSON",value:function(t){return new n(t)}}]),n}(Le);Le.jsonID("all",Ve);var He={map:function(){return this},resolve:function(t){return new Ve(t)}};function Je(t,e,n,r,i){var o=arguments.length>5&&void 0!==arguments[5]&&arguments[5];if(e.inlineContent)return Ze.create(t,n);for(var s=r-(i>0?0:1);i>0?s<e.childCount:s>=0;s+=i){var a=e.child(s);if(a.isAtom){if(!o&&je.isSelectable(a))return je.create(t,n-(i<0?a.nodeSize:0))}else{var u=Je(t,a,n+i,i<0?a.childCount:0,i,o);if(u)return u}n+=a.nodeSize*i}return null}function Ke(t,e,n){var r=t.steps.length-1;if(!(r<e)){var i=t.steps[r];if(i instanceof Jt||i instanceof Kt){var o,s=t.mapping.maps[r];s.forEach((function(t,e,n,r){null==o&&(o=r)})),t.setSelection(Le.near(t.doc.resolve(o),n))}}}var We=1,Ue=2,Ge=4,Ye=function(t){(0,g.Z)(n,t);var e=(0,y.Z)(n);function n(t){var r;return(0,w.Z)(this,n),r=e.call(this,t.doc),r.curSelectionFor=0,r.updated=0,r.meta=Object.create(null),r.time=Date.now(),r.curSelection=t.selection,r.storedMarks=t.storedMarks,r}return(0,D.Z)(n,[{key:"selection",get:function(){return this.curSelectionFor<this.steps.length&&(this.curSelection=this.curSelection.map(this.doc,this.mapping.slice(this.curSelectionFor)),this.curSelectionFor=this.steps.length),this.curSelection}},{key:"setSelection",value:function(t){if(t.$from.doc!=this.doc)throw new RangeError("Selection passed to setSelection must point at the current document");return this.curSelection=t,this.curSelectionFor=this.steps.length,this.updated=(this.updated|We)&~Ue,this.storedMarks=null,this}},{key:"selectionSet",get:function(){return(this.updated&We)>0}},{key:"setStoredMarks",value:function(t){return this.storedMarks=t,this.updated|=Ue,this}},{key:"ensureMarks",value:function(t){return B.sameSet(this.storedMarks||this.selection.$from.marks(),t)||this.setStoredMarks(t),this}},{key:"addStoredMark",value:function(t){return this.ensureMarks(t.addToSet(this.storedMarks||this.selection.$head.marks()))}},{key:"removeStoredMark",value:function(t){return this.ensureMarks(t.removeFromSet(this.storedMarks||this.selection.$head.marks()))}},{key:"storedMarksSet",get:function(){return(this.updated&Ue)>0}},{key:"addStep",value:function(t,e){p((0,d.Z)(n.prototype),"addStep",this).call(this,t,e),this.updated=this.updated&~Ue,this.storedMarks=null}},{key:"setTime",value:function(t){return this.time=t,this}},{key:"replaceSelection",value:function(t){return this.selection.replace(this,t),this}},{key:"replaceSelectionWith",value:function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=this.selection;return e&&(t=t.mark(this.storedMarks||(n.empty?n.$from.marks():n.$from.marksAcross(n.$to)||B.none))),n.replaceWith(this,t),this}},{key:"deleteSelection",value:function(){return this.selection.replace(this),this}},{key:"insertText",value:function(t,e,n){var r=this.doc.type.schema;if(null==e)return t?this.replaceSelectionWith(r.text(t),!0):this.deleteSelection();if(null==n&&(n=e),n=null==n?e:n,!t)return this.deleteRange(e,n);var i=this.storedMarks;if(!i){var o=this.doc.resolve(e);i=n==e?o.marks():o.marksAcross(this.doc.resolve(n))}return this.replaceRangeWith(e,n,r.text(t,i)),this.selection.empty||this.setSelection(Le.near(this.selection.$to)),this}},{key:"setMeta",value:function(t,e){return this.meta["string"==typeof t?t:t.key]=e,this}},{key:"getMeta",value:function(t){return this.meta["string"==typeof t?t:t.key]}},{key:"isGeneric",get:function(){for(var t in this.meta)return!1;return!0}},{key:"scrollIntoView",value:function(){return this.updated|=Ge,this}},{key:"scrolledIntoView",get:function(){return(this.updated&Ge)>0}}]),n}(Be);function Qe(t,e){return e&&t?t.bind(e):t}var Xe=(0,D.Z)((function t(e,n,r){(0,w.Z)(this,t),this.name=e,this.init=Qe(n.init,r),this.apply=Qe(n.apply,r)})),tn=[new Xe("doc",{init:function(t){return t.doc||t.schema.topNodeType.createAndFill()},apply:function(t){return t.doc}}),new Xe("selection",{init:function(t,e){return t.selection||Le.atStart(e.doc)},apply:function(t){return t.selection}}),new Xe("storedMarks",{init:function(t){return t.storedMarks||null},apply:function(t,e,n,r){return r.selection.$cursor?t.storedMarks:null}}),new Xe("scrollToSelection",{init:function(){return 0},apply:function(t,e){return t.scrolledIntoView?e+1:e}})],en=(0,D.Z)((function t(e,n){var r=this;(0,w.Z)(this,t),this.schema=e,this.plugins=[],this.pluginsByKey=Object.create(null),this.fields=tn.slice(),n&&n.forEach((function(t){if(r.pluginsByKey[t.key])throw new RangeError("Adding different instances of a keyed plugin ("+t.key+")");r.plugins.push(t),r.pluginsByKey[t.key]=t,t.spec.state&&r.fields.push(new Xe(t.key,t.spec.state,t))}))})),nn=function(){function t(e){(0,w.Z)(this,t),this.config=e}return(0,D.Z)(t,[{key:"schema",get:function(){return this.config.schema}},{key:"plugins",get:function(){return this.config.plugins}},{key:"apply",value:function(t){return this.applyTransaction(t).state}},{key:"filterTransaction",value:function(t){for(var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1,n=0;n<this.config.plugins.length;n++)if(n!=e){var r=this.config.plugins[n];if(r.spec.filterTransaction&&!r.spec.filterTransaction.call(r,t,this))return!1}return!0}},{key:"applyTransaction",value:function(t){if(!this.filterTransaction(t))return{state:this,transactions:[]};for(var e=[t],n=this.applyInner(t),r=null;;){for(var i=!1,o=0;o<this.config.plugins.length;o++){var s=this.config.plugins[o];if(s.spec.appendTransaction){var a=r?r[o].n:0,u=r?r[o].state:this,c=a<e.length&&s.spec.appendTransaction.call(s,a?e.slice(a):e,u,n);if(c&&n.filterTransaction(c,o)){if(c.setMeta("appendedTransaction",t),!r){r=[];for(var l=0;l<this.config.plugins.length;l++)r.push(l<o?{state:n,n:e.length}:{state:this,n:0})}e.push(c),n=n.applyInner(c),i=!0}r&&(r[o]={state:n,n:e.length})}}if(!i)return{state:n,transactions:e}}}},{key:"applyInner",value:function(e){if(!e.before.eq(this.doc))throw new RangeError("Applying a mismatched transaction");for(var n=new t(this.config),r=this.config.fields,i=0;i<r.length;i++){var o=r[i];n[o.name]=o.apply(e,this[o.name],this,n)}return n}},{key:"tr",get:function(){return new Ye(this)}},{key:"reconfigure",value:function(e){for(var n=new en(this.schema,e.plugins),r=n.fields,i=new t(n),o=0;o<r.length;o++){var s=r[o].name;i[s]=this.hasOwnProperty(s)?this[s]:r[o].init(e,i)}return i}},{key:"toJSON",value:function(t){var e={doc:this.doc.toJSON(),selection:this.selection.toJSON()};if(this.storedMarks&&(e.storedMarks=this.storedMarks.map((function(t){return t.toJSON()}))),t&&"object"==(0,b.Z)(t))for(var n in t){if("doc"==n||"selection"==n)throw new RangeError("The JSON fields `doc` and `selection` are reserved");var r=t[n],i=r.spec.state;i&&i.toJSON&&(e[n]=i.toJSON.call(r,this[r.key]))}return e}}],[{key:"create",value:function(e){for(var n=new en(e.doc?e.doc.type.schema:e.schema,e.plugins),r=new t(n),i=0;i<n.fields.length;i++)r[n.fields[i].name]=n.fields[i].init(e,r);return r}},{key:"fromJSON",value:function(e,n,r){if(!n)throw new RangeError("Invalid input for EditorState.fromJSON");if(!e.schema)throw new RangeError("Required config field 'schema' missing");var i=new en(e.schema,e.plugins),o=new t(i);return i.fields.forEach((function(t){if("doc"==t.name)o.doc=et.fromJSON(e.schema,n.doc);else if("selection"==t.name)o.selection=Le.fromJSON(o.doc,n.selection);else if("storedMarks"==t.name)n.storedMarks&&(o.storedMarks=n.storedMarks.map(e.schema.markFromJSON));else{if(r)for(var i in r){var s=r[i],a=s.spec.state;if(s.key==t.name&&a&&a.fromJSON&&Object.prototype.hasOwnProperty.call(n,i))return void(o[t.name]=a.fromJSON.call(s,e,n[i],o))}o[t.name]=t.init(e,o)}})),o}}]),t}();function rn(t,e,n){for(var r in t){var i=t[r];i instanceof Function?i=i.bind(e):"handleDOMEvents"==r&&(i=rn(i,e,{})),n[r]=i}return n}var on=function(){function t(e){(0,w.Z)(this,t),this.spec=e,this.props={},e.props&&rn(e.props,this,this.props),this.key=e.key?e.key.key:an("plugin")}return(0,D.Z)(t,[{key:"getState",value:function(t){return t[this.key]}}]),t}(),sn=Object.create(null);function an(t){return t in sn?t+"$"+ ++sn[t]:(sn[t]=0,t+"$")}var un=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"key";(0,w.Z)(this,t),this.key=an(e)}return(0,D.Z)(t,[{key:"get",value:function(t){return t.config.pluginsByKey[this.key]}},{key:"getState",value:function(t){return t[this.key]}}]),t}();function cn(t,e,n){for(var r=0;;r++){if(r==t.childCount||r==e.childCount)return t.childCount==e.childCount?null:n;var i=t.child(r),o=e.child(r);if(i!=o){if(!i.sameMarkup(o))return n;if(i.isText&&i.text!=o.text){for(var s=0;i.text[s]==o.text[s];s++)n++;return n}if(i.content.size||o.content.size){var a=cn(i.content,o.content,n+1);if(null!=a)return a}n+=i.nodeSize}else n+=i.nodeSize}}function ln(t,e,n,r){for(var i=t.childCount,o=e.childCount;;){if(0==i||0==o)return i==o?null:{a:n,b:r};var s=t.child(--i),a=e.child(--o),u=s.nodeSize;if(s!=a){if(!s.sameMarkup(a))return{a:n,b:r};if(s.isText&&s.text!=a.text){var c=0,l=Math.min(s.text.length,a.text.length);while(c<l&&s.text[s.text.length-c-1]==a.text[a.text.length-c-1])c++,n--,r--;return{a:n,b:r}}if(s.content.size||a.content.size){var h=ln(s.content,a.content,n-1,r-1);if(h)return h}n-=u,r-=u}else n-=u,r-=u}}var hn=function(){function t(e,n){if((0,w.Z)(this,t),this.content=e,this.size=n||0,null==n)for(var r=0;r<e.length;r++)this.size+=e[r].nodeSize}return(0,D.Z)(t,[{key:"nodesBetween",value:function(t,e,n){for(var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,i=arguments.length>4?arguments[4]:void 0,o=0,s=0;s<e;o++){var a=this.content[o],u=s+a.nodeSize;if(u>t&&!1!==n(a,r+s,i||null,o)&&a.content.size){var c=s+1;a.nodesBetween(Math.max(0,t-c),Math.min(a.content.size,e-c),n,r+c)}s=u}}},{key:"descendants",value:function(t){this.nodesBetween(0,this.size,t)}},{key:"textBetween",value:function(t,e,n,r){var i="",o=!0;return this.nodesBetween(t,e,(function(s,a){s.isText?(i+=s.text.slice(Math.max(t,a)-a,e-a),o=!n):s.isLeaf?(r?i+="function"===typeof r?r(s):r:s.type.spec.leafText&&(i+=s.type.spec.leafText(s)),o=!n):!o&&s.isBlock&&(i+=n,o=!0)}),0),i}},{key:"append",value:function(e){if(!e.size)return this;if(!this.size)return e;var n=this.lastChild,r=e.firstChild,i=this.content.slice(),o=0;for(n.isText&&n.sameMarkup(r)&&(i[i.length-1]=n.withText(n.text+r.text),o=1);o<e.content.length;o++)i.push(e.content[o]);return new t(i,this.size+e.size)}},{key:"cut",value:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.size;if(0==e&&n==this.size)return this;var r=[],i=0;if(n>e)for(var o=0,s=0;s<n;o++){var a=this.content[o],u=s+a.nodeSize;u>e&&((s<e||u>n)&&(a=a.isText?a.cut(Math.max(0,e-s),Math.min(a.text.length,n-s)):a.cut(Math.max(0,e-s-1),Math.min(a.content.size,n-s-1))),r.push(a),i+=a.nodeSize),s=u}return new t(r,i)}},{key:"cutByIndex",value:function(e,n){return e==n?t.empty:0==e&&n==this.content.length?this:new t(this.content.slice(e,n))}},{key:"replaceChild",value:function(e,n){var r=this.content[e];if(r==n)return this;var i=this.content.slice(),o=this.size+n.nodeSize-r.nodeSize;return i[e]=n,new t(i,o)}},{key:"addToStart",value:function(e){return new t([e].concat(this.content),this.size+e.nodeSize)}},{key:"addToEnd",value:function(e){return new t(this.content.concat(e),this.size+e.nodeSize)}},{key:"eq",value:function(t){if(this.content.length!=t.content.length)return!1;for(var e=0;e<this.content.length;e++)if(!this.content[e].eq(t.content[e]))return!1;return!0}},{key:"firstChild",get:function(){return this.content.length?this.content[0]:null}},{key:"lastChild",get:function(){return this.content.length?this.content[this.content.length-1]:null}},{key:"childCount",get:function(){return this.content.length}},{key:"child",value:function(t){var e=this.content[t];if(!e)throw new RangeError("Index "+t+" out of range for "+this);return e}},{key:"maybeChild",value:function(t){return this.content[t]||null}},{key:"forEach",value:function(t){for(var e=0,n=0;e<this.content.length;e++){var r=this.content[e];t(r,n,e),n+=r.nodeSize}}},{key:"findDiffStart",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return cn(this,t,e)}},{key:"findDiffEnd",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.size,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:t.size;return ln(this,t,e,n)}},{key:"findIndex",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1;if(0==t)return fn(0,t);if(t==this.size)return fn(this.content.length,t);if(t>this.size||t<0)throw new RangeError("Position ".concat(t," outside of fragment (").concat(this,")"));for(var n=0,r=0;;n++){var i=this.child(n),o=r+i.nodeSize;if(o>=t)return o==t||e>0?fn(n+1,o):fn(n,r);r=o}}},{key:"toString",value:function(){return"<"+this.toStringInner()+">"}},{key:"toStringInner",value:function(){return this.content.join(", ")}},{key:"toJSON",value:function(){return this.content.length?this.content.map((function(t){return t.toJSON()})):null}}],[{key:"fromJSON",value:function(e,n){if(!n)return t.empty;if(!Array.isArray(n))throw new RangeError("Invalid input for Fragment.fromJSON");return new t(n.map(e.nodeFromJSON))}},{key:"fromArray",value:function(e){if(!e.length)return t.empty;for(var n,r=0,i=0;i<e.length;i++){var o=e[i];r+=o.nodeSize,i&&o.isText&&e[i-1].sameMarkup(o)?(n||(n=e.slice(0,i)),n[n.length-1]=o.withText(n[n.length-1].text+o.text)):n&&n.push(o)}return new t(n||e,r)}},{key:"from",value:function(e){if(!e)return t.empty;if(e instanceof t)return e;if(Array.isArray(e))return this.fromArray(e);if(e.attrs)return new t([e],e.nodeSize);throw new RangeError("Can not convert "+e+" to a Fragment"+(e.nodesBetween?" (looks like multiple versions of prosemirror-model were loaded)":""))}}]),t}();hn.empty=new hn([],0);var dn={index:0,offset:0};function fn(t,e){return dn.index=t,dn.offset=e,dn}function pn(t,e){if(t===e)return!0;if(!t||"object"!=(0,b.Z)(t)||!e||"object"!=(0,b.Z)(e))return!1;var n=Array.isArray(t);if(Array.isArray(e)!=n)return!1;if(n){if(t.length!=e.length)return!1;for(var r=0;r<t.length;r++)if(!pn(t[r],e[r]))return!1}else{for(var i in t)if(!(i in e)||!pn(t[i],e[i]))return!1;for(var o in e)if(!(o in t))return!1}return!0}var vn=function(){function t(e,n){(0,w.Z)(this,t),this.type=e,this.attrs=n}return(0,D.Z)(t,[{key:"addToSet",value:function(t){for(var e,n=!1,r=0;r<t.length;r++){var i=t[r];if(this.eq(i))return t;if(this.type.excludes(i.type))e||(e=t.slice(0,r));else{if(i.type.excludes(this.type))return t;!n&&i.type.rank>this.type.rank&&(e||(e=t.slice(0,r)),e.push(this),n=!0),e&&e.push(i)}}return e||(e=t.slice()),n||e.push(this),e}},{key:"removeFromSet",value:function(t){for(var e=0;e<t.length;e++)if(this.eq(t[e]))return t.slice(0,e).concat(t.slice(e+1));return t}},{key:"isInSet",value:function(t){for(var e=0;e<t.length;e++)if(this.eq(t[e]))return!0;return!1}},{key:"eq",value:function(t){return this==t||this.type==t.type&&pn(this.attrs,t.attrs)}},{key:"toJSON",value:function(){var t={type:this.type.name};for(var e in this.attrs){t.attrs=this.attrs;break}return t}}],[{key:"fromJSON",value:function(t,e){if(!e)throw new RangeError("Invalid input for Mark.fromJSON");var n=t.marks[e.type];if(!n)throw new RangeError("There is no mark type ".concat(e.type," in this schema"));return n.create(e.attrs)}},{key:"sameSet",value:function(t,e){if(t==e)return!0;if(t.length!=e.length)return!1;for(var n=0;n<t.length;n++)if(!t[n].eq(e[n]))return!1;return!0}},{key:"setFrom",value:function(e){if(!e||Array.isArray(e)&&0==e.length)return t.none;if(e instanceof t)return[e];var n=e.slice();return n.sort((function(t,e){return t.type.rank-e.type.rank})),n}}]),t}();vn.none=[];var mn=function(){function t(e,n,r){(0,w.Z)(this,t),this.content=e,this.openStart=n,this.openEnd=r}return(0,D.Z)(t,[{key:"size",get:function(){return this.content.size-this.openStart-this.openEnd}},{key:"insertAt",value:function(e,n){var r=yn(this.content,e+this.openStart,n);return r&&new t(r,this.openStart,this.openEnd)}},{key:"removeBetween",value:function(e,n){return new t(gn(this.content,e+this.openStart,n+this.openStart),this.openStart,this.openEnd)}},{key:"eq",value:function(t){return this.content.eq(t.content)&&this.openStart==t.openStart&&this.openEnd==t.openEnd}},{key:"toString",value:function(){return this.content+"("+this.openStart+","+this.openEnd+")"}},{key:"toJSON",value:function(){if(!this.content.size)return null;var t={content:this.content.toJSON()};return this.openStart>0&&(t.openStart=this.openStart),this.openEnd>0&&(t.openEnd=this.openEnd),t}}],[{key:"fromJSON",value:function(e,n){if(!n)return t.empty;var r=n.openStart||0,i=n.openEnd||0;if("number"!=typeof r||"number"!=typeof i)throw new RangeError("Invalid input for Slice.fromJSON");return new t(hn.fromJSON(e,n.content),r,i)}},{key:"maxOpen",value:function(e){for(var n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r=0,i=0,o=e.firstChild;o&&!o.isLeaf&&(n||!o.type.spec.isolating);o=o.firstChild)r++;for(var s=e.lastChild;s&&!s.isLeaf&&(n||!s.type.spec.isolating);s=s.lastChild)i++;return new t(e,r,i)}}]),t}();function gn(t,e,n){var r=t.findIndex(e),i=r.index,o=r.offset,s=t.maybeChild(i),a=t.findIndex(n),u=a.index,c=a.offset;if(o==e||s.isText){if(c!=n&&!t.child(u).isText)throw new RangeError("Removing non-flat range");return t.cut(0,e).append(t.cut(n))}if(i!=u)throw new RangeError("Removing non-flat range");return t.replaceChild(i,s.copy(gn(s.content,e-o-1,n-o-1)))}function yn(t,e,n,r){var i=t.findIndex(e),o=i.index,s=i.offset,a=t.maybeChild(o);if(s==e||a.isText)return r&&!r.canReplace(o,o,n)?null:t.cut(0,e).append(n).append(t.cut(e));var u=yn(a.content,e-s-1,n);return u&&t.replaceChild(o,a.copy(u))}mn.empty=new mn(hn.empty,0,0);var kn=function(){function t(e,n){var r=this;(0,w.Z)(this,t),this.schema=e,this.rules=n,this.tags=[],this.styles=[],n.forEach((function(t){t.tag?r.tags.push(t):t.style&&r.styles.push(t)})),this.normalizeLists=!this.tags.some((function(t){if(!/^(ul|ol)\b/.test(t.tag)||!t.node)return!1;var n=e.nodes[t.node];return n.contentMatch.matchType(n)}))}return(0,D.Z)(t,[{key:"parse",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=new _n(this,e,!1);return n.addAll(t,e.from,e.to),n.finish()}},{key:"parseSlice",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=new _n(this,e,!0);return n.addAll(t,e.from,e.to),mn.maxOpen(n.finish())}},{key:"matchTag",value:function(t,e,n){for(var r=n?this.tags.indexOf(n)+1:0;r<this.tags.length;r++){var i=this.tags[r];if(On(t,i.tag)&&(void 0===i.namespace||t.namespaceURI==i.namespace)&&(!i.context||e.matchesContext(i.context))){if(i.getAttrs){var o=i.getAttrs(t);if(!1===o)continue;i.attrs=o||void 0}return i}}}},{key:"matchStyle",value:function(t,e,n,r){for(var i=r?this.styles.indexOf(r)+1:0;i<this.styles.length;i++){var o=this.styles[i],s=o.style;if(!(0!=s.indexOf(t)||o.context&&!n.matchesContext(o.context)||s.length>t.length&&(61!=s.charCodeAt(t.length)||s.slice(t.length+1)!=e))){if(o.getAttrs){var a=o.getAttrs(e);if(!1===a)continue;o.attrs=a||void 0}return o}}}}],[{key:"schemaRules",value:function(t){var e=[];function n(t){for(var n=null==t.priority?50:t.priority,r=0;r<e.length;r++){var i=e[r],o=null==i.priority?50:i.priority;if(o<n)break}e.splice(r,0,t)}var r=function(e){var r=t.marks[e].spec.parseDOM;r&&r.forEach((function(t){n(t=Fn(t)),t.mark||t.ignore||t.clearMark||(t.mark=e)}))};for(var i in t.marks)r(i);var o=function(e){var r=t.nodes[e].spec.parseDOM;r&&r.forEach((function(t){n(t=Fn(t)),t.node||t.ignore||t.mark||(t.node=e)}))};for(var s in t.nodes)o(s);return e}},{key:"fromSchema",value:function(e){return e.cached.domParser||(e.cached.domParser=new t(e,t.schemaRules(e)))}}]),t}(),bn={address:!0,article:!0,aside:!0,blockquote:!0,canvas:!0,dd:!0,div:!0,dl:!0,fieldset:!0,figcaption:!0,figure:!0,footer:!0,form:!0,h1:!0,h2:!0,h3:!0,h4:!0,h5:!0,h6:!0,header:!0,hgroup:!0,hr:!0,li:!0,noscript:!0,ol:!0,output:!0,p:!0,pre:!0,section:!0,table:!0,tfoot:!0,ul:!0},wn={head:!0,noscript:!0,object:!0,script:!0,style:!0,title:!0},Dn={ol:!0,ul:!0},xn=1,Cn=2,An=4;function En(t,e,n){return null!=e?(e?xn:0)|("full"===e?Cn:0):t&&"pre"==t.whitespace?xn|Cn:n&~An}var Sn=function(){function t(e,n,r,i,o,s,a){(0,w.Z)(this,t),this.type=e,this.attrs=n,this.marks=r,this.pendingMarks=i,this.solid=o,this.options=a,this.content=[],this.activeMarks=vn.none,this.stashMarks=[],this.match=s||(a&An?null:e.contentMatch)}return(0,D.Z)(t,[{key:"findWrapping",value:function(t){if(!this.match){if(!this.type)return[];var e=this.type.contentMatch.fillBefore(hn.from(t));if(!e){var n,r=this.type.contentMatch;return(n=r.findWrapping(t.type))?(this.match=r,n):null}this.match=this.type.contentMatch.matchFragment(e)}return this.match.findWrapping(t.type)}},{key:"finish",value:function(t){if(!(this.options&xn)){var e,n=this.content[this.content.length-1];if(n&&n.isText&&(e=/[ \t\r\n\u000c]+$/.exec(n.text))){var r=n;n.text.length==e[0].length?this.content.pop():this.content[this.content.length-1]=r.withText(r.text.slice(0,r.text.length-e[0].length))}}var i=hn.from(this.content);return!t&&this.match&&(i=i.append(this.match.fillBefore(hn.empty,!0))),this.type?this.type.create(this.attrs,i,this.marks):i}},{key:"popFromStashMark",value:function(t){for(var e=this.stashMarks.length-1;e>=0;e--)if(t.eq(this.stashMarks[e]))return this.stashMarks.splice(e,1)[0]}},{key:"applyPending",value:function(t){for(var e=0,n=this.pendingMarks;e<n.length;e++){var r=n[e];(this.type?this.type.allowsMarkType(r.type):Nn(r.type,t))&&!r.isInSet(this.activeMarks)&&(this.activeMarks=r.addToSet(this.activeMarks),this.pendingMarks=r.removeFromSet(this.pendingMarks))}}},{key:"inlineContext",value:function(t){return this.type?this.type.inlineContent:this.content.length?this.content[0].isInline:t.parentNode&&!bn.hasOwnProperty(t.parentNode.nodeName.toLowerCase())}}]),t}(),_n=function(){function t(e,n,r){(0,w.Z)(this,t),this.parser=e,this.options=n,this.isOpen=r,this.open=0;var i,o=n.topNode,s=En(null,n.preserveWhitespace,0)|(r?An:0);i=o?new Sn(o.type,o.attrs,vn.none,vn.none,!0,n.topMatch||o.type.contentMatch,s):new Sn(r?null:e.schema.topNodeType,null,vn.none,vn.none,!0,null,s),this.nodes=[i],this.find=n.findPositions,this.needsBlock=!1}return(0,D.Z)(t,[{key:"top",get:function(){return this.nodes[this.open]}},{key:"addDOM",value:function(t){if(3==t.nodeType)this.addTextNode(t);else if(1==t.nodeType){var e=t.getAttribute("style");if(e){var n=this.readStyles(Tn(e));if(!n)return;for(var r=(0,h.Z)(n,2),i=r[0],o=r[1],s=this.top,a=0;a<o.length;a++)this.removePendingMark(o[a],s);for(var u=0;u<i.length;u++)this.addPendingMark(i[u]);this.addElement(t);for(var c=0;c<i.length;c++)this.removePendingMark(i[c],s);for(var l=0;l<o.length;l++)this.addPendingMark(o[l])}else this.addElement(t)}}},{key:"addTextNode",value:function(t){var e=t.nodeValue,n=this.top;if(n.options&Cn||n.inlineContext(t)||/[^ \t\r\n\u000c]/.test(e)){if(n.options&xn)e=n.options&Cn?e.replace(/\r\n?/g,"\n"):e.replace(/\r?\n|\r/g," ");else if(e=e.replace(/[ \t\r\n\u000c]+/g," "),/^[ \t\r\n\u000c]/.test(e)&&this.open==this.nodes.length-1){var r=n.content[n.content.length-1],i=t.previousSibling;(!r||i&&"BR"==i.nodeName||r.isText&&/[ \t\r\n\u000c]$/.test(r.text))&&(e=e.slice(1))}e&&this.insertNode(this.parser.schema.text(e)),this.findInText(t)}else this.findInside(t)}},{key:"addElement",value:function(t,e){var n,r=t.nodeName.toLowerCase();Dn.hasOwnProperty(r)&&this.parser.normalizeLists&&Mn(t);var i=this.options.ruleFromNode&&this.options.ruleFromNode(t)||(n=this.parser.matchTag(t,this,e));if(i?i.ignore:wn.hasOwnProperty(r))this.findInside(t),this.ignoreFallback(t);else if(!i||i.skip||i.closeParent){i&&i.closeParent?this.open=Math.max(0,this.open-1):i&&i.skip.nodeType&&(t=i.skip);var o,s=this.top,a=this.needsBlock;if(bn.hasOwnProperty(r))s.content.length&&s.content[0].isInline&&this.open&&(this.open--,s=this.top),o=!0,s.type||(this.needsBlock=!0);else if(!t.firstChild)return void this.leafFallback(t);this.addAll(t),o&&this.sync(s),this.needsBlock=a}else this.addElementByRule(t,i,!1===i.consuming?n:void 0)}},{key:"leafFallback",value:function(t){"BR"==t.nodeName&&this.top.type&&this.top.type.inlineContent&&this.addTextNode(t.ownerDocument.createTextNode("\n"))}},{key:"ignoreFallback",value:function(t){"BR"!=t.nodeName||this.top.type&&this.top.type.inlineContent||this.findPlace(this.parser.schema.text("-"))}},{key:"readStyles",value:function(t){for(var e=this,n=vn.none,r=vn.none,i=0;i<t.length;i+=2)for(var o=function(o){var a=e.parser.matchStyle(t[i],t[i+1],e,o);return a?a.ignore?{v:null}:(a.clearMark?e.top.pendingMarks.concat(e.top.activeMarks).forEach((function(t){a.clearMark(t)&&(r=t.addToSet(r))})):n=e.parser.schema.marks[a.mark].create(a.attrs).addToSet(n),!1!==a.consuming?(s=o,"break"):(o=a,void(s=o))):(s=o,"break")},s=void 0;;){var a=o(s);if("break"===a)break;if("object"===(0,b.Z)(a))return a.v}return[n,r]}},{key:"addElementByRule",value:function(t,e,n){var r,i,o,s=this;if(e.node)i=this.parser.schema.nodes[e.node],i.isLeaf?this.insertNode(i.create(e.attrs))||this.leafFallback(t):r=this.enter(i,e.attrs||null,e.preserveWhitespace);else{var a=this.parser.schema.marks[e.mark];o=a.create(e.attrs),this.addPendingMark(o)}var u=this.top;if(i&&i.isLeaf)this.findInside(t);else if(n)this.addElement(t,n);else if(e.getContent)this.findInside(t),e.getContent(t,this.parser.schema).forEach((function(t){return s.insertNode(t)}));else{var c=t;"string"==typeof e.contentElement?c=t.querySelector(e.contentElement):"function"==typeof e.contentElement?c=e.contentElement(t):e.contentElement&&(c=e.contentElement),this.findAround(t,c,!0),this.addAll(c)}r&&this.sync(u)&&this.open--,o&&this.removePendingMark(o,u)}},{key:"addAll",value:function(t,e,n){for(var r=e||0,i=e?t.childNodes[e]:t.firstChild,o=null==n?null:t.childNodes[n];i!=o;i=i.nextSibling,++r)this.findAtPoint(t,r),this.addDOM(i);this.findAtPoint(t,r)}},{key:"findPlace",value:function(t){for(var e,n,r=this.open;r>=0;r--){var i=this.nodes[r],o=i.findWrapping(t);if(o&&(!e||e.length>o.length)&&(e=o,n=i,!o.length))break;if(i.solid)break}if(!e)return!1;this.sync(n);for(var s=0;s<e.length;s++)this.enterInner(e[s],null,!1);return!0}},{key:"insertNode",value:function(t){if(t.isInline&&this.needsBlock&&!this.top.type){var e=this.textblockFromContext();e&&this.enterInner(e)}if(this.findPlace(t)){this.closeExtra();var n=this.top;n.applyPending(t.type),n.match&&(n.match=n.match.matchType(t.type));for(var r=n.activeMarks,i=0;i<t.marks.length;i++)n.type&&!n.type.allowsMarkType(t.marks[i].type)||(r=t.marks[i].addToSet(r));return n.content.push(t.mark(r)),!0}return!1}},{key:"enter",value:function(t,e,n){var r=this.findPlace(t.create(e));return r&&this.enterInner(t,e,!0,n),r}},{key:"enterInner",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=arguments.length>3?arguments[3]:void 0;this.closeExtra();var i=this.top;i.applyPending(t),i.match=i.match&&i.match.matchType(t);var o=En(t,r,i.options);i.options&An&&0==i.content.length&&(o|=An),this.nodes.push(new Sn(t,e,i.activeMarks,i.pendingMarks,n,null,o)),this.open++}},{key:"closeExtra",value:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],e=this.nodes.length-1;if(e>this.open){for(;e>this.open;e--)this.nodes[e-1].content.push(this.nodes[e].finish(t));this.nodes.length=this.open+1}}},{key:"finish",value:function(){return this.open=0,this.closeExtra(this.isOpen),this.nodes[0].finish(this.isOpen||this.options.topOpen)}},{key:"sync",value:function(t){for(var e=this.open;e>=0;e--)if(this.nodes[e]==t)return this.open=e,!0;return!1}},{key:"currentPos",get:function(){this.closeExtra();for(var t=0,e=this.open;e>=0;e--){for(var n=this.nodes[e].content,r=n.length-1;r>=0;r--)t+=n[r].nodeSize;e&&t++}return t}},{key:"findAtPoint",value:function(t,e){if(this.find)for(var n=0;n<this.find.length;n++)this.find[n].node==t&&this.find[n].offset==e&&(this.find[n].pos=this.currentPos)}},{key:"findInside",value:function(t){if(this.find)for(var e=0;e<this.find.length;e++)null==this.find[e].pos&&1==t.nodeType&&t.contains(this.find[e].node)&&(this.find[e].pos=this.currentPos)}},{key:"findAround",value:function(t,e,n){if(t!=e&&this.find)for(var r=0;r<this.find.length;r++)if(null==this.find[r].pos&&1==t.nodeType&&t.contains(this.find[r].node)){var i=e.compareDocumentPosition(this.find[r].node);i&(n?2:4)&&(this.find[r].pos=this.currentPos)}}},{key:"findInText",value:function(t){if(this.find)for(var e=0;e<this.find.length;e++)this.find[e].node==t&&(this.find[e].pos=this.currentPos-(t.nodeValue.length-this.find[e].offset))}},{key:"matchesContext",value:function(t){var e=this;if(t.indexOf("|")>-1)return t.split(/\s*\|\s*/).some(this.matchesContext,this);var n=t.split("/"),r=this.options.context,i=!this.isOpen&&(!r||r.parent.type==this.nodes[0].type),o=-(r?r.depth+1:0)+(i?0:1),s=function t(s,a){for(;s>=0;s--){var u=n[s];if(""==u){if(s==n.length-1||0==s)continue;for(;a>=o;a--)if(t(s-1,a))return!0;return!1}var c=a>0||0==a&&i?e.nodes[a].type:r&&a>=o?r.node(a-o).type:null;if(!c||c.name!=u&&-1==c.groups.indexOf(u))return!1;a--}return!0};return s(n.length-1,this.open)}},{key:"textblockFromContext",value:function(){var t=this.options.context;if(t)for(var e=t.depth;e>=0;e--){var n=t.node(e).contentMatchAt(t.indexAfter(e)).defaultType;if(n&&n.isTextblock&&n.defaultAttrs)return n}for(var r in this.parser.schema.nodes){var i=this.parser.schema.nodes[r];if(i.isTextblock&&i.defaultAttrs)return i}}},{key:"addPendingMark",value:function(t){var e=Bn(t,this.top.pendingMarks);e&&this.top.stashMarks.push(e),this.top.pendingMarks=t.addToSet(this.top.pendingMarks)}},{key:"removePendingMark",value:function(t,e){for(var n=this.open;n>=0;n--){var r=this.nodes[n],i=r.pendingMarks.lastIndexOf(t);if(i>-1)r.pendingMarks=t.removeFromSet(r.pendingMarks);else{r.activeMarks=t.removeFromSet(r.activeMarks);var o=r.popFromStashMark(t);o&&r.type&&r.type.allowsMarkType(o.type)&&(r.activeMarks=o.addToSet(r.activeMarks))}if(r==e)break}}}]),t}();function Mn(t){for(var e=t.firstChild,n=null;e;e=e.nextSibling){var r=1==e.nodeType?e.nodeName.toLowerCase():null;r&&Dn.hasOwnProperty(r)&&n?(n.appendChild(e),e=n):"li"==r?n=e:r&&(n=null)}}function On(t,e){return(t.matches||t.msMatchesSelector||t.webkitMatchesSelector||t.mozMatchesSelector).call(t,e)}function Tn(t){var e,n=/\s*([\w-]+)\s*:\s*([^;]+)/g,r=[];while(e=n.exec(t))r.push(e[1],e[2].trim());return r}function Fn(t){var e={};for(var n in t)e[n]=t[n];return e}function Nn(t,e){var n=e.schema.nodes,r=function(){var r=n[i];if(!r.allowsMarkType(t))return"continue";var o=[],s=function t(n){o.push(n);for(var r=0;r<n.edgeCount;r++){var i=n.edge(r),s=i.type,a=i.next;if(s==e)return!0;if(o.indexOf(a)<0&&t(a))return!0}};return s(r.contentMatch)?{v:!0}:void 0};for(var i in n){var o=r();if("continue"!==o&&"object"===(0,b.Z)(o))return o.v}}function Bn(t,e){for(var n=0;n<e.length;n++)if(t.eq(e[n]))return e[n]}var In=function(){function t(e,n){(0,w.Z)(this,t),this.nodes=e,this.marks=n}return(0,D.Z)(t,[{key:"serializeFragment",value:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2?arguments[2]:void 0;r||(r=Rn(n).createDocumentFragment());var i=r,o=[];return t.forEach((function(t){if(o.length||t.marks.length){var r=0,s=0;while(r<o.length&&s<t.marks.length){var a=t.marks[s];if(e.marks[a.type.name]){if(!a.eq(o[r][0])||!1===a.type.spec.spanning)break;r++,s++}else s++}while(r<o.length)i=o.pop()[1];while(s<t.marks.length){var u=t.marks[s++],c=e.serializeMark(u,t.isInline,n);c&&(o.push([u,i]),i.appendChild(c.dom),i=c.contentDOM||c.dom)}}i.appendChild(e.serializeNodeInner(t,n))})),r}},{key:"serializeNodeInner",value:function(e,n){var r=t.renderSpec(Rn(n),this.nodes[e.type.name](e)),i=r.dom,o=r.contentDOM;if(o){if(e.isLeaf)throw new RangeError("Content hole not allowed in a leaf node spec");this.serializeFragment(e.content,n,o)}return i}},{key:"serializeNode",value:function(t){for(var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=this.serializeNodeInner(t,e),r=t.marks.length-1;r>=0;r--){var i=this.serializeMark(t.marks[r],t.isInline,e);i&&((i.contentDOM||i.dom).appendChild(n),n=i.dom)}return n}},{key:"serializeMark",value:function(e,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=this.marks[e.type.name];return i&&t.renderSpec(Rn(r),i(e,n))}}],[{key:"renderSpec",value:function(e,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;if("string"==typeof n)return{dom:e.createTextNode(n)};if(null!=n.nodeType)return{dom:n};if(n.dom&&null!=n.dom.nodeType)return n;var i,o=n[0],s=o.indexOf(" ");s>0&&(r=o.slice(0,s),o=o.slice(s+1));var a=r?e.createElementNS(r,o):e.createElement(o),u=n[1],c=1;if(u&&"object"==(0,b.Z)(u)&&null==u.nodeType&&!Array.isArray(u))for(var l in c=2,u)if(null!=u[l]){var h=l.indexOf(" ");h>0?a.setAttributeNS(l.slice(0,h),l.slice(h+1),u[l]):a.setAttribute(l,u[l])}for(var d=c;d<n.length;d++){var f=n[d];if(0===f){if(d<n.length-1||d>c)throw new RangeError("Content hole must be the only child of its parent node");return{dom:a,contentDOM:a}}var p=t.renderSpec(e,f,r),v=p.dom,m=p.contentDOM;if(a.appendChild(v),m){if(i)throw new RangeError("Multiple content holes");i=m}}return{dom:a,contentDOM:i}}},{key:"fromSchema",value:function(e){return e.cached.domSerializer||(e.cached.domSerializer=new t(this.nodesFromSchema(e),this.marksFromSchema(e)))}},{key:"nodesFromSchema",value:function(t){var e=Ln(t.nodes);return e.text||(e.text=function(t){return t.text}),e}},{key:"marksFromSchema",value:function(t){return Ln(t.marks)}}]),t}();function Ln(t){var e={};for(var n in t){var r=t[n].spec.toDOM;r&&(e[n]=r)}return e}function Rn(t){return t.document||window.document}var zn=function(t){for(var e=0;;e++)if(t=t.previousSibling,!t)return e},Pn=function(t){var e=t.assignedSlot||t.parentNode;return e&&11==e.nodeType?e.host:e},Zn=null,qn=function(t,e,n){var r=Zn||(Zn=document.createRange());return r.setEnd(t,null==n?t.nodeValue.length:n),r.setStart(t,e||0),r},jn=function(t,e,n,r){return n&&(Vn(t,e,n,r,-1)||Vn(t,e,n,r,1))},$n=/^(img|br|input|textarea|hr)$/i;function Vn(t,e,n,r,i){for(;;){if(t==n&&e==r)return!0;if(e==(i<0?0:Hn(t))){var o=t.parentNode;if(!o||1!=o.nodeType||Kn(t)||$n.test(t.nodeName)||"false"==t.contentEditable)return!1;e=zn(t)+(i<0?0:1),t=o}else{if(1!=t.nodeType)return!1;if(t=t.childNodes[e+(i<0?-1:0)],"false"==t.contentEditable)return!1;e=i<0?Hn(t):0}}}function Hn(t){return 3==t.nodeType?t.nodeValue.length:t.childNodes.length}function Jn(t,e,n){for(var r=0==e,i=e==Hn(t);r||i;){if(t==n)return!0;var o=zn(t);if(t=t.parentNode,!t)return!1;r=r&&0==o,i=i&&o==Hn(t)}}function Kn(t){for(var e,n=t;n;n=n.parentNode)if(e=n.pmViewDesc)break;return e&&e.node&&e.node.isBlock&&(e.dom==t||e.contentDOM==t)}var Wn=function(t){return t.focusNode&&jn(t.focusNode,t.focusOffset,t.anchorNode,t.anchorOffset)};function Un(t,e){var n=document.createEvent("Event");return n.initEvent("keydown",!0,!0),n.keyCode=t,n.key=n.code=e,n}function Gn(t){var e=t.activeElement;while(e&&e.shadowRoot)e=e.shadowRoot.activeElement;return e}function Yn(t,e,n){if(t.caretPositionFromPoint)try{var r=t.caretPositionFromPoint(e,n);if(r)return{node:r.offsetNode,offset:r.offset}}catch(o){}if(t.caretRangeFromPoint){var i=t.caretRangeFromPoint(e,n);if(i)return{node:i.startContainer,offset:i.startOffset}}}var Qn="undefined"!=typeof navigator?navigator:null,Xn="undefined"!=typeof document?document:null,tr=Qn&&Qn.userAgent||"",er=/Edge\/(\d+)/.exec(tr),nr=/MSIE \d/.exec(tr),rr=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(tr),ir=!!(nr||rr||er),or=nr?document.documentMode:rr?+rr[1]:er?+er[1]:0,sr=!ir&&/gecko\/(\d+)/i.test(tr);sr&&(/Firefox\/(\d+)/.exec(tr)||[0,0])[1];var ar=!ir&&/Chrome\/(\d+)/.exec(tr),ur=!!ar,cr=ar?+ar[1]:0,lr=!ir&&!!Qn&&/Apple Computer/.test(Qn.vendor),hr=lr&&(/Mobile\/\w+/.test(tr)||!!Qn&&Qn.maxTouchPoints>2),dr=hr||!!Qn&&/Mac/.test(Qn.platform),fr=!!Qn&&/Win/.test(Qn.platform),pr=/Android \d/.test(tr),vr=!!Xn&&"webkitFontSmoothing"in Xn.documentElement.style,mr=vr?+(/\bAppleWebKit\/(\d+)/.exec(navigator.userAgent)||[0,0])[1]:0;function gr(t){return{left:0,right:t.documentElement.clientWidth,top:0,bottom:t.documentElement.clientHeight}}function yr(t,e){return"number"==typeof t?t:t[e]}function kr(t){var e=t.getBoundingClientRect(),n=e.width/t.offsetWidth||1,r=e.height/t.offsetHeight||1;return{left:e.left,right:e.left+t.clientWidth*n,top:e.top,bottom:e.top+t.clientHeight*r}}function br(t,e,n){for(var r=t.someProp("scrollThreshold")||0,i=t.someProp("scrollMargin")||5,o=t.dom.ownerDocument,s=n||t.dom;;s=Pn(s)){if(!s)break;if(1==s.nodeType){var a=s,u=a==o.body,c=u?gr(o):kr(a),l=0,h=0;if(e.top<c.top+yr(r,"top")?h=-(c.top-e.top+yr(i,"top")):e.bottom>c.bottom-yr(r,"bottom")&&(h=e.bottom-c.bottom+yr(i,"bottom")),e.left<c.left+yr(r,"left")?l=-(c.left-e.left+yr(i,"left")):e.right>c.right-yr(r,"right")&&(l=e.right-c.right+yr(i,"right")),l||h)if(u)o.defaultView.scrollBy(l,h);else{var d=a.scrollLeft,f=a.scrollTop;h&&(a.scrollTop+=h),l&&(a.scrollLeft+=l);var p=a.scrollLeft-d,v=a.scrollTop-f;e={left:e.left-p,top:e.top-v,right:e.right-p,bottom:e.bottom-v}}if(u)break}}}function wr(t){for(var e,n,r=t.dom.getBoundingClientRect(),i=Math.max(0,r.top),o=(r.left+r.right)/2,s=i+1;s<Math.min(innerHeight,r.bottom);s+=5){var a=t.root.elementFromPoint(o,s);if(a&&a!=t.dom&&t.dom.contains(a)){var u=a.getBoundingClientRect();if(u.top>=i-20){e=a,n=u.top;break}}}return{refDOM:e,refTop:n,stack:Dr(t.dom)}}function Dr(t){for(var e=[],n=t.ownerDocument,r=t;r;r=Pn(r))if(e.push({dom:r,top:r.scrollTop,left:r.scrollLeft}),t==n)break;return e}function xr(t){var e=t.refDOM,n=t.refTop,r=t.stack,i=e?e.getBoundingClientRect().top:0;Cr(r,0==i?0:i-n)}function Cr(t,e){for(var n=0;n<t.length;n++){var r=t[n],i=r.dom,o=r.top,s=r.left;i.scrollTop!=o+e&&(i.scrollTop=o+e),i.scrollLeft!=s&&(i.scrollLeft=s)}}var Ar=null;function Er(t){if(t.setActive)return t.setActive();if(Ar)return t.focus(Ar);var e=Dr(t);t.focus(null==Ar?{get preventScroll(){return Ar={preventScroll:!0},!0}}:void 0),Ar||(Ar=!1,Cr(e,0))}function Sr(t,e){for(var n,r,i,o,s=2e8,a=0,u=e.top,c=e.top,l=t.firstChild,h=0;l;l=l.nextSibling,h++){var d=void 0;if(1==l.nodeType)d=l.getClientRects();else{if(3!=l.nodeType)continue;d=qn(l).getClientRects()}for(var f=0;f<d.length;f++){var p=d[f];if(p.top<=u&&p.bottom>=c){u=Math.max(p.bottom,u),c=Math.min(p.top,c);var v=p.left>e.left?p.left-e.left:p.right<e.left?e.left-p.right:0;if(v<s){n=l,s=v,r=v&&3==n.nodeType?{left:p.right<e.left?p.right:p.left,top:e.top}:e,1==l.nodeType&&v&&(a=h+(e.left>=(p.left+p.right)/2?1:0));continue}}else p.top>e.top&&!i&&p.left<=e.left&&p.right>=e.left&&(i=l,o={left:Math.max(p.left,Math.min(p.right,e.left)),top:p.top});!n&&(e.left>=p.right&&e.top>=p.top||e.left>=p.left&&e.top>=p.bottom)&&(a=h+1)}}return!n&&i&&(n=i,r=o,s=0),n&&3==n.nodeType?_r(n,r):!n||s&&1==n.nodeType?{node:t,offset:a}:Sr(n,r)}function _r(t,e){for(var n=t.nodeValue.length,r=document.createRange(),i=0;i<n;i++){r.setEnd(t,i+1),r.setStart(t,i);var o=Lr(r,1);if(o.top!=o.bottom&&Mr(e,o))return{node:t,offset:i+(e.left>=(o.left+o.right)/2?1:0)}}return{node:t,offset:0}}function Mr(t,e){return t.left>=e.left-1&&t.left<=e.right+1&&t.top>=e.top-1&&t.top<=e.bottom+1}function Or(t,e){var n=t.parentNode;return n&&/^li$/i.test(n.nodeName)&&e.left<t.getBoundingClientRect().left?n:t}function Tr(t,e,n){var r=Sr(e,n),i=r.node,o=r.offset,s=-1;if(1==i.nodeType&&!i.firstChild){var a=i.getBoundingClientRect();s=a.left!=a.right&&n.left>(a.left+a.right)/2?1:-1}return t.docView.posFromDOM(i,o,s)}function Fr(t,e,n,r){for(var i=-1,o=e,s=!1;;){if(o==t.dom)break;var a=t.docView.nearestDesc(o,!0);if(!a)return null;if(1==a.dom.nodeType&&(a.node.isBlock&&a.parent&&!s||!a.contentDOM)){var u=a.dom.getBoundingClientRect();if(a.node.isBlock&&a.parent&&!s&&(s=!0,u.left>r.left||u.top>r.top?i=a.posBefore:(u.right<r.left||u.bottom<r.top)&&(i=a.posAfter)),!a.contentDOM&&i<0){var c=a.node.isBlock?r.top<(u.top+u.bottom)/2:r.left<(u.left+u.right)/2;return c?a.posBefore:a.posAfter}}o=a.dom.parentNode}return i>-1?i:t.docView.posFromDOM(e,n,-1)}function Nr(t,e,n){var r=t.childNodes.length;if(r&&n.top<n.bottom)for(var i=Math.max(0,Math.min(r-1,Math.floor(r*(e.top-n.top)/(n.bottom-n.top))-2)),o=i;;){var s=t.childNodes[o];if(1==s.nodeType)for(var a=s.getClientRects(),u=0;u<a.length;u++){var c=a[u];if(Mr(e,c))return Nr(s,e,c)}if((o=(o+1)%r)==i)break}return t}function Br(t,e){var n,r=t.dom.ownerDocument,i=0,o=Yn(r,e.left,e.top);o&&(n=o.node,i=o.offset);var s,a=(t.root.elementFromPoint?t.root:r).elementFromPoint(e.left,e.top);if(!a||!t.dom.contains(1!=a.nodeType?a.parentNode:a)){var u=t.dom.getBoundingClientRect();if(!Mr(e,u))return null;if(a=Nr(t.dom,e,u),!a)return null}if(lr)for(var c=a;n&&c;c=Pn(c))c.draggable&&(n=void 0);if(a=Or(a,e),n){if(sr&&1==n.nodeType&&(i=Math.min(i,n.childNodes.length),i<n.childNodes.length)){var l,h=n.childNodes[i];"IMG"==h.nodeName&&(l=h.getBoundingClientRect()).right<=e.left&&l.bottom>e.top&&i++}n==t.dom&&i==n.childNodes.length-1&&1==n.lastChild.nodeType&&e.top>n.lastChild.getBoundingClientRect().bottom?s=t.state.doc.content.size:0!=i&&1==n.nodeType&&"BR"==n.childNodes[i-1].nodeName||(s=Fr(t,n,i,e))}null==s&&(s=Tr(t,a,e));var d=t.docView.nearestDesc(a,!0);return{pos:s,inside:d?d.posAtStart-d.border:-1}}function Ir(t){return t.top<t.bottom||t.left<t.right}function Lr(t,e){var n=t.getClientRects();if(n.length){var r=n[e<0?0:n.length-1];if(Ir(r))return r}return Array.prototype.find.call(n,Ir)||t.getBoundingClientRect()}var Rr=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/;function zr(t,e,n){var r=t.docView.domFromPos(e,n<0?-1:1),i=r.node,o=r.offset,s=r.atom,a=vr||sr;if(3==i.nodeType){if(!a||!Rr.test(i.nodeValue)&&(n<0?o:o!=i.nodeValue.length)){var u=o,c=o,l=n<0?1:-1;return n<0&&!o?(c++,l=-1):n>=0&&o==i.nodeValue.length?(u--,l=1):n<0?u--:c++,Pr(Lr(qn(i,u,c),l),l<0)}var h=Lr(qn(i,o,o),n);if(sr&&o&&/\s/.test(i.nodeValue[o-1])&&o<i.nodeValue.length){var d=Lr(qn(i,o-1,o-1),-1);if(d.top==h.top){var f=Lr(qn(i,o,o+1),-1);if(f.top!=h.top)return Pr(f,f.left<d.left)}}return h}var p=t.state.doc.resolve(e-(s||0));if(!p.parent.inlineContent){if(null==s&&o&&(n<0||o==Hn(i))){var v=i.childNodes[o-1];if(1==v.nodeType)return Zr(v.getBoundingClientRect(),!1)}if(null==s&&o<Hn(i)){var m=i.childNodes[o];if(1==m.nodeType)return Zr(m.getBoundingClientRect(),!0)}return Zr(i.getBoundingClientRect(),n>=0)}if(null==s&&o&&(n<0||o==Hn(i))){var g=i.childNodes[o-1],y=3==g.nodeType?qn(g,Hn(g)-(a?0:1)):1!=g.nodeType||"BR"==g.nodeName&&g.nextSibling?null:g;if(y)return Pr(Lr(y,1),!1)}if(null==s&&o<Hn(i)){var k=i.childNodes[o];while(k.pmViewDesc&&k.pmViewDesc.ignoreForCoords)k=k.nextSibling;var b=k?3==k.nodeType?qn(k,0,a?0:1):1==k.nodeType?k:null:null;if(b)return Pr(Lr(b,-1),!0)}return Pr(Lr(3==i.nodeType?qn(i):i,-n),n>=0)}function Pr(t,e){if(0==t.width)return t;var n=e?t.left:t.right;return{top:t.top,bottom:t.bottom,left:n,right:n}}function Zr(t,e){if(0==t.height)return t;var n=e?t.top:t.bottom;return{top:n,bottom:n,left:t.left,right:t.right}}function qr(t,e,n){var r=t.state,i=t.root.activeElement;r!=e&&t.updateState(e),i!=t.dom&&t.focus();try{return n()}finally{r!=e&&t.updateState(r),i!=t.dom&&i&&i.focus()}}function jr(t,e,n){var r=e.selection,i="up"==n?r.$from:r.$to;return qr(t,e,(function(){for(var e=t.docView.domFromPos(i.pos,"up"==n?-1:1),r=e.node;;){var o=t.docView.nearestDesc(r,!0);if(!o)break;if(o.node.isBlock){r=o.contentDOM||o.dom;break}r=o.dom.parentNode}for(var s=zr(t,i.pos,1),a=r.firstChild;a;a=a.nextSibling){var u=void 0;if(1==a.nodeType)u=a.getClientRects();else{if(3!=a.nodeType)continue;u=qn(a,0,a.nodeValue.length).getClientRects()}for(var c=0;c<u.length;c++){var l=u[c];if(l.bottom>l.top+1&&("up"==n?s.top-l.top>2*(l.bottom-s.top):l.bottom-s.bottom>2*(s.bottom-l.top)))return!1}}return!0}))}var $r=/[\u0590-\u08ac]/;function Vr(t,e,n){var r=e.selection.$head;if(!r.parent.isTextblock)return!1;var i=r.parentOffset,o=!i,s=i==r.parent.content.size,a=t.domSelection();return $r.test(r.parent.textContent)&&a.modify?qr(t,e,(function(){var e=t.domSelectionRange(),i=e.focusNode,o=e.focusOffset,s=e.anchorNode,u=e.anchorOffset,c=a.caretBidiLevel;a.modify("move",n,"character");var l=r.depth?t.docView.domAfterPos(r.before()):t.dom,h=t.domSelectionRange(),d=h.focusNode,f=h.focusOffset,p=d&&!l.contains(1==d.nodeType?d:d.parentNode)||i==d&&o==f;try{a.collapse(s,u),i&&(i!=s||o!=u)&&a.extend&&a.extend(i,o)}catch(v){}return null!=c&&(a.caretBidiLevel=c),p})):"left"==n||"backward"==n?o:s}var Hr=null,Jr=null,Kr=!1;function Wr(t,e,n){return Hr==e&&Jr==n?Kr:(Hr=e,Jr=n,Kr="up"==n||"down"==n?jr(t,e,n):Vr(t,e,n))}var Ur=0,Gr=1,Yr=2,Qr=3,Xr=function(){function t(e,n,r,i){(0,w.Z)(this,t),this.parent=e,this.children=n,this.dom=r,this.contentDOM=i,this.dirty=Ur,r.pmViewDesc=this}return(0,D.Z)(t,[{key:"matchesWidget",value:function(t){return!1}},{key:"matchesMark",value:function(t){return!1}},{key:"matchesNode",value:function(t,e,n){return!1}},{key:"matchesHack",value:function(t){return!1}},{key:"parseRule",value:function(){return null}},{key:"stopEvent",value:function(t){return!1}},{key:"size",get:function(){for(var t=0,e=0;e<this.children.length;e++)t+=this.children[e].size;return t}},{key:"border",get:function(){return 0}},{key:"destroy",value:function(){this.parent=void 0,this.dom.pmViewDesc==this&&(this.dom.pmViewDesc=void 0);for(var t=0;t<this.children.length;t++)this.children[t].destroy()}},{key:"posBeforeChild",value:function(t){for(var e=0,n=this.posAtStart;;e++){var r=this.children[e];if(r==t)return n;n+=r.size}}},{key:"posBefore",get:function(){return this.parent.posBeforeChild(this)}},{key:"posAtStart",get:function(){return this.parent?this.parent.posBeforeChild(this)+this.border:0}},{key:"posAfter",get:function(){return this.posBefore+this.size}},{key:"posAtEnd",get:function(){return this.posAtStart+this.size-2*this.border}},{key:"localPosFromDOM",value:function(t,e,n){if(this.contentDOM&&this.contentDOM.contains(1==t.nodeType?t:t.parentNode)){if(n<0){var r,i;if(t==this.contentDOM)r=t.childNodes[e-1];else{while(t.parentNode!=this.contentDOM)t=t.parentNode;r=t.previousSibling}while(r&&(!(i=r.pmViewDesc)||i.parent!=this))r=r.previousSibling;return r?this.posBeforeChild(i)+i.size:this.posAtStart}var o,s;if(t==this.contentDOM)o=t.childNodes[e];else{while(t.parentNode!=this.contentDOM)t=t.parentNode;o=t.nextSibling}while(o&&(!(s=o.pmViewDesc)||s.parent!=this))o=o.nextSibling;return o?this.posBeforeChild(s):this.posAtEnd}var a;if(t==this.dom&&this.contentDOM)a=e>zn(this.contentDOM);else if(this.contentDOM&&this.contentDOM!=this.dom&&this.dom.contains(this.contentDOM))a=2&t.compareDocumentPosition(this.contentDOM);else if(this.dom.firstChild){if(0==e)for(var u=t;;u=u.parentNode){if(u==this.dom){a=!1;break}if(u.previousSibling)break}if(null==a&&e==t.childNodes.length)for(var c=t;;c=c.parentNode){if(c==this.dom){a=!0;break}if(c.nextSibling)break}}return(null==a?n>0:a)?this.posAtEnd:this.posAtStart}},{key:"nearestDesc",value:function(t){for(var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=!0,r=t;r;r=r.parentNode){var i=this.getDesc(r),o=void 0;if(i&&(!e||i.node)){if(!n||!(o=i.nodeDOM)||(1==o.nodeType?o.contains(1==t.nodeType?t:t.parentNode):o==t))return i;n=!1}}}},{key:"getDesc",value:function(t){for(var e=t.pmViewDesc,n=e;n;n=n.parent)if(n==this)return e}},{key:"posFromDOM",value:function(t,e,n){for(var r=t;r;r=r.parentNode){var i=this.getDesc(r);if(i)return i.localPosFromDOM(t,e,n)}return-1}},{key:"descAt",value:function(t){for(var e=0,n=0;e<this.children.length;e++){var r=this.children[e],i=n+r.size;if(n==t&&i!=n){while(!r.border&&r.children.length)r=r.children[0];return r}if(t<i)return r.descAt(t-n-r.border);n=i}}},{key:"domFromPos",value:function(t,e){if(!this.contentDOM)return{node:this.dom,offset:0,atom:t+1};for(var n,r=0,i=0,o=0;r<this.children.length;r++){var s=this.children[r],a=o+s.size;if(a>t||s instanceof si){i=t-o;break}o=a}if(i)return this.children[r].domFromPos(i-this.children[r].border,e);for(;r&&!(n=this.children[r-1]).size&&n instanceof ti&&n.side>=0;r--);if(e<=0){for(var u,c=!0;;r--,c=!1)if(u=r?this.children[r-1]:null,!u||u.dom.parentNode==this.contentDOM)break;return u&&e&&c&&!u.border&&!u.domAtom?u.domFromPos(u.size,e):{node:this.contentDOM,offset:u?zn(u.dom)+1:0}}for(var l,h=!0;;r++,h=!1)if(l=r<this.children.length?this.children[r]:null,!l||l.dom.parentNode==this.contentDOM)break;return l&&h&&!l.border&&!l.domAtom?l.domFromPos(0,e):{node:this.contentDOM,offset:l?zn(l.dom):this.contentDOM.childNodes.length}}},{key:"parseRange",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;if(0==this.children.length)return{node:this.contentDOM,from:t,to:e,fromOffset:0,toOffset:this.contentDOM.childNodes.length};for(var r=-1,i=-1,o=n,s=0;;s++){var a=this.children[s],u=o+a.size;if(-1==r&&t<=u){var c=o+a.border;if(t>=c&&e<=u-a.border&&a.node&&a.contentDOM&&this.contentDOM.contains(a.contentDOM))return a.parseRange(t,e,c);t=o;for(var l=s;l>0;l--){var h=this.children[l-1];if(h.size&&h.dom.parentNode==this.contentDOM&&!h.emptyChildAt(1)){r=zn(h.dom)+1;break}t-=h.size}-1==r&&(r=0)}if(r>-1&&(u>e||s==this.children.length-1)){e=u;for(var d=s+1;d<this.children.length;d++){var f=this.children[d];if(f.size&&f.dom.parentNode==this.contentDOM&&!f.emptyChildAt(-1)){i=zn(f.dom);break}e+=f.size}-1==i&&(i=this.contentDOM.childNodes.length);break}o=u}return{node:this.contentDOM,from:t,to:e,fromOffset:r,toOffset:i}}},{key:"emptyChildAt",value:function(t){if(this.border||!this.contentDOM||!this.children.length)return!1;var e=this.children[t<0?0:this.children.length-1];return 0==e.size||e.emptyChildAt(t)}},{key:"domAfterPos",value:function(t){var e=this.domFromPos(t,0),n=e.node,r=e.offset;if(1!=n.nodeType||r==n.childNodes.length)throw new RangeError("No node after pos "+t);return n.childNodes[r]}},{key:"setSelection",value:function(t,e,n){for(var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=Math.min(t,e),o=Math.max(t,e),s=0,a=0;s<this.children.length;s++){var u=this.children[s],c=a+u.size;if(i>a&&o<c)return u.setSelection(t-a-u.border,e-a-u.border,n,r);a=c}var l=this.domFromPos(t,t?-1:1),h=e==t?l:this.domFromPos(e,e?-1:1),d=n.getSelection(),f=!1;if((sr||lr)&&t==e){var p=l,v=p.node,m=p.offset;if(3==v.nodeType)f=!(!m||"\n"!=v.nodeValue[m-1]);else{var g=v.childNodes[m-1];f=g&&("BR"==g.nodeName||"false"==g.contentEditable)}}if(sr&&d.focusNode&&d.focusNode!=h.node&&1==d.focusNode.nodeType){var y=d.focusNode.childNodes[d.focusOffset];y&&"false"==y.contentEditable&&(r=!0)}if(r||f&&lr||!jn(l.node,l.offset,d.anchorNode,d.anchorOffset)||!jn(h.node,h.offset,d.focusNode,d.focusOffset)){var k=!1;if((d.extend||t==e)&&!f){d.collapse(l.node,l.offset);try{t!=e&&d.extend(h.node,h.offset),k=!0}catch(D){}}if(!k){if(t>e){var b=l;l=h,h=b}var w=document.createRange();w.setEnd(h.node,h.offset),w.setStart(l.node,l.offset),d.removeAllRanges(),d.addRange(w)}}}},{key:"ignoreMutation",value:function(t){return!this.contentDOM&&"selection"!=t.type}},{key:"contentLost",get:function(){return this.contentDOM&&this.contentDOM!=this.dom&&!this.dom.contains(this.contentDOM)}},{key:"markDirty",value:function(t,e){for(var n=0,r=0;r<this.children.length;r++){var i=this.children[r],o=n+i.size;if(n==o?t<=o&&e>=n:t<o&&e>n){var s=n+i.border,a=o-i.border;if(t>=s&&e<=a)return this.dirty=t==n||e==o?Yr:Gr,void(t!=s||e!=a||!i.contentLost&&i.dom.parentNode==this.contentDOM?i.markDirty(t-s,e-s):i.dirty=Qr);i.dirty=i.dom!=i.contentDOM||i.dom.parentNode!=this.contentDOM||i.children.length?Qr:Yr}n=o}this.dirty=Yr}},{key:"markParentsDirty",value:function(){for(var t=1,e=this.parent;e;e=e.parent,t++){var n=1==t?Yr:Gr;e.dirty<n&&(e.dirty=n)}}},{key:"domAtom",get:function(){return!1}},{key:"ignoreForCoords",get:function(){return!1}}]),t}(),ti=function(t){(0,g.Z)(n,t);var e=(0,y.Z)(n);function n(t,r,i,o){var s;(0,w.Z)(this,n);var a,u=r.type.toDOM;if("function"==typeof u&&(u=u(i,(function(){return a?a.parent?a.parent.posBeforeChild(a):void 0:o}))),!r.type.spec.raw){if(1!=u.nodeType){var c=document.createElement("span");c.appendChild(u),u=c}u.contentEditable="false",u.classList.add("ProseMirror-widget")}return s=e.call(this,t,[],u,null),s.widget=r,s.widget=r,a=(0,l.Z)(s),s}return(0,D.Z)(n,[{key:"matchesWidget",value:function(t){return this.dirty==Ur&&t.type.eq(this.widget.type)}},{key:"parseRule",value:function(){return{ignore:!0}}},{key:"stopEvent",value:function(t){var e=this.widget.spec.stopEvent;return!!e&&e(t)}},{key:"ignoreMutation",value:function(t){return"selection"!=t.type||this.widget.spec.ignoreSelection}},{key:"destroy",value:function(){this.widget.type.destroy(this.dom),p((0,d.Z)(n.prototype),"destroy",this).call(this)}},{key:"domAtom",get:function(){return!0}},{key:"side",get:function(){return this.widget.type.side}}]),n}(Xr),ei=function(t){(0,g.Z)(n,t);var e=(0,y.Z)(n);function n(t,r,i,o){var s;return(0,w.Z)(this,n),s=e.call(this,t,[],r,null),s.textDOM=i,s.text=o,s}return(0,D.Z)(n,[{key:"size",get:function(){return this.text.length}},{key:"localPosFromDOM",value:function(t,e){return t!=this.textDOM?this.posAtStart+(e?this.size:0):this.posAtStart+e}},{key:"domFromPos",value:function(t){return{node:this.textDOM,offset:t}}},{key:"ignoreMutation",value:function(t){return"characterData"===t.type&&t.target.nodeValue==t.oldValue}}]),n}(Xr),ni=function(t){(0,g.Z)(n,t);var e=(0,y.Z)(n);function n(t,r,i,o){var s;return(0,w.Z)(this,n),s=e.call(this,t,[],i,o),s.mark=r,s}return(0,D.Z)(n,[{key:"parseRule",value:function(){return this.dirty&Qr||this.mark.type.spec.reparseInView?null:{mark:this.mark.type.name,attrs:this.mark.attrs,contentElement:this.contentDOM||void 0}}},{key:"matchesMark",value:function(t){return this.dirty!=Qr&&this.mark.eq(t)}},{key:"markDirty",value:function(t,e){if(p((0,d.Z)(n.prototype),"markDirty",this).call(this,t,e),this.dirty!=Ur){var r=this.parent;while(!r.node)r=r.parent;r.dirty<this.dirty&&(r.dirty=this.dirty),this.dirty=Ur}}},{key:"slice",value:function(t,e,r){var i=n.create(this.parent,this.mark,!0,r),o=this.children,s=this.size;e<s&&(o=Ci(o,e,s,r)),t>0&&(o=Ci(o,0,t,r));for(var a=0;a<o.length;a++)o[a].parent=i;return i.children=o,i}}],[{key:"create",value:function(t,e,r,i){var o=i.nodeViews[e.type.name],s=o&&o(e,i,r);return s&&s.dom||(s=In.renderSpec(document,e.type.spec.toDOM(e,r))),new n(t,e,s.dom,s.contentDOM||s.dom)}}]),n}(Xr),ri=function(t){(0,g.Z)(n,t);var e=(0,y.Z)(n);function n(t,r,i,o,s,a,u,c,l){var h;return(0,w.Z)(this,n),h=e.call(this,t,[],s,a),h.node=r,h.outerDeco=i,h.innerDeco=o,h.nodeDOM=u,h}return(0,D.Z)(n,[{key:"parseRule",value:function(){var t=this;if(this.node.type.spec.reparseInView)return null;var e={node:this.node.type.name,attrs:this.node.attrs};if("pre"==this.node.type.whitespace&&(e.preserveWhitespace="full"),this.contentDOM)if(this.contentLost){for(var n=this.children.length-1;n>=0;n--){var r=this.children[n];if(this.dom.contains(r.dom.parentNode)){e.contentElement=r.dom.parentNode;break}}e.contentElement||(e.getContent=function(){return hn.empty})}else e.contentElement=this.contentDOM;else e.getContent=function(){return t.node.content};return e}},{key:"matchesNode",value:function(t,e,n){return this.dirty==Ur&&t.eq(this.node)&&vi(e,this.outerDeco)&&n.eq(this.innerDeco)}},{key:"size",get:function(){return this.node.nodeSize}},{key:"border",get:function(){return this.node.isLeaf?0:1}},{key:"updateChildren",value:function(t,e){var n=this,r=this.node.inlineContent,i=e,o=t.composing?this.localCompositionInfo(t,e):null,s=o&&o.pos>-1?o:null,a=o&&o.pos<0,u=new gi(this,s&&s.node,t);bi(this.node,this.innerDeco,(function(e,o,s){e.spec.marks?u.syncToMarks(e.spec.marks,r,t):e.type.side>=0&&!s&&u.syncToMarks(o==n.node.childCount?vn.none:n.node.child(o).marks,r,t),u.placeWidget(e,t,i)}),(function(e,n,s,c){var l;u.syncToMarks(e.marks,r,t),u.findNodeMatch(e,n,s,c)||a&&t.state.selection.from>i&&t.state.selection.to<i+e.nodeSize&&(l=u.findIndexWithChild(o.node))>-1&&u.updateNodeAt(e,n,s,l,t)||u.updateNextNode(e,n,s,t,c,i)||u.addNode(e,n,s,t,i),i+=e.nodeSize})),u.syncToMarks([],r,t),this.node.isTextblock&&u.addTextblockHacks(),u.destroyRest(),(u.changed||this.dirty==Yr)&&(s&&this.protectLocalComposition(t,s),ui(this.contentDOM,this.children,t),hr&&wi(this.dom))}},{key:"localCompositionInfo",value:function(t,e){var n=t.state.selection,r=n.from,i=n.to;if(!(t.state.selection instanceof Ze)||r<e||i>e+this.node.content.size)return null;var o=t.domSelectionRange(),s=Di(o.focusNode,o.focusOffset);if(!s||!this.dom.contains(s.parentNode))return null;if(this.node.inlineContent){var a=s.nodeValue,u=xi(this.node.content,a,r-e,i-e);return u<0?null:{node:s,pos:u,text:a}}return{node:s,pos:-1,text:""}}},{key:"protectLocalComposition",value:function(t,e){var n=e.node,r=e.pos,i=e.text;if(!this.getDesc(n)){for(var o=n;;o=o.parentNode){if(o.parentNode==this.contentDOM)break;while(o.previousSibling)o.parentNode.removeChild(o.previousSibling);while(o.nextSibling)o.parentNode.removeChild(o.nextSibling);o.pmViewDesc&&(o.pmViewDesc=void 0)}var s=new ei(this,o,n,i);t.input.compositionNodes.push(s),this.children=Ci(this.children,r,r+i.length,t,s)}}},{key:"update",value:function(t,e,n,r){return!(this.dirty==Qr||!t.sameMarkup(this.node))&&(this.updateInner(t,e,n,r),!0)}},{key:"updateInner",value:function(t,e,n,r){this.updateOuterDeco(e),this.node=t,this.innerDeco=n,this.contentDOM&&this.updateChildren(r,this.posAtStart),this.dirty=Ur}},{key:"updateOuterDeco",value:function(t){if(!vi(t,this.outerDeco)){var e=1!=this.nodeDOM.nodeType,n=this.dom;this.dom=di(this.dom,this.nodeDOM,hi(this.outerDeco,this.node,e),hi(t,this.node,e)),this.dom!=n&&(n.pmViewDesc=void 0,this.dom.pmViewDesc=this),this.outerDeco=t}}},{key:"selectNode",value:function(){1==this.nodeDOM.nodeType&&this.nodeDOM.classList.add("ProseMirror-selectednode"),!this.contentDOM&&this.node.type.spec.draggable||(this.dom.draggable=!0)}},{key:"deselectNode",value:function(){1==this.nodeDOM.nodeType&&this.nodeDOM.classList.remove("ProseMirror-selectednode"),!this.contentDOM&&this.node.type.spec.draggable||this.dom.removeAttribute("draggable")}},{key:"domAtom",get:function(){return this.node.isAtom}}],[{key:"create",value:function(t,e,r,i,o,s){var a,u=o.nodeViews[e.type.name],c=u&&u(e,o,(function(){return a?a.parent?a.parent.posBeforeChild(a):void 0:s}),r,i),l=c&&c.dom,h=c&&c.contentDOM;if(e.isText)if(l){if(3!=l.nodeType)throw new RangeError("Text must be rendered as a DOM text node")}else l=document.createTextNode(e.text);else if(!l){var d=In.renderSpec(document,e.type.spec.toDOM(e));l=d.dom,h=d.contentDOM}h||e.isText||"BR"==l.nodeName||(l.hasAttribute("contenteditable")||(l.contentEditable="false"),e.type.spec.draggable&&(l.draggable=!0));var f=l;return l=pi(l,r,e),c?a=new ai(t,e,r,i,l,h||null,f,c,o,s+1):e.isText?new oi(t,e,r,i,l,f,o):new n(t,e,r,i,l,h||null,f,o,s+1)}}]),n}(Xr);function ii(t,e,n,r,i){pi(r,e,t);var o=new ri(void 0,t,e,n,r,r,r,i,0);return o.contentDOM&&o.updateChildren(i,0),o}var oi=function(t){(0,g.Z)(n,t);var e=(0,y.Z)(n);function n(t,r,i,o,s,a,u){return(0,w.Z)(this,n),e.call(this,t,r,i,o,s,null,a,u,0)}return(0,D.Z)(n,[{key:"parseRule",value:function(){var t=this.nodeDOM.parentNode;while(t&&t!=this.dom&&!t.pmIsDeco)t=t.parentNode;return{skip:t||!0}}},{key:"update",value:function(t,e,n,r){return!(this.dirty==Qr||this.dirty!=Ur&&!this.inParent()||!t.sameMarkup(this.node))&&(this.updateOuterDeco(e),this.dirty==Ur&&t.text==this.node.text||t.text==this.nodeDOM.nodeValue||(this.nodeDOM.nodeValue=t.text,r.trackWrites==this.nodeDOM&&(r.trackWrites=null)),this.node=t,this.dirty=Ur,!0)}},{key:"inParent",value:function(){for(var t=this.parent.contentDOM,e=this.nodeDOM;e;e=e.parentNode)if(e==t)return!0;return!1}},{key:"domFromPos",value:function(t){return{node:this.nodeDOM,offset:t}}},{key:"localPosFromDOM",value:function(t,e,r){return t==this.nodeDOM?this.posAtStart+Math.min(e,this.node.text.length):p((0,d.Z)(n.prototype),"localPosFromDOM",this).call(this,t,e,r)}},{key:"ignoreMutation",value:function(t){return"characterData"!=t.type&&"selection"!=t.type}},{key:"slice",value:function(t,e,r){var i=this.node.cut(t,e),o=document.createTextNode(i.text);return new n(this.parent,i,this.outerDeco,this.innerDeco,o,o,r)}},{key:"markDirty",value:function(t,e){p((0,d.Z)(n.prototype),"markDirty",this).call(this,t,e),this.dom==this.nodeDOM||0!=t&&e!=this.nodeDOM.nodeValue.length||(this.dirty=Qr)}},{key:"domAtom",get:function(){return!1}}]),n}(ri),si=function(t){(0,g.Z)(n,t);var e=(0,y.Z)(n);function n(){return(0,w.Z)(this,n),e.apply(this,arguments)}return(0,D.Z)(n,[{key:"parseRule",value:function(){return{ignore:!0}}},{key:"matchesHack",value:function(t){return this.dirty==Ur&&this.dom.nodeName==t}},{key:"domAtom",get:function(){return!0}},{key:"ignoreForCoords",get:function(){return"IMG"==this.dom.nodeName}}]),n}(Xr),ai=function(t){(0,g.Z)(n,t);var e=(0,y.Z)(n);function n(t,r,i,o,s,a,u,c,l,h){var d;return(0,w.Z)(this,n),d=e.call(this,t,r,i,o,s,a,u,l,h),d.spec=c,d}return(0,D.Z)(n,[{key:"update",value:function(t,e,r,i){if(this.dirty==Qr)return!1;if(this.spec.update){var o=this.spec.update(t,e,r);return o&&this.updateInner(t,e,r,i),o}return!(!this.contentDOM&&!t.isLeaf)&&p((0,d.Z)(n.prototype),"update",this).call(this,t,e,r,i)}},{key:"selectNode",value:function(){this.spec.selectNode?this.spec.selectNode():p((0,d.Z)(n.prototype),"selectNode",this).call(this)}},{key:"deselectNode",value:function(){this.spec.deselectNode?this.spec.deselectNode():p((0,d.Z)(n.prototype),"deselectNode",this).call(this)}},{key:"setSelection",value:function(t,e,r,i){this.spec.setSelection?this.spec.setSelection(t,e,r):p((0,d.Z)(n.prototype),"setSelection",this).call(this,t,e,r,i)}},{key:"destroy",value:function(){this.spec.destroy&&this.spec.destroy(),p((0,d.Z)(n.prototype),"destroy",this).call(this)}},{key:"stopEvent",value:function(t){return!!this.spec.stopEvent&&this.spec.stopEvent(t)}},{key:"ignoreMutation",value:function(t){return this.spec.ignoreMutation?this.spec.ignoreMutation(t):p((0,d.Z)(n.prototype),"ignoreMutation",this).call(this,t)}}]),n}(ri);function ui(t,e,n){for(var r=t.firstChild,i=!1,o=0;o<e.length;o++){var s=e[o],a=s.dom;if(a.parentNode==t){while(a!=r)r=mi(r),i=!0;r=r.nextSibling}else i=!0,t.insertBefore(a,r);if(s instanceof ni){var u=r?r.previousSibling:t.lastChild;ui(s.contentDOM,s.children,n),r=u?u.nextSibling:t.firstChild}}while(r)r=mi(r),i=!0;i&&n.trackWrites==t&&(n.trackWrites=null)}var ci=function(t){t&&(this.nodeName=t)};ci.prototype=Object.create(null);var li=[new ci];function hi(t,e,n){if(0==t.length)return li;for(var r=n?li[0]:new ci,i=[r],o=0;o<t.length;o++){var s=t[o].type.attrs;if(s)for(var a in s.nodeName&&i.push(r=new ci(s.nodeName)),s){var u=s[a];null!=u&&(n&&1==i.length&&i.push(r=new ci(e.isInline?"span":"div")),"class"==a?r.class=(r.class?r.class+" ":"")+u:"style"==a?r.style=(r.style?r.style+";":"")+u:"nodeName"!=a&&(r[a]=u))}}return i}function di(t,e,n,r){if(n==li&&r==li)return e;for(var i=e,o=0;o<r.length;o++){var s=r[o],a=n[o];if(o){var u=void 0;a&&a.nodeName==s.nodeName&&i!=t&&(u=i.parentNode)&&u.nodeName.toLowerCase()==s.nodeName||(u=document.createElement(s.nodeName),u.pmIsDeco=!0,u.appendChild(i),a=li[0]),i=u}fi(i,a||li[0],s)}return i}function fi(t,e,n){for(var r in e)"class"==r||"style"==r||"nodeName"==r||r in n||t.removeAttribute(r);for(var i in n)"class"!=i&&"style"!=i&&"nodeName"!=i&&n[i]!=e[i]&&t.setAttribute(i,n[i]);if(e.class!=n.class){for(var o=e.class?e.class.split(" ").filter(Boolean):[],s=n.class?n.class.split(" ").filter(Boolean):[],a=0;a<o.length;a++)-1==s.indexOf(o[a])&&t.classList.remove(o[a]);for(var u=0;u<s.length;u++)-1==o.indexOf(s[u])&&t.classList.add(s[u]);0==t.classList.length&&t.removeAttribute("class")}if(e.style!=n.style){if(e.style){var c,l=/\s*([\w\-\xa1-\uffff]+)\s*:(?:"(?:\\.|[^"])*"|'(?:\\.|[^'])*'|\(.*?\)|[^;])*/g;while(c=l.exec(e.style))t.style.removeProperty(c[1])}n.style&&(t.style.cssText+=n.style)}}function pi(t,e,n){return di(t,t,li,hi(e,n,1!=t.nodeType))}function vi(t,e){if(t.length!=e.length)return!1;for(var n=0;n<t.length;n++)if(!t[n].type.eq(e[n].type))return!1;return!0}function mi(t){var e=t.nextSibling;return t.parentNode.removeChild(t),e}var gi=function(){function t(e,n,r){(0,w.Z)(this,t),this.lock=n,this.view=r,this.index=0,this.stack=[],this.changed=!1,this.top=e,this.preMatch=yi(e.node.content,e)}return(0,D.Z)(t,[{key:"destroyBetween",value:function(t,e){if(t!=e){for(var n=t;n<e;n++)this.top.children[n].destroy();this.top.children.splice(t,e-t),this.changed=!0}}},{key:"destroyRest",value:function(){this.destroyBetween(this.index,this.top.children.length)}},{key:"syncToMarks",value:function(t,e,n){var r=0,i=this.stack.length>>1,o=Math.min(i,t.length);while(r<o&&(r==i-1?this.top:this.stack[r+1<<1]).matchesMark(t[r])&&!1!==t[r].type.spec.spanning)r++;while(r<i)this.destroyRest(),this.top.dirty=Ur,this.index=this.stack.pop(),this.top=this.stack.pop(),i--;while(i<t.length){this.stack.push(this.top,this.index+1);for(var s=-1,a=this.index;a<Math.min(this.index+3,this.top.children.length);a++){var u=this.top.children[a];if(u.matchesMark(t[i])&&!this.isLocked(u.dom)){s=a;break}}if(s>-1)s>this.index&&(this.changed=!0,this.destroyBetween(this.index,s)),this.top=this.top.children[this.index];else{var c=ni.create(this.top,t[i],e,n);this.top.children.splice(this.index,0,c),this.top=c,this.changed=!0}this.index=0,i++}}},{key:"findNodeMatch",value:function(t,e,n,r){var i,o=-1;if(r>=this.preMatch.index&&(i=this.preMatch.matches[r-this.preMatch.index]).parent==this.top&&i.matchesNode(t,e,n))o=this.top.children.indexOf(i,this.index);else for(var s=this.index,a=Math.min(this.top.children.length,s+5);s<a;s++){var u=this.top.children[s];if(u.matchesNode(t,e,n)&&!this.preMatch.matched.has(u)){o=s;break}}return!(o<0)&&(this.destroyBetween(this.index,o),this.index++,!0)}},{key:"updateNodeAt",value:function(t,e,n,r,i){var o=this.top.children[r];return o.dirty==Qr&&o.dom==o.contentDOM&&(o.dirty=Yr),!!o.update(t,e,n,i)&&(this.destroyBetween(this.index,r),this.index++,!0)}},{key:"findIndexWithChild",value:function(t){for(;;){var e=t.parentNode;if(!e)return-1;if(e==this.top.contentDOM){var n=t.pmViewDesc;if(n)for(var r=this.index;r<this.top.children.length;r++)if(this.top.children[r]==n)return r;return-1}t=e}}},{key:"updateNextNode",value:function(t,e,n,r,i,o){for(var s=this.index;s<this.top.children.length;s++){var a=this.top.children[s];if(a instanceof ri){var u=this.preMatch.matched.get(a);if(null!=u&&u!=i)return!1;var c=a.dom,l=void 0,h=this.isLocked(c)&&!(t.isText&&a.node&&a.node.isText&&a.nodeDOM.nodeValue==t.text&&a.dirty!=Qr&&vi(e,a.outerDeco));if(!h&&a.update(t,e,n,r))return this.destroyBetween(this.index,s),a.dom!=c&&(this.changed=!0),this.index++,!0;if(!h&&(l=this.recreateWrapper(a,t,e,n,r,o)))return this.top.children[this.index]=l,l.dirty=Yr,l.updateChildren(r,o+1),l.dirty=Ur,this.changed=!0,this.index++,!0;break}}return!1}},{key:"recreateWrapper",value:function(t,e,n,r,i,o){if(t.dirty||e.isAtom||!t.children.length||!t.node.content.eq(e.content))return null;var s=ri.create(this.top,e,n,r,i,o);if(!s.contentDOM)return null;s.children=t.children,t.children=[],t.destroy();var a,u=(0,c.Z)(s.children);try{for(u.s();!(a=u.n()).done;){var l=a.value;l.parent=s}}catch(h){u.e(h)}finally{u.f()}return s}},{key:"addNode",value:function(t,e,n,r,i){var o=ri.create(this.top,t,e,n,r,i);o.contentDOM&&o.updateChildren(r,i+1),this.top.children.splice(this.index++,0,o),this.changed=!0}},{key:"placeWidget",value:function(t,e,n){var r=this.index<this.top.children.length?this.top.children[this.index]:null;if(!r||!r.matchesWidget(t)||t!=r.widget&&r.widget.type.toDOM.parentNode){var i=new ti(this.top,t,e,n);this.top.children.splice(this.index++,0,i),this.changed=!0}else this.index++}},{key:"addTextblockHacks",value:function(){var t=this.top.children[this.index-1],e=this.top;while(t instanceof ni)e=t,t=e.children[e.children.length-1];(!t||!(t instanceof oi)||/\n$/.test(t.node.text)||this.view.requiresGeckoHackNode&&/\s$/.test(t.node.text))&&((lr||ur)&&t&&"false"==t.dom.contentEditable&&this.addHackNode("IMG",e),this.addHackNode("BR",this.top))}},{key:"addHackNode",value:function(t,e){if(e==this.top&&this.index<e.children.length&&e.children[this.index].matchesHack(t))this.index++;else{var n=document.createElement(t);"IMG"==t&&(n.className="ProseMirror-separator",n.alt=""),"BR"==t&&(n.className="ProseMirror-trailingBreak");var r=new si(this.top,[],n,null);e!=this.top?e.children.push(r):e.children.splice(this.index++,0,r),this.changed=!0}}},{key:"isLocked",value:function(t){return this.lock&&(t==this.lock||1==t.nodeType&&t.contains(this.lock.parentNode))}}]),t}();function yi(t,e){var n=e,r=n.children.length,i=t.childCount,o=new Map,s=[];t:while(i>0){for(var a=void 0;;)if(r){var u=n.children[r-1];if(!(u instanceof ni)){a=u,r--;break}n=u,r=u.children.length}else{if(n==e)break t;r=n.parent.children.indexOf(n),n=n.parent}var c=a.node;if(c){if(c!=t.child(i-1))break;--i,o.set(a,i),s.push(a)}}return{index:i,matched:o,matches:s.reverse()}}function ki(t,e){return t.type.side-e.type.side}function bi(t,e,n,r){var i=e.locals(t),o=0;if(0!=i.length)for(var s=0,a=[],u=null,c=0;;){if(s<i.length&&i[s].to==o){var l=i[s++],h=void 0;while(s<i.length&&i[s].to==o)(h||(h=[l])).push(i[s++]);if(h){h.sort(ki);for(var d=0;d<h.length;d++)n(h[d],c,!!u)}else n(l,c,!!u)}var f=void 0,p=void 0;if(u)p=-1,f=u,u=null;else{if(!(c<t.childCount))break;p=c,f=t.child(c++)}for(var v=0;v<a.length;v++)a[v].to<=o&&a.splice(v--,1);while(s<i.length&&i[s].from<=o&&i[s].to>o)a.push(i[s++]);var m=o+f.nodeSize;if(f.isText){var g=m;s<i.length&&i[s].from<g&&(g=i[s].from);for(var y=0;y<a.length;y++)a[y].to<g&&(g=a[y].to);g<m&&(u=f.cut(g-o),f=f.cut(0,g-o),m=g,p=-1)}var k=f.isInline&&!f.isLeaf?a.filter((function(t){return!t.inline})):a.slice();r(f,k,e.forChild(o,f),p),o=m}else for(var b=0;b<t.childCount;b++){var w=t.child(b);r(w,i,e.forChild(o,w),b),o+=w.nodeSize}}function wi(t){if("UL"==t.nodeName||"OL"==t.nodeName){var e=t.style.cssText;t.style.cssText=e+"; list-style: square !important",window.getComputedStyle(t).listStyle,t.style.cssText=e}}function Di(t,e){for(;;){if(3==t.nodeType)return t;if(1==t.nodeType&&e>0){if(t.childNodes.length>e&&3==t.childNodes[e].nodeType)return t.childNodes[e];t=t.childNodes[e-1],e=Hn(t)}else{if(!(1==t.nodeType&&e<t.childNodes.length))return null;t=t.childNodes[e],e=0}}}function xi(t,e,n,r){for(var i=0,o=0;i<t.childCount&&o<=r;){var s=t.child(i++),a=o;if(o+=s.nodeSize,s.isText){var u=s.text;while(i<t.childCount){var c=t.child(i++);if(o+=c.nodeSize,!c.isText)break;u+=c.text}if(o>=n){var l=a<r?u.lastIndexOf(e,r-a-1):-1;if(l>=0&&l+e.length+a>=n)return a+l;if(n==r&&u.length>=r+e.length-a&&u.slice(r-a,r-a+e.length)==e)return r}}}return-1}function Ci(t,e,n,r,i){for(var o=[],s=0,a=0;s<t.length;s++){var u=t[s],c=a,l=a+=u.size;c>=n||l<=e?o.push(u):(c<e&&o.push(u.slice(0,e-c,r)),i&&(o.push(i),i=void 0),l>n&&o.push(u.slice(n-c,u.size,r)))}return o}function Ai(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=t.domSelectionRange(),r=t.state.doc;if(!n.focusNode)return null;var i=t.docView.nearestDesc(n.focusNode),o=i&&0==i.size,s=t.docView.posFromDOM(n.focusNode,n.focusOffset,1);if(s<0)return null;var a,u,c=r.resolve(s);if(Wn(n)){a=c;while(i&&!i.node)i=i.parent;var l=i.node;if(i&&l.isAtom&&je.isSelectable(l)&&i.parent&&(!l.isInline||!Jn(n.focusNode,n.focusOffset,i.dom))){var h=i.posBefore;u=new je(s==h?c:r.resolve(h))}}else{var d=t.docView.posFromDOM(n.anchorNode,n.anchorOffset,1);if(d<0)return null;a=r.resolve(d)}if(!u){var f="pointer"==e||t.state.selection.head<c.pos&&!o?1:-1;u=Li(t,a,c,f)}return u}function Ei(t){return t.editable?t.hasFocus():zi(t)&&document.activeElement&&document.activeElement.contains(t.dom)}function Si(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=t.state.selection;if(Bi(t,n),Ei(t)){if(!e&&t.input.mouseDown&&t.input.mouseDown.allowDefault&&ur){var r=t.domSelectionRange(),i=t.domObserver.currentSelection;if(r.anchorNode&&i.anchorNode&&jn(r.anchorNode,r.anchorOffset,i.anchorNode,i.anchorOffset))return t.input.mouseDown.delayedSelectionSync=!0,void t.domObserver.setCurSelection()}if(t.domObserver.disconnectSelection(),t.cursorWrapper)Ni(t);else{var o,s,a=n.anchor,u=n.head;!_i||n instanceof Ze||(n.$from.parent.inlineContent||(o=Mi(t,n.from)),n.empty||n.$from.parent.inlineContent||(s=Mi(t,n.to))),t.docView.setSelection(a,u,t.root,e),_i&&(o&&Ti(o),s&&Ti(s)),n.visible?t.dom.classList.remove("ProseMirror-hideselection"):(t.dom.classList.add("ProseMirror-hideselection"),"onselectionchange"in document&&Fi(t))}t.domObserver.setCurSelection(),t.domObserver.connectSelection()}}var _i=lr||ur&&cr<63;function Mi(t,e){var n=t.docView.domFromPos(e,0),r=n.node,i=n.offset,o=i<r.childNodes.length?r.childNodes[i]:null,s=i?r.childNodes[i-1]:null;if(lr&&o&&"false"==o.contentEditable)return Oi(o);if((!o||"false"==o.contentEditable)&&(!s||"false"==s.contentEditable)){if(o)return Oi(o);if(s)return Oi(s)}}function Oi(t){return t.contentEditable="true",lr&&t.draggable&&(t.draggable=!1,t.wasDraggable=!0),t}function Ti(t){t.contentEditable="false",t.wasDraggable&&(t.draggable=!0,t.wasDraggable=null)}function Fi(t){var e=t.dom.ownerDocument;e.removeEventListener("selectionchange",t.input.hideSelectionGuard);var n=t.domSelectionRange(),r=n.anchorNode,i=n.anchorOffset;e.addEventListener("selectionchange",t.input.hideSelectionGuard=function(){n.anchorNode==r&&n.anchorOffset==i||(e.removeEventListener("selectionchange",t.input.hideSelectionGuard),setTimeout((function(){Ei(t)&&!t.state.selection.visible||t.dom.classList.remove("ProseMirror-hideselection")}),20))})}function Ni(t){var e=t.domSelection(),n=document.createRange(),r=t.cursorWrapper.dom,i="IMG"==r.nodeName;i?n.setEnd(r.parentNode,zn(r)+1):n.setEnd(r,0),n.collapse(!1),e.removeAllRanges(),e.addRange(n),!i&&!t.state.selection.visible&&ir&&or<=11&&(r.disabled=!0,r.disabled=!1)}function Bi(t,e){if(e instanceof je){var n=t.docView.descAt(e.from);n!=t.lastSelectedViewDesc&&(Ii(t),n&&n.selectNode(),t.lastSelectedViewDesc=n)}else Ii(t)}function Ii(t){t.lastSelectedViewDesc&&(t.lastSelectedViewDesc.parent&&t.lastSelectedViewDesc.deselectNode(),t.lastSelectedViewDesc=void 0)}function Li(t,e,n,r){return t.someProp("createSelectionBetween",(function(r){return r(t,e,n)}))||Ze.between(e,n,r)}function Ri(t){return!(t.editable&&!t.hasFocus())&&zi(t)}function zi(t){var e=t.domSelectionRange();if(!e.anchorNode)return!1;try{return t.dom.contains(3==e.anchorNode.nodeType?e.anchorNode.parentNode:e.anchorNode)&&(t.editable||t.dom.contains(3==e.focusNode.nodeType?e.focusNode.parentNode:e.focusNode))}catch(n){return!1}}function Pi(t){var e=t.docView.domFromPos(t.state.selection.anchor,0),n=t.domSelectionRange();return jn(e.node,e.offset,n.anchorNode,n.anchorOffset)}function Zi(t,e){var n=t.selection,r=n.$anchor,i=n.$head,o=e>0?r.max(i):r.min(i),s=o.parent.inlineContent?o.depth?t.doc.resolve(e>0?o.after():o.before()):null:o;return s&&Le.findFrom(s,e)}function qi(t,e){return t.dispatch(t.state.tr.setSelection(e).scrollIntoView()),!0}function ji(t,e,n){var r=t.state.selection;if(!(r instanceof Ze)){if(r instanceof je&&r.node.isInline)return qi(t,new Ze(e>0?r.$to:r.$from));var i=Zi(t.state,e);return!!i&&qi(t,i)}if(!r.empty||n.indexOf("s")>-1)return!1;if(t.endOfTextblock(e>0?"forward":"backward")){var o=Zi(t.state,e);return!!(o&&o instanceof je)&&qi(t,o)}if(!(dr&&n.indexOf("m")>-1)){var s,a=r.$head,u=a.textOffset?null:e<0?a.nodeBefore:a.nodeAfter;if(!u||u.isText)return!1;var c=e<0?a.pos-u.nodeSize:a.pos;return!!(u.isAtom||(s=t.docView.descAt(c))&&!s.contentDOM)&&(je.isSelectable(u)?qi(t,new je(e<0?t.state.doc.resolve(a.pos-u.nodeSize):a)):!!vr&&qi(t,new Ze(t.state.doc.resolve(e<0?c:c+u.nodeSize))))}}function $i(t){return 3==t.nodeType?t.nodeValue.length:t.childNodes.length}function Vi(t){var e=t.pmViewDesc;return e&&0==e.size&&(t.nextSibling||"BR"!=t.nodeName)}function Hi(t,e){return e<0?Ji(t):Ki(t)}function Ji(t){var e=t.domSelectionRange(),n=e.focusNode,r=e.focusOffset;if(n){var i,o,s=!1;for(sr&&1==n.nodeType&&r<$i(n)&&Vi(n.childNodes[r])&&(s=!0);;)if(r>0){if(1!=n.nodeType)break;var a=n.childNodes[r-1];if(Vi(a))i=n,o=--r;else{if(3!=a.nodeType)break;n=a,r=n.nodeValue.length}}else{if(Wi(n))break;var u=n.previousSibling;while(u&&Vi(u))i=n.parentNode,o=zn(u),u=u.previousSibling;if(u)n=u,r=$i(n);else{if(n=n.parentNode,n==t.dom)break;r=0}}s?Ui(t,n,r):i&&Ui(t,i,o)}}function Ki(t){var e=t.domSelectionRange(),n=e.focusNode,r=e.focusOffset;if(n){for(var i,o,s=$i(n);;)if(r<s){if(1!=n.nodeType)break;var a=n.childNodes[r];if(!Vi(a))break;i=n,o=++r}else{if(Wi(n))break;var u=n.nextSibling;while(u&&Vi(u))i=u.parentNode,o=zn(u)+1,u=u.nextSibling;if(u)n=u,r=0,s=$i(n);else{if(n=n.parentNode,n==t.dom)break;r=s=0}}i&&Ui(t,i,o)}}function Wi(t){var e=t.pmViewDesc;return e&&e.node&&e.node.isBlock}function Ui(t,e,n){var r=t.domSelection();if(Wn(r)){var i=document.createRange();i.setEnd(e,n),i.setStart(e,n),r.removeAllRanges(),r.addRange(i)}else r.extend&&r.extend(e,n);t.domObserver.setCurSelection();var o=t.state;setTimeout((function(){t.state==o&&Si(t)}),50)}function Gi(t,e){var n=t.state.doc.resolve(e);if(!ur&&!fr&&n.parent.inlineContent){var r=t.coordsAtPos(e);if(e>n.start()){var i=t.coordsAtPos(e-1),o=(i.top+i.bottom)/2;if(o>r.top&&o<r.bottom&&Math.abs(i.left-r.left)>1)return i.left<r.left?"ltr":"rtl"}if(e<n.end()){var s=t.coordsAtPos(e+1),a=(s.top+s.bottom)/2;if(a>r.top&&a<r.bottom&&Math.abs(s.left-r.left)>1)return s.left>r.left?"ltr":"rtl"}}var u=getComputedStyle(t.dom).direction;return"rtl"==u?"rtl":"ltr"}function Yi(t,e,n){var r=t.state.selection;if(r instanceof Ze&&!r.empty||n.indexOf("s")>-1)return!1;if(dr&&n.indexOf("m")>-1)return!1;var i=r.$from,o=r.$to;if(!i.parent.inlineContent||t.endOfTextblock(e<0?"up":"down")){var s=Zi(t.state,e);if(s&&s instanceof je)return qi(t,s)}if(!i.parent.inlineContent){var a=e<0?i:o,u=r instanceof Ve?Le.near(a,e):Le.findFrom(a,e);return!!u&&qi(t,u)}return!1}function Qi(t,e){if(!(t.state.selection instanceof Ze))return!0;var n=t.state.selection,r=n.$head,i=n.$anchor,o=n.empty;if(!r.sameParent(i))return!0;if(!o)return!1;if(t.endOfTextblock(e>0?"forward":"backward"))return!0;var s=!r.textOffset&&(e<0?r.nodeBefore:r.nodeAfter);if(s&&!s.isText){var a=t.state.tr;return e<0?a.delete(r.pos-s.nodeSize,r.pos):a.delete(r.pos,r.pos+s.nodeSize),t.dispatch(a),!0}return!1}function Xi(t,e,n){t.domObserver.stop(),e.contentEditable=n,t.domObserver.start()}function to(t){if(!lr||t.state.selection.$head.parentOffset>0)return!1;var e=t.domSelectionRange(),n=e.focusNode,r=e.focusOffset;if(n&&1==n.nodeType&&0==r&&n.firstChild&&"false"==n.firstChild.contentEditable){var i=n.firstChild;Xi(t,i,"true"),setTimeout((function(){return Xi(t,i,"false")}),20)}return!1}function eo(t){var e="";return t.ctrlKey&&(e+="c"),t.metaKey&&(e+="m"),t.altKey&&(e+="a"),t.shiftKey&&(e+="s"),e}function no(t,e){var n=e.keyCode,r=eo(e);if(8==n||dr&&72==n&&"c"==r)return Qi(t,-1)||Hi(t,-1);if(46==n||dr&&68==n&&"c"==r)return Qi(t,1)||Hi(t,1);if(13==n||27==n)return!0;if(37==n||dr&&66==n&&"c"==r){var i=37==n?"ltr"==Gi(t,t.state.selection.from)?-1:1:-1;return ji(t,i,r)||Hi(t,i)}if(39==n||dr&&70==n&&"c"==r){var o=39==n?"ltr"==Gi(t,t.state.selection.from)?1:-1:1;return ji(t,o,r)||Hi(t,o)}return 38==n||dr&&80==n&&"c"==r?Yi(t,-1,r)||Hi(t,-1):40==n||dr&&78==n&&"c"==r?to(t)||Yi(t,1,r)||Ki(t):r==(dr?"m":"c")&&(66==n||73==n||89==n||90==n)}function ro(t,e){t.someProp("transformCopied",(function(n){e=n(e,t)}));var n=[],r=e,i=r.content,o=r.openStart,s=r.openEnd;while(o>1&&s>1&&1==i.childCount&&1==i.firstChild.childCount){o--,s--;var a=i.firstChild;n.push(a.type.name,a.attrs!=a.type.defaultAttrs?a.attrs:null),i=a.content}var u=t.someProp("clipboardSerializer")||In.fromSchema(t.state.schema),c=vo(),l=c.createElement("div");l.appendChild(u.serializeFragment(i,{document:c}));var h,d=l.firstChild,f=0;while(d&&1==d.nodeType&&(h=fo[d.nodeName.toLowerCase()])){for(var p=h.length-1;p>=0;p--){var v=c.createElement(h[p]);while(l.firstChild)v.appendChild(l.firstChild);l.appendChild(v),f++}d=l.firstChild}d&&1==d.nodeType&&d.setAttribute("data-pm-slice","".concat(o," ").concat(s).concat(f?" -".concat(f):""," ").concat(JSON.stringify(n)));var m=t.someProp("clipboardTextSerializer",(function(n){return n(e,t)}))||e.content.textBetween(0,e.content.size,"\n\n");return{dom:l,text:m}}function io(t,e,n,r,i){var o,s,a=i.parent.type.spec.code;if(!n&&!e)return null;var u=e&&(r||a||!n);if(u){if(t.someProp("transformPastedText",(function(n){e=n(e,a||r,t)})),a)return e?new mn(hn.from(t.state.schema.text(e.replace(/\r\n?/g,"\n"))),0,0):mn.empty;var c=t.someProp("clipboardTextParser",(function(n){return n(e,i,r,t)}));if(c)s=c;else{var l=i.marks(),h=t.state.schema,d=In.fromSchema(h);o=document.createElement("div"),e.split(/(?:\r\n?|\n)+/).forEach((function(t){var e=o.appendChild(document.createElement("p"));t&&e.appendChild(d.serializeNode(h.text(t,l)))}))}}else t.someProp("transformPastedHTML",(function(e){n=e(n,t)})),o=mo(n),vr&&go(o);var f=o&&o.querySelector("[data-pm-slice]"),p=f&&/^(\d+) (\d+)(?: -(\d+))? (.*)/.exec(f.getAttribute("data-pm-slice")||"");if(p&&p[3])for(var v=+p[3];v>0;v--){var m=o.firstChild;while(m&&1!=m.nodeType)m=m.nextSibling;if(!m)break;o=m}if(!s){var g=t.someProp("clipboardParser")||t.someProp("domParser")||kn.fromSchema(t.state.schema);s=g.parseSlice(o,{preserveWhitespace:!(!u&&!p),context:i,ruleFromNode:function(t){return"BR"!=t.nodeName||t.nextSibling||!t.parentNode||oo.test(t.parentNode.nodeName)?null:{ignore:!0}}})}if(p)s=yo(ho(s,+p[1],+p[2]),p[4]);else if(s=mn.maxOpen(so(s.content,i),!0),s.openStart||s.openEnd){for(var y=0,k=0,b=s.content.firstChild;y<s.openStart&&!b.type.spec.isolating;y++,b=b.firstChild);for(var w=s.content.lastChild;k<s.openEnd&&!w.type.spec.isolating;k++,w=w.lastChild);s=ho(s,y,k)}return t.someProp("transformPasted",(function(e){s=e(s,t)})),s}var oo=/^(a|abbr|acronym|b|cite|code|del|em|i|ins|kbd|label|output|q|ruby|s|samp|span|strong|sub|sup|time|u|tt|var)$/i;function so(t,e){if(t.childCount<2)return t;for(var n=function(){var n,i=e.node(r),o=i.contentMatchAt(e.index(r)),s=[];if(t.forEach((function(t){if(s){var e,r=o.findWrapping(t.type);if(!r)return s=null;if(e=s.length&&n.length&&uo(r,n,t,s[s.length-1],0))s[s.length-1]=e;else{s.length&&(s[s.length-1]=co(s[s.length-1],n.length));var i=ao(t,r);s.push(i),o=o.matchType(i.type),n=r}}})),s)return{v:hn.from(s)}},r=e.depth;r>=0;r--){var i=n();if("object"===(0,b.Z)(i))return i.v}return t}function ao(t,e){for(var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=e.length-1;r>=n;r--)t=e[r].create(null,hn.from(t));return t}function uo(t,e,n,r,i){if(i<t.length&&i<e.length&&t[i]==e[i]){var o=uo(t,e,n,r.lastChild,i+1);if(o)return r.copy(r.content.replaceChild(r.childCount-1,o));var s=r.contentMatchAt(r.childCount);if(s.matchType(i==t.length-1?n.type:t[i+1]))return r.copy(r.content.append(hn.from(ao(n,t,i+1))))}}function co(t,e){if(0==e)return t;var n=t.content.replaceChild(t.childCount-1,co(t.lastChild,e-1)),r=t.contentMatchAt(t.childCount).fillBefore(hn.empty,!0);return t.copy(n.append(r))}function lo(t,e,n,r,i,o){var s=e<0?t.firstChild:t.lastChild,a=s.content;return t.childCount>1&&(o=0),i<r-1&&(a=lo(a,e,n,r,i+1,o)),i>=n&&(a=e<0?s.contentMatchAt(0).fillBefore(a,o<=i).append(a):a.append(s.contentMatchAt(s.childCount).fillBefore(hn.empty,!0))),t.replaceChild(e<0?0:t.childCount-1,s.copy(a))}function ho(t,e,n){return e<t.openStart&&(t=new mn(lo(t.content,-1,e,t.openStart,0,t.openEnd),e,t.openEnd)),n<t.openEnd&&(t=new mn(lo(t.content,1,n,t.openEnd,0,0),t.openStart,n)),t}var fo={thead:["table"],tbody:["table"],tfoot:["table"],caption:["table"],colgroup:["table"],col:["table","colgroup"],tr:["table","tbody"],td:["table","tbody","tr"],th:["table","tbody","tr"]},po=null;function vo(){return po||(po=document.implementation.createHTMLDocument("title"))}function mo(t){var e=/^(\s*<meta [^>]*>)*/.exec(t);e&&(t=t.slice(e[0].length));var n,r=vo().createElement("div"),i=/<([a-z][^>\s]+)/i.exec(t);if((n=i&&fo[i[1].toLowerCase()])&&(t=n.map((function(t){return"<"+t+">"})).join("")+t+n.map((function(t){return"</"+t+">"})).reverse().join("")),r.innerHTML=t,n)for(var o=0;o<n.length;o++)r=r.querySelector(n[o])||r;return r}function go(t){for(var e=t.querySelectorAll(ur?"span:not([class]):not([style])":"span.Apple-converted-space"),n=0;n<e.length;n++){var r=e[n];1==r.childNodes.length&&" "==r.textContent&&r.parentNode&&r.parentNode.replaceChild(t.ownerDocument.createTextNode(" "),r)}}function yo(t,e){if(!t.size)return t;var n,r=t.content.firstChild.type.schema;try{n=JSON.parse(e)}catch(c){return t}for(var i=t.content,o=t.openStart,s=t.openEnd,a=n.length-2;a>=0;a-=2){var u=r.nodes[n[a]];if(!u||u.hasRequiredAttrs())break;i=hn.from(u.create(n[a+1],i)),o++,s++}return new mn(i,o,s)}var ko={},bo={},wo={touchstart:!0,touchmove:!0},Do=(0,D.Z)((function t(){(0,w.Z)(this,t),this.shiftKey=!1,this.mouseDown=null,this.lastKeyCode=null,this.lastKeyCodeTime=0,this.lastClick={time:0,x:0,y:0,type:""},this.lastSelectionOrigin=null,this.lastSelectionTime=0,this.lastIOSEnter=0,this.lastIOSEnterFallbackTimeout=-1,this.lastFocus=0,this.lastTouch=0,this.lastAndroidDelete=0,this.composing=!1,this.composingTimeout=-1,this.compositionNodes=[],this.compositionEndedAt=-2e8,this.compositionID=1,this.domChangeCount=0,this.eventHandlers=Object.create(null),this.hideSelectionGuard=null}));function xo(t){var e=function(){var e=ko[n];t.dom.addEventListener(n,t.input.eventHandlers[n]=function(n){!_o(t,n)||So(t,n)||!t.editable&&n.type in bo||e(t,n)},wo[n]?{passive:!0}:void 0)};for(var n in ko)e();lr&&t.dom.addEventListener("input",(function(){return null})),Eo(t)}function Co(t,e){t.input.lastSelectionOrigin=e,t.input.lastSelectionTime=Date.now()}function Ao(t){for(var e in t.domObserver.stop(),t.input.eventHandlers)t.dom.removeEventListener(e,t.input.eventHandlers[e]);clearTimeout(t.input.composingTimeout),clearTimeout(t.input.lastIOSEnterFallbackTimeout)}function Eo(t){t.someProp("handleDOMEvents",(function(e){for(var n in e)t.input.eventHandlers[n]||t.dom.addEventListener(n,t.input.eventHandlers[n]=function(e){return So(t,e)})}))}function So(t,e){return t.someProp("handleDOMEvents",(function(n){var r=n[e.type];return!!r&&(r(t,e)||e.defaultPrevented)}))}function _o(t,e){if(!e.bubbles)return!0;if(e.defaultPrevented)return!1;for(var n=e.target;n!=t.dom;n=n.parentNode)if(!n||11==n.nodeType||n.pmViewDesc&&n.pmViewDesc.stopEvent(e))return!1;return!0}function Mo(t,e){So(t,e)||!ko[e.type]||!t.editable&&e.type in bo||ko[e.type](t,e)}function Oo(t){return{left:t.clientX,top:t.clientY}}function To(t,e){var n=e.x-t.clientX,r=e.y-t.clientY;return n*n+r*r<100}function Fo(t,e,n,r,i){if(-1==r)return!1;for(var o=t.state.doc.resolve(r),s=function(r){if(t.someProp(e,(function(e){return r>o.depth?e(t,n,o.nodeAfter,o.before(r),i,!0):e(t,n,o.node(r),o.before(r),i,!1)})))return{v:!0}},a=o.depth+1;a>0;a--){var u=s(a);if("object"===(0,b.Z)(u))return u.v}return!1}function No(t,e,n){t.focused||t.focus();var r=t.state.tr.setSelection(e);"pointer"==n&&r.setMeta("pointer",!0),t.dispatch(r)}function Bo(t,e){if(-1==e)return!1;var n=t.state.doc.resolve(e),r=n.nodeAfter;return!!(r&&r.isAtom&&je.isSelectable(r))&&(No(t,new je(n),"pointer"),!0)}function Io(t,e){if(-1==e)return!1;var n,r,i=t.state.selection;i instanceof je&&(n=i.node);for(var o=t.state.doc.resolve(e),s=o.depth+1;s>0;s--){var a=s>o.depth?o.nodeAfter:o.node(s);if(je.isSelectable(a)){r=n&&i.$from.depth>0&&s>=i.$from.depth&&o.before(i.$from.depth+1)==i.$from.pos?o.before(i.$from.depth):o.before(s);break}}return null!=r&&(No(t,je.create(t.state.doc,r),"pointer"),!0)}function Lo(t,e,n,r,i){return Fo(t,"handleClickOn",e,n,r)||t.someProp("handleClick",(function(n){return n(t,e,r)}))||(i?Io(t,n):Bo(t,n))}function Ro(t,e,n,r){return Fo(t,"handleDoubleClickOn",e,n,r)||t.someProp("handleDoubleClick",(function(n){return n(t,e,r)}))}function zo(t,e,n,r){return Fo(t,"handleTripleClickOn",e,n,r)||t.someProp("handleTripleClick",(function(n){return n(t,e,r)}))||Po(t,n,r)}function Po(t,e,n){if(0!=n.button)return!1;var r=t.state.doc;if(-1==e)return!!r.inlineContent&&(No(t,Ze.create(r,0,r.content.size),"pointer"),!0);for(var i=r.resolve(e),o=i.depth+1;o>0;o--){var s=o>i.depth?i.nodeAfter:i.node(o),a=i.before(o);if(s.inlineContent)No(t,Ze.create(r,a+1,a+1+s.content.size),"pointer");else{if(!je.isSelectable(s))continue;No(t,je.create(r,a),"pointer")}return!0}}function Zo(t){return Wo(t)}bo.keydown=function(t,e){var n=e;if(t.input.shiftKey=16==n.keyCode||n.shiftKey,!$o(t,n)&&(t.input.lastKeyCode=n.keyCode,t.input.lastKeyCodeTime=Date.now(),!pr||!ur||13!=n.keyCode))if(229!=n.keyCode&&t.domObserver.forceFlush(),!hr||13!=n.keyCode||n.ctrlKey||n.altKey||n.metaKey)t.someProp("handleKeyDown",(function(e){return e(t,n)}))||no(t,n)?n.preventDefault():Co(t,"key");else{var r=Date.now();t.input.lastIOSEnter=r,t.input.lastIOSEnterFallbackTimeout=setTimeout((function(){t.input.lastIOSEnter==r&&(t.someProp("handleKeyDown",(function(e){return e(t,Un(13,"Enter"))})),t.input.lastIOSEnter=0)}),200)}},bo.keyup=function(t,e){16==e.keyCode&&(t.input.shiftKey=!1)},bo.keypress=function(t,e){var n=e;if(!($o(t,n)||!n.charCode||n.ctrlKey&&!n.altKey||dr&&n.metaKey))if(t.someProp("handleKeyPress",(function(e){return e(t,n)})))n.preventDefault();else{var r=t.state.selection;if(!(r instanceof Ze)||!r.$from.sameParent(r.$to)){var i=String.fromCharCode(n.charCode);/[\r\n]/.test(i)||t.someProp("handleTextInput",(function(e){return e(t,r.$from.pos,r.$to.pos,i)}))||t.dispatch(t.state.tr.insertText(i).scrollIntoView()),n.preventDefault()}}};var qo=dr?"metaKey":"ctrlKey";ko.mousedown=function(t,e){var n=e;t.input.shiftKey=n.shiftKey;var r=Zo(t),i=Date.now(),o="singleClick";i-t.input.lastClick.time<500&&To(n,t.input.lastClick)&&!n[qo]&&("singleClick"==t.input.lastClick.type?o="doubleClick":"doubleClick"==t.input.lastClick.type&&(o="tripleClick")),t.input.lastClick={time:i,x:n.clientX,y:n.clientY,type:o};var s=t.posAtCoords(Oo(n));s&&("singleClick"==o?(t.input.mouseDown&&t.input.mouseDown.done(),t.input.mouseDown=new jo(t,s,n,!!r)):("doubleClick"==o?Ro:zo)(t,s.pos,s.inside,n)?n.preventDefault():Co(t,"pointer"))};var jo=function(){function t(e,n,r,i){var o,s,a=this;if((0,w.Z)(this,t),this.view=e,this.pos=n,this.event=r,this.flushed=i,this.delayedSelectionSync=!1,this.mightDrag=null,this.startDoc=e.state.doc,this.selectNode=!!r[qo],this.allowDefault=r.shiftKey,n.inside>-1)o=e.state.doc.nodeAt(n.inside),s=n.inside;else{var u=e.state.doc.resolve(n.pos);o=u.parent,s=u.depth?u.before():0}var c=i?null:r.target,l=c?e.docView.nearestDesc(c,!0):null;this.target=l?l.dom:null;var h=e.state.selection;(0==r.button&&o.type.spec.draggable&&!1!==o.type.spec.selectable||h instanceof je&&h.from<=s&&h.to>s)&&(this.mightDrag={node:o,pos:s,addAttr:!(!this.target||this.target.draggable),setUneditable:!(!this.target||!sr||this.target.hasAttribute("contentEditable"))}),this.target&&this.mightDrag&&(this.mightDrag.addAttr||this.mightDrag.setUneditable)&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&(this.target.draggable=!0),this.mightDrag.setUneditable&&setTimeout((function(){a.view.input.mouseDown==a&&a.target.setAttribute("contentEditable","false")}),20),this.view.domObserver.start()),e.root.addEventListener("mouseup",this.up=this.up.bind(this)),e.root.addEventListener("mousemove",this.move=this.move.bind(this)),Co(e,"pointer")}return(0,D.Z)(t,[{key:"done",value:function(){var t=this;this.view.root.removeEventListener("mouseup",this.up),this.view.root.removeEventListener("mousemove",this.move),this.mightDrag&&this.target&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&this.target.removeAttribute("draggable"),this.mightDrag.setUneditable&&this.target.removeAttribute("contentEditable"),this.view.domObserver.start()),this.delayedSelectionSync&&setTimeout((function(){return Si(t.view)})),this.view.input.mouseDown=null}},{key:"up",value:function(t){if(this.done(),this.view.dom.contains(t.target)){var e=this.pos;this.view.state.doc!=this.startDoc&&(e=this.view.posAtCoords(Oo(t))),this.updateAllowDefault(t),this.allowDefault||!e?Co(this.view,"pointer"):Lo(this.view,e.pos,e.inside,t,this.selectNode)?t.preventDefault():0==t.button&&(this.flushed||lr&&this.mightDrag&&!this.mightDrag.node.isAtom||ur&&!this.view.state.selection.visible&&Math.min(Math.abs(e.pos-this.view.state.selection.from),Math.abs(e.pos-this.view.state.selection.to))<=2)?(No(this.view,Le.near(this.view.state.doc.resolve(e.pos)),"pointer"),t.preventDefault()):Co(this.view,"pointer")}}},{key:"move",value:function(t){this.updateAllowDefault(t),Co(this.view,"pointer"),0==t.buttons&&this.done()}},{key:"updateAllowDefault",value:function(t){!this.allowDefault&&(Math.abs(this.event.x-t.clientX)>4||Math.abs(this.event.y-t.clientY)>4)&&(this.allowDefault=!0)}}]),t}();function $o(t,e){return!!t.composing||!!(lr&&Math.abs(e.timeStamp-t.input.compositionEndedAt)<500)&&(t.input.compositionEndedAt=-2e8,!0)}ko.touchstart=function(t){t.input.lastTouch=Date.now(),Zo(t),Co(t,"pointer")},ko.touchmove=function(t){t.input.lastTouch=Date.now(),Co(t,"pointer")},ko.contextmenu=function(t){return Zo(t)};var Vo=pr?5e3:-1;function Ho(t,e){clearTimeout(t.input.composingTimeout),e>-1&&(t.input.composingTimeout=setTimeout((function(){return Wo(t)}),e))}function Jo(t){t.composing&&(t.input.composing=!1,t.input.compositionEndedAt=Ko());while(t.input.compositionNodes.length>0)t.input.compositionNodes.pop().markParentsDirty()}function Ko(){var t=document.createEvent("Event");return t.initEvent("event",!0,!0),t.timeStamp}function Wo(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!(pr&&t.domObserver.flushingSoon>=0)){if(t.domObserver.forceFlush(),Jo(t),e||t.docView&&t.docView.dirty){var n=Ai(t);return n&&!n.eq(t.state.selection)?t.dispatch(t.state.tr.setSelection(n)):t.updateState(t.state),!0}return!1}}function Uo(t,e){if(t.dom.parentNode){var n=t.dom.parentNode.appendChild(document.createElement("div"));n.appendChild(e),n.style.cssText="position: fixed; left: -10000px; top: 10px";var r=getSelection(),i=document.createRange();i.selectNodeContents(e),t.dom.blur(),r.removeAllRanges(),r.addRange(i),setTimeout((function(){n.parentNode&&n.parentNode.removeChild(n),t.focus()}),50)}}bo.compositionstart=bo.compositionupdate=function(t){if(!t.composing){t.domObserver.flush();var e=t.state,n=e.selection.$from;if(e.selection.empty&&(e.storedMarks||!n.textOffset&&n.parentOffset&&n.nodeBefore.marks.some((function(t){return!1===t.type.spec.inclusive}))))t.markCursor=t.state.storedMarks||n.marks(),Wo(t,!0),t.markCursor=null;else if(Wo(t),sr&&e.selection.empty&&n.parentOffset&&!n.textOffset&&n.nodeBefore.marks.length)for(var r=t.domSelectionRange(),i=r.focusNode,o=r.focusOffset;i&&1==i.nodeType&&0!=o;){var s=o<0?i.lastChild:i.childNodes[o-1];if(!s)break;if(3==s.nodeType){t.domSelection().collapse(s,s.nodeValue.length);break}i=s,o=-1}t.input.composing=!0}Ho(t,Vo)},bo.compositionend=function(t,e){t.composing&&(t.input.composing=!1,t.input.compositionEndedAt=e.timeStamp,t.input.compositionID++,Ho(t,20))};var Go=ir&&or<15||hr&&mr<604;function Yo(t){return 0==t.openStart&&0==t.openEnd&&1==t.content.childCount?t.content.firstChild:null}function Qo(t,e){if(t.dom.parentNode){var n=t.input.shiftKey||t.state.selection.$from.parent.type.spec.code,r=t.dom.parentNode.appendChild(document.createElement(n?"textarea":"div"));n||(r.contentEditable="true"),r.style.cssText="position: fixed; left: -10000px; top: 10px",r.focus(),setTimeout((function(){t.focus(),r.parentNode&&r.parentNode.removeChild(r),n?Xo(t,r.value,null,t.input.shiftKey,e):Xo(t,r.textContent,r.innerHTML,t.input.shiftKey,e)}),50)}}function Xo(t,e,n,r,i){var o=io(t,e,n,r,t.state.selection.$from);if(t.someProp("handlePaste",(function(e){return e(t,i,o||mn.empty)})))return!0;if(!o)return!1;var s=Yo(o),a=s?t.state.tr.replaceSelectionWith(s,t.input.shiftKey):t.state.tr.replaceSelection(o);return t.dispatch(a.scrollIntoView().setMeta("paste",!0).setMeta("uiEvent","paste")),!0}ko.copy=bo.cut=function(t,e){var n=e,r=t.state.selection,i="cut"==n.type;if(!r.empty){var o=Go?null:n.clipboardData,s=r.content(),a=ro(t,s),u=a.dom,c=a.text;o?(n.preventDefault(),o.clearData(),o.setData("text/html",u.innerHTML),o.setData("text/plain",c)):Uo(t,u),i&&t.dispatch(t.state.tr.deleteSelection().scrollIntoView().setMeta("uiEvent","cut"))}},bo.paste=function(t,e){var n=e;if(!t.composing||pr){var r=Go?null:n.clipboardData;r&&Xo(t,r.getData("text/plain"),r.getData("text/html"),t.input.shiftKey,n)?n.preventDefault():Qo(t,n)}};var ts=(0,D.Z)((function t(e,n){(0,w.Z)(this,t),this.slice=e,this.move=n})),es=dr?"altKey":"ctrlKey";for(var ns in ko.dragstart=function(t,e){var n=e,r=t.input.mouseDown;if(r&&r.done(),n.dataTransfer){var i=t.state.selection,o=i.empty?null:t.posAtCoords(Oo(n));if(o&&o.pos>=i.from&&o.pos<=(i instanceof je?i.to-1:i.to));else if(r&&r.mightDrag)t.dispatch(t.state.tr.setSelection(je.create(t.state.doc,r.mightDrag.pos)));else if(n.target&&1==n.target.nodeType){var s=t.docView.nearestDesc(n.target,!0);s&&s.node.type.spec.draggable&&s!=t.docView&&t.dispatch(t.state.tr.setSelection(je.create(t.state.doc,s.posBefore)))}var a=t.state.selection.content(),u=ro(t,a),c=u.dom,l=u.text;n.dataTransfer.clearData(),n.dataTransfer.setData(Go?"Text":"text/html",c.innerHTML),n.dataTransfer.effectAllowed="copyMove",Go||n.dataTransfer.setData("text/plain",l),t.dragging=new ts(a,!n[es])}},ko.dragend=function(t){var e=t.dragging;window.setTimeout((function(){t.dragging==e&&(t.dragging=null)}),50)},bo.dragover=bo.dragenter=function(t,e){return e.preventDefault()},bo.drop=function(t,e){var n=e,r=t.dragging;if(t.dragging=null,n.dataTransfer){var i=t.posAtCoords(Oo(n));if(i){var o=t.state.doc.resolve(i.pos),s=r&&r.slice;s?t.someProp("transformPasted",(function(e){s=e(s,t)})):s=io(t,n.dataTransfer.getData(Go?"Text":"text/plain"),Go?null:n.dataTransfer.getData("text/html"),!1,o);var a=!(!r||n[es]);if(t.someProp("handleDrop",(function(e){return e(t,n,s||mn.empty,a)})))n.preventDefault();else if(s){n.preventDefault();var u=s?me(t.state.doc,o.pos,s):o.pos;null==u&&(u=o.pos);var c=t.state.tr;a&&c.deleteSelection();var l=c.mapping.map(u),h=0==s.openStart&&0==s.openEnd&&1==s.content.childCount,d=c.doc;if(h?c.replaceRangeWith(l,l,s.content.firstChild):c.replaceRange(l,l,s),!c.doc.eq(d)){var f=c.doc.resolve(l);if(h&&je.isSelectable(s.content.firstChild)&&f.nodeAfter&&f.nodeAfter.sameMarkup(s.content.firstChild))c.setSelection(new je(f));else{var p=c.mapping.map(u);c.mapping.maps[c.mapping.maps.length-1].forEach((function(t,e,n,r){return p=r})),c.setSelection(Li(t,f,c.doc.resolve(p)))}t.focus(),t.dispatch(c.setMeta("uiEvent","drop"))}}}}},ko.focus=function(t){t.input.lastFocus=Date.now(),t.focused||(t.domObserver.stop(),t.dom.classList.add("ProseMirror-focused"),t.domObserver.start(),t.focused=!0,setTimeout((function(){t.docView&&t.hasFocus()&&!t.domObserver.currentSelection.eq(t.domSelectionRange())&&Si(t)}),20))},ko.blur=function(t,e){var n=e;t.focused&&(t.domObserver.stop(),t.dom.classList.remove("ProseMirror-focused"),t.domObserver.start(),n.relatedTarget&&t.dom.contains(n.relatedTarget)&&t.domObserver.currentSelection.clear(),t.focused=!1)},ko.beforeinput=function(t,e){var n=e;if(ur&&pr&&"deleteContentBackward"==n.inputType){t.domObserver.flushSoon();var r=t.input.domChangeCount;setTimeout((function(){if(t.input.domChangeCount==r&&(t.dom.blur(),t.focus(),!t.someProp("handleKeyDown",(function(e){return e(t,Un(8,"Backspace"))})))){var e=t.state.selection.$cursor;e&&e.pos>0&&t.dispatch(t.state.tr.delete(e.pos-1,e.pos).scrollIntoView())}}),50)}},bo)ko[ns]=bo[ns];function rs(t,e){if(t==e)return!0;for(var n in t)if(t[n]!==e[n])return!1;for(var r in e)if(!(r in t))return!1;return!0}var is=function(){function t(e,n){(0,w.Z)(this,t),this.toDOM=e,this.spec=n||ls,this.side=this.spec.side||0}return(0,D.Z)(t,[{key:"map",value:function(t,e,n,r){var i=t.mapResult(e.from+r,this.side<0?-1:1),o=i.pos,s=i.deleted;return s?null:new us(o-n,o-n,this)}},{key:"valid",value:function(){return!0}},{key:"eq",value:function(e){return this==e||e instanceof t&&(this.spec.key&&this.spec.key==e.spec.key||this.toDOM==e.toDOM&&rs(this.spec,e.spec))}},{key:"destroy",value:function(t){this.spec.destroy&&this.spec.destroy(t)}}]),t}(),ss=function(){function t(e,n){(0,w.Z)(this,t),this.attrs=e,this.spec=n||ls}return(0,D.Z)(t,[{key:"map",value:function(t,e,n,r){var i=t.map(e.from+r,this.spec.inclusiveStart?-1:1)-n,o=t.map(e.to+r,this.spec.inclusiveEnd?1:-1)-n;return i>=o?null:new us(i,o,this)}},{key:"valid",value:function(t,e){return e.from<e.to}},{key:"eq",value:function(e){return this==e||e instanceof t&&rs(this.attrs,e.attrs)&&rs(this.spec,e.spec)}},{key:"destroy",value:function(){}}],[{key:"is",value:function(e){return e.type instanceof t}}]),t}(),as=function(){function t(e,n){(0,w.Z)(this,t),this.attrs=e,this.spec=n||ls}return(0,D.Z)(t,[{key:"map",value:function(t,e,n,r){var i=t.mapResult(e.from+r,1);if(i.deleted)return null;var o=t.mapResult(e.to+r,-1);return o.deleted||o.pos<=i.pos?null:new us(i.pos-n,o.pos-n,this)}},{key:"valid",value:function(t,e){var n,r=t.content.findIndex(e.from),i=r.index,o=r.offset;return o==e.from&&!(n=t.child(i)).isText&&o+n.nodeSize==e.to}},{key:"eq",value:function(e){return this==e||e instanceof t&&rs(this.attrs,e.attrs)&&rs(this.spec,e.spec)}},{key:"destroy",value:function(){}}]),t}(),us=function(){function t(e,n,r){(0,w.Z)(this,t),this.from=e,this.to=n,this.type=r}return(0,D.Z)(t,[{key:"copy",value:function(e,n){return new t(e,n,this.type)}},{key:"eq",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this.type.eq(t.type)&&this.from+e==t.from&&this.to+e==t.to}},{key:"map",value:function(t,e,n){return this.type.map(t,this,e,n)}},{key:"spec",get:function(){return this.type.spec}},{key:"inline",get:function(){return this.type instanceof ss}}],[{key:"widget",value:function(e,n,r){return new t(e,e,new is(n,r))}},{key:"inline",value:function(e,n,r,i){return new t(e,n,new ss(r,i))}},{key:"node",value:function(e,n,r,i){return new t(e,n,new as(r,i))}}]),t}(),cs=[],ls={},hs=function(){function t(e,n){(0,w.Z)(this,t),this.local=e.length?e:cs,this.children=n.length?n:cs}return(0,D.Z)(t,[{key:"find",value:function(t,e,n){var r=[];return this.findInner(null==t?0:t,null==e?1e9:e,r,0,n),r}},{key:"findInner",value:function(t,e,n,r,i){for(var o=0;o<this.local.length;o++){var s=this.local[o];s.from<=e&&s.to>=t&&(!i||i(s.spec))&&n.push(s.copy(s.from+r,s.to+r))}for(var a=0;a<this.children.length;a+=3)if(this.children[a]<e&&this.children[a+1]>t){var u=this.children[a]+1;this.children[a+2].findInner(t-u,e-u,n,r+u,i)}}},{key:"map",value:function(t,e,n){return this==ds||0==t.maps.length?this:this.mapInner(t,e,0,0,n||ls)}},{key:"mapInner",value:function(e,n,r,i,o){for(var s,a=0;a<this.local.length;a++){var u=this.local[a].map(e,r,i);u&&u.type.valid(n,u)?(s||(s=[])).push(u):o.onRemove&&o.onRemove(this.local[a].spec)}return this.children.length?ps(this.children,s||[],e,n,r,i,o):s?new t(s.sort(bs),cs):ds}},{key:"add",value:function(e,n){return n.length?this==ds?t.create(e,n):this.addInner(e,n,0):this}},{key:"addInner",value:function(e,n,r){var i,o=this,s=0;e.forEach((function(t,e){var a,u=e+r;if(a=gs(n,t,u)){i||(i=o.children.slice());while(s<i.length&&i[s]<e)s+=3;i[s]==e?i[s+2]=i[s+2].addInner(t,a,u+1):i.splice(s,0,e,e+t.nodeSize,ks(a,t,u+1,ls)),s+=3}}));for(var a=vs(s?ys(n):n,-r),u=0;u<a.length;u++)a[u].type.valid(e,a[u])||a.splice(u--,1);return new t(a.length?this.local.concat(a).sort(bs):this.local,i||this.children)}},{key:"remove",value:function(t){return 0==t.length||this==ds?this:this.removeInner(t,0)}},{key:"removeInner",value:function(e,n){for(var r=this.children,i=this.local,o=0;o<r.length;o+=3){for(var s,a=void 0,u=r[o]+n,c=r[o+1]+n,l=0;l<e.length;l++)(s=e[l])&&s.from>u&&s.to<c&&(e[l]=null,(a||(a=[])).push(s));if(a){r==this.children&&(r=this.children.slice());var h=r[o+2].removeInner(a,u+1);h!=ds?r[o+2]=h:(r.splice(o,3),o-=3)}}if(i.length)for(var d,f=0;f<e.length;f++)if(d=e[f])for(var p=0;p<i.length;p++)i[p].eq(d,n)&&(i==this.local&&(i=this.local.slice()),i.splice(p--,1));return r==this.children&&i==this.local?this:i.length||r.length?new t(i,r):ds}},{key:"forChild",value:function(e,n){if(this==ds)return this;if(n.isLeaf)return t.empty;for(var r,i,o=0;o<this.children.length;o+=3)if(this.children[o]>=e){this.children[o]==e&&(r=this.children[o+2]);break}for(var s=e+1,a=s+n.content.size,u=0;u<this.local.length;u++){var c=this.local[u];if(c.from<a&&c.to>s&&c.type instanceof ss){var l=Math.max(s,c.from)-s,h=Math.min(a,c.to)-s;l<h&&(i||(i=[])).push(c.copy(l,h))}}if(i){var d=new t(i.sort(bs),cs);return r?new fs([d,r]):d}return r||ds}},{key:"eq",value:function(e){if(this==e)return!0;if(!(e instanceof t)||this.local.length!=e.local.length||this.children.length!=e.children.length)return!1;for(var n=0;n<this.local.length;n++)if(!this.local[n].eq(e.local[n]))return!1;for(var r=0;r<this.children.length;r+=3)if(this.children[r]!=e.children[r]||this.children[r+1]!=e.children[r+1]||!this.children[r+2].eq(e.children[r+2]))return!1;return!0}},{key:"locals",value:function(t){return ws(this.localsInner(t))}},{key:"localsInner",value:function(t){if(this==ds)return cs;if(t.inlineContent||!this.local.some(ss.is))return this.local;for(var e=[],n=0;n<this.local.length;n++)this.local[n].type instanceof ss||e.push(this.local[n]);return e}}],[{key:"create",value:function(t,e){return e.length?ks(e,t,0,ls):ds}}]),t}();hs.empty=new hs([],[]),hs.removeOverlap=ws;var ds=hs.empty,fs=function(){function t(e){(0,w.Z)(this,t),this.members=e}return(0,D.Z)(t,[{key:"map",value:function(e,n){var r=this.members.map((function(t){return t.map(e,n,ls)}));return t.from(r)}},{key:"forChild",value:function(e,n){if(n.isLeaf)return hs.empty;for(var r=[],i=0;i<this.members.length;i++){var o=this.members[i].forChild(e,n);o!=ds&&(o instanceof t?r=r.concat(o.members):r.push(o))}return t.from(r)}},{key:"eq",value:function(e){if(!(e instanceof t)||e.members.length!=this.members.length)return!1;for(var n=0;n<this.members.length;n++)if(!this.members[n].eq(e.members[n]))return!1;return!0}},{key:"locals",value:function(t){for(var e,n=!0,r=0;r<this.members.length;r++){var i=this.members[r].localsInner(t);if(i.length)if(e){n&&(e=e.slice(),n=!1);for(var o=0;o<i.length;o++)e.push(i[o])}else e=i}return e?ws(n?e:e.sort(bs)):cs}}],[{key:"from",value:function(e){switch(e.length){case 0:return ds;case 1:return e[0];default:return new t(e.every((function(t){return t instanceof hs}))?e:e.reduce((function(t,e){return t.concat(e instanceof hs?e:e.members)}),[]))}}}]),t}();function ps(t,e,n,r,i,o,s){for(var a=t.slice(),u=function(t){var e=0;n.maps[c].forEach((function(n,r,o,s){for(var u=s-o-(r-n),c=0;c<a.length;c+=3){var l=a[c+1];if(!(l<0||n>l+t-e)){var h=a[c]+t-e;r>=h?a[c+1]=n<=h?-2:-1:o>=i&&u&&(a[c]+=u,a[c+1]+=u)}}e+=u})),t=n.maps[c].map(t,-1),l=t},c=0,l=o;c<n.maps.length;c++)u(l);for(var h=!1,d=0;d<a.length;d+=3)if(a[d+1]<0){if(-2==a[d+1]){h=!0,a[d+1]=-1;continue}var f=n.map(t[d]+o),p=f-i;if(p<0||p>=r.content.size){h=!0;continue}var v=n.map(t[d+1]+o,-1),m=v-i,g=r.content.findIndex(p),y=g.index,k=g.offset,b=r.maybeChild(y);if(b&&k==p&&k+b.nodeSize==m){var w=a[d+2].mapInner(n,b,f+1,t[d]+o+1,s);w!=ds?(a[d]=p,a[d+1]=m,a[d+2]=w):(a[d+1]=-2,h=!0)}else h=!0}if(h){var D=ms(a,t,e,n,i,o,s),x=ks(D,r,0,s);e=x.local;for(var C=0;C<a.length;C+=3)a[C+1]<0&&(a.splice(C,3),C-=3);for(var A=0,E=0;A<x.children.length;A+=3){var S=x.children[A];while(E<a.length&&a[E]<S)E+=3;a.splice(E,0,x.children[A],x.children[A+1],x.children[A+2])}}return new hs(e.sort(bs),a)}function vs(t,e){if(!e||!t.length)return t;for(var n=[],r=0;r<t.length;r++){var i=t[r];n.push(new us(i.from+e,i.to+e,i.type))}return n}function ms(t,e,n,r,i,o,s){function a(t,e){for(var o=0;o<t.local.length;o++){var u=t.local[o].map(r,i,e);u?n.push(u):s.onRemove&&s.onRemove(t.local[o].spec)}for(var c=0;c<t.children.length;c+=3)a(t.children[c+2],t.children[c]+e+1)}for(var u=0;u<t.length;u+=3)-1==t[u+1]&&a(t[u+2],e[u]+o+1);return n}function gs(t,e,n){if(e.isLeaf)return null;for(var r,i=n+e.nodeSize,o=null,s=0;s<t.length;s++)(r=t[s])&&r.from>n&&r.to<i&&((o||(o=[])).push(r),t[s]=null);return o}function ys(t){for(var e=[],n=0;n<t.length;n++)null!=t[n]&&e.push(t[n]);return e}function ks(t,e,n,r){var i=[],o=!1;e.forEach((function(e,s){var a=gs(t,e,s+n);if(a){o=!0;var u=ks(a,e,n+s+1,r);u!=ds&&i.push(s,s+e.nodeSize,u)}}));for(var s=vs(o?ys(t):t,-n).sort(bs),a=0;a<s.length;a++)s[a].type.valid(e,s[a])||(r.onRemove&&r.onRemove(s[a].spec),s.splice(a--,1));return s.length||i.length?new hs(s,i):ds}function bs(t,e){return t.from-e.from||t.to-e.to}function ws(t){for(var e=t,n=0;n<e.length-1;n++){var r=e[n];if(r.from!=r.to)for(var i=n+1;i<e.length;i++){var o=e[i];if(o.from!=r.from){o.from<r.to&&(e==t&&(e=t.slice()),e[n]=r.copy(r.from,o.from),Ds(e,i,r.copy(o.from,r.to)));break}o.to!=r.to&&(e==t&&(e=t.slice()),e[i]=o.copy(o.from,r.to),Ds(e,i+1,o.copy(r.to,o.to)))}}return e}function Ds(t,e,n){while(e<t.length&&bs(n,t[e])>0)e++;t.splice(e,0,n)}function xs(t){var e=[];return t.someProp("decorations",(function(n){var r=n(t.state);r&&r!=ds&&e.push(r)})),t.cursorWrapper&&e.push(hs.create(t.state.doc,[t.cursorWrapper.deco])),fs.from(e)}var Cs={childList:!0,characterData:!0,characterDataOldValue:!0,attributes:!0,attributeOldValue:!0,subtree:!0},As=ir&&or<=11,Es=function(){function t(){(0,w.Z)(this,t),this.anchorNode=null,this.anchorOffset=0,this.focusNode=null,this.focusOffset=0}return(0,D.Z)(t,[{key:"set",value:function(t){this.anchorNode=t.anchorNode,this.anchorOffset=t.anchorOffset,this.focusNode=t.focusNode,this.focusOffset=t.focusOffset}},{key:"clear",value:function(){this.anchorNode=this.focusNode=null}},{key:"eq",value:function(t){return t.anchorNode==this.anchorNode&&t.anchorOffset==this.anchorOffset&&t.focusNode==this.focusNode&&t.focusOffset==this.focusOffset}}]),t}(),Ss=function(){function t(e,n){var r=this;(0,w.Z)(this,t),this.view=e,this.handleDOMChange=n,this.queue=[],this.flushingSoon=-1,this.observer=null,this.currentSelection=new Es,this.onCharData=null,this.suppressingSelectionUpdates=!1,this.observer=window.MutationObserver&&new window.MutationObserver((function(t){for(var e=0;e<t.length;e++)r.queue.push(t[e]);ir&&or<=11&&t.some((function(t){return"childList"==t.type&&t.removedNodes.length||"characterData"==t.type&&t.oldValue.length>t.target.nodeValue.length}))?r.flushSoon():r.flush()})),As&&(this.onCharData=function(t){r.queue.push({target:t.target,type:"characterData",oldValue:t.prevValue}),r.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this)}return(0,D.Z)(t,[{key:"flushSoon",value:function(){var t=this;this.flushingSoon<0&&(this.flushingSoon=window.setTimeout((function(){t.flushingSoon=-1,t.flush()}),20))}},{key:"forceFlush",value:function(){this.flushingSoon>-1&&(window.clearTimeout(this.flushingSoon),this.flushingSoon=-1,this.flush())}},{key:"start",value:function(){this.observer&&(this.observer.takeRecords(),this.observer.observe(this.view.dom,Cs)),this.onCharData&&this.view.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.connectSelection()}},{key:"stop",value:function(){var t=this;if(this.observer){var e=this.observer.takeRecords();if(e.length){for(var n=0;n<e.length;n++)this.queue.push(e[n]);window.setTimeout((function(){return t.flush()}),20)}this.observer.disconnect()}this.onCharData&&this.view.dom.removeEventListener("DOMCharacterDataModified",this.onCharData),this.disconnectSelection()}},{key:"connectSelection",value:function(){this.view.dom.ownerDocument.addEventListener("selectionchange",this.onSelectionChange)}},{key:"disconnectSelection",value:function(){this.view.dom.ownerDocument.removeEventListener("selectionchange",this.onSelectionChange)}},{key:"suppressSelectionUpdates",value:function(){var t=this;this.suppressingSelectionUpdates=!0,setTimeout((function(){return t.suppressingSelectionUpdates=!1}),50)}},{key:"onSelectionChange",value:function(){if(Ri(this.view)){if(this.suppressingSelectionUpdates)return Si(this.view);if(ir&&or<=11&&!this.view.state.selection.empty){var t=this.view.domSelectionRange();if(t.focusNode&&jn(t.focusNode,t.focusOffset,t.anchorNode,t.anchorOffset))return this.flushSoon()}this.flush()}}},{key:"setCurSelection",value:function(){this.currentSelection.set(this.view.domSelectionRange())}},{key:"ignoreSelectionChange",value:function(t){if(!t.focusNode)return!0;for(var e,n=new Set,r=t.focusNode;r;r=Pn(r))n.add(r);for(var i=t.anchorNode;i;i=Pn(i))if(n.has(i)){e=i;break}var o=e&&this.view.docView.nearestDesc(e);return o&&o.ignoreMutation({type:"selection",target:3==e.nodeType?e.parentNode:e})?(this.setCurSelection(),!0):void 0}},{key:"flush",value:function(){var t=this.view;if(t.docView&&!(this.flushingSoon>-1)){var e=this.observer?this.observer.takeRecords():[];this.queue.length&&(e=this.queue.concat(e),this.queue.length=0);var n=t.domSelectionRange(),r=!this.suppressingSelectionUpdates&&!this.currentSelection.eq(n)&&Ri(t)&&!this.ignoreSelectionChange(n),i=-1,o=-1,s=!1,a=[];if(t.editable)for(var u=0;u<e.length;u++){var c=this.registerMutation(e[u],a);c&&(i=i<0?c.from:Math.min(c.from,i),o=o<0?c.to:Math.max(c.to,o),c.typeOver&&(s=!0))}if(sr&&a.length>1){var l=a.filter((function(t){return"BR"==t.nodeName}));if(2==l.length){var h=l[0],d=l[1];h.parentNode&&h.parentNode.parentNode==d.parentNode?d.remove():h.remove()}}var f=null;i<0&&r&&t.input.lastFocus>Date.now()-200&&Math.max(t.input.lastTouch,t.input.lastClick.time)<Date.now()-300&&Wn(n)&&(f=Ai(t))&&f.eq(Le.near(t.state.doc.resolve(0),1))?(t.input.lastFocus=0,Si(t),this.currentSelection.set(n),t.scrollToSelection()):(i>-1||r)&&(i>-1&&(t.docView.markDirty(i,o),Os(t)),this.handleDOMChange(i,o,s,a),t.docView&&t.docView.dirty?t.updateState(t.state):this.currentSelection.eq(n)||Si(t),this.currentSelection.set(n))}}},{key:"registerMutation",value:function(t,e){if(e.indexOf(t.target)>-1)return null;var n=this.view.docView.nearestDesc(t.target);if("attributes"==t.type&&(n==this.view.docView||"contenteditable"==t.attributeName||"style"==t.attributeName&&!t.oldValue&&!t.target.getAttribute("style")))return null;if(!n||n.ignoreMutation(t))return null;if("childList"==t.type){for(var r=0;r<t.addedNodes.length;r++)e.push(t.addedNodes[r]);if(n.contentDOM&&n.contentDOM!=n.dom&&!n.contentDOM.contains(t.target))return{from:n.posBefore,to:n.posAfter};var i=t.previousSibling,o=t.nextSibling;if(ir&&or<=11&&t.addedNodes.length)for(var s=0;s<t.addedNodes.length;s++){var a=t.addedNodes[s],u=a.previousSibling,c=a.nextSibling;(!u||Array.prototype.indexOf.call(t.addedNodes,u)<0)&&(i=u),(!c||Array.prototype.indexOf.call(t.addedNodes,c)<0)&&(o=c)}var l=i&&i.parentNode==t.target?zn(i)+1:0,h=n.localPosFromDOM(t.target,l,-1),d=o&&o.parentNode==t.target?zn(o):t.target.childNodes.length,f=n.localPosFromDOM(t.target,d,1);return{from:h,to:f}}return"attributes"==t.type?{from:n.posAtStart-n.border,to:n.posAtEnd+n.border}:{from:n.posAtStart,to:n.posAtEnd,typeOver:t.target.nodeValue==t.oldValue}}}]),t}(),_s=new WeakMap,Ms=!1;function Os(t){if(!_s.has(t)&&(_s.set(t,null),-1!==["normal","nowrap","pre-line"].indexOf(getComputedStyle(t.dom).whiteSpace))){if(t.requiresGeckoHackNode=sr,Ms)return;console["warn"]("ProseMirror expects the CSS white-space property to be set, preferably to 'pre-wrap'. It is recommended to load style/prosemirror.css from the prosemirror-view package."),Ms=!0}}function Ts(t){var e;function n(t){t.preventDefault(),t.stopImmediatePropagation(),e=t.getTargetRanges()[0]}t.dom.addEventListener("beforeinput",n,!0),document.execCommand("indent"),t.dom.removeEventListener("beforeinput",n,!0);var r=e.startContainer,i=e.startOffset,o=e.endContainer,s=e.endOffset,a=t.domAtPos(t.state.selection.anchor);if(jn(a.node,a.offset,o,s)){var u=[o,s,r,i];r=u[0],i=u[1],o=u[2],s=u[3]}return{anchorNode:r,anchorOffset:i,focusNode:o,focusOffset:s}}function Fs(t,e,n){var r,i=t.docView.parseRange(e,n),o=i.node,s=i.fromOffset,a=i.toOffset,u=i.from,c=i.to,l=t.domSelectionRange(),h=l.anchorNode;if(h&&t.dom.contains(1==h.nodeType?h:h.parentNode)&&(r=[{node:h,offset:l.anchorOffset}],Wn(l)||r.push({node:l.focusNode,offset:l.focusOffset})),ur&&8===t.input.lastKeyCode)for(var d=a;d>s;d--){var f=o.childNodes[d-1],p=f.pmViewDesc;if("BR"==f.nodeName&&!p){a=d;break}if(!p||p.size)break}var v=t.state.doc,m=t.someProp("domParser")||kn.fromSchema(t.state.schema),g=v.resolve(u),y=null,k=m.parse(o,{topNode:g.parent,topMatch:g.parent.contentMatchAt(g.index()),topOpen:!0,from:s,to:a,preserveWhitespace:"pre"!=g.parent.type.whitespace||"full",findPositions:r,ruleFromNode:Ns,context:g});if(r&&null!=r[0].pos){var b=r[0].pos,w=r[1]&&r[1].pos;null==w&&(w=b),y={anchor:b+u,head:w+u}}return{doc:k,sel:y,from:u,to:c}}function Ns(t){var e=t.pmViewDesc;if(e)return e.parseRule();if("BR"==t.nodeName&&t.parentNode){if(lr&&/^(ul|ol)$/i.test(t.parentNode.nodeName)){var n=document.createElement("div");return n.appendChild(document.createElement("li")),{skip:n}}if(t.parentNode.lastChild==t||lr&&/^(tr|table)$/i.test(t.parentNode.nodeName))return{ignore:!0}}else if("IMG"==t.nodeName&&t.getAttribute("mark-placeholder"))return{ignore:!0};return null}var Bs=/^(a|abbr|acronym|b|bd[io]|big|br|button|cite|code|data(list)?|del|dfn|em|i|ins|kbd|label|map|mark|meter|output|q|ruby|s|samp|small|span|strong|su[bp]|time|u|tt|var)$/i;function Is(t,e,n,r,i){if(e<0){var o=t.input.lastSelectionTime>Date.now()-50?t.input.lastSelectionOrigin:null,s=Ai(t,o);if(s&&!t.state.selection.eq(s)){if(ur&&pr&&13===t.input.lastKeyCode&&Date.now()-100<t.input.lastKeyCodeTime&&t.someProp("handleKeyDown",(function(e){return e(t,Un(13,"Enter"))})))return;var a=t.state.tr.setSelection(s);"pointer"==o?a.setMeta("pointer",!0):"key"==o&&a.scrollIntoView(),t.composing&&a.setMeta("composition",t.input.compositionID),t.dispatch(a)}}else{var u=t.state.doc.resolve(e),c=u.sharedDepth(n);e=u.before(c+1),n=t.state.doc.resolve(n).after(c+1);var l,h,d=t.state.selection,f=Fs(t,e,n),p=t.state.doc,v=p.slice(f.from,f.to);8===t.input.lastKeyCode&&Date.now()-100<t.input.lastKeyCodeTime?(l=t.state.selection.to,h="end"):(l=t.state.selection.from,h="start"),t.input.lastKeyCode=null;var m=Zs(v.content,f.doc.content,f.from,l,h);if((hr&&t.input.lastIOSEnter>Date.now()-225||pr)&&i.some((function(t){return 1==t.nodeType&&!Bs.test(t.nodeName)}))&&(!m||m.endA>=m.endB)&&t.someProp("handleKeyDown",(function(e){return e(t,Un(13,"Enter"))})))t.input.lastIOSEnter=0;else{if(!m){if(!(r&&d instanceof Ze&&!d.empty&&d.$head.sameParent(d.$anchor))||t.composing||f.sel&&f.sel.anchor!=f.sel.head){if(f.sel){var g=Ls(t,t.state.doc,f.sel);if(g&&!g.eq(t.state.selection)){var y=t.state.tr.setSelection(g);t.composing&&y.setMeta("composition",t.input.compositionID),t.dispatch(y)}}return}m={start:d.from,endA:d.to,endB:d.to}}if(ur&&t.cursorWrapper&&f.sel&&f.sel.anchor==t.cursorWrapper.deco.from&&f.sel.head==f.sel.anchor){var k=m.endB-m.start;f.sel={anchor:f.sel.anchor+k,head:f.sel.anchor+k}}t.input.domChangeCount++,t.state.selection.from<t.state.selection.to&&m.start==m.endB&&t.state.selection instanceof Ze&&(m.start>t.state.selection.from&&m.start<=t.state.selection.from+2&&t.state.selection.from>=f.from?m.start=t.state.selection.from:m.endA<t.state.selection.to&&m.endA>=t.state.selection.to-2&&t.state.selection.to<=f.to&&(m.endB+=t.state.selection.to-m.endA,m.endA=t.state.selection.to)),ir&&or<=11&&m.endB==m.start+1&&m.endA==m.start&&m.start>f.from&&"  "==f.doc.textBetween(m.start-f.from-1,m.start-f.from+1)&&(m.start--,m.endA--,m.endB--);var b,w=f.doc.resolveNoCache(m.start-f.from),D=f.doc.resolveNoCache(m.endB-f.from),x=p.resolve(m.start),C=w.sameParent(D)&&w.parent.inlineContent&&x.end()>=m.endA;if((hr&&t.input.lastIOSEnter>Date.now()-225&&(!C||i.some((function(t){return"DIV"==t.nodeName||"P"==t.nodeName})))||!C&&w.pos<f.doc.content.size&&(b=Le.findFrom(f.doc.resolve(w.pos+1),1,!0))&&b.head==D.pos)&&t.someProp("handleKeyDown",(function(e){return e(t,Un(13,"Enter"))})))t.input.lastIOSEnter=0;else if(t.state.selection.anchor>m.start&&zs(p,m.start,m.endA,w,D)&&t.someProp("handleKeyDown",(function(e){return e(t,Un(8,"Backspace"))})))pr&&ur&&t.domObserver.suppressSelectionUpdates();else{ur&&pr&&m.endB==m.start&&(t.input.lastAndroidDelete=Date.now()),pr&&!C&&w.start()!=D.start()&&0==D.parentOffset&&w.depth==D.depth&&f.sel&&f.sel.anchor==f.sel.head&&f.sel.head==m.endA&&(m.endB-=2,D=f.doc.resolveNoCache(m.endB-f.from),setTimeout((function(){t.someProp("handleKeyDown",(function(e){return e(t,Un(13,"Enter"))}))}),20));var A,E,S,_=m.start,M=m.endA;if(C)if(w.pos==D.pos)ir&&or<=11&&0==w.parentOffset&&(t.domObserver.suppressSelectionUpdates(),setTimeout((function(){return Si(t)}),20)),A=t.state.tr.delete(_,M),E=p.resolve(m.start).marksAcross(p.resolve(m.endA));else if(m.endA==m.endB&&(S=Rs(w.parent.content.cut(w.parentOffset,D.parentOffset),x.parent.content.cut(x.parentOffset,m.endA-x.start()))))A=t.state.tr,"add"==S.type?A.addMark(_,M,S.mark):A.removeMark(_,M,S.mark);else if(w.parent.child(w.index()).isText&&w.index()==D.index()-(D.textOffset?0:1)){var O=w.parent.textBetween(w.parentOffset,D.parentOffset);if(t.someProp("handleTextInput",(function(e){return e(t,_,M,O)})))return;A=t.state.tr.insertText(O,_,M)}if(A||(A=t.state.tr.replace(_,M,f.doc.slice(m.start-f.from,m.endB-f.from))),f.sel){var T=Ls(t,A.doc,f.sel);T&&!(ur&&pr&&t.composing&&T.empty&&(m.start!=m.endB||t.input.lastAndroidDelete<Date.now()-100)&&(T.head==_||T.head==A.mapping.map(M)-1)||ir&&T.empty&&T.head==_)&&A.setSelection(T)}E&&A.ensureMarks(E),t.composing&&A.setMeta("composition",t.input.compositionID),t.dispatch(A.scrollIntoView())}}}}function Ls(t,e,n){return Math.max(n.anchor,n.head)>e.content.size?null:Li(t,e.resolve(n.anchor),e.resolve(n.head))}function Rs(t,e){for(var n,r,i,o=t.firstChild.marks,s=e.firstChild.marks,a=o,u=s,c=0;c<s.length;c++)a=s[c].removeFromSet(a);for(var l=0;l<o.length;l++)u=o[l].removeFromSet(u);if(1==a.length&&0==u.length)r=a[0],n="add",i=function(t){return t.mark(r.addToSet(t.marks))};else{if(0!=a.length||1!=u.length)return null;r=u[0],n="remove",i=function(t){return t.mark(r.removeFromSet(t.marks))}}for(var h=[],d=0;d<e.childCount;d++)h.push(i(e.child(d)));if(hn.from(h).eq(t))return{mark:r,type:n}}function zs(t,e,n,r,i){if(!r.parent.isTextblock||n-e<=i.pos-r.pos||Ps(r,!0,!1)<i.pos)return!1;var o=t.resolve(e);if(o.parentOffset<o.parent.content.size||!o.parent.isTextblock)return!1;var s=t.resolve(Ps(o,!0,!0));return!(!s.parent.isTextblock||s.pos>n||Ps(s,!0,!1)<n)&&r.parent.content.cut(r.parentOffset).eq(s.parent.content)}function Ps(t,e,n){var r=t.depth,i=e?t.end():t.pos;while(r>0&&(e||t.indexAfter(r)==t.node(r).childCount))r--,i++,e=!1;if(n){var o=t.node(r).maybeChild(t.indexAfter(r));while(o&&!o.isLeaf)o=o.firstChild,i++}return i}function Zs(t,e,n,r,i){var o=t.findDiffStart(e,n);if(null==o)return null;var s=t.findDiffEnd(e,n+t.size,n+e.size),a=s.a,u=s.b;if("end"==i){var c=Math.max(0,o-Math.min(a,u));r-=a+c-o}if(a<o&&t.size<e.size){var l=r<=o&&r>=a?o-r:0;o-=l,u=o+(u-a),a=o}else if(u<o){var h=r<=o&&r>=u?o-r:0;o-=h,a=o+(a-u),u=o}return{start:o,endA:a,endB:u}}var qs=function(){function t(e,n){var r=this;(0,w.Z)(this,t),this._root=null,this.focused=!1,this.trackWrites=null,this.mounted=!1,this.markCursor=null,this.cursorWrapper=null,this.lastSelectedViewDesc=void 0,this.input=new Do,this.prevDirectPlugins=[],this.pluginViews=[],this.requiresGeckoHackNode=!1,this.dragging=null,this._props=n,this.state=n.state,this.directPlugins=n.plugins||[],this.directPlugins.forEach(Ws),this.dispatch=this.dispatch.bind(this),this.dom=e&&e.mount||document.createElement("div"),e&&(e.appendChild?e.appendChild(this.dom):"function"==typeof e?e(this.dom):e.mount&&(this.mounted=!0)),this.editable=Vs(this),$s(this),this.nodeViews=Js(this),this.docView=ii(this.state.doc,js(this),xs(this),this.dom,this),this.domObserver=new Ss(this,(function(t,e,n,i){return Is(r,t,e,n,i)})),this.domObserver.start(),xo(this),this.updatePluginViews()}return(0,D.Z)(t,[{key:"composing",get:function(){return this.input.composing}},{key:"props",get:function(){if(this._props.state!=this.state){var t=this._props;for(var e in this._props={},t)this._props[e]=t[e];this._props.state=this.state}return this._props}},{key:"update",value:function(t){t.handleDOMEvents!=this._props.handleDOMEvents&&Eo(this);var e=this._props;this._props=t,t.plugins&&(t.plugins.forEach(Ws),this.directPlugins=t.plugins),this.updateStateInner(t.state,e)}},{key:"setProps",value:function(t){var e={};for(var n in this._props)e[n]=this._props[n];for(var r in e.state=this.state,t)e[r]=t[r];this.update(e)}},{key:"updateState",value:function(t){this.updateStateInner(t,this._props)}},{key:"updateStateInner",value:function(t,e){var n=this.state,r=!1,i=!1;t.storedMarks&&this.composing&&(Jo(this),i=!0),this.state=t;var o=n.plugins!=t.plugins||this._props.plugins!=e.plugins;if(o||this._props.plugins!=e.plugins||this._props.nodeViews!=e.nodeViews){var s=Js(this);Ks(s,this.nodeViews)&&(this.nodeViews=s,r=!0)}(o||e.handleDOMEvents!=this._props.handleDOMEvents)&&Eo(this),this.editable=Vs(this),$s(this);var a=xs(this),u=js(this),c=n.plugins==t.plugins||n.doc.eq(t.doc)?t.scrollToSelection>n.scrollToSelection?"to selection":"preserve":"reset",l=r||!this.docView.matchesNode(t.doc,u,a);!l&&t.selection.eq(n.selection)||(i=!0);var h="preserve"==c&&i&&null==this.dom.style.overflowAnchor&&wr(this);if(i){this.domObserver.stop();var d=l&&(ir||ur)&&!this.composing&&!n.selection.empty&&!t.selection.empty&&Hs(n.selection,t.selection);if(l){var f=ur?this.trackWrites=this.domSelectionRange().focusNode:null;!r&&this.docView.update(t.doc,u,a,this)||(this.docView.updateOuterDeco([]),this.docView.destroy(),this.docView=ii(t.doc,u,a,this.dom,this)),f&&!this.trackWrites&&(d=!0)}d||!(this.input.mouseDown&&this.domObserver.currentSelection.eq(this.domSelectionRange())&&Pi(this))?Si(this,d):(Bi(this,t.selection),this.domObserver.setCurSelection()),this.domObserver.start()}this.updatePluginViews(n),"reset"==c?this.dom.scrollTop=0:"to selection"==c?this.scrollToSelection():h&&xr(h)}},{key:"scrollToSelection",value:function(){var t=this,e=this.domSelectionRange().focusNode;if(this.someProp("handleScrollToSelection",(function(e){return e(t)})));else if(this.state.selection instanceof je){var n=this.docView.domAfterPos(this.state.selection.from);1==n.nodeType&&br(this,n.getBoundingClientRect(),e)}else br(this,this.coordsAtPos(this.state.selection.head,1),e)}},{key:"destroyPluginViews",value:function(){var t;while(t=this.pluginViews.pop())t.destroy&&t.destroy()}},{key:"updatePluginViews",value:function(t){if(t&&t.plugins==this.state.plugins&&this.directPlugins==this.prevDirectPlugins)for(var e=0;e<this.pluginViews.length;e++){var n=this.pluginViews[e];n.update&&n.update(this,t)}else{this.prevDirectPlugins=this.directPlugins,this.destroyPluginViews();for(var r=0;r<this.directPlugins.length;r++){var i=this.directPlugins[r];i.spec.view&&this.pluginViews.push(i.spec.view(this))}for(var o=0;o<this.state.plugins.length;o++){var s=this.state.plugins[o];s.spec.view&&this.pluginViews.push(s.spec.view(this))}}}},{key:"someProp",value:function(t,e){var n,r=this._props&&this._props[t];if(null!=r&&(n=e?e(r):r))return n;for(var i=0;i<this.directPlugins.length;i++){var o=this.directPlugins[i].props[t];if(null!=o&&(n=e?e(o):o))return n}var s=this.state.plugins;if(s)for(var a=0;a<s.length;a++){var u=s[a].props[t];if(null!=u&&(n=e?e(u):u))return n}}},{key:"hasFocus",value:function(){if(ir){var t=this.root.activeElement;if(t==this.dom)return!0;if(!t||!this.dom.contains(t))return!1;while(t&&this.dom!=t&&this.dom.contains(t)){if("false"==t.contentEditable)return!1;t=t.parentElement}return!0}return this.root.activeElement==this.dom}},{key:"focus",value:function(){this.domObserver.stop(),this.editable&&Er(this.dom),Si(this),this.domObserver.start()}},{key:"root",get:function(){var t=this,e=this._root;if(null==e)for(var n=function(e){if(9==e.nodeType||11==e.nodeType&&e.host)return e.getSelection||(Object.getPrototypeOf(e).getSelection=function(){return e.ownerDocument.getSelection()}),{v:t._root=e}},r=this.dom.parentNode;r;r=r.parentNode){var i=n(r);if("object"===(0,b.Z)(i))return i.v}return e||document}},{key:"posAtCoords",value:function(t){return Br(this,t)}},{key:"coordsAtPos",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return zr(this,t,e)}},{key:"domAtPos",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this.docView.domFromPos(t,e)}},{key:"nodeDOM",value:function(t){var e=this.docView.descAt(t);return e?e.nodeDOM:null}},{key:"posAtDOM",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:-1,r=this.docView.posFromDOM(t,e,n);if(null==r)throw new RangeError("DOM position not inside the editor");return r}},{key:"endOfTextblock",value:function(t,e){return Wr(this,e||this.state,t)}},{key:"pasteHTML",value:function(t,e){return Xo(this,"",t,!1,e||new ClipboardEvent("paste"))}},{key:"pasteText",value:function(t,e){return Xo(this,t,null,!0,e||new ClipboardEvent("paste"))}},{key:"destroy",value:function(){this.docView&&(Ao(this),this.destroyPluginViews(),this.mounted?(this.docView.update(this.state.doc,[],xs(this),this),this.dom.textContent=""):this.dom.parentNode&&this.dom.parentNode.removeChild(this.dom),this.docView.destroy(),this.docView=null)}},{key:"isDestroyed",get:function(){return null==this.docView}},{key:"dispatchEvent",value:function(t){return Mo(this,t)}},{key:"dispatch",value:function(t){var e=this._props.dispatchTransaction;e?e.call(this,t):this.updateState(this.state.apply(t))}},{key:"domSelectionRange",value:function(){return lr&&11===this.root.nodeType&&Gn(this.dom.ownerDocument)==this.dom?Ts(this):this.domSelection()}},{key:"domSelection",value:function(){return this.root.getSelection()}}]),t}();function js(t){var e=Object.create(null);return e.class="ProseMirror",e.contenteditable=String(t.editable),t.someProp("attributes",(function(n){if("function"==typeof n&&(n=n(t.state)),n)for(var r in n)"class"==r?e.class+=" "+n[r]:"style"==r?e.style=(e.style?e.style+";":"")+n[r]:e[r]||"contenteditable"==r||"nodeName"==r||(e[r]=String(n[r]))})),e.translate||(e.translate="no"),[us.node(0,t.state.doc.content.size,e)]}function $s(t){if(t.markCursor){var e=document.createElement("img");e.className="ProseMirror-separator",e.setAttribute("mark-placeholder","true"),e.setAttribute("alt",""),t.cursorWrapper={dom:e,deco:us.widget(t.state.selection.head,e,{raw:!0,marks:t.markCursor})}}else t.cursorWrapper=null}function Vs(t){return!t.someProp("editable",(function(e){return!1===e(t.state)}))}function Hs(t,e){var n=Math.min(t.$anchor.sharedDepth(t.head),e.$anchor.sharedDepth(e.head));return t.$anchor.start(n)!=e.$anchor.start(n)}function Js(t){var e=Object.create(null);function n(t){for(var n in t)Object.prototype.hasOwnProperty.call(e,n)||(e[n]=t[n])}return t.someProp("nodeViews",n),t.someProp("markViews",n),e}function Ks(t,e){var n=0,r=0;for(var i in t){if(t[i]!=e[i])return!0;n++}for(var o in e)r++;return n!=r}function Ws(t){if(t.spec.state||t.spec.filterTransaction||t.spec.appendTransaction)throw new RangeError("Plugins passed directly to the view must not have a state component")}for(var Us={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"=",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},Gs={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:":",61:"+",173:"_",186:":",187:"+",188:"<",189:"_",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"'},Ys="undefined"!=typeof navigator&&/Mac/.test(navigator.platform),Qs="undefined"!=typeof navigator&&/MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent),Xs=0;Xs<10;Xs++)Us[48+Xs]=Us[96+Xs]=String(Xs);for(Xs=1;Xs<=24;Xs++)Us[Xs+111]="F"+Xs;for(Xs=65;Xs<=90;Xs++)Us[Xs]=String.fromCharCode(Xs+32),Gs[Xs]=String.fromCharCode(Xs);for(var ta in Us)Gs.hasOwnProperty(ta)||(Gs[ta]=Us[ta]);function ea(t){var e=Ys&&t.metaKey&&t.shiftKey&&!t.ctrlKey&&!t.altKey||Qs&&t.shiftKey&&t.key&&1==t.key.length||"Unidentified"==t.key,n=!e&&t.key||(t.shiftKey?Gs:Us)[t.keyCode]||t.key||"Unidentified";return"Esc"==n&&(n="Escape"),"Del"==n&&(n="Delete"),"Left"==n&&(n="ArrowLeft"),"Up"==n&&(n="ArrowUp"),"Right"==n&&(n="ArrowRight"),"Down"==n&&(n="ArrowDown"),n}var na="undefined"!=typeof navigator&&/Mac|iP(hone|[oa]d)/.test(navigator.platform);function ra(t){var e,n,r,i,o=t.split(/-(?!$)/),s=o[o.length-1];"Space"==s&&(s=" ");for(var a=0;a<o.length-1;a++){var u=o[a];if(/^(cmd|meta|m)$/i.test(u))i=!0;else if(/^a(lt)?$/i.test(u))e=!0;else if(/^(c|ctrl|control)$/i.test(u))n=!0;else if(/^s(hift)?$/i.test(u))r=!0;else{if(!/^mod$/i.test(u))throw new Error("Unrecognized modifier name: "+u);na?i=!0:n=!0}}return e&&(s="Alt-"+s),n&&(s="Ctrl-"+s),i&&(s="Meta-"+s),r&&(s="Shift-"+s),s}function ia(t){var e=Object.create(null);for(var n in t)e[ra(n)]=t[n];return e}function oa(t,e){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];return e.altKey&&(t="Alt-"+t),e.ctrlKey&&(t="Ctrl-"+t),e.metaKey&&(t="Meta-"+t),n&&e.shiftKey&&(t="Shift-"+t),t}function sa(t){return new on({props:{handleKeyDown:aa(t)}})}function aa(t){var e=ia(t);return function(t,n){var r,i=ea(n),o=e[oa(i,n)];if(o&&o(t.state,t.dispatch,t))return!0;if(1==i.length&&" "!=i){if(n.shiftKey){var s=e[oa(i,n,!1)];if(s&&s(t.state,t.dispatch,t))return!0}if((n.shiftKey||n.altKey||n.metaKey||i.charCodeAt(0)>127)&&(r=Us[n.keyCode])&&r!=i){var a=e[oa(r,n)];if(a&&a(t.state,t.dispatch,t))return!0}}return!1}}function ua(t,e,n){for(var r=0;;r++){if(r==t.childCount||r==e.childCount)return t.childCount==e.childCount?null:n;var i=t.child(r),o=e.child(r);if(i!=o){if(!i.sameMarkup(o))return n;if(i.isText&&i.text!=o.text){for(var s=0;i.text[s]==o.text[s];s++)n++;return n}if(i.content.size||o.content.size){var a=ua(i.content,o.content,n+1);if(null!=a)return a}n+=i.nodeSize}else n+=i.nodeSize}}function ca(t,e,n,r){for(var i=t.childCount,o=e.childCount;;){if(0==i||0==o)return i==o?null:{a:n,b:r};var s=t.child(--i),a=e.child(--o),u=s.nodeSize;if(s!=a){if(!s.sameMarkup(a))return{a:n,b:r};if(s.isText&&s.text!=a.text){var c=0,l=Math.min(s.text.length,a.text.length);while(c<l&&s.text[s.text.length-c-1]==a.text[a.text.length-c-1])c++,n--,r--;return{a:n,b:r}}if(s.content.size||a.content.size){var h=ca(s.content,a.content,n-1,r-1);if(h)return h}n-=u,r-=u}else n-=u,r-=u}}var la=function(){function t(e,n){if((0,w.Z)(this,t),this.content=e,this.size=n||0,null==n)for(var r=0;r<e.length;r++)this.size+=e[r].nodeSize}return(0,D.Z)(t,[{key:"nodesBetween",value:function(t,e,n){for(var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,i=arguments.length>4?arguments[4]:void 0,o=0,s=0;s<e;o++){var a=this.content[o],u=s+a.nodeSize;if(u>t&&!1!==n(a,r+s,i||null,o)&&a.content.size){var c=s+1;a.nodesBetween(Math.max(0,t-c),Math.min(a.content.size,e-c),n,r+c)}s=u}}},{key:"descendants",value:function(t){this.nodesBetween(0,this.size,t)}},{key:"textBetween",value:function(t,e,n,r){var i="",o=!0;return this.nodesBetween(t,e,(function(s,a){s.isText?(i+=s.text.slice(Math.max(t,a)-a,e-a),o=!n):s.isLeaf?(r?i+="function"===typeof r?r(s):r:s.type.spec.leafText&&(i+=s.type.spec.leafText(s)),o=!n):!o&&s.isBlock&&(i+=n,o=!0)}),0),i}},{key:"append",value:function(e){if(!e.size)return this;if(!this.size)return e;var n=this.lastChild,r=e.firstChild,i=this.content.slice(),o=0;for(n.isText&&n.sameMarkup(r)&&(i[i.length-1]=n.withText(n.text+r.text),o=1);o<e.content.length;o++)i.push(e.content[o]);return new t(i,this.size+e.size)}},{key:"cut",value:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.size;if(0==e&&n==this.size)return this;var r=[],i=0;if(n>e)for(var o=0,s=0;s<n;o++){var a=this.content[o],u=s+a.nodeSize;u>e&&((s<e||u>n)&&(a=a.isText?a.cut(Math.max(0,e-s),Math.min(a.text.length,n-s)):a.cut(Math.max(0,e-s-1),Math.min(a.content.size,n-s-1))),r.push(a),i+=a.nodeSize),s=u}return new t(r,i)}},{key:"cutByIndex",value:function(e,n){return e==n?t.empty:0==e&&n==this.content.length?this:new t(this.content.slice(e,n))}},{key:"replaceChild",value:function(e,n){var r=this.content[e];if(r==n)return this;var i=this.content.slice(),o=this.size+n.nodeSize-r.nodeSize;return i[e]=n,new t(i,o)}},{key:"addToStart",value:function(e){return new t([e].concat(this.content),this.size+e.nodeSize)}},{key:"addToEnd",value:function(e){return new t(this.content.concat(e),this.size+e.nodeSize)}},{key:"eq",value:function(t){if(this.content.length!=t.content.length)return!1;for(var e=0;e<this.content.length;e++)if(!this.content[e].eq(t.content[e]))return!1;return!0}},{key:"firstChild",get:function(){return this.content.length?this.content[0]:null}},{key:"lastChild",get:function(){return this.content.length?this.content[this.content.length-1]:null}},{key:"childCount",get:function(){return this.content.length}},{key:"child",value:function(t){var e=this.content[t];if(!e)throw new RangeError("Index "+t+" out of range for "+this);return e}},{key:"maybeChild",value:function(t){return this.content[t]||null}},{key:"forEach",value:function(t){for(var e=0,n=0;e<this.content.length;e++){var r=this.content[e];t(r,n,e),n+=r.nodeSize}}},{key:"findDiffStart",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return ua(this,t,e)}},{key:"findDiffEnd",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.size,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:t.size;return ca(this,t,e,n)}},{key:"findIndex",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1;if(0==t)return da(0,t);if(t==this.size)return da(this.content.length,t);if(t>this.size||t<0)throw new RangeError("Position ".concat(t," outside of fragment (").concat(this,")"));for(var n=0,r=0;;n++){var i=this.child(n),o=r+i.nodeSize;if(o>=t)return o==t||e>0?da(n+1,o):da(n,r);r=o}}},{key:"toString",value:function(){return"<"+this.toStringInner()+">"}},{key:"toStringInner",value:function(){return this.content.join(", ")}},{key:"toJSON",value:function(){return this.content.length?this.content.map((function(t){return t.toJSON()})):null}}],[{key:"fromJSON",value:function(e,n){if(!n)return t.empty;if(!Array.isArray(n))throw new RangeError("Invalid input for Fragment.fromJSON");return new t(n.map(e.nodeFromJSON))}},{key:"fromArray",value:function(e){if(!e.length)return t.empty;for(var n,r=0,i=0;i<e.length;i++){var o=e[i];r+=o.nodeSize,i&&o.isText&&e[i-1].sameMarkup(o)?(n||(n=e.slice(0,i)),n[n.length-1]=o.withText(n[n.length-1].text+o.text)):n&&n.push(o)}return new t(n||e,r)}},{key:"from",value:function(e){if(!e)return t.empty;if(e instanceof t)return e;if(Array.isArray(e))return this.fromArray(e);if(e.attrs)return new t([e],e.nodeSize);throw new RangeError("Can not convert "+e+" to a Fragment"+(e.nodesBetween?" (looks like multiple versions of prosemirror-model were loaded)":""))}}]),t}();la.empty=new la([],0);var ha={index:0,offset:0};function da(t,e){return ha.index=t,ha.offset=e,ha}function fa(t,e){if(t===e)return!0;if(!t||"object"!=(0,b.Z)(t)||!e||"object"!=(0,b.Z)(e))return!1;var n=Array.isArray(t);if(Array.isArray(e)!=n)return!1;if(n){if(t.length!=e.length)return!1;for(var r=0;r<t.length;r++)if(!fa(t[r],e[r]))return!1}else{for(var i in t)if(!(i in e)||!fa(t[i],e[i]))return!1;for(var o in e)if(!(o in t))return!1}return!0}var pa=function(){function t(e,n){(0,w.Z)(this,t),this.type=e,this.attrs=n}return(0,D.Z)(t,[{key:"addToSet",value:function(t){for(var e,n=!1,r=0;r<t.length;r++){var i=t[r];if(this.eq(i))return t;if(this.type.excludes(i.type))e||(e=t.slice(0,r));else{if(i.type.excludes(this.type))return t;!n&&i.type.rank>this.type.rank&&(e||(e=t.slice(0,r)),e.push(this),n=!0),e&&e.push(i)}}return e||(e=t.slice()),n||e.push(this),e}},{key:"removeFromSet",value:function(t){for(var e=0;e<t.length;e++)if(this.eq(t[e]))return t.slice(0,e).concat(t.slice(e+1));return t}},{key:"isInSet",value:function(t){for(var e=0;e<t.length;e++)if(this.eq(t[e]))return!0;return!1}},{key:"eq",value:function(t){return this==t||this.type==t.type&&fa(this.attrs,t.attrs)}},{key:"toJSON",value:function(){var t={type:this.type.name};for(var e in this.attrs){t.attrs=this.attrs;break}return t}}],[{key:"fromJSON",value:function(t,e){if(!e)throw new RangeError("Invalid input for Mark.fromJSON");var n=t.marks[e.type];if(!n)throw new RangeError("There is no mark type ".concat(e.type," in this schema"));return n.create(e.attrs)}},{key:"sameSet",value:function(t,e){if(t==e)return!0;if(t.length!=e.length)return!1;for(var n=0;n<t.length;n++)if(!t[n].eq(e[n]))return!1;return!0}},{key:"setFrom",value:function(e){if(!e||Array.isArray(e)&&0==e.length)return t.none;if(e instanceof t)return[e];var n=e.slice();return n.sort((function(t,e){return t.type.rank-e.type.rank})),n}}]),t}();pa.none=[];var va=function(t){(0,g.Z)(n,t);var e=(0,y.Z)(n);function n(){return(0,w.Z)(this,n),e.apply(this,arguments)}return(0,D.Z)(n)}((0,k.Z)(Error)),ma=function(){function t(e,n,r){(0,w.Z)(this,t),this.content=e,this.openStart=n,this.openEnd=r}return(0,D.Z)(t,[{key:"size",get:function(){return this.content.size-this.openStart-this.openEnd}},{key:"insertAt",value:function(e,n){var r=ya(this.content,e+this.openStart,n);return r&&new t(r,this.openStart,this.openEnd)}},{key:"removeBetween",value:function(e,n){return new t(ga(this.content,e+this.openStart,n+this.openStart),this.openStart,this.openEnd)}},{key:"eq",value:function(t){return this.content.eq(t.content)&&this.openStart==t.openStart&&this.openEnd==t.openEnd}},{key:"toString",value:function(){return this.content+"("+this.openStart+","+this.openEnd+")"}},{key:"toJSON",value:function(){if(!this.content.size)return null;var t={content:this.content.toJSON()};return this.openStart>0&&(t.openStart=this.openStart),this.openEnd>0&&(t.openEnd=this.openEnd),t}}],[{key:"fromJSON",value:function(e,n){if(!n)return t.empty;var r=n.openStart||0,i=n.openEnd||0;if("number"!=typeof r||"number"!=typeof i)throw new RangeError("Invalid input for Slice.fromJSON");return new t(la.fromJSON(e,n.content),r,i)}},{key:"maxOpen",value:function(e){for(var n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r=0,i=0,o=e.firstChild;o&&!o.isLeaf&&(n||!o.type.spec.isolating);o=o.firstChild)r++;for(var s=e.lastChild;s&&!s.isLeaf&&(n||!s.type.spec.isolating);s=s.lastChild)i++;return new t(e,r,i)}}]),t}();function ga(t,e,n){var r=t.findIndex(e),i=r.index,o=r.offset,s=t.maybeChild(i),a=t.findIndex(n),u=a.index,c=a.offset;if(o==e||s.isText){if(c!=n&&!t.child(u).isText)throw new RangeError("Removing non-flat range");return t.cut(0,e).append(t.cut(n))}if(i!=u)throw new RangeError("Removing non-flat range");return t.replaceChild(i,s.copy(ga(s.content,e-o-1,n-o-1)))}function ya(t,e,n,r){var i=t.findIndex(e),o=i.index,s=i.offset,a=t.maybeChild(o);if(s==e||a.isText)return r&&!r.canReplace(o,o,n)?null:t.cut(0,e).append(n).append(t.cut(e));var u=ya(a.content,e-s-1,n);return u&&t.replaceChild(o,a.copy(u))}function ka(t,e,n){if(n.openStart>t.depth)throw new va("Inserted content deeper than insertion position");if(t.depth-n.openStart!=e.depth-n.openEnd)throw new va("Inconsistent open depths");return ba(t,e,n,0)}function ba(t,e,n,r){var i=t.index(r),o=t.node(r);if(i==e.index(r)&&r<t.depth-n.openStart){var s=ba(t,e,n,r+1);return o.copy(o.content.replaceChild(i,s))}if(n.content.size){if(n.openStart||n.openEnd||t.depth!=r||e.depth!=r){var a=_a(n,t),u=a.start,c=a.end;return Aa(o,Ea(t,u,c,e,r))}var l=t.parent,h=l.content;return Aa(l,h.cut(0,t.parentOffset).append(n.content).append(h.cut(e.parentOffset)))}return Aa(o,Sa(t,e,r))}function wa(t,e){if(!e.type.compatibleContent(t.type))throw new va("Cannot join "+e.type.name+" onto "+t.type.name)}function Da(t,e,n){var r=t.node(n);return wa(r,e.node(n)),r}function xa(t,e){var n=e.length-1;n>=0&&t.isText&&t.sameMarkup(e[n])?e[n]=t.withText(e[n].text+t.text):e.push(t)}function Ca(t,e,n,r){var i=(e||t).node(n),o=0,s=e?e.index(n):i.childCount;t&&(o=t.index(n),t.depth>n?o++:t.textOffset&&(xa(t.nodeAfter,r),o++));for(var a=o;a<s;a++)xa(i.child(a),r);e&&e.depth==n&&e.textOffset&&xa(e.nodeBefore,r)}function Aa(t,e){return t.type.checkContent(e),t.copy(e)}function Ea(t,e,n,r,i){var o=t.depth>i&&Da(t,e,i+1),s=r.depth>i&&Da(n,r,i+1),a=[];return Ca(null,t,i,a),o&&s&&e.index(i)==n.index(i)?(wa(o,s),xa(Aa(o,Ea(t,e,n,r,i+1)),a)):(o&&xa(Aa(o,Sa(t,e,i+1)),a),Ca(e,n,i,a),s&&xa(Aa(s,Sa(n,r,i+1)),a)),Ca(r,null,i,a),new la(a)}function Sa(t,e,n){var r=[];if(Ca(null,t,n,r),t.depth>n){var i=Da(t,e,n+1);xa(Aa(i,Sa(t,e,n+1)),r)}return Ca(e,null,n,r),new la(r)}function _a(t,e){for(var n=e.depth-t.openStart,r=e.node(n),i=r.copy(t.content),o=n-1;o>=0;o--)i=e.node(o).copy(la.from(i));return{start:i.resolveNoCache(t.openStart+n),end:i.resolveNoCache(i.content.size-t.openEnd-n)}}ma.empty=new ma(la.empty,0,0);var Ma=function(){function t(e,n,r){(0,w.Z)(this,t),this.pos=e,this.path=n,this.parentOffset=r,this.depth=n.length/3-1}return(0,D.Z)(t,[{key:"resolveDepth",value:function(t){return null==t?this.depth:t<0?this.depth+t:t}},{key:"parent",get:function(){return this.node(this.depth)}},{key:"doc",get:function(){return this.node(0)}},{key:"node",value:function(t){return this.path[3*this.resolveDepth(t)]}},{key:"index",value:function(t){return this.path[3*this.resolveDepth(t)+1]}},{key:"indexAfter",value:function(t){return t=this.resolveDepth(t),this.index(t)+(t!=this.depth||this.textOffset?1:0)}},{key:"start",value:function(t){return t=this.resolveDepth(t),0==t?0:this.path[3*t-1]+1}},{key:"end",value:function(t){return t=this.resolveDepth(t),this.start(t)+this.node(t).content.size}},{key:"before",value:function(t){if(t=this.resolveDepth(t),!t)throw new RangeError("There is no position before the top-level node");return t==this.depth+1?this.pos:this.path[3*t-1]}},{key:"after",value:function(t){if(t=this.resolveDepth(t),!t)throw new RangeError("There is no position after the top-level node");return t==this.depth+1?this.pos:this.path[3*t-1]+this.path[3*t].nodeSize}},{key:"textOffset",get:function(){return this.pos-this.path[this.path.length-1]}},{key:"nodeAfter",get:function(){var t=this.parent,e=this.index(this.depth);if(e==t.childCount)return null;var n=this.pos-this.path[this.path.length-1],r=t.child(e);return n?t.child(e).cut(n):r}},{key:"nodeBefore",get:function(){var t=this.index(this.depth),e=this.pos-this.path[this.path.length-1];return e?this.parent.child(t).cut(0,e):0==t?null:this.parent.child(t-1)}},{key:"posAtIndex",value:function(t,e){e=this.resolveDepth(e);for(var n=this.path[3*e],r=0==e?0:this.path[3*e-1]+1,i=0;i<t;i++)r+=n.child(i).nodeSize;return r}},{key:"marks",value:function(){var t=this.parent,e=this.index();if(0==t.content.size)return pa.none;if(this.textOffset)return t.child(e).marks;var n=t.maybeChild(e-1),r=t.maybeChild(e);if(!n){var i=n;n=r,r=i}for(var o=n.marks,s=0;s<o.length;s++)!1!==o[s].type.spec.inclusive||r&&o[s].isInSet(r.marks)||(o=o[s--].removeFromSet(o));return o}},{key:"marksAcross",value:function(t){var e=this.parent.maybeChild(this.index());if(!e||!e.isInline)return null;for(var n=e.marks,r=t.parent.maybeChild(t.index()),i=0;i<n.length;i++)!1!==n[i].type.spec.inclusive||r&&n[i].isInSet(r.marks)||(n=n[i--].removeFromSet(n));return n}},{key:"sharedDepth",value:function(t){for(var e=this.depth;e>0;e--)if(this.start(e)<=t&&this.end(e)>=t)return e;return 0}},{key:"blockRange",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this,e=arguments.length>1?arguments[1]:void 0;if(t.pos<this.pos)return t.blockRange(this);for(var n=this.depth-(this.parent.inlineContent||this.pos==t.pos?1:0);n>=0;n--)if(t.pos<=this.end(n)&&(!e||e(this.node(n))))return new Na(this,t,n);return null}},{key:"sameParent",value:function(t){return this.pos-this.parentOffset==t.pos-t.parentOffset}},{key:"max",value:function(t){return t.pos>this.pos?t:this}},{key:"min",value:function(t){return t.pos<this.pos?t:this}},{key:"toString",value:function(){for(var t="",e=1;e<=this.depth;e++)t+=(t?"/":"")+this.node(e).type.name+"_"+this.index(e-1);return t+":"+this.parentOffset}}],[{key:"resolve",value:function(e,n){if(!(n>=0&&n<=e.content.size))throw new RangeError("Position "+n+" out of range");for(var r=[],i=0,o=n,s=e;;){var a=s.content.findIndex(o),u=a.index,c=a.offset,l=o-c;if(r.push(s,u,i+c),!l)break;if(s=s.child(u),s.isText)break;o=l-1,i+=c+1}return new t(n,r,o)}},{key:"resolveCached",value:function(e,n){for(var r=0;r<Oa.length;r++){var i=Oa[r];if(i.pos==n&&i.doc==e)return i}var o=Oa[Ta]=t.resolve(e,n);return Ta=(Ta+1)%Fa,o}}]),t}(),Oa=[],Ta=0,Fa=12,Na=function(){function t(e,n,r){(0,w.Z)(this,t),this.$from=e,this.$to=n,this.depth=r}return(0,D.Z)(t,[{key:"start",get:function(){return this.$from.before(this.depth+1)}},{key:"end",get:function(){return this.$to.after(this.depth+1)}},{key:"parent",get:function(){return this.$from.node(this.depth)}},{key:"startIndex",get:function(){return this.$from.index(this.depth)}},{key:"endIndex",get:function(){return this.$to.indexAfter(this.depth)}}]),t}(),Ba=Object.create(null),Ia=function(){function t(e,n,r){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:pa.none;(0,w.Z)(this,t),this.type=e,this.attrs=n,this.marks=i,this.content=r||la.empty}return(0,D.Z)(t,[{key:"nodeSize",get:function(){return this.isLeaf?1:2+this.content.size}},{key:"childCount",get:function(){return this.content.childCount}},{key:"child",value:function(t){return this.content.child(t)}},{key:"maybeChild",value:function(t){return this.content.maybeChild(t)}},{key:"forEach",value:function(t){this.content.forEach(t)}},{key:"nodesBetween",value:function(t,e,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;this.content.nodesBetween(t,e,n,r,this)}},{key:"descendants",value:function(t){this.nodesBetween(0,this.content.size,t)}},{key:"textContent",get:function(){return this.isLeaf&&this.type.spec.leafText?this.type.spec.leafText(this):this.textBetween(0,this.content.size,"")}},{key:"textBetween",value:function(t,e,n,r){return this.content.textBetween(t,e,n,r)}},{key:"firstChild",get:function(){return this.content.firstChild}},{key:"lastChild",get:function(){return this.content.lastChild}},{key:"eq",value:function(t){return this==t||this.sameMarkup(t)&&this.content.eq(t.content)}},{key:"sameMarkup",value:function(t){return this.hasMarkup(t.type,t.attrs,t.marks)}},{key:"hasMarkup",value:function(t,e,n){return this.type==t&&fa(this.attrs,e||t.defaultAttrs||Ba)&&pa.sameSet(this.marks,n||pa.none)}},{key:"copy",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return e==this.content?this:new t(this.type,this.attrs,e,this.marks)}},{key:"mark",value:function(e){return e==this.marks?this:new t(this.type,this.attrs,this.content,e)}},{key:"cut",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.content.size;return 0==t&&e==this.content.size?this:this.copy(this.content.cut(t,e))}},{key:"slice",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.content.size,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(t==e)return ma.empty;var r=this.resolve(t),i=this.resolve(e),o=n?0:r.sharedDepth(e),s=r.start(o),a=r.node(o),u=a.content.cut(r.pos-s,i.pos-s);return new ma(u,r.depth-o,i.depth-o)}},{key:"replace",value:function(t,e,n){return ka(this.resolve(t),this.resolve(e),n)}},{key:"nodeAt",value:function(t){for(var e=this;;){var n=e.content.findIndex(t),r=n.index,i=n.offset;if(e=e.maybeChild(r),!e)return null;if(i==t||e.isText)return e;t-=i+1}}},{key:"childAfter",value:function(t){var e=this.content.findIndex(t),n=e.index,r=e.offset;return{node:this.content.maybeChild(n),index:n,offset:r}}},{key:"childBefore",value:function(t){if(0==t)return{node:null,index:0,offset:0};var e=this.content.findIndex(t),n=e.index,r=e.offset;if(r<t)return{node:this.content.child(n),index:n,offset:r};var i=this.content.child(n-1);return{node:i,index:n-1,offset:r-i.nodeSize}}},{key:"resolve",value:function(t){return Ma.resolveCached(this,t)}},{key:"resolveNoCache",value:function(t){return Ma.resolve(this,t)}},{key:"rangeHasMark",value:function(t,e,n){var r=!1;return e>t&&this.nodesBetween(t,e,(function(t){return n.isInSet(t.marks)&&(r=!0),!r})),r}},{key:"isBlock",get:function(){return this.type.isBlock}},{key:"isTextblock",get:function(){return this.type.isTextblock}},{key:"inlineContent",get:function(){return this.type.inlineContent}},{key:"isInline",get:function(){return this.type.isInline}},{key:"isText",get:function(){return this.type.isText}},{key:"isLeaf",get:function(){return this.type.isLeaf}},{key:"isAtom",get:function(){return this.type.isAtom}},{key:"toString",value:function(){if(this.type.spec.toDebugString)return this.type.spec.toDebugString(this);var t=this.type.name;return this.content.size&&(t+="("+this.content.toStringInner()+")"),Ra(this.marks,t)}},{key:"contentMatchAt",value:function(t){var e=this.type.contentMatch.matchFragment(this.content,0,t);if(!e)throw new Error("Called contentMatchAt on a node with invalid content");return e}},{key:"canReplace",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:la.empty,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:n.childCount,o=this.contentMatchAt(t).matchFragment(n,r,i),s=o&&o.matchFragment(this.content,e);if(!s||!s.validEnd)return!1;for(var a=r;a<i;a++)if(!this.type.allowsMarks(n.child(a).marks))return!1;return!0}},{key:"canReplaceWith",value:function(t,e,n,r){if(r&&!this.type.allowsMarks(r))return!1;var i=this.contentMatchAt(t).matchType(n),o=i&&i.matchFragment(this.content,e);return!!o&&o.validEnd}},{key:"canAppend",value:function(t){return t.content.size?this.canReplace(this.childCount,this.childCount,t.content):this.type.compatibleContent(t.type)}},{key:"check",value:function(){this.type.checkContent(this.content);for(var t=pa.none,e=0;e<this.marks.length;e++)t=this.marks[e].addToSet(t);if(!pa.sameSet(t,this.marks))throw new RangeError("Invalid collection of marks for node ".concat(this.type.name,": ").concat(this.marks.map((function(t){return t.type.name}))));this.content.forEach((function(t){return t.check()}))}},{key:"toJSON",value:function(){var t={type:this.type.name};for(var e in this.attrs){t.attrs=this.attrs;break}return this.content.size&&(t.content=this.content.toJSON()),this.marks.length&&(t.marks=this.marks.map((function(t){return t.toJSON()}))),t}}],[{key:"fromJSON",value:function(t,e){if(!e)throw new RangeError("Invalid input for Node.fromJSON");var n=null;if(e.marks){if(!Array.isArray(e.marks))throw new RangeError("Invalid mark data for Node.fromJSON");n=e.marks.map(t.markFromJSON)}if("text"==e.type){if("string"!=typeof e.text)throw new RangeError("Invalid text node in JSON");return t.text(e.text,n)}var r=la.fromJSON(t,e.content);return t.nodeType(e.type).create(e.attrs,r,n)}}]),t}();Ia.prototype.text=void 0;var La=function(t){(0,g.Z)(n,t);var e=(0,y.Z)(n);function n(t,r,i,o){var s;if((0,w.Z)(this,n),s=e.call(this,t,r,null,o),!i)throw new RangeError("Empty text nodes are not allowed");return s.text=i,s}return(0,D.Z)(n,[{key:"toString",value:function(){return this.type.spec.toDebugString?this.type.spec.toDebugString(this):Ra(this.marks,JSON.stringify(this.text))}},{key:"textContent",get:function(){return this.text}},{key:"textBetween",value:function(t,e){return this.text.slice(t,e)}},{key:"nodeSize",get:function(){return this.text.length}},{key:"mark",value:function(t){return t==this.marks?this:new n(this.type,this.attrs,this.text,t)}},{key:"withText",value:function(t){return t==this.text?this:new n(this.type,this.attrs,t,this.marks)}},{key:"cut",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.text.length;return 0==t&&e==this.text.length?this:this.withText(this.text.slice(t,e))}},{key:"eq",value:function(t){return this.sameMarkup(t)&&this.text==t.text}},{key:"toJSON",value:function(){var t=p((0,d.Z)(n.prototype),"toJSON",this).call(this);return t.text=this.text,t}}]),n}(Ia);function Ra(t,e){for(var n=t.length-1;n>=0;n--)e=t[n].type.name+"("+e+")";return e}var za=function(){function t(e){(0,w.Z)(this,t),this.validEnd=e,this.next=[],this.wrapCache=[]}return(0,D.Z)(t,[{key:"matchType",value:function(t){for(var e=0;e<this.next.length;e++)if(this.next[e].type==t)return this.next[e].next;return null}},{key:"matchFragment",value:function(t){for(var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:t.childCount,r=this,i=e;r&&i<n;i++)r=r.matchType(t.child(i).type);return r}},{key:"inlineContent",get:function(){return 0!=this.next.length&&this.next[0].type.isInline}},{key:"defaultType",get:function(){for(var t=0;t<this.next.length;t++){var e=this.next[t].type;if(!e.isText&&!e.hasRequiredAttrs())return e}return null}},{key:"compatible",value:function(t){for(var e=0;e<this.next.length;e++)for(var n=0;n<t.next.length;n++)if(this.next[e].type==t.next[n].type)return!0;return!1}},{key:"fillBefore",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=[this];function i(o,s){var a=o.matchFragment(t,n);if(a&&(!e||a.validEnd))return la.from(s.map((function(t){return t.createAndFill()})));for(var u=0;u<o.next.length;u++){var c=o.next[u],l=c.type,h=c.next;if(!l.isText&&!l.hasRequiredAttrs()&&-1==r.indexOf(h)){r.push(h);var d=i(h,s.concat(l));if(d)return d}}return null}return i(this,[])}},{key:"findWrapping",value:function(t){for(var e=0;e<this.wrapCache.length;e+=2)if(this.wrapCache[e]==t)return this.wrapCache[e+1];var n=this.computeWrapping(t);return this.wrapCache.push(t,n),n}},{key:"computeWrapping",value:function(t){var e=Object.create(null),n=[{match:this,type:null,via:null}];while(n.length){var r=n.shift(),i=r.match;if(i.matchType(t)){for(var o=[],s=r;s.type;s=s.via)o.push(s.type);return o.reverse()}for(var a=0;a<i.next.length;a++){var u=i.next[a],c=u.type,l=u.next;c.isLeaf||c.hasRequiredAttrs()||c.name in e||r.type&&!l.validEnd||(n.push({match:c.contentMatch,type:c,via:r}),e[c.name]=!0)}}return null}},{key:"edgeCount",get:function(){return this.next.length}},{key:"edge",value:function(t){if(t>=this.next.length)throw new RangeError("There's no ".concat(t,"th edge in this content match"));return this.next[t]}},{key:"toString",value:function(){var t=[];function e(n){t.push(n);for(var r=0;r<n.next.length;r++)-1==t.indexOf(n.next[r].next)&&e(n.next[r].next)}return e(this),t.map((function(e,n){for(var r=n+(e.validEnd?"*":" ")+" ",i=0;i<e.next.length;i++)r+=(i?", ":"")+e.next[i].type.name+"->"+t.indexOf(e.next[i].next);return r})).join("\n")}}],[{key:"parse",value:function(e,n){var r=new Pa(e,n);if(null==r.next)return t.empty;var i=Za(r);r.next&&r.err("Unexpected trailing text");var o=Ga(Ka(i));return Ya(o,r),o}}]),t}();za.empty=new za(!0);var Pa=function(){function t(e,n){(0,w.Z)(this,t),this.string=e,this.nodeTypes=n,this.inline=null,this.pos=0,this.tokens=e.split(/\s*(?=\b|\W|$)/),""==this.tokens[this.tokens.length-1]&&this.tokens.pop(),""==this.tokens[0]&&this.tokens.shift()}return(0,D.Z)(t,[{key:"next",get:function(){return this.tokens[this.pos]}},{key:"eat",value:function(t){return this.next==t&&(this.pos++||!0)}},{key:"err",value:function(t){throw new SyntaxError(t+" (in content expression '"+this.string+"')")}}]),t}();function Za(t){var e=[];do{e.push(qa(t))}while(t.eat("|"));return 1==e.length?e[0]:{type:"choice",exprs:e}}function qa(t){var e=[];do{e.push(ja(t))}while(t.next&&")"!=t.next&&"|"!=t.next);return 1==e.length?e[0]:{type:"seq",exprs:e}}function ja(t){for(var e=Ja(t);;)if(t.eat("+"))e={type:"plus",expr:e};else if(t.eat("*"))e={type:"star",expr:e};else if(t.eat("?"))e={type:"opt",expr:e};else{if(!t.eat("{"))break;e=Va(t,e)}return e}function $a(t){/\D/.test(t.next)&&t.err("Expected number, got '"+t.next+"'");var e=Number(t.next);return t.pos++,e}function Va(t,e){var n=$a(t),r=n;return t.eat(",")&&(r="}"!=t.next?$a(t):-1),t.eat("}")||t.err("Unclosed braced range"),{type:"range",min:n,max:r,expr:e}}function Ha(t,e){var n=t.nodeTypes,r=n[e];if(r)return[r];var i=[];for(var o in n){var s=n[o];s.groups.indexOf(e)>-1&&i.push(s)}return 0==i.length&&t.err("No node type or group '"+e+"' found"),i}function Ja(t){if(t.eat("(")){var e=Za(t);return t.eat(")")||t.err("Missing closing paren"),e}if(!/\W/.test(t.next)){var n=Ha(t,t.next).map((function(e){return null==t.inline?t.inline=e.isInline:t.inline!=e.isInline&&t.err("Mixing inline and block content"),{type:"name",value:e}}));return t.pos++,1==n.length?n[0]:{type:"choice",exprs:n}}t.err("Unexpected token '"+t.next+"'")}function Ka(t){var e=[[]];return i(o(t,0),n()),e;function n(){return e.push([])-1}function r(t,n,r){var i={term:r,to:n};return e[t].push(i),i}function i(t,e){t.forEach((function(t){return t.to=e}))}function o(t,e){if("choice"==t.type)return t.exprs.reduce((function(t,n){return t.concat(o(n,e))}),[]);if("seq"!=t.type){if("star"==t.type){var s=n();return r(e,s),i(o(t.expr,s),s),[r(s)]}if("plus"==t.type){var a=n();return i(o(t.expr,e),a),i(o(t.expr,a),a),[r(a)]}if("opt"==t.type)return[r(e)].concat(o(t.expr,e));if("range"==t.type){for(var u=e,c=0;c<t.min;c++){var l=n();i(o(t.expr,u),l),u=l}if(-1==t.max)i(o(t.expr,u),u);else for(var h=t.min;h<t.max;h++){var d=n();r(u,d),i(o(t.expr,u),d),u=d}return[r(u)]}if("name"==t.type)return[r(e,void 0,t.value)];throw new Error("Unknown expr type")}for(var f=0;;f++){var p=o(t.exprs[f],e);if(f==t.exprs.length-1)return p;i(p,e=n())}}}function Wa(t,e){return e-t}function Ua(t,e){var n=[];return r(e),n.sort(Wa);function r(e){var i=t[e];if(1==i.length&&!i[0].term)return r(i[0].to);n.push(e);for(var o=0;o<i.length;o++){var s=i[o],a=s.term,u=s.to;a||-1!=n.indexOf(u)||r(u)}}}function Ga(t){var e=Object.create(null);return n(Ua(t,0));function n(r){var i=[];r.forEach((function(e){t[e].forEach((function(e){var n=e.term,r=e.to;if(n){for(var o,s=0;s<i.length;s++)i[s][0]==n&&(o=i[s][1]);Ua(t,r).forEach((function(t){o||i.push([n,o=[]]),-1==o.indexOf(t)&&o.push(t)}))}}))}));for(var o=e[r.join(",")]=new za(r.indexOf(t.length-1)>-1),s=0;s<i.length;s++){var a=i[s][1].sort(Wa);o.next.push({type:i[s][0],next:e[a.join(",")]||n(a)})}return o}}function Ya(t,e){for(var n=0,r=[t];n<r.length;n++){for(var i=r[n],o=!i.validEnd,s=[],a=0;a<i.next.length;a++){var u=i.next[a],c=u.type,l=u.next;s.push(c.name),!o||c.isText||c.hasRequiredAttrs()||(o=!1),-1==r.indexOf(l)&&r.push(l)}o&&e.err("Only non-generatable nodes ("+s.join(", ")+") in a required position (see https://prosemirror.net/docs/guide/#generatable)")}}function Qa(t){var e=Object.create(null);for(var n in t){var r=t[n];if(!r.hasDefault)return null;e[n]=r.default}return e}function Xa(t,e){var n=Object.create(null);for(var r in t){var i=e&&e[r];if(void 0===i){var o=t[r];if(!o.hasDefault)throw new RangeError("No value supplied for attribute "+r);i=o.default}n[r]=i}return n}function tu(t){var e=Object.create(null);if(t)for(var n in t)e[n]=new nu(t[n]);return e}var eu=function(){function t(e,n,r){(0,w.Z)(this,t),this.name=e,this.schema=n,this.spec=r,this.markSet=null,this.groups=r.group?r.group.split(" "):[],this.attrs=tu(r.attrs),this.defaultAttrs=Qa(this.attrs),this.contentMatch=null,this.inlineContent=null,this.isBlock=!(r.inline||"text"==e),this.isText="text"==e}return(0,D.Z)(t,[{key:"isInline",get:function(){return!this.isBlock}},{key:"isTextblock",get:function(){return this.isBlock&&this.inlineContent}},{key:"isLeaf",get:function(){return this.contentMatch==za.empty}},{key:"isAtom",get:function(){return this.isLeaf||!!this.spec.atom}},{key:"whitespace",get:function(){return this.spec.whitespace||(this.spec.code?"pre":"normal")}},{key:"hasRequiredAttrs",value:function(){for(var t in this.attrs)if(this.attrs[t].isRequired)return!0;return!1}},{key:"compatibleContent",value:function(t){return this==t||this.contentMatch.compatible(t.contentMatch)}},{key:"computeAttrs",value:function(t){return!t&&this.defaultAttrs?this.defaultAttrs:Xa(this.attrs,t)}},{key:"create",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,e=arguments.length>1?arguments[1]:void 0,n=arguments.length>2?arguments[2]:void 0;if(this.isText)throw new Error("NodeType.create can't construct text nodes");return new Ia(this,this.computeAttrs(t),la.from(e),pa.setFrom(n))}},{key:"createChecked",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,e=arguments.length>1?arguments[1]:void 0,n=arguments.length>2?arguments[2]:void 0;return e=la.from(e),this.checkContent(e),new Ia(this,this.computeAttrs(t),e,pa.setFrom(n))}},{key:"createAndFill",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,e=arguments.length>1?arguments[1]:void 0,n=arguments.length>2?arguments[2]:void 0;if(t=this.computeAttrs(t),e=la.from(e),e.size){var r=this.contentMatch.fillBefore(e);if(!r)return null;e=r.append(e)}var i=this.contentMatch.matchFragment(e),o=i&&i.fillBefore(la.empty,!0);return o?new Ia(this,t,e.append(o),pa.setFrom(n)):null}},{key:"validContent",value:function(t){var e=this.contentMatch.matchFragment(t);if(!e||!e.validEnd)return!1;for(var n=0;n<t.childCount;n++)if(!this.allowsMarks(t.child(n).marks))return!1;return!0}},{key:"checkContent",value:function(t){if(!this.validContent(t))throw new RangeError("Invalid content for node ".concat(this.name,": ").concat(t.toString().slice(0,50)))}},{key:"allowsMarkType",value:function(t){return null==this.markSet||this.markSet.indexOf(t)>-1}},{key:"allowsMarks",value:function(t){if(null==this.markSet)return!0;for(var e=0;e<t.length;e++)if(!this.allowsMarkType(t[e].type))return!1;return!0}},{key:"allowedMarks",value:function(t){if(null==this.markSet)return t;for(var e,n=0;n<t.length;n++)this.allowsMarkType(t[n].type)?e&&e.push(t[n]):e||(e=t.slice(0,n));return e?e.length?e:pa.none:t}}],[{key:"compile",value:function(e,n){var r=Object.create(null);e.forEach((function(e,i){return r[e]=new t(e,n,i)}));var i=n.spec.topNode||"doc";if(!r[i])throw new RangeError("Schema is missing its top node type ('"+i+"')");if(!r.text)throw new RangeError("Every schema needs a 'text' type");for(var o in r.text.attrs)throw new RangeError("The text node type should not have attributes");return r}}]),t}(),nu=function(){function t(e){(0,w.Z)(this,t),this.hasDefault=Object.prototype.hasOwnProperty.call(e,"default"),this.default=e.default}return(0,D.Z)(t,[{key:"isRequired",get:function(){return!this.hasDefault}}]),t}(),ru=function(){function t(e,n,r,i){(0,w.Z)(this,t),this.name=e,this.rank=n,this.schema=r,this.spec=i,this.attrs=tu(i.attrs),this.excluded=null;var o=Qa(this.attrs);this.instance=o?new pa(this,o):null}return(0,D.Z)(t,[{key:"create",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return!t&&this.instance?this.instance:new pa(this,Xa(this.attrs,t))}},{key:"removeFromSet",value:function(t){for(var e=0;e<t.length;e++)t[e].type==this&&(t=t.slice(0,e).concat(t.slice(e+1)),e--);return t}},{key:"isInSet",value:function(t){for(var e=0;e<t.length;e++)if(t[e].type==this)return t[e]}},{key:"excludes",value:function(t){return this.excluded.indexOf(t)>-1}}],[{key:"compile",value:function(e,n){var r=Object.create(null),i=0;return e.forEach((function(e,o){return r[e]=new t(e,i++,n,o)})),r}}]),t}(),iu=function(){function t(e){(0,w.Z)(this,t),this.cached=Object.create(null);var n=this.spec={};for(var r in e)n[r]=e[r];n.nodes=S.from(e.nodes),n.marks=S.from(e.marks||{}),this.nodes=eu.compile(this.spec.nodes,this),this.marks=ru.compile(this.spec.marks,this);var i=Object.create(null);for(var o in this.nodes){if(o in this.marks)throw new RangeError(o+" can not be both a node and a mark");var s=this.nodes[o],a=s.spec.content||"",u=s.spec.marks;s.contentMatch=i[a]||(i[a]=za.parse(a,this.nodes)),s.inlineContent=s.contentMatch.inlineContent,s.markSet="_"==u?null:u?ou(this,u.split(" ")):""!=u&&s.inlineContent?null:[]}for(var c in this.marks){var l=this.marks[c],h=l.spec.excludes;l.excluded=null==h?[l]:""==h?[]:ou(this,h.split(" "))}this.nodeFromJSON=this.nodeFromJSON.bind(this),this.markFromJSON=this.markFromJSON.bind(this),this.topNodeType=this.nodes[this.spec.topNode||"doc"],this.cached.wrappings=Object.create(null)}return(0,D.Z)(t,[{key:"node",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2?arguments[2]:void 0,r=arguments.length>3?arguments[3]:void 0;if("string"==typeof t)t=this.nodeType(t);else{if(!(t instanceof eu))throw new RangeError("Invalid node type: "+t);if(t.schema!=this)throw new RangeError("Node type from different schema used ("+t.name+")")}return t.createChecked(e,n,r)}},{key:"text",value:function(t,e){var n=this.nodes.text;return new La(n,n.defaultAttrs,t,pa.setFrom(e))}},{key:"mark",value:function(t,e){return"string"==typeof t&&(t=this.marks[t]),t.create(e)}},{key:"nodeFromJSON",value:function(t){return Ia.fromJSON(this,t)}},{key:"markFromJSON",value:function(t){return pa.fromJSON(this,t)}},{key:"nodeType",value:function(t){var e=this.nodes[t];if(!e)throw new RangeError("Unknown node type: "+t);return e}}]),t}();function ou(t,e){for(var n=[],r=0;r<e.length;r++){var i=e[r],o=t.marks[i],s=o;if(o)n.push(o);else for(var a in t.marks){var u=t.marks[a];("_"==i||u.spec.group&&u.spec.group.split(" ").indexOf(i)>-1)&&n.push(s=u)}if(!s)throw new SyntaxError("Unknown mark type: '"+e[r]+"'")}return n}var su=function(){function t(e,n){var r=this;(0,w.Z)(this,t),this.schema=e,this.rules=n,this.tags=[],this.styles=[],n.forEach((function(t){t.tag?r.tags.push(t):t.style&&r.styles.push(t)})),this.normalizeLists=!this.tags.some((function(t){if(!/^(ul|ol)\b/.test(t.tag)||!t.node)return!1;var n=e.nodes[t.node];return n.contentMatch.matchType(n)}))}return(0,D.Z)(t,[{key:"parse",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=new vu(this,e,!1);return n.addAll(t,e.from,e.to),n.finish()}},{key:"parseSlice",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=new vu(this,e,!0);return n.addAll(t,e.from,e.to),ma.maxOpen(n.finish())}},{key:"matchTag",value:function(t,e,n){for(var r=n?this.tags.indexOf(n)+1:0;r<this.tags.length;r++){var i=this.tags[r];if(gu(t,i.tag)&&(void 0===i.namespace||t.namespaceURI==i.namespace)&&(!i.context||e.matchesContext(i.context))){if(i.getAttrs){var o=i.getAttrs(t);if(!1===o)continue;i.attrs=o||void 0}return i}}}},{key:"matchStyle",value:function(t,e,n,r){for(var i=r?this.styles.indexOf(r)+1:0;i<this.styles.length;i++){var o=this.styles[i],s=o.style;if(!(0!=s.indexOf(t)||o.context&&!n.matchesContext(o.context)||s.length>t.length&&(61!=s.charCodeAt(t.length)||s.slice(t.length+1)!=e))){if(o.getAttrs){var a=o.getAttrs(e);if(!1===a)continue;o.attrs=a||void 0}return o}}}}],[{key:"schemaRules",value:function(t){var e=[];function n(t){for(var n=null==t.priority?50:t.priority,r=0;r<e.length;r++){var i=e[r],o=null==i.priority?50:i.priority;if(o<n)break}e.splice(r,0,t)}var r=function(e){var r=t.marks[e].spec.parseDOM;r&&r.forEach((function(t){n(t=ku(t)),t.mark||t.ignore||t.clearMark||(t.mark=e)}))};for(var i in t.marks)r(i);var o=function(e){var r=t.nodes[e].spec.parseDOM;r&&r.forEach((function(t){n(t=ku(t)),t.node||t.ignore||t.mark||(t.node=e)}))};for(var s in t.nodes)o(s);return e}},{key:"fromSchema",value:function(e){return e.cached.domParser||(e.cached.domParser=new t(e,t.schemaRules(e)))}}]),t}(),au={address:!0,article:!0,aside:!0,blockquote:!0,canvas:!0,dd:!0,div:!0,dl:!0,fieldset:!0,figcaption:!0,figure:!0,footer:!0,form:!0,h1:!0,h2:!0,h3:!0,h4:!0,h5:!0,h6:!0,header:!0,hgroup:!0,hr:!0,li:!0,noscript:!0,ol:!0,output:!0,p:!0,pre:!0,section:!0,table:!0,tfoot:!0,ul:!0},uu={head:!0,noscript:!0,object:!0,script:!0,style:!0,title:!0},cu={ol:!0,ul:!0},lu=1,hu=2,du=4;function fu(t,e,n){return null!=e?(e?lu:0)|("full"===e?hu:0):t&&"pre"==t.whitespace?lu|hu:n&~du}var pu=function(){function t(e,n,r,i,o,s,a){(0,w.Z)(this,t),this.type=e,this.attrs=n,this.marks=r,this.pendingMarks=i,this.solid=o,this.options=a,this.content=[],this.activeMarks=pa.none,this.stashMarks=[],this.match=s||(a&du?null:e.contentMatch)}return(0,D.Z)(t,[{key:"findWrapping",value:function(t){if(!this.match){if(!this.type)return[];var e=this.type.contentMatch.fillBefore(la.from(t));if(!e){var n,r=this.type.contentMatch;return(n=r.findWrapping(t.type))?(this.match=r,n):null}this.match=this.type.contentMatch.matchFragment(e)}return this.match.findWrapping(t.type)}},{key:"finish",value:function(t){if(!(this.options&lu)){var e,n=this.content[this.content.length-1];if(n&&n.isText&&(e=/[ \t\r\n\u000c]+$/.exec(n.text))){var r=n;n.text.length==e[0].length?this.content.pop():this.content[this.content.length-1]=r.withText(r.text.slice(0,r.text.length-e[0].length))}}var i=la.from(this.content);return!t&&this.match&&(i=i.append(this.match.fillBefore(la.empty,!0))),this.type?this.type.create(this.attrs,i,this.marks):i}},{key:"popFromStashMark",value:function(t){for(var e=this.stashMarks.length-1;e>=0;e--)if(t.eq(this.stashMarks[e]))return this.stashMarks.splice(e,1)[0]}},{key:"applyPending",value:function(t){for(var e=0,n=this.pendingMarks;e<n.length;e++){var r=n[e];(this.type?this.type.allowsMarkType(r.type):bu(r.type,t))&&!r.isInSet(this.activeMarks)&&(this.activeMarks=r.addToSet(this.activeMarks),this.pendingMarks=r.removeFromSet(this.pendingMarks))}}},{key:"inlineContext",value:function(t){return this.type?this.type.inlineContent:this.content.length?this.content[0].isInline:t.parentNode&&!au.hasOwnProperty(t.parentNode.nodeName.toLowerCase())}}]),t}(),vu=function(){function t(e,n,r){(0,w.Z)(this,t),this.parser=e,this.options=n,this.isOpen=r,this.open=0;var i,o=n.topNode,s=fu(null,n.preserveWhitespace,0)|(r?du:0);i=o?new pu(o.type,o.attrs,pa.none,pa.none,!0,n.topMatch||o.type.contentMatch,s):new pu(r?null:e.schema.topNodeType,null,pa.none,pa.none,!0,null,s),this.nodes=[i],this.find=n.findPositions,this.needsBlock=!1}return(0,D.Z)(t,[{key:"top",get:function(){return this.nodes[this.open]}},{key:"addDOM",value:function(t){if(3==t.nodeType)this.addTextNode(t);else if(1==t.nodeType){var e=t.getAttribute("style");if(e){var n=this.readStyles(yu(e));if(!n)return;for(var r=(0,h.Z)(n,2),i=r[0],o=r[1],s=this.top,a=0;a<o.length;a++)this.removePendingMark(o[a],s);for(var u=0;u<i.length;u++)this.addPendingMark(i[u]);this.addElement(t);for(var c=0;c<i.length;c++)this.removePendingMark(i[c],s);for(var l=0;l<o.length;l++)this.addPendingMark(o[l])}else this.addElement(t)}}},{key:"addTextNode",value:function(t){var e=t.nodeValue,n=this.top;if(n.options&hu||n.inlineContext(t)||/[^ \t\r\n\u000c]/.test(e)){if(n.options&lu)e=n.options&hu?e.replace(/\r\n?/g,"\n"):e.replace(/\r?\n|\r/g," ");else if(e=e.replace(/[ \t\r\n\u000c]+/g," "),/^[ \t\r\n\u000c]/.test(e)&&this.open==this.nodes.length-1){var r=n.content[n.content.length-1],i=t.previousSibling;(!r||i&&"BR"==i.nodeName||r.isText&&/[ \t\r\n\u000c]$/.test(r.text))&&(e=e.slice(1))}e&&this.insertNode(this.parser.schema.text(e)),this.findInText(t)}else this.findInside(t)}},{key:"addElement",value:function(t,e){var n,r=t.nodeName.toLowerCase();cu.hasOwnProperty(r)&&this.parser.normalizeLists&&mu(t);var i=this.options.ruleFromNode&&this.options.ruleFromNode(t)||(n=this.parser.matchTag(t,this,e));if(i?i.ignore:uu.hasOwnProperty(r))this.findInside(t),this.ignoreFallback(t);else if(!i||i.skip||i.closeParent){i&&i.closeParent?this.open=Math.max(0,this.open-1):i&&i.skip.nodeType&&(t=i.skip);var o,s=this.top,a=this.needsBlock;if(au.hasOwnProperty(r))s.content.length&&s.content[0].isInline&&this.open&&(this.open--,s=this.top),o=!0,s.type||(this.needsBlock=!0);else if(!t.firstChild)return void this.leafFallback(t);this.addAll(t),o&&this.sync(s),this.needsBlock=a}else this.addElementByRule(t,i,!1===i.consuming?n:void 0)}},{key:"leafFallback",value:function(t){"BR"==t.nodeName&&this.top.type&&this.top.type.inlineContent&&this.addTextNode(t.ownerDocument.createTextNode("\n"))}},{key:"ignoreFallback",value:function(t){"BR"!=t.nodeName||this.top.type&&this.top.type.inlineContent||this.findPlace(this.parser.schema.text("-"))}},{key:"readStyles",value:function(t){for(var e=this,n=pa.none,r=pa.none,i=0;i<t.length;i+=2)for(var o=function(o){var a=e.parser.matchStyle(t[i],t[i+1],e,o);return a?a.ignore?{v:null}:(a.clearMark?e.top.pendingMarks.concat(e.top.activeMarks).forEach((function(t){a.clearMark(t)&&(r=t.addToSet(r))})):n=e.parser.schema.marks[a.mark].create(a.attrs).addToSet(n),!1!==a.consuming?(s=o,"break"):(o=a,void(s=o))):(s=o,"break")},s=void 0;;){var a=o(s);if("break"===a)break;if("object"===(0,b.Z)(a))return a.v}return[n,r]}},{key:"addElementByRule",value:function(t,e,n){var r,i,o,s=this;if(e.node)i=this.parser.schema.nodes[e.node],i.isLeaf?this.insertNode(i.create(e.attrs))||this.leafFallback(t):r=this.enter(i,e.attrs||null,e.preserveWhitespace);else{var a=this.parser.schema.marks[e.mark];o=a.create(e.attrs),this.addPendingMark(o)}var u=this.top;if(i&&i.isLeaf)this.findInside(t);else if(n)this.addElement(t,n);else if(e.getContent)this.findInside(t),e.getContent(t,this.parser.schema).forEach((function(t){return s.insertNode(t)}));else{var c=t;"string"==typeof e.contentElement?c=t.querySelector(e.contentElement):"function"==typeof e.contentElement?c=e.contentElement(t):e.contentElement&&(c=e.contentElement),this.findAround(t,c,!0),this.addAll(c)}r&&this.sync(u)&&this.open--,o&&this.removePendingMark(o,u)}},{key:"addAll",value:function(t,e,n){for(var r=e||0,i=e?t.childNodes[e]:t.firstChild,o=null==n?null:t.childNodes[n];i!=o;i=i.nextSibling,++r)this.findAtPoint(t,r),this.addDOM(i);this.findAtPoint(t,r)}},{key:"findPlace",value:function(t){for(var e,n,r=this.open;r>=0;r--){var i=this.nodes[r],o=i.findWrapping(t);if(o&&(!e||e.length>o.length)&&(e=o,n=i,!o.length))break;if(i.solid)break}if(!e)return!1;this.sync(n);for(var s=0;s<e.length;s++)this.enterInner(e[s],null,!1);return!0}},{key:"insertNode",value:function(t){if(t.isInline&&this.needsBlock&&!this.top.type){var e=this.textblockFromContext();e&&this.enterInner(e)}if(this.findPlace(t)){this.closeExtra();var n=this.top;n.applyPending(t.type),n.match&&(n.match=n.match.matchType(t.type));for(var r=n.activeMarks,i=0;i<t.marks.length;i++)n.type&&!n.type.allowsMarkType(t.marks[i].type)||(r=t.marks[i].addToSet(r));return n.content.push(t.mark(r)),!0}return!1}},{key:"enter",value:function(t,e,n){var r=this.findPlace(t.create(e));return r&&this.enterInner(t,e,!0,n),r}},{key:"enterInner",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=arguments.length>3?arguments[3]:void 0;this.closeExtra();var i=this.top;i.applyPending(t),i.match=i.match&&i.match.matchType(t);var o=fu(t,r,i.options);i.options&du&&0==i.content.length&&(o|=du),this.nodes.push(new pu(t,e,i.activeMarks,i.pendingMarks,n,null,o)),this.open++}},{key:"closeExtra",value:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],e=this.nodes.length-1;if(e>this.open){for(;e>this.open;e--)this.nodes[e-1].content.push(this.nodes[e].finish(t));this.nodes.length=this.open+1}}},{key:"finish",value:function(){return this.open=0,this.closeExtra(this.isOpen),this.nodes[0].finish(this.isOpen||this.options.topOpen)}},{key:"sync",value:function(t){for(var e=this.open;e>=0;e--)if(this.nodes[e]==t)return this.open=e,!0;return!1}},{key:"currentPos",get:function(){this.closeExtra();for(var t=0,e=this.open;e>=0;e--){for(var n=this.nodes[e].content,r=n.length-1;r>=0;r--)t+=n[r].nodeSize;e&&t++}return t}},{key:"findAtPoint",value:function(t,e){if(this.find)for(var n=0;n<this.find.length;n++)this.find[n].node==t&&this.find[n].offset==e&&(this.find[n].pos=this.currentPos)}},{key:"findInside",value:function(t){if(this.find)for(var e=0;e<this.find.length;e++)null==this.find[e].pos&&1==t.nodeType&&t.contains(this.find[e].node)&&(this.find[e].pos=this.currentPos)}},{key:"findAround",value:function(t,e,n){if(t!=e&&this.find)for(var r=0;r<this.find.length;r++)if(null==this.find[r].pos&&1==t.nodeType&&t.contains(this.find[r].node)){var i=e.compareDocumentPosition(this.find[r].node);i&(n?2:4)&&(this.find[r].pos=this.currentPos)}}},{key:"findInText",value:function(t){if(this.find)for(var e=0;e<this.find.length;e++)this.find[e].node==t&&(this.find[e].pos=this.currentPos-(t.nodeValue.length-this.find[e].offset))}},{key:"matchesContext",value:function(t){var e=this;if(t.indexOf("|")>-1)return t.split(/\s*\|\s*/).some(this.matchesContext,this);var n=t.split("/"),r=this.options.context,i=!this.isOpen&&(!r||r.parent.type==this.nodes[0].type),o=-(r?r.depth+1:0)+(i?0:1),s=function t(s,a){for(;s>=0;s--){var u=n[s];if(""==u){if(s==n.length-1||0==s)continue;for(;a>=o;a--)if(t(s-1,a))return!0;return!1}var c=a>0||0==a&&i?e.nodes[a].type:r&&a>=o?r.node(a-o).type:null;if(!c||c.name!=u&&-1==c.groups.indexOf(u))return!1;a--}return!0};return s(n.length-1,this.open)}},{key:"textblockFromContext",value:function(){var t=this.options.context;if(t)for(var e=t.depth;e>=0;e--){var n=t.node(e).contentMatchAt(t.indexAfter(e)).defaultType;if(n&&n.isTextblock&&n.defaultAttrs)return n}for(var r in this.parser.schema.nodes){var i=this.parser.schema.nodes[r];if(i.isTextblock&&i.defaultAttrs)return i}}},{key:"addPendingMark",value:function(t){var e=wu(t,this.top.pendingMarks);e&&this.top.stashMarks.push(e),this.top.pendingMarks=t.addToSet(this.top.pendingMarks)}},{key:"removePendingMark",value:function(t,e){for(var n=this.open;n>=0;n--){var r=this.nodes[n],i=r.pendingMarks.lastIndexOf(t);if(i>-1)r.pendingMarks=t.removeFromSet(r.pendingMarks);else{r.activeMarks=t.removeFromSet(r.activeMarks);var o=r.popFromStashMark(t);o&&r.type&&r.type.allowsMarkType(o.type)&&(r.activeMarks=o.addToSet(r.activeMarks))}if(r==e)break}}}]),t}();function mu(t){for(var e=t.firstChild,n=null;e;e=e.nextSibling){var r=1==e.nodeType?e.nodeName.toLowerCase():null;r&&cu.hasOwnProperty(r)&&n?(n.appendChild(e),e=n):"li"==r?n=e:r&&(n=null)}}function gu(t,e){return(t.matches||t.msMatchesSelector||t.webkitMatchesSelector||t.mozMatchesSelector).call(t,e)}function yu(t){var e,n=/\s*([\w-]+)\s*:\s*([^;]+)/g,r=[];while(e=n.exec(t))r.push(e[1],e[2].trim());return r}function ku(t){var e={};for(var n in t)e[n]=t[n];return e}function bu(t,e){var n=e.schema.nodes,r=function(){var r=n[i];if(!r.allowsMarkType(t))return"continue";var o=[],s=function t(n){o.push(n);for(var r=0;r<n.edgeCount;r++){var i=n.edge(r),s=i.type,a=i.next;if(s==e)return!0;if(o.indexOf(a)<0&&t(a))return!0}};return s(r.contentMatch)?{v:!0}:void 0};for(var i in n){var o=r();if("continue"!==o&&"object"===(0,b.Z)(o))return o.v}}function wu(t,e){for(var n=0;n<e.length;n++)if(t.eq(e[n]))return e[n]}var Du=function(){function t(e,n){(0,w.Z)(this,t),this.nodes=e,this.marks=n}return(0,D.Z)(t,[{key:"serializeFragment",value:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2?arguments[2]:void 0;r||(r=Cu(n).createDocumentFragment());var i=r,o=[];return t.forEach((function(t){if(o.length||t.marks.length){var r=0,s=0;while(r<o.length&&s<t.marks.length){var a=t.marks[s];if(e.marks[a.type.name]){if(!a.eq(o[r][0])||!1===a.type.spec.spanning)break;r++,s++}else s++}while(r<o.length)i=o.pop()[1];while(s<t.marks.length){var u=t.marks[s++],c=e.serializeMark(u,t.isInline,n);c&&(o.push([u,i]),i.appendChild(c.dom),i=c.contentDOM||c.dom)}}i.appendChild(e.serializeNodeInner(t,n))})),r}},{key:"serializeNodeInner",value:function(e,n){var r=t.renderSpec(Cu(n),this.nodes[e.type.name](e)),i=r.dom,o=r.contentDOM;if(o){if(e.isLeaf)throw new RangeError("Content hole not allowed in a leaf node spec");this.serializeFragment(e.content,n,o)}return i}},{key:"serializeNode",value:function(t){for(var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=this.serializeNodeInner(t,e),r=t.marks.length-1;r>=0;r--){var i=this.serializeMark(t.marks[r],t.isInline,e);i&&((i.contentDOM||i.dom).appendChild(n),n=i.dom)}return n}},{key:"serializeMark",value:function(e,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=this.marks[e.type.name];return i&&t.renderSpec(Cu(r),i(e,n))}}],[{key:"renderSpec",value:function(e,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;if("string"==typeof n)return{dom:e.createTextNode(n)};if(null!=n.nodeType)return{dom:n};if(n.dom&&null!=n.dom.nodeType)return n;var i,o=n[0],s=o.indexOf(" ");s>0&&(r=o.slice(0,s),o=o.slice(s+1));var a=r?e.createElementNS(r,o):e.createElement(o),u=n[1],c=1;if(u&&"object"==(0,b.Z)(u)&&null==u.nodeType&&!Array.isArray(u))for(var l in c=2,u)if(null!=u[l]){var h=l.indexOf(" ");h>0?a.setAttributeNS(l.slice(0,h),l.slice(h+1),u[l]):a.setAttribute(l,u[l])}for(var d=c;d<n.length;d++){var f=n[d];if(0===f){if(d<n.length-1||d>c)throw new RangeError("Content hole must be the only child of its parent node");return{dom:a,contentDOM:a}}var p=t.renderSpec(e,f,r),v=p.dom,m=p.contentDOM;if(a.appendChild(v),m){if(i)throw new RangeError("Multiple content holes");i=m}}return{dom:a,contentDOM:i}}},{key:"fromSchema",value:function(e){return e.cached.domSerializer||(e.cached.domSerializer=new t(this.nodesFromSchema(e),this.marksFromSchema(e)))}},{key:"nodesFromSchema",value:function(t){var e=xu(t.nodes);return e.text||(e.text=function(t){return t.text}),e}},{key:"marksFromSchema",value:function(t){return xu(t.marks)}}]),t}();function xu(t){var e={};for(var n in t){var r=t[n].spec.toDOM;r&&(e[n]=r)}return e}function Cu(t){return t.document||window.document}var Au=function(t,e){return!t.selection.empty&&(e&&e(t.tr.deleteSelection().scrollIntoView()),!0)};function Eu(t,e){var n=t.selection.$cursor;return!n||(e?!e.endOfTextblock("backward",t):n.parentOffset>0)?null:n}var Su=function(t,e,n){var r=Eu(t,n);if(!r)return!1;var i=Ou(r);if(!i){var o=r.blockRange(),s=o&&Xt(o);return null!=s&&(e&&e(t.tr.lift(o,s).scrollIntoView()),!0)}var a=i.nodeBefore;if(!a.type.spec.isolating&&Wu(t,i,e))return!0;if(0==r.parent.content.size&&(_u(a,"end")||je.isSelectable(a))){var u=ge(t.doc,r.before(),r.after(),L.empty);if(u&&u.slice.size<u.to-u.from){if(e){var c=t.tr.step(u);c.setSelection(_u(a,"end")?Le.findFrom(c.doc.resolve(c.mapping.map(i.pos,-1)),-1):je.create(c.doc,i.pos-a.nodeSize)),e(c.scrollIntoView())}return!0}}return!(!a.isAtom||i.depth!=r.depth-1)&&(e&&e(t.tr.delete(i.pos-a.nodeSize,i.pos).scrollIntoView()),!0)};function _u(t,e){for(var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=t;r;r="start"==e?r.firstChild:r.lastChild){if(r.isTextblock)return!0;if(n&&1!=r.childCount)return!1}return!1}var Mu=function(t,e,n){var r=t.selection,i=r.$head,o=r.empty,s=i;if(!o)return!1;if(i.parent.isTextblock){if(n?!n.endOfTextblock("backward",t):i.parentOffset>0)return!1;s=Ou(i)}var a=s&&s.nodeBefore;return!(!a||!je.isSelectable(a))&&(e&&e(t.tr.setSelection(je.create(t.doc,s.pos-a.nodeSize)).scrollIntoView()),!0)};function Ou(t){if(!t.parent.type.spec.isolating)for(var e=t.depth-1;e>=0;e--){if(t.index(e)>0)return t.doc.resolve(t.before(e+1));if(t.node(e).type.spec.isolating)break}return null}function Tu(t,e){var n=t.selection.$cursor;return!n||(e?!e.endOfTextblock("forward",t):n.parentOffset<n.parent.content.size)?null:n}var Fu=function(t,e,n){var r=Tu(t,n);if(!r)return!1;var i=Bu(r);if(!i)return!1;var o=i.nodeAfter;if(Wu(t,i,e))return!0;if(0==r.parent.content.size&&(_u(o,"start")||je.isSelectable(o))){var s=ge(t.doc,r.before(),r.after(),L.empty);if(s&&s.slice.size<s.to-s.from){if(e){var a=t.tr.step(s);a.setSelection(_u(o,"start")?Le.findFrom(a.doc.resolve(a.mapping.map(i.pos)),1):je.create(a.doc,a.mapping.map(i.pos))),e(a.scrollIntoView())}return!0}}return!(!o.isAtom||i.depth!=r.depth-1)&&(e&&e(t.tr.delete(i.pos,i.pos+o.nodeSize).scrollIntoView()),!0)},Nu=function(t,e,n){var r=t.selection,i=r.$head,o=r.empty,s=i;if(!o)return!1;if(i.parent.isTextblock){if(n?!n.endOfTextblock("forward",t):i.parentOffset<i.parent.content.size)return!1;s=Bu(i)}var a=s&&s.nodeAfter;return!(!a||!je.isSelectable(a))&&(e&&e(t.tr.setSelection(je.create(t.doc,s.pos)).scrollIntoView()),!0)};function Bu(t){if(!t.parent.type.spec.isolating)for(var e=t.depth-1;e>=0;e--){var n=t.node(e);if(t.index(e)+1<n.childCount)return t.doc.resolve(t.after(e+1));if(n.type.spec.isolating)break}return null}var Iu=function(t,e){var n,r=t.selection,i=r instanceof je;if(i){if(r.node.isTextblock||!he(t.doc,r.from))return!1;n=r.from}else if(n=fe(t.doc,r.from,-1),null==n)return!1;if(e){var o=t.tr.join(n);i&&o.setSelection(je.create(o.doc,n-t.doc.resolve(n).nodeBefore.nodeSize)),e(o.scrollIntoView())}return!0},Lu=function(t,e){var n,r=t.selection;if(r instanceof je){if(r.node.isTextblock||!he(t.doc,r.to))return!1;n=r.to}else if(n=fe(t.doc,r.to,1),null==n)return!1;return e&&e(t.tr.join(n).scrollIntoView()),!0},Ru=function(t,e){var n=t.selection,r=n.$from,i=n.$to,o=r.blockRange(i),s=o&&Xt(o);return null!=s&&(e&&e(t.tr.lift(o,s).scrollIntoView()),!0)},zu=function(t,e){var n=t.selection,r=n.$head,i=n.$anchor;return!(!r.parent.type.spec.code||!r.sameParent(i))&&(e&&e(t.tr.insertText("\n").scrollIntoView()),!0)};function Pu(t){for(var e=0;e<t.edgeCount;e++){var n=t.edge(e),r=n.type;if(r.isTextblock&&!r.hasRequiredAttrs())return r}return null}var Zu=function(t,e){var n=t.selection,r=n.$head,i=n.$anchor;if(!r.parent.type.spec.code||!r.sameParent(i))return!1;var o=r.node(-1),s=r.indexAfter(-1),a=Pu(o.contentMatchAt(s));if(!a||!o.canReplaceWith(s,s,a))return!1;if(e){var u=r.after(),c=t.tr.replaceWith(u,u,a.createAndFill());c.setSelection(Le.near(c.doc.resolve(u),1)),e(c.scrollIntoView())}return!0},qu=function(t,e){var n=t.selection,r=n.$from,i=n.$to;if(n instanceof Ve||r.parent.inlineContent||i.parent.inlineContent)return!1;var o=Pu(i.parent.contentMatchAt(i.indexAfter()));if(!o||!o.isTextblock)return!1;if(e){var s=(!r.parentOffset&&i.index()<i.parent.childCount?r:i).pos,a=t.tr.insert(s,o.createAndFill());a.setSelection(Ze.create(a.doc,s+1)),e(a.scrollIntoView())}return!0},ju=function(t,e){var n=t.selection.$cursor;if(!n||n.parent.content.size)return!1;if(n.depth>1&&n.after()!=n.end(-1)){var r=n.before();if(ce(t.doc,r))return e&&e(t.tr.split(r).scrollIntoView()),!0}var i=n.blockRange(),o=i&&Xt(i);return null!=o&&(e&&e(t.tr.lift(i,o).scrollIntoView()),!0)};function $u(t){return function(e,n){var r=e.selection,i=r.$from,o=r.$to;if(e.selection instanceof je&&e.selection.node.isBlock)return!(!i.parentOffset||!ce(e.doc,i.pos))&&(n&&n(e.tr.split(i.pos).scrollIntoView()),!0);if(!i.parent.isBlock)return!1;if(n){var s=o.parentOffset==o.parent.content.size,a=e.tr;(e.selection instanceof Ze||e.selection instanceof Ve)&&a.deleteSelection();var u=0==i.depth?null:Pu(i.node(-1).contentMatchAt(i.indexAfter(-1))),c=t&&t(o.parent,s),l=c?[c]:s&&u?[{type:u}]:void 0,h=ce(a.doc,a.mapping.map(i.pos),1,l);if(l||h||!ce(a.doc,a.mapping.map(i.pos),1,u?[{type:u}]:void 0)||(u&&(l=[{type:u}]),h=!0),h&&(a.split(a.mapping.map(i.pos),1,l),!s&&!i.parentOffset&&i.parent.type!=u)){var d=a.mapping.map(i.before()),f=a.doc.resolve(d);u&&i.node(-1).canReplaceWith(f.index(),f.index()+1,u)&&a.setNodeMarkup(a.mapping.map(i.before()),u)}n(a.scrollIntoView())}return!0}}var Vu=$u(),Hu=function(t,e){var n,r=t.selection,i=r.$from,o=r.to,s=i.sharedDepth(o);return 0!=s&&(n=i.before(s),e&&e(t.tr.setSelection(je.create(t.doc,n))),!0)},Ju=function(t,e){return e&&e(t.tr.setSelection(new Ve(t.doc))),!0};function Ku(t,e,n){var r=e.nodeBefore,i=e.nodeAfter,o=e.index();return!!(r&&i&&r.type.compatibleContent(i.type))&&(!r.content.size&&e.parent.canReplace(o-1,o)?(n&&n(t.tr.delete(e.pos-r.nodeSize,e.pos).scrollIntoView()),!0):!(!e.parent.canReplace(o,o+1)||!i.isTextblock&&!he(t.doc,e.pos))&&(n&&n(t.tr.clearIncompatible(e.pos,r.type,r.contentMatchAt(r.childCount)).join(e.pos).scrollIntoView()),!0))}function Wu(t,e,n){var r,i,o=e.nodeBefore,s=e.nodeAfter;if(o.type.spec.isolating||s.type.spec.isolating)return!1;if(Ku(t,e,n))return!0;var a=e.parent.canReplace(e.index(),e.index()+1);if(a&&(r=(i=o.contentMatchAt(o.childCount)).findWrapping(s.type))&&i.matchType(r[0]||s.type).validEnd){if(n){for(var u=e.pos+s.nodeSize,c=O.empty,l=r.length-1;l>=0;l--)c=O.from(r[l].create(null,c));c=O.from(o.copy(c));var h=t.tr.step(new Kt(e.pos-1,u,e.pos,u,new L(c,1,0),r.length,!0)),d=u+2*r.length;he(h.doc,d)&&h.join(d),n(h.scrollIntoView())}return!0}var f=Le.findFrom(e,1),p=f&&f.$from.blockRange(f.$to),v=p&&Xt(p);if(null!=v&&v>=e.depth)return n&&n(t.tr.lift(p,v).scrollIntoView()),!0;if(a&&_u(s,"start",!0)&&_u(o,"end")){for(var m=o,g=[];;){if(g.push(m),m.isTextblock)break;m=m.lastChild}for(var y=s,k=1;!y.isTextblock;y=y.firstChild)k++;if(m.canReplace(m.childCount,m.childCount,y.content)){if(n){for(var b=O.empty,w=g.length-1;w>=0;w--)b=O.from(g[w].copy(b));var D=t.tr.step(new Kt(e.pos-g.length,e.pos+s.nodeSize,e.pos+k,e.pos+s.nodeSize-k,new L(b,g.length,0),0,!0));n(D.scrollIntoView())}return!0}}return!1}function Uu(t){return function(e,n){var r=e.selection,i=t<0?r.$from:r.$to,o=i.depth;while(i.node(o).isInline){if(!o)return!1;o--}return!!i.node(o).isTextblock&&(n&&n(e.tr.setSelection(Ze.create(e.doc,t<0?i.start(o):i.end(o)))),!0)}}var Gu=Uu(-1),Yu=Uu(1);function Qu(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return function(n,r){var i=n.selection,o=i.$from,s=i.$to,a=o.blockRange(s),u=a&&ee(a,t,e);return!!u&&(r&&r(n.tr.wrap(a,u).scrollIntoView()),!0)}}function Xu(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return function(n,r){for(var i=!1,o=0;o<n.selection.ranges.length&&!i;o++){var s=n.selection.ranges[o],a=s.$from.pos,u=s.$to.pos;n.doc.nodesBetween(a,u,(function(r,o){if(i)return!1;if(r.isTextblock&&!r.hasMarkup(t,e))if(r.type==t)i=!0;else{var s=n.doc.resolve(o),a=s.index();i=s.parent.canReplaceWith(a,a+1,t)}}))}if(!i)return!1;if(r){for(var c=n.tr,l=0;l<n.selection.ranges.length;l++){var h=n.selection.ranges[l],d=h.$from.pos,f=h.$to.pos;c.setBlockType(d,f,t,e)}r(c.scrollIntoView())}return!0}}function tc(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return function(t,n,r){for(var i=0;i<e.length;i++)if(e[i](t,n,r))return!0;return!1}}var ec=tc(Au,Su,Mu),nc=tc(Au,Fu,Nu),rc={Enter:tc(zu,qu,ju,Vu),"Mod-Enter":Zu,Backspace:ec,"Mod-Backspace":ec,"Shift-Backspace":ec,Delete:nc,"Mod-Delete":nc,"Mod-a":Ju},ic={"Ctrl-h":rc["Backspace"],"Alt-Backspace":rc["Mod-Backspace"],"Ctrl-d":rc["Delete"],"Ctrl-Alt-Backspace":rc["Mod-Delete"],"Alt-Delete":rc["Mod-Delete"],"Alt-d":rc["Mod-Delete"],"Ctrl-a":Gu,"Ctrl-e":Yu};for(var oc in rc)ic[oc]=rc[oc];function sc(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return function(n,r){var i=n.selection,o=i.$from,s=i.$to,a=o.blockRange(s),u=!1,c=a;if(!a)return!1;if(a.depth>=2&&o.node(a.depth-1).type.compatibleContent(t)&&0==a.startIndex){if(0==o.index(a.depth-1))return!1;var l=n.doc.resolve(a.start-2);c=new X(l,l,a.depth),a.endIndex<a.parent.childCount&&(a=new X(o,n.doc.resolve(s.end(a.depth)),a.depth)),u=!0}var h=ee(c,t,e,a);return!!h&&(r&&r(ac(n.tr,a,h,u,t).scrollIntoView()),!0)}}function ac(t,e,n,r,i){for(var o=O.empty,s=n.length-1;s>=0;s--)o=O.from(n[s].type.create(n[s].attrs,o));t.step(new Kt(e.start-(r?2:0),e.end,e.start,e.end,new L(o,0,0),n.length,!0));for(var a=0,u=0;u<n.length;u++)n[u].type==i&&(a=u+1);for(var c=n.length-a,l=e.start+n.length-(r?2:0),h=e.parent,d=e.startIndex,f=e.endIndex,p=!0;d<f;d++,p=!1)!p&&ce(t.doc,l,c)&&(t.split(l,c),l+=2*c),l+=h.child(d).nodeSize;return t}function uc(t){return function(e,n){var r=e.selection,i=r.$from,o=r.$to,s=i.blockRange(o,(function(e){return e.childCount>0&&e.firstChild.type==t}));return!!s&&(!n||(i.node(s.depth-1).type==t?cc(e,n,t,s):lc(e,n,s)))}}function cc(t,e,n,r){var i=t.tr,o=r.end,s=r.$to.end(r.depth);o<s&&(i.step(new Kt(o-1,s,o,s,new L(O.from(n.create(null,r.parent.copy())),1,0),1,!0)),r=new X(i.doc.resolve(r.$from.pos),i.doc.resolve(s),r.depth));var a=Xt(r);if(null==a)return!1;i.lift(r,a);var u=i.mapping.map(o,-1)-1;return he(i.doc,u)&&i.join(u),e(i.scrollIntoView()),!0}function lc(t,e,n){for(var r=t.tr,i=n.parent,o=n.end,s=n.endIndex-1,a=n.startIndex;s>a;s--)o-=i.child(s).nodeSize,r.delete(o-1,o+1);var u=r.doc.resolve(n.start),c=u.nodeAfter;if(r.mapping.map(n.end)!=n.start+u.nodeAfter.nodeSize)return!1;var l=0==n.startIndex,h=n.endIndex==i.childCount,d=u.node(-1),f=u.index(-1);if(!d.canReplace(f+(l?0:1),f+1,c.content.append(h?O.empty:O.from(i))))return!1;var p=u.pos,v=p+c.nodeSize;return r.step(new Kt(p-(l?1:0),v+(h?1:0),p+1,v-1,new L((l?O.empty:O.from(i.copy(O.empty))).append(h?O.empty:O.from(i.copy(O.empty))),l?0:1,h?0:1),l?0:1)),e(r.scrollIntoView()),!0}function hc(t){return function(e,n){var r=e.selection,i=r.$from,o=r.$to,s=i.blockRange(o,(function(e){return e.childCount>0&&e.firstChild.type==t}));if(!s)return!1;var a=s.startIndex;if(0==a)return!1;var u=s.parent,c=u.child(a-1);if(c.type!=t)return!1;if(n){var l=c.lastChild&&c.lastChild.type==u.type,h=O.from(l?t.create():null),d=new L(O.from(t.create(null,O.from(u.type.create(null,h)))),l?3:1,0),f=s.start,p=s.end;n(e.tr.step(new Kt(f-(l?3:1),p,f,p,d,1,!0)).scrollIntoView())}return!0}}function dc(t){var e=t.state,n=t.transaction,r=n.selection,i=n.doc,o=n.storedMarks;return u(u({},e),{},{apply:e.apply.bind(e),applyTransaction:e.applyTransaction.bind(e),filterTransaction:e.filterTransaction,plugins:e.plugins,schema:e.schema,reconfigure:e.reconfigure.bind(e),toJSON:e.toJSON.bind(e),get storedMarks(){return o},get selection(){return r},get doc(){return i},get tr(){return r=n.selection,i=n.doc,o=n.storedMarks,n}})}"undefined"!=typeof navigator?/Mac|iP(hone|[oa]d)/.test(navigator.platform):"undefined"!=typeof os&&os.platform&&os.platform();var fc=function(){function t(e){(0,w.Z)(this,t),this.editor=e.editor,this.rawCommands=this.editor.extensionManager.commands,this.customState=e.state}return(0,D.Z)(t,[{key:"hasCustomState",get:function(){return!!this.customState}},{key:"state",get:function(){return this.customState||this.editor.state}},{key:"commands",get:function(){var t=this,e=this.rawCommands,n=this.editor,r=this.state,i=n.view,o=r.tr,s=this.buildProps(o);return Object.fromEntries(Object.entries(e).map((function(e){var n=(0,h.Z)(e,2),r=n[0],a=n[1],u=function(){var e=a.apply(void 0,arguments)(s);return o.getMeta("preventDispatch")||t.hasCustomState||i.dispatch(o),e};return[r,u]})))}},{key:"chain",get:function(){var t=this;return function(){return t.createChain()}}},{key:"can",get:function(){var t=this;return function(){return t.createCan()}}},{key:"createChain",value:function(t){var e=this,n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r=this.rawCommands,i=this.editor,o=this.state,s=i.view,a=[],c=!!t,l=t||o.tr,d=function(){return c||!n||l.getMeta("preventDispatch")||e.hasCustomState||s.dispatch(l),a.every((function(t){return!0===t}))},f=u(u({},Object.fromEntries(Object.entries(r).map((function(t){var r=(0,h.Z)(t,2),i=r[0],o=r[1],s=function(){var t=e.buildProps(l,n),r=o.apply(void 0,arguments)(t);return a.push(r),f};return[i,s]})))),{},{run:d});return f}},{key:"createCan",value:function(t){var e=this,n=this.rawCommands,r=this.state,i=!1,o=t||r.tr,s=this.buildProps(o,i),a=Object.fromEntries(Object.entries(n).map((function(t){var e=(0,h.Z)(t,2),n=e[0],r=e[1];return[n,function(){return r.apply(void 0,arguments)(u(u({},s),{},{dispatch:void 0}))}]})));return u(u({},a),{},{chain:function(){return e.createChain(o,i)}})}},{key:"buildProps",value:function(t){var e=this,n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r=this.rawCommands,i=this.editor,o=this.state,s=i.view;o.storedMarks&&t.setStoredMarks(o.storedMarks);var a={tr:t,editor:i,view:s,state:dc({state:o,transaction:t}),dispatch:n?function(){}:void 0,chain:function(){return e.createChain(t)},can:function(){return e.createCan(t)},get commands(){return Object.fromEntries(Object.entries(r).map((function(t){var e=(0,h.Z)(t,2),n=e[0],r=e[1];return[n,function(){return r.apply(void 0,arguments)(a)}]})))}};return a}}]),t}(),pc=function(){function t(){(0,w.Z)(this,t),this.callbacks={}}return(0,D.Z)(t,[{key:"on",value:function(t,e){return this.callbacks[t]||(this.callbacks[t]=[]),this.callbacks[t].push(e),this}},{key:"emit",value:function(t){for(var e=this,n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];var o=this.callbacks[t];return o&&o.forEach((function(t){return t.apply(e,r)})),this}},{key:"off",value:function(t,e){var n=this.callbacks[t];return n&&(e?this.callbacks[t]=n.filter((function(t){return t!==e})):delete this.callbacks[t]),this}},{key:"removeAllListeners",value:function(){this.callbacks={}}}]),t}();function vc(t,e,n){if(void 0===t.config[e]&&t.parent)return vc(t.parent,e,n);if("function"===typeof t.config[e]){var r=t.config[e].bind(u(u({},n),{},{parent:t.parent?vc(t.parent,e,n):null}));return r}return t.config[e]}function mc(t){var e=t.filter((function(t){return"extension"===t.type})),n=t.filter((function(t){return"node"===t.type})),r=t.filter((function(t){return"mark"===t.type}));return{baseExtensions:e,nodeExtensions:n,markExtensions:r}}function gc(t){var e=[],n=mc(t),r=n.nodeExtensions,i=n.markExtensions,o=[].concat((0,s.Z)(r),(0,s.Z)(i)),a={default:null,rendered:!0,renderHTML:null,parseHTML:null,keepOnSplit:!0,isRequired:!1};return t.forEach((function(t){var n={name:t.name,options:t.options,storage:t.storage},r=vc(t,"addGlobalAttributes",n);if(r){var i=r();i.forEach((function(t){t.types.forEach((function(n){Object.entries(t.attributes).forEach((function(t){var r=(0,h.Z)(t,2),i=r[0],o=r[1];e.push({type:n,name:i,attribute:u(u({},a),o)})}))}))}))}})),o.forEach((function(t){var n={name:t.name,options:t.options,storage:t.storage},r=vc(t,"addAttributes",n);if(r){var i=r();Object.entries(i).forEach((function(n){var r=(0,h.Z)(n,2),i=r[0],o=r[1],s=u(u({},a),o);"function"===typeof(null===s||void 0===s?void 0:s.default)&&(s.default=s.default()),(null===s||void 0===s?void 0:s.isRequired)&&void 0===(null===s||void 0===s?void 0:s.default)&&delete s.default,e.push({type:t.name,name:i,attribute:s})}))}})),e}function yc(t,e){if("string"===typeof t){if(!e.nodes[t])throw Error("There is no node type named '".concat(t,"'. Maybe you forgot to add the extension?"));return e.nodes[t]}return t}function kc(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return e.filter((function(t){return!!t})).reduce((function(t,e){var n=u({},t);return Object.entries(e).forEach((function(t){var e=(0,h.Z)(t,2),r=e[0],i=e[1],o=n[r];n[r]=o?"class"===r?[n[r],i].join(" "):"style"===r?[n[r],i].join("; "):i:i})),n}),{})}function bc(t,e){return e.filter((function(t){return t.attribute.rendered})).map((function(e){return e.attribute.renderHTML?e.attribute.renderHTML(t.attrs)||{}:(0,o.Z)({},e.name,t.attrs[e.name])})).reduce((function(t,e){return kc(t,e)}),{})}function wc(t){return"function"===typeof t}function Dc(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0;if(wc(t)){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];return e?t.bind(e).apply(void 0,r):t.apply(void 0,r)}return t}function xc(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return 0===Object.keys(t).length&&t.constructor===Object}function Cc(t){return"string"!==typeof t?t:t.match(/^[+-]?(?:\d*\.)?\d+$/)?Number(t):"true"===t||"false"!==t&&t}function Ac(t,e){return t.style?t:u(u({},t),{},{getAttrs:function(n){var r=t.getAttrs?t.getAttrs(n):t.attrs;if(!1===r)return!1;var i=e.reduce((function(t,e){var r=e.attribute.parseHTML?e.attribute.parseHTML(n):Cc(n.getAttribute(e.name));return null===r||void 0===r?t:u(u({},t),{},(0,o.Z)({},e.name,r))}),{});return u(u({},r),i)}})}function Ec(t){return Object.fromEntries(Object.entries(t).filter((function(t){var e=(0,h.Z)(t,2),n=e[0],r=e[1];return("attrs"!==n||!xc(r))&&(null!==r&&void 0!==r)})))}function Sc(t,e){var n,r=gc(t),i=mc(t),o=i.nodeExtensions,s=i.markExtensions,a=null===(n=o.find((function(t){return vc(t,"topNode")})))||void 0===n?void 0:n.name,c=Object.fromEntries(o.map((function(n){var i=r.filter((function(t){return t.type===n.name})),o={name:n.name,options:n.options,storage:n.storage,editor:e},s=t.reduce((function(t,e){var r=vc(e,"extendNodeSchema",o);return u(u({},t),r?r(n):{})}),{}),a=Ec(u(u({},s),{},{content:Dc(vc(n,"content",o)),marks:Dc(vc(n,"marks",o)),group:Dc(vc(n,"group",o)),inline:Dc(vc(n,"inline",o)),atom:Dc(vc(n,"atom",o)),selectable:Dc(vc(n,"selectable",o)),draggable:Dc(vc(n,"draggable",o)),code:Dc(vc(n,"code",o)),defining:Dc(vc(n,"defining",o)),isolating:Dc(vc(n,"isolating",o)),attrs:Object.fromEntries(i.map((function(t){var e;return[t.name,{default:null===(e=null===t||void 0===t?void 0:t.attribute)||void 0===e?void 0:e.default}]})))})),c=Dc(vc(n,"parseHTML",o));c&&(a.parseDOM=c.map((function(t){return Ac(t,i)})));var l=vc(n,"renderHTML",o);l&&(a.toDOM=function(t){return l({node:t,HTMLAttributes:bc(t,i)})});var h=vc(n,"renderText",o);return h&&(a.toText=h),[n.name,a]}))),l=Object.fromEntries(s.map((function(n){var i=r.filter((function(t){return t.type===n.name})),o={name:n.name,options:n.options,storage:n.storage,editor:e},s=t.reduce((function(t,e){var r=vc(e,"extendMarkSchema",o);return u(u({},t),r?r(n):{})}),{}),a=Ec(u(u({},s),{},{inclusive:Dc(vc(n,"inclusive",o)),excludes:Dc(vc(n,"excludes",o)),group:Dc(vc(n,"group",o)),spanning:Dc(vc(n,"spanning",o)),code:Dc(vc(n,"code",o)),attrs:Object.fromEntries(i.map((function(t){var e;return[t.name,{default:null===(e=null===t||void 0===t?void 0:t.attribute)||void 0===e?void 0:e.default}]})))})),c=Dc(vc(n,"parseHTML",o));c&&(a.parseDOM=c.map((function(t){return Ac(t,i)})));var l=vc(n,"renderHTML",o);return l&&(a.toDOM=function(t){return l({mark:t,HTMLAttributes:bc(t,i)})}),[n.name,a]})));return new iu({topNode:a,nodes:c,marks:l})}function _c(t,e){return e.nodes[t]||e.marks[t]||null}function Mc(t,e){return Array.isArray(e)?e.some((function(e){var n="string"===typeof e?e:e.name;return n===t.name})):e}var Oc=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:500,n="",r=t.parentOffset;return t.parent.nodesBetween(Math.max(0,r-e),r,(function(t,e,i,o){var s,a,u=(null===(a=(s=t.type.spec).toText)||void 0===a?void 0:a.call(s,{node:t,pos:e,parent:i,index:o}))||t.textContent||"%leaf%";n+=u.slice(0,Math.max(0,r-e))})),n};function Tc(t){return"[object RegExp]"===Object.prototype.toString.call(t)}var Fc=(0,D.Z)((function t(e){(0,w.Z)(this,t),this.find=e.find,this.handler=e.handler})),Nc=function(t,e){if(Tc(e))return e.exec(t);var n=e(t);if(!n)return null;var r=[n.text];return r.index=n.index,r.input=t,r.data=n.data,n.replaceWith&&(n.text.includes(n.replaceWith)||console.warn('[tiptap warn]: "inputRuleMatch.replaceWith" must be part of "inputRuleMatch.text".'),r.push(n.replaceWith)),r};function Bc(t){var e,n=t.editor,r=t.from,i=t.to,o=t.text,s=t.rules,a=t.plugin,u=n.view;if(u.composing)return!1;var c=u.state.doc.resolve(r);if(c.parent.type.spec.code||(null===(e=c.nodeBefore||c.nodeAfter)||void 0===e?void 0:e.marks.find((function(t){return t.type.spec.code}))))return!1;var l=!1,h=Oc(c)+o;return s.forEach((function(t){if(!l){var e=Nc(h,t.find);if(e){var s=u.state.tr,c=dc({state:u.state,transaction:s}),d={from:r-(e[0].length-o.length),to:i},f=new fc({editor:n,state:c}),p=f.commands,v=f.chain,m=f.can,g=t.handler({state:c,range:d,match:e,commands:p,chain:v,can:m});null!==g&&s.steps.length&&(s.setMeta(a,{transform:s,from:r,to:i,text:o}),u.dispatch(s),l=!0)}}})),l}function Ic(t){var e=t.editor,n=t.rules,r=new on({state:{init:function(){return null},apply:function(t,e){var n=t.getMeta(r);return n||(t.selectionSet||t.docChanged?null:e)}},props:{handleTextInput:function(t,i,o,s){return Bc({editor:e,from:i,to:o,text:s,rules:n,plugin:r})},handleDOMEvents:{compositionend:function(t){return setTimeout((function(){var i=t.state.selection.$cursor;i&&Bc({editor:e,from:i.pos,to:i.pos,text:"",rules:n,plugin:r})})),!1}},handleKeyDown:function(t,i){if("Enter"!==i.key)return!1;var o=t.state.selection.$cursor;return!!o&&Bc({editor:e,from:o.pos,to:o.pos,text:"\n",rules:n,plugin:r})}},isInputRules:!0});return r}function Lc(t){return"number"===typeof t}var Rc=(0,D.Z)((function t(e){(0,w.Z)(this,t),this.find=e.find,this.handler=e.handler})),zc=function(t,e){if(Tc(e))return(0,s.Z)(t.matchAll(e));var n=e(t);return n?n.map((function(e){var n=[e.text];return n.index=e.index,n.input=t,n.data=e.data,e.replaceWith&&(e.text.includes(e.replaceWith)||console.warn('[tiptap warn]: "pasteRuleMatch.replaceWith" must be part of "pasteRuleMatch.text".'),n.push(e.replaceWith)),n})):[]};function Pc(t){var e=t.editor,n=t.state,r=t.from,i=t.to,o=t.rule,s=new fc({editor:e,state:n}),a=s.commands,u=s.chain,c=s.can,l=[];n.doc.nodesBetween(r,i,(function(t,e){if(t.isTextblock&&!t.type.spec.code){var s=Math.max(r,e),h=Math.min(i,e+t.content.size),d=t.textBetween(s-e,h-e,void 0,"￼"),f=zc(d,o.find);f.forEach((function(t){if(void 0!==t.index){var e=s+t.index+1,r=e+t[0].length,i={from:n.tr.mapping.map(e),to:n.tr.mapping.map(r)},h=o.handler({state:n,range:i,match:t,commands:a,chain:u,can:c});l.push(h)}}))}}));var h=l.every((function(t){return null!==t}));return h}function Zc(t){var e=t.editor,n=t.rules,r=null,i=!1,o=!1,s=n.map((function(t){return new on({view:function(t){var e=function(e){var n;r=(null===(n=t.dom.parentElement)||void 0===n?void 0:n.contains(e.target))?t.dom.parentElement:null};return window.addEventListener("dragstart",e),{destroy:function(){window.removeEventListener("dragstart",e)}}},props:{handleDOMEvents:{drop:function(t){return o=r===t.dom.parentElement,!1},paste:function(t,e){var n,r=null===(n=e.clipboardData)||void 0===n?void 0:n.getData("text/html");return i=!!(null===r||void 0===r?void 0:r.includes("data-pm-slice")),!1}}},appendTransaction:function(n,r,s){var a=n[0],u="paste"===a.getMeta("uiEvent")&&!i,c="drop"===a.getMeta("uiEvent")&&!o;if(u||c){var l=r.doc.content.findDiffStart(s.doc.content),h=r.doc.content.findDiffEnd(s.doc.content);if(Lc(l)&&h&&l!==h.b){var d=s.tr,f=dc({state:s,transaction:d}),p=Pc({editor:e,state:f,from:Math.max(l-1,0),to:h.b-1,rule:t});if(p&&d.steps.length)return d}}}})}));return s}function qc(t){var e=t.filter((function(e,n){return t.indexOf(e)!==n}));return(0,s.Z)(new Set(e))}var jc=function(){function t(e,n){var r=this;(0,w.Z)(this,t),this.splittableMarks=[],this.editor=n,this.extensions=t.resolve(e),this.schema=Sc(this.extensions,n),this.extensions.forEach((function(t){var e;r.editor.extensionStorage[t.name]=t.storage;var n={name:t.name,options:t.options,storage:t.storage,editor:r.editor,type:_c(t.name,r.schema)};if("mark"===t.type){var i=null===(e=Dc(vc(t,"keepOnSplit",n)))||void 0===e||e;i&&r.splittableMarks.push(t.name)}var o=vc(t,"onBeforeCreate",n);o&&r.editor.on("beforeCreate",o);var s=vc(t,"onCreate",n);s&&r.editor.on("create",s);var a=vc(t,"onUpdate",n);a&&r.editor.on("update",a);var u=vc(t,"onSelectionUpdate",n);u&&r.editor.on("selectionUpdate",u);var c=vc(t,"onTransaction",n);c&&r.editor.on("transaction",c);var l=vc(t,"onFocus",n);l&&r.editor.on("focus",l);var h=vc(t,"onBlur",n);h&&r.editor.on("blur",h);var d=vc(t,"onDestroy",n);d&&r.editor.on("destroy",d)}))}return(0,D.Z)(t,[{key:"commands",get:function(){var t=this;return this.extensions.reduce((function(e,n){var r={name:n.name,options:n.options,storage:n.storage,editor:t.editor,type:_c(n.name,t.schema)},i=vc(n,"addCommands",r);return i?u(u({},e),i()):e}),{})}},{key:"plugins",get:function(){var e=this,n=this.editor,r=t.sort((0,s.Z)(this.extensions).reverse()),i=[],o=[],a=r.map((function(t){var r={name:t.name,options:t.options,storage:t.storage,editor:n,type:_c(t.name,e.schema)},a=[],c=vc(t,"addKeyboardShortcuts",r),l={};if("mark"===t.type&&t.config.exitable&&(l.ArrowRight=function(){return Yh.handleExit({editor:n,mark:t})}),c){var d=Object.fromEntries(Object.entries(c()).map((function(t){var e=(0,h.Z)(t,2),r=e[0],i=e[1];return[r,function(){return i({editor:n})}]})));l=u(u({},l),d)}var f=sa(l);a.push(f);var p=vc(t,"addInputRules",r);Mc(t,n.options.enableInputRules)&&p&&i.push.apply(i,(0,s.Z)(p()));var v=vc(t,"addPasteRules",r);Mc(t,n.options.enablePasteRules)&&v&&o.push.apply(o,(0,s.Z)(v()));var m=vc(t,"addProseMirrorPlugins",r);if(m){var g=m();a.push.apply(a,(0,s.Z)(g))}return a})).flat();return[Ic({editor:n,rules:i})].concat((0,s.Z)(Zc({editor:n,rules:o})),(0,s.Z)(a))}},{key:"attributes",get:function(){return gc(this.extensions)}},{key:"nodeViews",get:function(){var t=this,e=this.editor,n=mc(this.extensions),r=n.nodeExtensions;return Object.fromEntries(r.filter((function(t){return!!vc(t,"addNodeView")})).map((function(n){var r=t.attributes.filter((function(t){return t.type===n.name})),i={name:n.name,options:n.options,storage:n.storage,editor:e,type:yc(n.name,t.schema)},o=vc(n,"addNodeView",i);if(!o)return[];var s=function(t,i,s,a){var u=bc(t,r);return o()({editor:e,node:t,getPos:s,decorations:a,HTMLAttributes:u,extension:n})};return[n.name,s]})))}}],[{key:"resolve",value:function(e){var n=t.sort(t.flatten(e)),r=qc(n.map((function(t){return t.name})));return r.length&&console.warn("[tiptap warn]: Duplicate extension names found: [".concat(r.map((function(t){return"'".concat(t,"'")})).join(", "),"]. This can lead to issues.")),n}},{key:"flatten",value:function(t){var e=this;return t.map((function(t){var n={name:t.name,options:t.options,storage:t.storage},r=vc(t,"addExtensions",n);return r?[t].concat((0,s.Z)(e.flatten(r()))):t})).flat(10)}},{key:"sort",value:function(t){var e=100;return t.sort((function(t,n){var r=vc(t,"priority")||e,i=vc(n,"priority")||e;return r>i?-1:r<i?1:0}))}}]),t}();function $c(t){return Object.prototype.toString.call(t).slice(8,-1)}function Vc(t){return"Object"===$c(t)&&(t.constructor===Object&&Object.getPrototypeOf(t)===Object.prototype)}function Hc(t,e){var n=u({},t);return Vc(t)&&Vc(e)&&Object.keys(e).forEach((function(r){Vc(e[r])&&r in t?n[r]=Hc(t[r],e[r]):Object.assign(n,(0,o.Z)({},r,e[r]))})),n}var Jc=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(0,w.Z)(this,t),this.type="extension",this.name="extension",this.parent=null,this.child=null,this.config={name:this.name,defaultOptions:{}},this.config=u(u({},this.config),e),this.name=this.config.name,e.defaultOptions&&console.warn('[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "'.concat(this.name,'".')),this.options=this.config.defaultOptions,this.config.addOptions&&(this.options=Dc(vc(this,"addOptions",{name:this.name}))),this.storage=Dc(vc(this,"addStorage",{name:this.name,options:this.options}))||{}}return(0,D.Z)(t,[{key:"configure",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=this.extend();return e.options=Hc(this.options,t),e.storage=Dc(vc(e,"addStorage",{name:e.name,options:e.options})),e}},{key:"extend",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=new t(e);return n.parent=this,this.child=n,n.name=e.name?e.name:n.parent.name,e.defaultOptions&&console.warn('[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "'.concat(n.name,'".')),n.options=Dc(vc(n,"addOptions",{name:n.name})),n.storage=Dc(vc(n,"addStorage",{name:n.name,options:n.options})),n}}],[{key:"create",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return new t(e)}}]),t}();function Kc(t,e,n){var r=e.from,i=e.to,o=n||{},s=o.blockSeparator,a=void 0===s?"\n\n":s,u=o.textSerializers,c=void 0===u?{}:u,l="",h=!0;return t.nodesBetween(r,i,(function(t,n,o,s){var u,d=null===c||void 0===c?void 0:c[t.type.name];d?(t.isBlock&&!h&&(l+=a,h=!0),o&&(l+=d({node:t,pos:n,parent:o,index:s,range:e}))):t.isText?(l+=null===(u=null===t||void 0===t?void 0:t.text)||void 0===u?void 0:u.slice(Math.max(r,n)-n,i-n),h=!1):t.isBlock&&!h&&(l+=a,h=!0)})),l}function Wc(t){return Object.fromEntries(Object.entries(t.nodes).filter((function(t){var e=(0,h.Z)(t,2),n=e[1];return n.spec.toText})).map((function(t){var e=(0,h.Z)(t,2),n=e[0],r=e[1];return[n,r.spec.toText]})))}var Uc=Jc.create({name:"clipboardTextSerializer",addProseMirrorPlugins:function(){var t=this;return[new on({key:new un("clipboardTextSerializer"),props:{clipboardTextSerializer:function(){var e=t.editor,n=e.state,r=e.schema,i=n.doc,o=n.selection,a=o.ranges,u=Math.min.apply(Math,(0,s.Z)(a.map((function(t){return t.$from.pos})))),c=Math.max.apply(Math,(0,s.Z)(a.map((function(t){return t.$to.pos})))),l=Wc(r),h={from:u,to:c};return Kc(i,h,{textSerializers:l})}}})]}}),Gc=function(){return function(t){var e=t.editor,n=t.view;return requestAnimationFrame((function(){var t;e.isDestroyed||(n.dom.blur(),null===(t=null===window||void 0===window?void 0:window.getSelection())||void 0===t||t.removeAllRanges())})),!0}},Yc=function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return function(e){var n=e.commands;return n.setContent("",t)}},Qc=function(){return function(t){var e=t.state,n=t.tr,r=t.dispatch,i=n.selection,o=i.ranges;return!r||(o.forEach((function(t){var r=t.$from,i=t.$to;e.doc.nodesBetween(r.pos,i.pos,(function(t,e){if(!t.type.isText){var r=n.doc,i=n.mapping,o=r.resolve(i.map(e)),s=r.resolve(i.map(e+t.nodeSize)),a=o.blockRange(s);if(a){var u=Xt(a);if(t.type.isTextblock){var c=o.parent.contentMatchAt(o.index()),l=c.defaultType;n.setNodeMarkup(a.start,l)}(u||0===u)&&n.lift(a,u)}}}))})),!0)}},Xc=function(t){return function(e){return t(e)}},tl=function(){return function(t){var e=t.state,n=t.dispatch;return qu(e,n)}},el=function(){return function(t){var e=t.tr,n=t.dispatch,r=e.selection,i=r.$anchor.node();if(i.content.size>0)return!1;for(var o=e.selection.$anchor,s=o.depth;s>0;s-=1){var a=o.node(s);if(a.type===i.type){if(n){var u=o.before(s),c=o.after(s);e.delete(u,c).scrollIntoView()}return!0}}return!1}},nl=function(t){return function(e){for(var n=e.tr,r=e.state,i=e.dispatch,o=yc(t,r.schema),s=n.selection.$anchor,a=s.depth;a>0;a-=1){var u=s.node(a);if(u.type===o){if(i){var c=s.before(a),l=s.after(a);n.delete(c,l).scrollIntoView()}return!0}}return!1}},rl=function(t){return function(e){var n=e.tr,r=e.dispatch,i=t.from,o=t.to;return r&&n.delete(i,o),!0}},il=function(){return function(t){var e=t.state,n=t.dispatch;return Au(e,n)}},ol=function(){return function(t){var e=t.commands;return e.keyboardShortcut("Enter")}},sl=function(){return function(t){var e=t.state,n=t.dispatch;return Zu(e,n)}};function al(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{strict:!0},r=Object.keys(e);return!r.length||r.every((function(r){return n.strict?e[r]===t[r]:Tc(e[r])?e[r].test(t[r]):e[r]===t[r]}))}function ul(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return t.find((function(t){return t.type===e&&al(t.attrs,n)}))}function cl(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return!!ul(t,e,n)}function ll(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(t&&e){var r=t.parent.childAfter(t.parentOffset);if(t.parentOffset===r.offset&&0!==r.offset&&(r=t.parent.childBefore(t.parentOffset)),r.node){var i=ul((0,s.Z)(r.node.marks),e,n);if(i){var o=r.index,a=t.start()+r.offset,u=o+1,c=a+r.node.nodeSize;ul((0,s.Z)(r.node.marks),e,n);while(o>0&&i.isInSet(t.parent.child(o-1).marks))o-=1,a-=t.parent.child(o).nodeSize;while(u<t.parent.childCount&&cl((0,s.Z)(t.parent.child(u).marks),e,n))c+=t.parent.child(u).nodeSize,u+=1;return{from:a,to:c}}}}}function hl(t,e){if("string"===typeof t){if(!e.marks[t])throw Error("There is no mark type named '".concat(t,"'. Maybe you forgot to add the extension?"));return e.marks[t]}return t}var dl=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return function(n){var r=n.tr,i=n.state,o=n.dispatch,s=hl(t,i.schema),a=r.doc,u=r.selection,c=u.$from,l=u.from,h=u.to;if(o){var d=ll(c,s,e);if(d&&d.from<=l&&d.to>=h){var f=Ze.create(a,d.from,d.to);r.setSelection(f)}}return!0}},fl=function(t){return function(e){for(var n="function"===typeof t?t(e):t,r=0;r<n.length;r+=1)if(n[r](e))return!0;return!1}};function pl(t){return t instanceof Ze}function vl(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return Math.min(Math.max(t,e),n)}function ml(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(!e)return null;var n=Le.atStart(t),r=Le.atEnd(t);if("start"===e||!0===e)return n;if("end"===e)return r;var i=n.from,o=r.to;return"all"===e?Ze.create(t,vl(0,i,o),vl(t.content.size,i,o)):Ze.create(t,vl(e,i,o),vl(e,i,o))}function gl(){return["iPad Simulator","iPhone Simulator","iPod Simulator","iPad","iPhone","iPod"].includes(navigator.platform)||navigator.userAgent.includes("Mac")&&"ontouchend"in document}var yl=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return function(n){var r=n.editor,i=n.view,o=n.tr,s=n.dispatch;e=u({scrollIntoView:!0},e);var a=function(){gl()&&i.dom.focus(),requestAnimationFrame((function(){r.isDestroyed||(i.focus(),(null===e||void 0===e?void 0:e.scrollIntoView)&&r.commands.scrollIntoView())}))};if(i.hasFocus()&&null===t||!1===t)return!0;if(s&&null===t&&!pl(r.state.selection))return a(),!0;var c=ml(o.doc,t)||r.state.selection,l=r.state.selection.eq(c);return s&&(l||o.setSelection(c),l&&o.storedMarks&&o.setStoredMarks(o.storedMarks),a()),!0}},kl=function(t,e){return function(n){return t.every((function(t,r){return e(t,u(u({},n),{},{index:r}))}))}},bl=function(t,e){return function(n){var r=n.tr,i=n.commands;return i.insertContentAt({from:r.selection.from,to:r.selection.to},t,e)}};function wl(t){var e="<body>".concat(t,"</body>");return(new window.DOMParser).parseFromString(e,"text/html").body}function Dl(t,e,n){if(n=u({slice:!0,parseOptions:{}},n),"object"===(0,b.Z)(t)&&null!==t)try{return Array.isArray(t)&&t.length>0?la.fromArray(t.map((function(t){return e.nodeFromJSON(t)}))):e.nodeFromJSON(t)}catch(h3){return console.warn("[tiptap warn]: Invalid content.","Passed value:",t,"Error:",h3),Dl("",e,n)}if("string"===typeof t){var r=su.fromSchema(e);return n.slice?r.parseSlice(wl(t),n.parseOptions).content:r.parse(wl(t),n.parseOptions)}return Dl("",e,n)}function xl(t,e,n){var r=t.steps.length-1;if(!(r<e)){var i=t.steps[r];if(i instanceof Jt||i instanceof Kt){var o=t.mapping.maps[r],s=0;o.forEach((function(t,e,n,r){0===s&&(s=r)})),t.setSelection(Le.near(t.doc.resolve(s),n))}}}var Cl=function(t){return t.toString().startsWith("<")},Al=function(t,e,n){return function(r){var i=r.tr,o=r.dispatch,s=r.editor;if(o){n=u({parseOptions:{},updateSelection:!0},n);var a=Dl(e,s.schema,{parseOptions:u({preserveWhitespace:"full"},n.parseOptions)});if("<>"===a.toString())return!0;var c="number"===typeof t?{from:t,to:t}:t,l=c.from,h=c.to,d=!0,f=!0,p=Cl(a)?a:[a];if(p.forEach((function(t){t.check(),d=!!d&&(t.isText&&0===t.marks.length),f=!!f&&t.isBlock})),l===h&&f){var v=i.doc.resolve(l),m=v.parent,g=m.isTextblock&&!m.type.spec.code&&!m.childCount;g&&(l-=1,h+=1)}d?Array.isArray(e)?i.insertText(e.map((function(t){return t.text||""})).join(""),l,h):"object"===(0,b.Z)(e)&&e&&e.text?i.insertText(e.text,l,h):i.insertText(e,l,h):i.replaceWith(l,h,a),n.updateSelection&&xl(i,i.steps.length-1,-1)}return!0}},El=function(){return function(t){var e=t.state,n=t.dispatch;return Iu(e,n)}},Sl=function(){return function(t){var e=t.state,n=t.dispatch;return Lu(e,n)}},_l=function(){return function(t){var e=t.state,n=t.dispatch;return Su(e,n)}},Ml=function(){return function(t){var e=t.state,n=t.dispatch;return Fu(e,n)}};function Ol(){return"undefined"!==typeof navigator&&/Mac/.test(navigator.platform)}function Tl(t){var e,n,r,i,o=t.split(/-(?!$)/),s=o[o.length-1];"Space"===s&&(s=" ");for(var a=0;a<o.length-1;a+=1){var u=o[a];if(/^(cmd|meta|m)$/i.test(u))i=!0;else if(/^a(lt)?$/i.test(u))e=!0;else if(/^(c|ctrl|control)$/i.test(u))n=!0;else if(/^s(hift)?$/i.test(u))r=!0;else{if(!/^mod$/i.test(u))throw new Error("Unrecognized modifier name: ".concat(u));gl()||Ol()?i=!0:n=!0}}return e&&(s="Alt-".concat(s)),n&&(s="Ctrl-".concat(s)),i&&(s="Meta-".concat(s)),r&&(s="Shift-".concat(s)),s}var Fl=function(t){return function(e){var n=e.editor,r=e.view,i=e.tr,o=e.dispatch,s=Tl(t).split(/-(?!$)/),a=s.find((function(t){return!["Alt","Ctrl","Meta","Shift"].includes(t)})),u=new KeyboardEvent("keydown",{key:"Space"===a?" ":a,altKey:s.includes("Alt"),ctrlKey:s.includes("Ctrl"),metaKey:s.includes("Meta"),shiftKey:s.includes("Shift"),bubbles:!0,cancelable:!0}),c=n.captureTransaction((function(){r.someProp("handleKeyDown",(function(t){return t(r,u)}))}));return null===c||void 0===c||c.steps.forEach((function(t){var e=t.map(i.mapping);e&&o&&i.maybeStep(e)})),!0}};function Nl(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=t.selection,i=r.from,o=r.to,s=r.empty,a=e?yc(e,t.schema):null,u=[];t.doc.nodesBetween(i,o,(function(t,e){if(!t.isText){var n=Math.max(i,e),r=Math.min(o,e+t.nodeSize);u.push({node:t,from:n,to:r})}}));var c=o-i,l=u.filter((function(t){return!a||a.name===t.node.type.name})).filter((function(t){return al(t.node.attrs,n,{strict:!1})}));if(s)return!!l.length;var h=l.reduce((function(t,e){return t+e.to-e.from}),0);return h>=c}var Bl=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return function(n){var r=n.state,i=n.dispatch,o=yc(t,r.schema),s=Nl(r,o,e);return!!s&&Ru(r,i)}},Il=function(){return function(t){var e=t.state,n=t.dispatch;return ju(e,n)}},Ll=function(t){return function(e){var n=e.state,r=e.dispatch,i=yc(t,n.schema);return uc(i)(n,r)}},Rl=function(){return function(t){var e=t.state,n=t.dispatch;return zu(e,n)}};function zl(t,e){return e.nodes[t]?"node":e.marks[t]?"mark":null}function Pl(t,e){var n="string"===typeof e?[e]:e;return Object.keys(t).reduce((function(e,r){return n.includes(r)||(e[r]=t[r]),e}),{})}var Zl=function(t,e){return function(n){var r=n.tr,i=n.state,o=n.dispatch,s=null,a=null,u=zl("string"===typeof t?t:t.name,i.schema);return!!u&&("node"===u&&(s=yc(t,i.schema)),"mark"===u&&(a=hl(t,i.schema)),o&&r.selection.ranges.forEach((function(t){i.doc.nodesBetween(t.$from.pos,t.$to.pos,(function(t,n){s&&s===t.type&&r.setNodeMarkup(n,void 0,Pl(t.attrs,e)),a&&t.marks.length&&t.marks.forEach((function(i){a===i.type&&r.addMark(n,n+t.nodeSize,a.create(Pl(i.attrs,e)))}))}))})),!0)}},ql=function(){return function(t){var e=t.tr,n=t.dispatch;return n&&e.scrollIntoView(),!0}},jl=function(){return function(t){var e=t.tr,n=t.commands;return n.setTextSelection({from:0,to:e.doc.content.size})}},$l=function(){return function(t){var e=t.state,n=t.dispatch;return Mu(e,n)}},Vl=function(){return function(t){var e=t.state,n=t.dispatch;return Nu(e,n)}},Hl=function(){return function(t){var e=t.state,n=t.dispatch;return Hu(e,n)}},Jl=function(){return function(t){var e=t.state,n=t.dispatch;return Yu(e,n)}},Kl=function(){return function(t){var e=t.state,n=t.dispatch;return Gu(e,n)}};function Wl(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return Dl(t,e,{slice:!1,parseOptions:n})}var Ul=function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return function(r){var i=r.tr,o=r.editor,s=r.dispatch,a=i.doc,u=Wl(t,o.schema,n);return s&&i.replaceWith(0,a.content.size,u).setMeta("preventUpdate",!e),!0}};function Gl(t,e){var n=new Be(t);return e.forEach((function(t){t.steps.forEach((function(t){n.step(t)}))})),n}function Yl(t){for(var e=0;e<t.edgeCount;e+=1){var n=t.edge(e),r=n.type;if(r.isTextblock&&!r.hasRequiredAttrs())return r}return null}function Ql(t,e,n){var r=[];return t.nodesBetween(e.from,e.to,(function(t,e){n(t)&&r.push({node:t,pos:e})})),r}function Xl(t,e){for(var n=t.depth;n>0;n-=1){var r=t.node(n);if(e(r))return{pos:n>0?t.before(n):0,start:t.start(n),depth:n,node:r}}}function th(t){return function(e){return Xl(e.$from,t)}}function eh(t,e){var n=Du.fromSchema(e).serializeFragment(t),r=document.implementation.createHTMLDocument(),i=r.createElement("div");return i.appendChild(n),i.innerHTML}function nh(t,e){var n={from:0,to:t.content.size};return Kc(t,n,e)}function rh(t,e){var n=hl(e,t.schema),r=t.selection,i=r.from,o=r.to,a=r.empty,c=[];a?(t.storedMarks&&c.push.apply(c,(0,s.Z)(t.storedMarks)),c.push.apply(c,(0,s.Z)(t.selection.$head.marks()))):t.doc.nodesBetween(i,o,(function(t){c.push.apply(c,(0,s.Z)(t.marks))}));var l=c.find((function(t){return t.type.name===n.name}));return l?u({},l.attrs):{}}function ih(t,e){var n=yc(e,t.schema),r=t.selection,i=r.from,o=r.to,s=[];t.doc.nodesBetween(i,o,(function(t){s.push(t)}));var a=s.reverse().find((function(t){return t.type.name===n.name}));return a?u({},a.attrs):{}}function oh(t,e){var n=zl("string"===typeof e?e:e.name,t.schema);return"node"===n?ih(t,e):"mark"===n?rh(t,e):{}}function sh(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:JSON.stringify,n={};return t.filter((function(t){var r=e(t);return!Object.prototype.hasOwnProperty.call(n,r)&&(n[r]=!0)}))}function ah(t){var e=sh(t);return 1===e.length?e:e.filter((function(t,n){var r=e.filter((function(t,e){return e!==n}));return!r.some((function(e){return t.oldRange.from>=e.oldRange.from&&t.oldRange.to<=e.oldRange.to&&t.newRange.from>=e.newRange.from&&t.newRange.to<=e.newRange.to}))}))}function uh(t){var e=t.mapping,n=t.steps,r=[];return e.maps.forEach((function(t,i){var o=[];if(t.ranges.length)t.forEach((function(t,e){o.push({from:t,to:e})}));else{var s=n[i],a=s.from,u=s.to;if(void 0===a||void 0===u)return;o.push({from:a,to:u})}o.forEach((function(t){var n=t.from,o=t.to,s=e.slice(i).map(n,-1),a=e.slice(i).map(o),u=e.invert().map(s,-1),c=e.invert().map(a);r.push({oldRange:{from:u,to:c},newRange:{from:s,to:a}})}))})),ah(r)}function ch(t,e,n){var r=[];return t===e?n.resolve(t).marks().forEach((function(e){var i=n.resolve(t-1),o=ll(i,e.type);o&&r.push(u({mark:e},o))})):n.nodesBetween(t,e,(function(t,e){r.push.apply(r,(0,s.Z)(t.marks.map((function(n){return{from:e,to:e+t.nodeSize,mark:n}}))))})),r}function lh(t,e,n){return Object.fromEntries(Object.entries(n).filter((function(n){var r=(0,h.Z)(n,1),i=r[0],o=t.find((function(t){return t.type===e&&t.name===i}));return!!o&&o.attribute.keepOnSplit})))}function hh(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=t.selection,i=r.empty,o=r.ranges,a=e?hl(e,t.schema):null;if(i)return!!(t.storedMarks||t.selection.$from.marks()).filter((function(t){return!a||a.name===t.type.name})).find((function(t){return al(t.attrs,n,{strict:!1})}));var u=0,c=[];if(o.forEach((function(e){var n=e.$from,r=e.$to,i=n.pos,o=r.pos;t.doc.nodesBetween(i,o,(function(t,e){if(t.isText||t.marks.length){var n=Math.max(i,e),r=Math.min(o,e+t.nodeSize),a=r-n;u+=a,c.push.apply(c,(0,s.Z)(t.marks.map((function(t){return{mark:t,from:n,to:r}}))))}}))})),0===u)return!1;var l=c.filter((function(t){return!a||a.name===t.mark.type.name})).filter((function(t){return al(t.mark.attrs,n,{strict:!1})})).reduce((function(t,e){return t+e.to-e.from}),0),h=c.filter((function(t){return!a||t.mark.type!==a&&t.mark.type.excludes(a)})).reduce((function(t,e){return t+e.to-e.from}),0),d=l>0?l+h:l;return d>=u}function dh(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(!e)return Nl(t,null,n)||hh(t,null,n);var r=zl(e,t.schema);return"node"===r?Nl(t,e,n):"mark"===r&&hh(t,e,n)}function fh(t,e){var n=mc(e),r=n.nodeExtensions,i=r.find((function(e){return e.name===t}));if(!i)return!1;var o={name:i.name,options:i.options,storage:i.storage},s=Dc(vc(i,"group",o));return"string"===typeof s&&s.split(" ").includes("list")}function ph(t){var e,n=null===(e=t.type.createAndFill())||void 0===e?void 0:e.toJSON(),r=t.toJSON();return JSON.stringify(n)===JSON.stringify(r)}function vh(t,e,n){var r,i=e.selection,o=null;if(pl(i)&&(o=i.$cursor),o){var s=null!==(r=t.storedMarks)&&void 0!==r?r:o.marks();return!!n.isInSet(s)||!s.some((function(t){return t.type.excludes(n)}))}var a=i.ranges;return a.some((function(e){var r=e.$from,i=e.$to,o=0===r.depth&&(t.doc.inlineContent&&t.doc.type.allowsMarkType(n));return t.doc.nodesBetween(r.pos,i.pos,(function(t,e,r){if(o)return!1;if(t.isInline){var i=!r||r.type.allowsMarkType(n),s=!!n.isInSet(t.marks)||!t.marks.some((function(t){return t.type.excludes(n)}));o=i&&s}return!o})),o}))}var mh=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return function(n){var r=n.tr,i=n.state,o=n.dispatch,s=r.selection,a=s.empty,c=s.ranges,l=hl(t,i.schema);if(o)if(a){var h=rh(i,l);r.addStoredMark(l.create(u(u({},h),e)))}else c.forEach((function(t){var n=t.$from.pos,o=t.$to.pos;i.doc.nodesBetween(n,o,(function(t,i){var s=Math.max(i,n),a=Math.min(i+t.nodeSize,o),c=t.marks.find((function(t){return t.type===l}));c?t.marks.forEach((function(t){l===t.type&&r.addMark(s,a,l.create(u(u({},t.attrs),e)))})):r.addMark(s,a,l.create(e))}))}));return vh(i,r,l)}},gh=function(t,e){return function(n){var r=n.tr;return r.setMeta(t,e),!0}},yh=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return function(n){var r=n.state,i=n.dispatch,o=n.chain,s=yc(t,r.schema);return s.isTextblock?o().command((function(t){var n=t.commands,i=Xu(s,e)(r);return!!i||n.clearNodes()})).command((function(t){var n=t.state;return Xu(s,e)(n,i)})).run():(console.warn('[tiptap warn]: Currently "setNode()" only supports text block nodes.'),!1)}},kh=function(t){return function(e){var n=e.tr,r=e.dispatch;if(r){var i=n.doc,o=vl(t,0,i.content.size),s=je.create(i,o);n.setSelection(s)}return!0}},bh=function(t){return function(e){var n=e.tr,r=e.dispatch;if(r){var i=n.doc,o="number"===typeof t?{from:t,to:t}:t,s=o.from,a=o.to,u=Ze.atStart(i).from,c=Ze.atEnd(i).to,l=vl(s,u,c),h=vl(a,u,c),d=Ze.create(i,l,h);n.setSelection(d)}return!0}},wh=function(t){return function(e){var n=e.state,r=e.dispatch,i=yc(t,n.schema);return hc(i)(n,r)}};function Dh(t,e){var n=t.storedMarks||t.selection.$to.parentOffset&&t.selection.$from.marks();if(n){var r=n.filter((function(t){return null===e||void 0===e?void 0:e.includes(t.type.name)}));t.tr.ensureMarks(r)}}var xh=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.keepMarks,n=void 0===e||e;return function(t){var e=t.tr,r=t.state,i=t.dispatch,o=t.editor,s=e.selection,a=e.doc,u=s.$from,c=s.$to,l=o.extensionManager.attributes,h=lh(l,u.node().type.name,u.node().attrs);if(s instanceof je&&s.node.isBlock)return!(!u.parentOffset||!ce(a,u.pos))&&(i&&(n&&Dh(r,o.extensionManager.splittableMarks),e.split(u.pos).scrollIntoView()),!0);if(!u.parent.isBlock)return!1;if(i){var d=c.parentOffset===c.parent.content.size;s instanceof Ze&&e.deleteSelection();var f=0===u.depth?void 0:Yl(u.node(-1).contentMatchAt(u.indexAfter(-1))),p=d&&f?[{type:f,attrs:h}]:void 0,v=ce(e.doc,e.mapping.map(u.pos),1,p);if(p||v||!ce(e.doc,e.mapping.map(u.pos),1,f?[{type:f}]:void 0)||(v=!0,p=f?[{type:f,attrs:h}]:void 0),v&&(e.split(e.mapping.map(u.pos),1,p),f&&!d&&!u.parentOffset&&u.parent.type!==f)){var m=e.mapping.map(u.before()),g=e.doc.resolve(m);u.node(-1).canReplaceWith(g.index(),g.index()+1,f)&&e.setNodeMarkup(e.mapping.map(u.before()),f)}n&&Dh(r,o.extensionManager.splittableMarks),e.scrollIntoView()}return!0}},Ch=function(t){return function(e){var n,r=e.tr,i=e.state,o=e.dispatch,s=e.editor,a=yc(t,i.schema),u=i.selection,c=u.$from,l=u.$to,h=i.selection.node;if(h&&h.isBlock||c.depth<2||!c.sameParent(l))return!1;var d=c.node(-1);if(d.type!==a)return!1;var f=s.extensionManager.attributes;if(0===c.parent.content.size&&c.node(-1).childCount===c.indexAfter(-1)){if(2===c.depth||c.node(-3).type!==a||c.index(-2)!==c.node(-2).childCount-1)return!1;if(o){for(var p=la.empty,v=c.index(-1)?1:c.index(-2)?2:3,m=c.depth-v;m>=c.depth-3;m-=1)p=la.from(c.node(m).copy(p));var g=c.indexAfter(-1)<c.node(-2).childCount?1:c.indexAfter(-2)<c.node(-3).childCount?2:3,y=lh(f,c.node().type.name,c.node().attrs),k=(null===(n=a.contentMatch.defaultType)||void 0===n?void 0:n.createAndFill(y))||void 0;p=p.append(la.from(a.createAndFill(null,k)||void 0));var b=c.before(c.depth-(v-1));r.replace(b,c.after(-g),new ma(p,4-v,0));var w=-1;r.doc.nodesBetween(b,r.doc.content.size,(function(t,e){if(w>-1)return!1;t.isTextblock&&0===t.content.size&&(w=e+1)})),w>-1&&r.setSelection(Ze.near(r.doc.resolve(w))),r.scrollIntoView()}return!0}var D=l.pos===c.end()?d.contentMatchAt(0).defaultType:null,x=lh(f,d.type.name,d.attrs),C=lh(f,c.node().type.name,c.node().attrs);r.delete(c.pos,l.pos);var A=D?[{type:a,attrs:x},{type:D,attrs:C}]:[{type:a,attrs:x}];if(!ce(r.doc,c.pos,2))return!1;if(o){var E=i.selection,S=i.storedMarks,_=s.extensionManager.splittableMarks,M=S||E.$to.parentOffset&&E.$from.marks();if(r.split(c.pos,2,A).scrollIntoView(),!M||!o)return!0;var O=M.filter((function(t){return _.includes(t.type.name)}));r.ensureMarks(O)}return!0}},Ah=function(t,e){var n=th((function(t){return t.type===e}))(t.selection);if(!n)return!0;var r=t.doc.resolve(Math.max(0,n.pos-1)).before(n.depth);if(void 0===r)return!0;var i=t.doc.nodeAt(r),o=n.node.type===(null===i||void 0===i?void 0:i.type)&&he(t.doc,n.pos);return!o||(t.join(n.pos),!0)},Eh=function(t,e){var n=th((function(t){return t.type===e}))(t.selection);if(!n)return!0;var r=t.doc.resolve(n.start).after(n.depth);if(void 0===r)return!0;var i=t.doc.nodeAt(r),o=n.node.type===(null===i||void 0===i?void 0:i.type)&&he(t.doc,r);return!o||(t.join(r),!0)},Sh=function(t,e,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return function(i){var o=i.editor,s=i.tr,a=i.state,u=i.dispatch,c=i.chain,l=i.commands,h=i.can,d=o.extensionManager,f=d.extensions,p=d.splittableMarks,v=yc(t,a.schema),m=yc(e,a.schema),g=a.selection,y=a.storedMarks,k=g.$from,b=g.$to,w=k.blockRange(b),D=y||g.$to.parentOffset&&g.$from.marks();if(!w)return!1;var x=th((function(t){return fh(t.type.name,f)}))(g);if(w.depth>=1&&x&&w.depth-x.depth<=1){if(x.node.type===v)return l.liftListItem(m);if(fh(x.node.type.name,f)&&v.validContent(x.node.content)&&u)return c().command((function(){return s.setNodeMarkup(x.pos,v),!0})).command((function(){return Ah(s,v)})).command((function(){return Eh(s,v)})).run()}return n&&D&&u?c().command((function(){var t=h().wrapInList(v,r),e=D.filter((function(t){return p.includes(t.type.name)}));return s.ensureMarks(e),!!t||l.clearNodes()})).wrapInList(v,r).command((function(){return Ah(s,v)})).command((function(){return Eh(s,v)})).run():c().command((function(){var t=h().wrapInList(v,r);return!!t||l.clearNodes()})).wrapInList(v,r).command((function(){return Ah(s,v)})).command((function(){return Eh(s,v)})).run()}},_h=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return function(r){var i=r.state,o=r.commands,s=n.extendEmptyMarkRange,a=void 0!==s&&s,u=hl(t,i.schema),c=hh(i,u,e);return c?o.unsetMark(u,{extendEmptyMarkRange:a}):o.setMark(u,e)}},Mh=function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return function(r){var i=r.state,o=r.commands,s=yc(t,i.schema),a=yc(e,i.schema),u=Nl(i,s,n);return u?o.setNode(a):o.setNode(s,n)}},Oh=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return function(n){var r=n.state,i=n.commands,o=yc(t,r.schema),s=Nl(r,o,e);return s?i.lift(o):i.wrapIn(o,e)}},Th=function(){return function(t){for(var e=t.state,n=t.dispatch,r=e.plugins,i=0;i<r.length;i+=1){var o=r[i],s=void 0;if(o.spec.isInputRules&&(s=o.getState(e))){if(n){for(var a=e.tr,u=s.transform,c=u.steps.length-1;c>=0;c-=1)a.step(u.steps[c].invert(u.docs[c]));if(s.text){var l=a.doc.resolve(s.from).marks();a.replaceWith(s.from,s.to,e.schema.text(s.text,l))}else a.delete(s.from,s.to)}return!0}}return!1}},Fh=function(){return function(t){var e=t.tr,n=t.dispatch,r=e.selection,i=r.empty,o=r.ranges;return i||n&&o.forEach((function(t){e.removeMark(t.$from.pos,t.$to.pos)})),!0}},Nh=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return function(n){var r,i=n.tr,o=n.state,s=n.dispatch,a=e.extendEmptyMarkRange,u=void 0!==a&&a,c=i.selection,l=hl(t,o.schema),h=c.$from,d=c.empty,f=c.ranges;if(!s)return!0;if(d&&u){var p=c.from,v=c.to,m=null===(r=h.marks().find((function(t){return t.type===l})))||void 0===r?void 0:r.attrs,g=ll(h,l,m);g&&(p=g.from,v=g.to),i.removeMark(p,v,l)}else f.forEach((function(t){i.removeMark(t.$from.pos,t.$to.pos,l)}));return i.removeStoredMark(l),!0}},Bh=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return function(n){var r=n.tr,i=n.state,o=n.dispatch,s=null,a=null,c=zl("string"===typeof t?t:t.name,i.schema);return!!c&&("node"===c&&(s=yc(t,i.schema)),"mark"===c&&(a=hl(t,i.schema)),o&&r.selection.ranges.forEach((function(t){var n=t.$from.pos,o=t.$to.pos;i.doc.nodesBetween(n,o,(function(t,i){s&&s===t.type&&r.setNodeMarkup(i,void 0,u(u({},t.attrs),e)),a&&t.marks.length&&t.marks.forEach((function(s){if(a===s.type){var c=Math.max(i,n),l=Math.min(i+t.nodeSize,o);r.addMark(c,l,a.create(u(u({},s.attrs),e)))}}))}))})),!0)}},Ih=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return function(n){var r=n.state,i=n.dispatch,o=yc(t,r.schema);return Qu(o,e)(r,i)}},Lh=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return function(n){var r=n.state,i=n.dispatch,o=yc(t,r.schema);return sc(o,e)(r,i)}},Rh=Object.freeze({__proto__:null,blur:Gc,clearContent:Yc,clearNodes:Qc,command:Xc,createParagraphNear:tl,deleteCurrentNode:el,deleteNode:nl,deleteRange:rl,deleteSelection:il,enter:ol,exitCode:sl,extendMarkRange:dl,first:fl,focus:yl,forEach:kl,insertContent:bl,insertContentAt:Al,joinUp:El,joinDown:Sl,joinBackward:_l,joinForward:Ml,keyboardShortcut:Fl,lift:Bl,liftEmptyBlock:Il,liftListItem:Ll,newlineInCode:Rl,resetAttributes:Zl,scrollIntoView:ql,selectAll:jl,selectNodeBackward:$l,selectNodeForward:Vl,selectParentNode:Hl,selectTextblockEnd:Jl,selectTextblockStart:Kl,setContent:Ul,setMark:mh,setMeta:gh,setNode:yh,setNodeSelection:kh,setTextSelection:bh,sinkListItem:wh,splitBlock:xh,splitListItem:Ch,toggleList:Sh,toggleMark:_h,toggleNode:Mh,toggleWrap:Oh,undoInputRule:Th,unsetAllMarks:Fh,unsetMark:Nh,updateAttributes:Bh,wrapIn:Ih,wrapInList:Lh}),zh=Jc.create({name:"commands",addCommands:function(){return u({},Rh)}}),Ph=Jc.create({name:"editable",addProseMirrorPlugins:function(){var t=this;return[new on({key:new un("editable"),props:{editable:function(){return t.editor.options.editable}}})]}}),Zh=Jc.create({name:"focusEvents",addProseMirrorPlugins:function(){var t=this.editor;return[new on({key:new un("focusEvents"),props:{handleDOMEvents:{focus:function(e,n){t.isFocused=!0;var r=t.state.tr.setMeta("focus",{event:n}).setMeta("addToHistory",!1);return e.dispatch(r),!1},blur:function(e,n){t.isFocused=!1;var r=t.state.tr.setMeta("blur",{event:n}).setMeta("addToHistory",!1);return e.dispatch(r),!1}}}})]}}),qh=Jc.create({name:"keymap",addKeyboardShortcuts:function(){var t=this,e=function(){return t.editor.commands.first((function(t){var e=t.commands;return[function(){return e.undoInputRule()},function(){return e.command((function(t){var n=t.tr,r=n.selection,i=n.doc,o=r.empty,s=r.$anchor,a=s.pos,u=s.parent,c=Le.atStart(i).from===a;return!(!(o&&c&&u.type.isTextblock)||u.textContent.length)&&e.clearNodes()}))},function(){return e.deleteSelection()},function(){return e.joinBackward()},function(){return e.selectNodeBackward()}]}))},n=function(){return t.editor.commands.first((function(t){var e=t.commands;return[function(){return e.deleteSelection()},function(){return e.deleteCurrentNode()},function(){return e.joinForward()},function(){return e.selectNodeForward()}]}))},r=function(){return t.editor.commands.first((function(t){var e=t.commands;return[function(){return e.newlineInCode()},function(){return e.createParagraphNear()},function(){return e.liftEmptyBlock()},function(){return e.splitBlock()}]}))},i={Enter:r,"Mod-Enter":function(){return t.editor.commands.exitCode()},Backspace:e,"Mod-Backspace":e,"Shift-Backspace":e,Delete:n,"Mod-Delete":n,"Mod-a":function(){return t.editor.commands.selectAll()}},o=u({},i),s=u(u({},i),{},{"Ctrl-h":e,"Alt-Backspace":e,"Ctrl-d":n,"Ctrl-Alt-Backspace":n,"Alt-Delete":n,"Alt-d":n,"Ctrl-a":function(){return t.editor.commands.selectTextblockStart()},"Ctrl-e":function(){return t.editor.commands.selectTextblockEnd()}});return gl()||Ol()?s:o},addProseMirrorPlugins:function(){var t=this;return[new on({key:new un("clearDocument"),appendTransaction:function(e,n,r){var i=e.some((function(t){return t.docChanged}))&&!n.doc.eq(r.doc);if(i){var o=n.selection,s=o.empty,a=o.from,u=o.to,c=Le.atStart(n.doc).from,l=Le.atEnd(n.doc).to,h=a===c&&u===l;if(!s&&h){var d=0===r.doc.textBetween(0,r.doc.content.size," "," ").length;if(d){var f=r.tr,p=dc({state:r,transaction:f}),v=new fc({editor:t.editor,state:p}),m=v.commands;if(m.clearNodes(),f.steps.length)return f}}}}})]}}),jh=Jc.create({name:"tabindex",addProseMirrorPlugins:function(){return[new on({key:new un("tabindex"),props:{attributes:this.editor.isEditable?{tabindex:"0"}:{}}})]}}),$h=Object.freeze({__proto__:null,ClipboardTextSerializer:Uc,Commands:zh,Editable:Ph,FocusEvents:Zh,Keymap:qh,Tabindex:jh}),Vh='.ProseMirror {\n  position: relative;\n}\n\n.ProseMirror {\n  word-wrap: break-word;\n  white-space: pre-wrap;\n  white-space: break-spaces;\n  -webkit-font-variant-ligatures: none;\n  font-variant-ligatures: none;\n  font-feature-settings: "liga" 0; /* the above doesn\'t seem to work in Edge */\n}\n\n.ProseMirror [contenteditable="false"] {\n  white-space: normal;\n}\n\n.ProseMirror [contenteditable="false"] [contenteditable="true"] {\n  white-space: pre-wrap;\n}\n\n.ProseMirror pre {\n  white-space: pre-wrap;\n}\n\nimg.ProseMirror-separator {\n  display: inline !important;\n  border: none !important;\n  margin: 0 !important;\n  width: 1px !important;\n  height: 1px !important;\n}\n\n.ProseMirror-gapcursor {\n  display: none;\n  pointer-events: none;\n  position: absolute;\n  margin: 0;\n}\n\n.ProseMirror-gapcursor:after {\n  content: "";\n  display: block;\n  position: absolute;\n  top: -2px;\n  width: 20px;\n  border-top: 1px solid black;\n  animation: ProseMirror-cursor-blink 1.1s steps(2, start) infinite;\n}\n\n@keyframes ProseMirror-cursor-blink {\n  to {\n    visibility: hidden;\n  }\n}\n\n.ProseMirror-hideselection *::selection {\n  background: transparent;\n}\n\n.ProseMirror-hideselection *::-moz-selection {\n  background: transparent;\n}\n\n.ProseMirror-hideselection * {\n  caret-color: transparent;\n}\n\n.ProseMirror-focused .ProseMirror-gapcursor {\n  display: block;\n}\n\n.tippy-box[data-animation=fade][data-state=hidden] {\n  opacity: 0\n}';function Hh(t,e){var n=document.querySelector("style[data-tiptap-style]");if(null!==n)return n;var r=document.createElement("style");return e&&r.setAttribute("nonce",e),r.setAttribute("data-tiptap-style",""),r.innerHTML=t,document.getElementsByTagName("head")[0].appendChild(r),r}var Jh=function(t){(0,g.Z)(n,t);var e=(0,y.Z)(n);function n(){var t,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,w.Z)(this,n),t=e.call(this),t.isFocused=!1,t.extensionStorage={},t.options={element:document.createElement("div"),content:"",injectCSS:!0,injectNonce:void 0,extensions:[],autofocus:!1,editable:!0,editorProps:{},parseOptions:{},enableInputRules:!0,enablePasteRules:!0,enableCoreExtensions:!0,onBeforeCreate:function(){return null},onCreate:function(){return null},onUpdate:function(){return null},onSelectionUpdate:function(){return null},onTransaction:function(){return null},onFocus:function(){return null},onBlur:function(){return null},onDestroy:function(){return null}},t.isCapturingTransaction=!1,t.capturedTransaction=null,t.setOptions(r),t.createExtensionManager(),t.createCommandManager(),t.createSchema(),t.on("beforeCreate",t.options.onBeforeCreate),t.emit("beforeCreate",{editor:(0,l.Z)(t)}),t.createView(),t.injectCSS(),t.on("create",t.options.onCreate),t.on("update",t.options.onUpdate),t.on("selectionUpdate",t.options.onSelectionUpdate),t.on("transaction",t.options.onTransaction),t.on("focus",t.options.onFocus),t.on("blur",t.options.onBlur),t.on("destroy",t.options.onDestroy),window.setTimeout((function(){t.isDestroyed||(t.commands.focus(t.options.autofocus),t.emit("create",{editor:(0,l.Z)(t)}))}),0),t}return(0,D.Z)(n,[{key:"storage",get:function(){return this.extensionStorage}},{key:"commands",get:function(){return this.commandManager.commands}},{key:"chain",value:function(){return this.commandManager.chain()}},{key:"can",value:function(){return this.commandManager.can()}},{key:"injectCSS",value:function(){this.options.injectCSS&&document&&(this.css=Hh(Vh,this.options.injectNonce))}},{key:"setOptions",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.options=u(u({},this.options),t),this.view&&this.state&&!this.isDestroyed&&(this.options.editorProps&&this.view.setProps(this.options.editorProps),this.view.updateState(this.state))}},{key:"setEditable",value:function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];this.setOptions({editable:t}),e&&this.emit("update",{editor:this,transaction:this.state.tr})}},{key:"isEditable",get:function(){return this.options.editable&&this.view&&this.view.editable}},{key:"state",get:function(){return this.view.state}},{key:"registerPlugin",value:function(t,e){var n=wc(e)?e(t,(0,s.Z)(this.state.plugins)):[].concat((0,s.Z)(this.state.plugins),[t]),r=this.state.reconfigure({plugins:n});this.view.updateState(r)}},{key:"unregisterPlugin",value:function(t){if(!this.isDestroyed){var e="string"===typeof t?"".concat(t,"$"):t.key,n=this.state.reconfigure({plugins:this.state.plugins.filter((function(t){return!t.key.startsWith(e)}))});this.view.updateState(n)}}},{key:"createExtensionManager",value:function(){var t=this.options.enableCoreExtensions?Object.values($h):[],e=[].concat((0,s.Z)(t),(0,s.Z)(this.options.extensions)).filter((function(t){return["extension","node","mark"].includes(null===t||void 0===t?void 0:t.type)}));this.extensionManager=new jc(e,this)}},{key:"createCommandManager",value:function(){this.commandManager=new fc({editor:this})}},{key:"createSchema",value:function(){this.schema=this.extensionManager.schema}},{key:"createView",value:function(){var t=Wl(this.options.content,this.schema,this.options.parseOptions),e=ml(t,this.options.autofocus);this.view=new qs(this.options.element,u(u({},this.options.editorProps),{},{dispatchTransaction:this.dispatchTransaction.bind(this),state:nn.create({doc:t,selection:e||void 0})}));var n=this.state.reconfigure({plugins:this.extensionManager.plugins});this.view.updateState(n),this.createNodeViews();var r=this.view.dom;r.editor=this}},{key:"createNodeViews",value:function(){this.view.setProps({nodeViews:this.extensionManager.nodeViews})}},{key:"captureTransaction",value:function(t){this.isCapturingTransaction=!0,t(),this.isCapturingTransaction=!1;var e=this.capturedTransaction;return this.capturedTransaction=null,e}},{key:"dispatchTransaction",value:function(t){var e=this;if(!this.view.isDestroyed){if(this.isCapturingTransaction)return this.capturedTransaction?void t.steps.forEach((function(t){var n;return null===(n=e.capturedTransaction)||void 0===n?void 0:n.step(t)})):void(this.capturedTransaction=t);var n=this.state.apply(t),r=!this.state.selection.eq(n.selection);this.view.updateState(n),this.emit("transaction",{editor:this,transaction:t}),r&&this.emit("selectionUpdate",{editor:this,transaction:t});var i=t.getMeta("focus"),o=t.getMeta("blur");i&&this.emit("focus",{editor:this,event:i.event,transaction:t}),o&&this.emit("blur",{editor:this,event:o.event,transaction:t}),t.docChanged&&!t.getMeta("preventUpdate")&&this.emit("update",{editor:this,transaction:t})}}},{key:"getAttributes",value:function(t){return oh(this.state,t)}},{key:"isActive",value:function(t,e){var n="string"===typeof t?t:null,r="string"===typeof t?e:t;return dh(this.state,n,r)}},{key:"getJSON",value:function(){return this.state.doc.toJSON()}},{key:"getHTML",value:function(){return eh(this.state.doc.content,this.schema)}},{key:"getText",value:function(t){var e=t||{},n=e.blockSeparator,r=void 0===n?"\n\n":n,i=e.textSerializers,o=void 0===i?{}:i;return nh(this.state.doc,{blockSeparator:r,textSerializers:u(u({},Wc(this.schema)),o)})}},{key:"isEmpty",get:function(){return ph(this.state.doc)}},{key:"getCharacterCount",value:function(){return console.warn('[tiptap warn]: "editor.getCharacterCount()" is deprecated. Please use "editor.storage.characterCount.characters()" instead.'),this.state.doc.content.size-2}},{key:"destroy",value:function(){this.emit("destroy"),this.view&&this.view.destroy(),this.removeAllListeners()}},{key:"isDestroyed",get:function(){var t;return!(null===(t=this.view)||void 0===t?void 0:t.docView)}}]),n}(pc);function Kh(t){return new Fc({find:t.find,handler:function(e){var n=e.state,r=e.range,i=e.match,o=Dc(t.getAttributes,void 0,i);if(!1===o||null===o)return null;var s=n.tr,a=i[i.length-1],u=i[0],c=r.to;if(a){var l=u.search(/\S/),h=r.from+u.indexOf(a),d=h+a.length,f=ch(r.from,r.to,n.doc).filter((function(e){var n=e.mark.type.excluded;return n.find((function(n){return n===t.type&&n!==e.mark.type}))})).filter((function(t){return t.to>h}));if(f.length)return null;d<r.to&&s.delete(d,r.to),h>r.from&&s.delete(r.from+l,h),c=r.from+l+a.length,s.addMark(r.from+l,c,t.type.create(o||{})),s.removeStoredMark(t.type)}}})}function Wh(t){return new Fc({find:t.find,handler:function(e){var n=e.state,r=e.range,i=e.match,o=Dc(t.getAttributes,void 0,i)||{},s=n.tr,a=r.from,u=r.to;if(i[1]){var c=i[0].lastIndexOf(i[1]),l=a+c;l>u?l=u:u=l+i[1].length;var h=i[0][i[0].length-1];s.insertText(h,a+i[0].length-1),s.replaceWith(l,u,t.type.create(o))}else i[0]&&s.replaceWith(a,u,t.type.create(o))}})}function Uh(t){return new Fc({find:t.find,handler:function(e){var n=e.state,r=e.range,i=e.match,o=n.doc.resolve(r.from),s=Dc(t.getAttributes,void 0,i)||{};if(!o.node(-1).canReplaceWith(o.index(-1),o.indexAfter(-1),t.type))return null;n.tr.delete(r.from,r.to).setBlockType(r.from,r.from,t.type,s)}})}function Gh(t){return new Fc({find:t.find,handler:function(e){var n=e.state,r=e.range,i=e.match,o=e.chain,s=Dc(t.getAttributes,void 0,i)||{},a=n.tr.delete(r.from,r.to),u=a.doc.resolve(r.from),c=u.blockRange(),l=c&&ee(c,t.type,s);if(!l)return null;if(a.wrap(c,l),t.keepMarks&&t.editor){var h=n.selection,d=n.storedMarks,f=t.editor.extensionManager.splittableMarks,p=d||h.$to.parentOffset&&h.$from.marks();if(p){var v=p.filter((function(t){return f.includes(t.type.name)}));a.ensureMarks(v)}}if(t.keepAttributes){var m="bulletList"===t.type.name||"orderedList"===t.type.name?"listItem":"taskList";o().updateAttributes(m,s).run()}var g=a.doc.resolve(r.from-1).nodeBefore;g&&g.type===t.type&&he(a.doc,r.from-1)&&(!t.joinPredicate||t.joinPredicate(i,g))&&a.join(r.from-1)}})}var Yh=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(0,w.Z)(this,t),this.type="mark",this.name="mark",this.parent=null,this.child=null,this.config={name:this.name,defaultOptions:{}},this.config=u(u({},this.config),e),this.name=this.config.name,e.defaultOptions&&console.warn('[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "'.concat(this.name,'".')),this.options=this.config.defaultOptions,this.config.addOptions&&(this.options=Dc(vc(this,"addOptions",{name:this.name}))),this.storage=Dc(vc(this,"addStorage",{name:this.name,options:this.options}))||{}}return(0,D.Z)(t,[{key:"configure",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=this.extend();return e.options=Hc(this.options,t),e.storage=Dc(vc(e,"addStorage",{name:e.name,options:e.options})),e}},{key:"extend",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=new t(e);return n.parent=this,this.child=n,n.name=e.name?e.name:n.parent.name,e.defaultOptions&&console.warn('[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "'.concat(n.name,'".')),n.options=Dc(vc(n,"addOptions",{name:n.name})),n.storage=Dc(vc(n,"addStorage",{name:n.name,options:n.options})),n}}],[{key:"create",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return new t(e)}},{key:"handleExit",value:function(t){var e=t.editor,n=t.mark,r=e.state.tr,i=e.state.selection.$from,o=i.pos===i.end();if(o){var s=i.marks(),a=!!s.find((function(t){return(null===t||void 0===t?void 0:t.type.name)===n.name}));if(!a)return!1;var u=s.find((function(t){return(null===t||void 0===t?void 0:t.type.name)===n.name}));return u&&r.removeStoredMark(u),r.insertText(" ",i.pos),e.view.dispatch(r),!0}return!1}}]),t}(),Qh=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(0,w.Z)(this,t),this.type="node",this.name="node",this.parent=null,this.child=null,this.config={name:this.name,defaultOptions:{}},this.config=u(u({},this.config),e),this.name=this.config.name,e.defaultOptions&&console.warn('[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "'.concat(this.name,'".')),this.options=this.config.defaultOptions,this.config.addOptions&&(this.options=Dc(vc(this,"addOptions",{name:this.name}))),this.storage=Dc(vc(this,"addStorage",{name:this.name,options:this.options}))||{}}return(0,D.Z)(t,[{key:"configure",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=this.extend();return e.options=Hc(this.options,t),e.storage=Dc(vc(e,"addStorage",{name:e.name,options:e.options})),e}},{key:"extend",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=new t(e);return n.parent=this,this.child=n,n.name=e.name?e.name:n.parent.name,e.defaultOptions&&console.warn('[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "'.concat(n.name,'".')),n.options=Dc(vc(n,"addOptions",{name:n.name})),n.storage=Dc(vc(n,"addStorage",{name:n.name,options:n.options})),n}}],[{key:"create",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return new t(e)}}]),t}();function Xh(t){return new Rc({find:t.find,handler:function(e){var n=e.state,r=e.range,i=e.match,o=Dc(t.getAttributes,void 0,i);if(!1===o||null===o)return null;var s=n.tr,a=i[i.length-1],u=i[0],c=r.to;if(a){var l=u.search(/\S/),h=r.from+u.indexOf(a),d=h+a.length,f=ch(r.from,r.to,n.doc).filter((function(e){var n=e.mark.type.excluded;return n.find((function(n){return n===t.type&&n!==e.mark.type}))})).filter((function(t){return t.to>h}));if(f.length)return null;d<r.to&&s.delete(d,r.to),h>r.from&&s.delete(r.from+l,h),c=r.from+l+a.length,s.addMark(r.from+l,c,t.type.create(o||{})),s.removeStoredMark(t.type)}}})}var td=/^\s*>\s$/,ed=Qh.create({name:"blockquote",addOptions:function(){return{HTMLAttributes:{}}},content:"block+",group:"block",defining:!0,parseHTML:function(){return[{tag:"blockquote"}]},renderHTML:function(t){var e=t.HTMLAttributes;return["blockquote",kc(this.options.HTMLAttributes,e),0]},addCommands:function(){var t=this;return{setBlockquote:function(){return function(e){var n=e.commands;return n.wrapIn(t.name)}},toggleBlockquote:function(){return function(e){var n=e.commands;return n.toggleWrap(t.name)}},unsetBlockquote:function(){return function(e){var n=e.commands;return n.lift(t.name)}}}},addKeyboardShortcuts:function(){var t=this;return{"Mod-Shift-b":function(){return t.editor.commands.toggleBlockquote()}}},addInputRules:function(){return[Gh({find:td,type:this.type})]}}),nd=/(?:^|\s)((?:\*\*)((?:[^*]+))(?:\*\*))$/,rd=/(?:^|\s)((?:\*\*)((?:[^*]+))(?:\*\*))/g,id=/(?:^|\s)((?:__)((?:[^__]+))(?:__))$/,od=/(?:^|\s)((?:__)((?:[^__]+))(?:__))/g,sd=Yh.create({name:"bold",addOptions:function(){return{HTMLAttributes:{}}},parseHTML:function(){return[{tag:"strong"},{tag:"b",getAttrs:function(t){return"normal"!==t.style.fontWeight&&null}},{style:"font-weight",getAttrs:function(t){return/^(bold(er)?|[5-9]\d{2,})$/.test(t)&&null}}]},renderHTML:function(t){var e=t.HTMLAttributes;return["strong",kc(this.options.HTMLAttributes,e),0]},addCommands:function(){var t=this;return{setBold:function(){return function(e){var n=e.commands;return n.setMark(t.name)}},toggleBold:function(){return function(e){var n=e.commands;return n.toggleMark(t.name)}},unsetBold:function(){return function(e){var n=e.commands;return n.unsetMark(t.name)}}}},addKeyboardShortcuts:function(){var t=this;return{"Mod-b":function(){return t.editor.commands.toggleBold()},"Mod-B":function(){return t.editor.commands.toggleBold()}}},addInputRules:function(){return[Kh({find:nd,type:this.type}),Kh({find:id,type:this.type})]},addPasteRules:function(){return[Xh({find:rd,type:this.type}),Xh({find:od,type:this.type})]}}),ad=Qh.create({name:"listItem",addOptions:function(){return{HTMLAttributes:{}}},content:"paragraph block*",defining:!0,parseHTML:function(){return[{tag:"li"}]},renderHTML:function(t){var e=t.HTMLAttributes;return["li",kc(this.options.HTMLAttributes,e),0]},addKeyboardShortcuts:function(){var t=this;return{Enter:function(){return t.editor.commands.splitListItem(t.name)},Tab:function(){return t.editor.commands.sinkListItem(t.name)},"Shift-Tab":function(){return t.editor.commands.liftListItem(t.name)}}}}),ud=Yh.create({name:"textStyle",addOptions:function(){return{HTMLAttributes:{}}},parseHTML:function(){return[{tag:"span",getAttrs:function(t){var e=t.hasAttribute("style");return!!e&&{}}}]},renderHTML:function(t){var e=t.HTMLAttributes;return["span",kc(this.options.HTMLAttributes,e),0]},addCommands:function(){var t=this;return{removeEmptyTextStyle:function(){return function(e){var n=e.state,r=e.commands,i=rh(n,t.type),o=Object.entries(i).some((function(t){var e=(0,h.Z)(t,2),n=e[1];return!!n}));return!!o||r.unsetMark(t.name)}}}}}),cd=/^\s*([-+*])\s$/,ld=Qh.create({name:"bulletList",addOptions:function(){return{itemTypeName:"listItem",HTMLAttributes:{},keepMarks:!1,keepAttributes:!1}},group:"block list",content:function(){return"".concat(this.options.itemTypeName,"+")},parseHTML:function(){return[{tag:"ul"}]},renderHTML:function(t){var e=t.HTMLAttributes;return["ul",kc(this.options.HTMLAttributes,e),0]},addCommands:function(){var t=this;return{toggleBulletList:function(){return function(e){var n=e.commands,r=e.chain;return t.options.keepAttributes?r().toggleList(t.name,t.options.itemTypeName,t.options.keepMarks).updateAttributes(ad.name,t.editor.getAttributes(ud.name)).run():n.toggleList(t.name,t.options.itemTypeName,t.options.keepMarks)}}}},addKeyboardShortcuts:function(){var t=this;return{"Mod-Shift-8":function(){return t.editor.commands.toggleBulletList()}}},addInputRules:function(){var t=this,e=Gh({find:cd,type:this.type});return(this.options.keepMarks||this.options.keepAttributes)&&(e=Gh({find:cd,type:this.type,keepMarks:this.options.keepMarks,keepAttributes:this.options.keepAttributes,getAttributes:function(){return t.editor.getAttributes(ud.name)},editor:this.editor})),[e]}}),hd=/(?:^|\s)((?:`)((?:[^`]+))(?:`))$/,dd=/(?:^|\s)((?:`)((?:[^`]+))(?:`))/g,fd=Yh.create({name:"code",addOptions:function(){return{HTMLAttributes:{}}},excludes:"_",code:!0,exitable:!0,parseHTML:function(){return[{tag:"code"}]},renderHTML:function(t){var e=t.HTMLAttributes;return["code",kc(this.options.HTMLAttributes,e),0]},addCommands:function(){var t=this;return{setCode:function(){return function(e){var n=e.commands;return n.setMark(t.name)}},toggleCode:function(){return function(e){var n=e.commands;return n.toggleMark(t.name)}},unsetCode:function(){return function(e){var n=e.commands;return n.unsetMark(t.name)}}}},addKeyboardShortcuts:function(){var t=this;return{"Mod-e":function(){return t.editor.commands.toggleCode()}}},addInputRules:function(){return[Kh({find:hd,type:this.type})]},addPasteRules:function(){return[Xh({find:dd,type:this.type})]}}),pd=/^```([a-z]+)?[\s\n]$/,vd=/^~~~([a-z]+)?[\s\n]$/,md=Qh.create({name:"codeBlock",addOptions:function(){return{languageClassPrefix:"language-",exitOnTripleEnter:!0,exitOnArrowDown:!0,HTMLAttributes:{}}},content:"text*",marks:"",group:"block",code:!0,defining:!0,addAttributes:function(){var t=this;return{language:{default:null,parseHTML:function(e){var n,r=t.options.languageClassPrefix,i=(0,s.Z)((null===(n=e.firstElementChild)||void 0===n?void 0:n.classList)||[]),o=i.filter((function(t){return t.startsWith(r)})).map((function(t){return t.replace(r,"")})),a=o[0];return a||null},rendered:!1}}},parseHTML:function(){return[{tag:"pre",preserveWhitespace:"full"}]},renderHTML:function(t){var e=t.node,n=t.HTMLAttributes;return["pre",kc(this.options.HTMLAttributes,n),["code",{class:e.attrs.language?this.options.languageClassPrefix+e.attrs.language:null},0]]},addCommands:function(){var t=this;return{setCodeBlock:function(e){return function(n){var r=n.commands;return r.setNode(t.name,e)}},toggleCodeBlock:function(e){return function(n){var r=n.commands;return r.toggleNode(t.name,"paragraph",e)}}}},addKeyboardShortcuts:function(){var t=this;return{"Mod-Alt-c":function(){return t.editor.commands.toggleCodeBlock()},Backspace:function(){var e=t.editor.state.selection,n=e.empty,r=e.$anchor,i=1===r.pos;return!(!n||r.parent.type.name!==t.name)&&(!(!i&&r.parent.textContent.length)&&t.editor.commands.clearNodes())},Enter:function(e){var n=e.editor;if(!t.options.exitOnTripleEnter)return!1;var r=n.state,i=r.selection,o=i.$from,s=i.empty;if(!s||o.parent.type!==t.type)return!1;var a=o.parentOffset===o.parent.nodeSize-2,u=o.parent.textContent.endsWith("\n\n");return!(!a||!u)&&n.chain().command((function(t){var e=t.tr;return e.delete(o.pos-2,o.pos),!0})).exitCode().run()},ArrowDown:function(e){var n=e.editor;if(!t.options.exitOnArrowDown)return!1;var r=n.state,i=r.selection,o=r.doc,s=i.$from,a=i.empty;if(!a||s.parent.type!==t.type)return!1;var u=s.parentOffset===s.parent.nodeSize-2;if(!u)return!1;var c=s.after();if(void 0===c)return!1;var l=o.nodeAt(c);return!l&&n.commands.exitCode()}}},addInputRules:function(){return[Uh({find:pd,type:this.type,getAttributes:function(t){return{language:t[1]}}}),Uh({find:vd,type:this.type,getAttributes:function(t){return{language:t[1]}}})]},addProseMirrorPlugins:function(){var t=this;return[new on({key:new un("codeBlockVSCodeHandler"),props:{handlePaste:function(e,n){if(!n.clipboardData)return!1;if(t.editor.isActive(t.type.name))return!1;var r=n.clipboardData.getData("text/plain"),i=n.clipboardData.getData("vscode-editor-data"),o=i?JSON.parse(i):void 0,s=null===o||void 0===o?void 0:o.mode;if(!r||!s)return!1;var a=e.state.tr;return a.replaceSelectionWith(t.type.create({language:s})),a.setSelection(Ze.near(a.doc.resolve(Math.max(0,a.selection.from-2)))),a.insertText(r.replace(/\r\n?/g,"\n")),a.setMeta("paste",!0),e.dispatch(a),!0}}})]}}),gd=Qh.create({name:"doc",topNode:!0,content:"block+"});function yd(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return new on({view:function(e){return new kd(e,t)}})}var kd=function(){function t(e,n){var r,i=this;(0,w.Z)(this,t),this.editorView=e,this.cursorPos=null,this.element=null,this.timeout=-1,this.width=null!==(r=n.width)&&void 0!==r?r:1,this.color=!1===n.color?void 0:n.color||"black",this.class=n.class,this.handlers=["dragover","dragend","drop","dragleave"].map((function(t){var n=function(e){i[t](e)};return e.dom.addEventListener(t,n),{name:t,handler:n}}))}return(0,D.Z)(t,[{key:"destroy",value:function(){var t=this;this.handlers.forEach((function(e){var n=e.name,r=e.handler;return t.editorView.dom.removeEventListener(n,r)}))}},{key:"update",value:function(t,e){null!=this.cursorPos&&e.doc!=t.state.doc&&(this.cursorPos>t.state.doc.content.size?this.setCursor(null):this.updateOverlay())}},{key:"setCursor",value:function(t){t!=this.cursorPos&&(this.cursorPos=t,null==t?(this.element.parentNode.removeChild(this.element),this.element=null):this.updateOverlay())}},{key:"updateOverlay",value:function(){var t,e=this.editorView.state.doc.resolve(this.cursorPos),n=!e.parent.inlineContent;if(n){var r=e.nodeBefore,i=e.nodeAfter;if(r||i){var o=this.editorView.nodeDOM(this.cursorPos-(r?r.nodeSize:0));if(o){var s=o.getBoundingClientRect(),a=r?s.bottom:s.top;r&&i&&(a=(a+this.editorView.nodeDOM(this.cursorPos).getBoundingClientRect().top)/2),t={left:s.left,right:s.right,top:a-this.width/2,bottom:a+this.width/2}}}}if(!t){var u=this.editorView.coordsAtPos(this.cursorPos);t={left:u.left-this.width/2,right:u.left+this.width/2,top:u.top,bottom:u.bottom}}var c,l,h=this.editorView.dom.offsetParent;if(this.element||(this.element=h.appendChild(document.createElement("div")),this.class&&(this.element.className=this.class),this.element.style.cssText="position: absolute; z-index: 50; pointer-events: none;",this.color&&(this.element.style.backgroundColor=this.color)),this.element.classList.toggle("prosemirror-dropcursor-block",n),this.element.classList.toggle("prosemirror-dropcursor-inline",!n),!h||h==document.body&&"static"==getComputedStyle(h).position)c=-pageXOffset,l=-pageYOffset;else{var d=h.getBoundingClientRect();c=d.left-h.scrollLeft,l=d.top-h.scrollTop}this.element.style.left=t.left-c+"px",this.element.style.top=t.top-l+"px",this.element.style.width=t.right-t.left+"px",this.element.style.height=t.bottom-t.top+"px"}},{key:"scheduleRemoval",value:function(t){var e=this;clearTimeout(this.timeout),this.timeout=setTimeout((function(){return e.setCursor(null)}),t)}},{key:"dragover",value:function(t){if(this.editorView.editable){var e=this.editorView.posAtCoords({left:t.clientX,top:t.clientY}),n=e&&e.inside>=0&&this.editorView.state.doc.nodeAt(e.inside),r=n&&n.type.spec.disableDropCursor,i="function"==typeof r?r(this.editorView,e,t):r;if(e&&!i){var o=e.pos;if(this.editorView.dragging&&this.editorView.dragging.slice){var s=me(this.editorView.state.doc,o,this.editorView.dragging.slice);null!=s&&(o=s)}this.setCursor(o),this.scheduleRemoval(5e3)}}}},{key:"dragend",value:function(){this.scheduleRemoval(20)}},{key:"drop",value:function(){this.scheduleRemoval(20)}},{key:"dragleave",value:function(t){t.target!=this.editorView.dom&&this.editorView.dom.contains(t.relatedTarget)||this.setCursor(null)}}]),t}(),bd=Jc.create({name:"dropCursor",addOptions:function(){return{color:"currentColor",width:1,class:void 0}},addProseMirrorPlugins:function(){return[yd(this.options)]}}),wd=function(t){(0,g.Z)(n,t);var e=(0,y.Z)(n);function n(t){return(0,w.Z)(this,n),e.call(this,t,t)}return(0,D.Z)(n,[{key:"map",value:function(t,e){var r=t.resolve(e.map(this.head));return n.valid(r)?new n(r):Le.near(r)}},{key:"content",value:function(){return L.empty}},{key:"eq",value:function(t){return t instanceof n&&t.head==this.head}},{key:"toJSON",value:function(){return{type:"gapcursor",pos:this.head}}},{key:"getBookmark",value:function(){return new Dd(this.anchor)}}],[{key:"fromJSON",value:function(t,e){if("number"!=typeof e.pos)throw new RangeError("Invalid input for GapCursor.fromJSON");return new n(t.resolve(e.pos))}},{key:"valid",value:function(t){var e=t.parent;if(e.isTextblock||!xd(t)||!Cd(t))return!1;var n=e.type.spec.allowGapCursor;if(null!=n)return n;var r=e.contentMatchAt(t.index()).defaultType;return r&&r.isTextblock}},{key:"findGapCursorFrom",value:function(t,e){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];t:for(;;){if(!r&&n.valid(t))return t;for(var i=t.pos,o=null,s=t.depth;;s--){var a=t.node(s);if(e>0?t.indexAfter(s)<a.childCount:t.index(s)>0){o=a.child(e>0?t.indexAfter(s):t.index(s)-1);break}if(0==s)return null;i+=e;var u=t.doc.resolve(i);if(n.valid(u))return u}for(;;){var c=e>0?o.firstChild:o.lastChild;if(!c){if(o.isAtom&&!o.isText&&!je.isSelectable(o)){t=t.doc.resolve(i+o.nodeSize*e),r=!1;continue t}break}o=c,i+=e;var l=t.doc.resolve(i);if(n.valid(l))return l}return null}}}]),n}(Le);wd.prototype.visible=!1,wd.findFrom=wd.findGapCursorFrom,Le.jsonID("gapcursor",wd);var Dd=function(){function t(e){(0,w.Z)(this,t),this.pos=e}return(0,D.Z)(t,[{key:"map",value:function(e){return new t(e.map(this.pos))}},{key:"resolve",value:function(t){var e=t.resolve(this.pos);return wd.valid(e)?new wd(e):Le.near(e)}}]),t}();function xd(t){for(var e=t.depth;e>=0;e--){var n=t.index(e),r=t.node(e);if(0!=n)for(var i=r.child(n-1);;i=i.lastChild){if(0==i.childCount&&!i.inlineContent||i.isAtom||i.type.spec.isolating)return!0;if(i.inlineContent)return!1}else if(r.type.spec.isolating)return!0}return!0}function Cd(t){for(var e=t.depth;e>=0;e--){var n=t.indexAfter(e),r=t.node(e);if(n!=r.childCount)for(var i=r.child(n);;i=i.firstChild){if(0==i.childCount&&!i.inlineContent||i.isAtom||i.type.spec.isolating)return!0;if(i.inlineContent)return!1}else if(r.type.spec.isolating)return!0}return!0}function Ad(){return new on({props:{decorations:Od,createSelectionBetween:function(t,e,n){return e.pos==n.pos&&wd.valid(n)?new wd(n):null},handleClick:_d,handleKeyDown:Ed,handleDOMEvents:{beforeinput:Md}}})}var Ed=aa({ArrowLeft:Sd("horiz",-1),ArrowRight:Sd("horiz",1),ArrowUp:Sd("vert",-1),ArrowDown:Sd("vert",1)});function Sd(t,e){var n="vert"==t?e>0?"down":"up":e>0?"right":"left";return function(t,r,i){var o=t.selection,s=e>0?o.$to:o.$from,a=o.empty;if(o instanceof Ze){if(!i.endOfTextblock(n)||0==s.depth)return!1;a=!1,s=t.doc.resolve(e>0?s.after():s.before())}var u=wd.findGapCursorFrom(s,e,a);return!!u&&(r&&r(t.tr.setSelection(new wd(u))),!0)}}function _d(t,e,n){if(!t||!t.editable)return!1;var r=t.state.doc.resolve(e);if(!wd.valid(r))return!1;var i=t.posAtCoords({left:n.clientX,top:n.clientY});return!(i&&i.inside>-1&&je.isSelectable(t.state.doc.nodeAt(i.inside)))&&(t.dispatch(t.state.tr.setSelection(new wd(r))),!0)}function Md(t,e){if("insertCompositionText"!=e.inputType||!(t.state.selection instanceof wd))return!1;var n=t.state.selection.$from,r=n.parent.contentMatchAt(n.index()).findWrapping(t.state.schema.nodes.text);if(!r)return!1;for(var i=O.empty,o=r.length-1;o>=0;o--)i=O.from(r[o].createAndFill(null,i));var s=t.state.tr.replace(n.pos,n.pos,new L(i,0,0));return s.setSelection(Ze.near(s.doc.resolve(n.pos+1))),t.dispatch(s),!1}function Od(t){if(!(t.selection instanceof wd))return null;var e=document.createElement("div");return e.className="ProseMirror-gapcursor",hs.create(t.doc,[us.widget(t.selection.head,e,{key:"gapcursor"})])}var Td=Jc.create({name:"gapCursor",addProseMirrorPlugins:function(){return[Ad()]},extendNodeSchema:function(t){var e,n={name:t.name,options:t.options,storage:t.storage};return{allowGapCursor:null!==(e=Dc(vc(t,"allowGapCursor",n)))&&void 0!==e?e:null}}}),Fd=Qh.create({name:"hardBreak",addOptions:function(){return{keepMarks:!0,HTMLAttributes:{}}},inline:!0,group:"inline",selectable:!1,parseHTML:function(){return[{tag:"br"}]},renderHTML:function(t){var e=t.HTMLAttributes;return["br",kc(this.options.HTMLAttributes,e)]},renderText:function(){return"\n"},addCommands:function(){var t=this;return{setHardBreak:function(){return function(e){var n=e.commands,r=e.chain,i=e.state,o=e.editor;return n.first([function(){return n.exitCode()},function(){return n.command((function(){var e=i.selection,n=i.storedMarks;if(e.$from.parent.type.spec.isolating)return!1;var s=t.options.keepMarks,a=o.extensionManager.splittableMarks,u=n||e.$to.parentOffset&&e.$from.marks();return r().insertContent({type:t.name}).command((function(t){var e=t.tr,n=t.dispatch;if(n&&u&&s){var r=u.filter((function(t){return a.includes(t.type.name)}));e.ensureMarks(r)}return!0})).run()}))}])}}}},addKeyboardShortcuts:function(){var t=this;return{"Mod-Enter":function(){return t.editor.commands.setHardBreak()},"Shift-Enter":function(){return t.editor.commands.setHardBreak()}}}}),Nd=Qh.create({name:"heading",addOptions:function(){return{levels:[1,2,3,4,5,6],HTMLAttributes:{}}},content:"inline*",group:"block",defining:!0,addAttributes:function(){return{level:{default:1,rendered:!1}}},parseHTML:function(){return this.options.levels.map((function(t){return{tag:"h".concat(t),attrs:{level:t}}}))},renderHTML:function(t){var e=t.node,n=t.HTMLAttributes,r=this.options.levels.includes(e.attrs.level),i=r?e.attrs.level:this.options.levels[0];return["h".concat(i),kc(this.options.HTMLAttributes,n),0]},addCommands:function(){var t=this;return{setHeading:function(e){return function(n){var r=n.commands;return!!t.options.levels.includes(e.level)&&r.setNode(t.name,e)}},toggleHeading:function(e){return function(n){var r=n.commands;return!!t.options.levels.includes(e.level)&&r.toggleNode(t.name,"paragraph",e)}}}},addKeyboardShortcuts:function(){var t=this;return this.options.levels.reduce((function(e,n){return u(u({},e),(0,o.Z)({},"Mod-Alt-".concat(n),(function(){return t.editor.commands.toggleHeading({level:n})})))}),{})},addInputRules:function(){var t=this;return this.options.levels.map((function(e){return Uh({find:new RegExp("^(#{1,".concat(e,"})\\s$")),type:t.type,getAttributes:{level:e}})}))}}),Bd=200,Id=function(){};Id.prototype.append=function(t){return t.length?(t=Id.from(t),!this.length&&t||t.length<Bd&&this.leafAppend(t)||this.length<Bd&&t.leafPrepend(this)||this.appendInner(t)):this},Id.prototype.prepend=function(t){return t.length?Id.from(t).append(this):this},Id.prototype.appendInner=function(t){return new Rd(this,t)},Id.prototype.slice=function(t,e){return void 0===t&&(t=0),void 0===e&&(e=this.length),t>=e?Id.empty:this.sliceInner(Math.max(0,t),Math.min(this.length,e))},Id.prototype.get=function(t){if(!(t<0||t>=this.length))return this.getInner(t)},Id.prototype.forEach=function(t,e,n){void 0===e&&(e=0),void 0===n&&(n=this.length),e<=n?this.forEachInner(t,e,n,0):this.forEachInvertedInner(t,e,n,0)},Id.prototype.map=function(t,e,n){void 0===e&&(e=0),void 0===n&&(n=this.length);var r=[];return this.forEach((function(e,n){return r.push(t(e,n))}),e,n),r},Id.from=function(t){return t instanceof Id?t:t&&t.length?new Ld(t):Id.empty};var Ld=function(t){function e(e){t.call(this),this.values=e}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var n={length:{configurable:!0},depth:{configurable:!0}};return e.prototype.flatten=function(){return this.values},e.prototype.sliceInner=function(t,n){return 0==t&&n==this.length?this:new e(this.values.slice(t,n))},e.prototype.getInner=function(t){return this.values[t]},e.prototype.forEachInner=function(t,e,n,r){for(var i=e;i<n;i++)if(!1===t(this.values[i],r+i))return!1},e.prototype.forEachInvertedInner=function(t,e,n,r){for(var i=e-1;i>=n;i--)if(!1===t(this.values[i],r+i))return!1},e.prototype.leafAppend=function(t){if(this.length+t.length<=Bd)return new e(this.values.concat(t.flatten()))},e.prototype.leafPrepend=function(t){if(this.length+t.length<=Bd)return new e(t.flatten().concat(this.values))},n.length.get=function(){return this.values.length},n.depth.get=function(){return 0},Object.defineProperties(e.prototype,n),e}(Id);Id.empty=new Ld([]);var Rd=function(t){function e(e,n){t.call(this),this.left=e,this.right=n,this.length=e.length+n.length,this.depth=Math.max(e.depth,n.depth)+1}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.flatten=function(){return this.left.flatten().concat(this.right.flatten())},e.prototype.getInner=function(t){return t<this.left.length?this.left.get(t):this.right.get(t-this.left.length)},e.prototype.forEachInner=function(t,e,n,r){var i=this.left.length;return!(e<i&&!1===this.left.forEachInner(t,e,Math.min(n,i),r))&&(!(n>i&&!1===this.right.forEachInner(t,Math.max(e-i,0),Math.min(this.length,n)-i,r+i))&&void 0)},e.prototype.forEachInvertedInner=function(t,e,n,r){var i=this.left.length;return!(e>i&&!1===this.right.forEachInvertedInner(t,e-i,Math.max(n,i)-i,r+i))&&(!(n<i&&!1===this.left.forEachInvertedInner(t,Math.min(e,i),n,r))&&void 0)},e.prototype.sliceInner=function(t,e){if(0==t&&e==this.length)return this;var n=this.left.length;return e<=n?this.left.slice(t,e):t>=n?this.right.slice(t-n,e-n):this.left.slice(t,n).append(this.right.slice(0,e-n))},e.prototype.leafAppend=function(t){var n=this.right.leafAppend(t);if(n)return new e(this.left,n)},e.prototype.leafPrepend=function(t){var n=this.left.leafPrepend(t);if(n)return new e(n,this.right)},e.prototype.appendInner=function(t){return this.left.depth>=Math.max(this.right.depth,t.depth)+1?new e(this.left,new e(this.right,t)):new e(this,t)},e}(Id),zd=500,Pd=function(){function t(e,n){(0,w.Z)(this,t),this.items=e,this.eventCount=n}return(0,D.Z)(t,[{key:"popEvent",value:function(e,n){var r=this;if(0==this.eventCount)return null;for(var i,o,s=this.items.length;;s--){var a=this.items.get(s-1);if(a.selection){--s;break}}n&&(i=this.remapping(s,this.items.length),o=i.maps.length);var u,c,l=e.tr,h=[],d=[];return this.items.forEach((function(e,n){if(!e.step)return i||(i=r.remapping(s,n+1),o=i.maps.length),o--,void d.push(e);if(i){d.push(new qd(e.map));var a,f=e.step.map(i.slice(o));f&&l.maybeStep(f).doc&&(a=l.mapping.maps[l.mapping.maps.length-1],h.push(new qd(a,void 0,void 0,h.length+d.length))),o--,a&&i.appendMap(a,o)}else l.maybeStep(e.step);return e.selection?(u=i?e.selection.map(i.slice(o)):e.selection,c=new t(r.items.slice(0,s).append(d.reverse().concat(h)),r.eventCount-1),!1):void 0}),this.items.length,0),{remaining:c,transform:l,selection:u}}},{key:"addTransform",value:function(e,n,r,i){for(var o=[],s=this.eventCount,a=this.items,u=!i&&a.length?a.get(a.length-1):null,c=0;c<e.steps.length;c++){var l=e.steps[c].invert(e.docs[c]),h=new qd(e.mapping.maps[c],l,n),d=void 0;(d=u&&u.merge(h))&&(h=d,c?o.pop():a=a.slice(0,a.length-1)),o.push(h),n&&(s++,n=void 0),i||(u=h)}var f=s-r.depth;return f>$d&&(a=Zd(a,f),s-=f),new t(a.append(o),s)}},{key:"remapping",value:function(t,e){var n=new Rt;return this.items.forEach((function(e,r){var i=null!=e.mirrorOffset&&r-e.mirrorOffset>=t?n.maps.length-e.mirrorOffset:void 0;n.appendMap(e.map,i)}),t,e),n}},{key:"addMaps",value:function(e){return 0==this.eventCount?this:new t(this.items.append(e.map((function(t){return new qd(t)}))),this.eventCount)}},{key:"rebased",value:function(e,n){if(!this.eventCount)return this;var r=[],i=Math.max(0,this.items.length-n),o=e.mapping,s=e.steps.length,a=this.eventCount;this.items.forEach((function(t){t.selection&&a--}),i);var u=n;this.items.forEach((function(t){var n=o.getMirror(--u);if(null!=n){s=Math.min(s,n);var i=o.maps[n];if(t.step){var c=e.steps[n].invert(e.docs[n]),l=t.selection&&t.selection.map(o.slice(u+1,n));l&&a++,r.push(new qd(i,c,l))}else r.push(new qd(i))}}),i);for(var c=[],l=n;l<s;l++)c.push(new qd(o.maps[l]));var h=this.items.slice(0,i).append(c).append(r),d=new t(h,a);return d.emptyItemCount()>zd&&(d=d.compress(this.items.length-r.length)),d}},{key:"emptyItemCount",value:function(){var t=0;return this.items.forEach((function(e){e.step||t++})),t}},{key:"compress",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.items.length,n=this.remapping(0,e),r=n.maps.length,i=[],o=0;return this.items.forEach((function(t,s){if(s>=e)i.push(t),t.selection&&o++;else if(t.step){var a=t.step.map(n.slice(r)),u=a&&a.getMap();if(r--,u&&n.appendMap(u,r),a){var c=t.selection&&t.selection.map(n.slice(r));c&&o++;var l,h=new qd(u.invert(),a,c),d=i.length-1;(l=i.length&&i[d].merge(h))?i[d]=l:i.push(h)}}else t.map&&r--}),this.items.length,0),new t(Id.from(i.reverse()),o)}}]),t}();function Zd(t,e){var n;return t.forEach((function(t,r){if(t.selection&&0==e--)return n=r,!1})),t.slice(n)}Pd.empty=new Pd(Id.empty,0);var qd=function(){function t(e,n,r,i){(0,w.Z)(this,t),this.map=e,this.step=n,this.selection=r,this.mirrorOffset=i}return(0,D.Z)(t,[{key:"merge",value:function(e){if(this.step&&e.step&&!e.selection){var n=e.step.merge(this.step);if(n)return new t(n.getMap().invert(),n,this.selection)}}}]),t}(),jd=(0,D.Z)((function t(e,n,r,i,o){(0,w.Z)(this,t),this.done=e,this.undone=n,this.prevRanges=r,this.prevTime=i,this.prevComposition=o})),$d=20;function Vd(t,e,n,r){var i,o=n.getMeta(Qd);if(o)return o.historyState;n.getMeta(Xd)&&(t=new jd(t.done,t.undone,null,0,-1));var s=n.getMeta("appendedTransaction");if(0==n.steps.length)return t;if(s&&s.getMeta(Qd))return s.getMeta(Qd).redo?new jd(t.done.addTransform(n,void 0,r,Yd(e)),t.undone,Jd(n.mapping.maps[n.steps.length-1]),t.prevTime,t.prevComposition):new jd(t.done,t.undone.addTransform(n,void 0,r,Yd(e)),null,t.prevTime,t.prevComposition);if(!1===n.getMeta("addToHistory")||s&&!1===s.getMeta("addToHistory"))return(i=n.getMeta("rebased"))?new jd(t.done.rebased(n,i),t.undone.rebased(n,i),Kd(t.prevRanges,n.mapping),t.prevTime,t.prevComposition):new jd(t.done.addMaps(n.mapping.maps),t.undone.addMaps(n.mapping.maps),Kd(t.prevRanges,n.mapping),t.prevTime,t.prevComposition);var a=n.getMeta("composition"),u=0==t.prevTime||!s&&t.prevComposition!=a&&(t.prevTime<(n.time||0)-r.newGroupDelay||!Hd(n,t.prevRanges)),c=s?Kd(t.prevRanges,n.mapping):Jd(n.mapping.maps[n.steps.length-1]);return new jd(t.done.addTransform(n,u?e.selection.getBookmark():void 0,r,Yd(e)),Pd.empty,c,n.time,null==a?t.prevComposition:a)}function Hd(t,e){if(!e)return!1;if(!t.docChanged)return!0;var n=!1;return t.mapping.maps[0].forEach((function(t,r){for(var i=0;i<e.length;i+=2)t<=e[i+1]&&r>=e[i]&&(n=!0)})),n}function Jd(t){var e=[];return t.forEach((function(t,n,r,i){return e.push(r,i)})),e}function Kd(t,e){if(!t)return null;for(var n=[],r=0;r<t.length;r+=2){var i=e.map(t[r],1),o=e.map(t[r+1],-1);i<=o&&n.push(i,o)}return n}function Wd(t,e,n,r){var i=Yd(e),o=Qd.get(e).spec.config,s=(r?t.undone:t.done).popEvent(e,i);if(s){var a=s.selection.resolve(s.transform.doc),u=(r?t.done:t.undone).addTransform(s.transform,e.selection.getBookmark(),o,i),c=new jd(r?u:s.remaining,r?s.remaining:u,null,0,-1);n(s.transform.setSelection(a).setMeta(Qd,{redo:r,historyState:c}).scrollIntoView())}}var Ud=!1,Gd=null;function Yd(t){var e=t.plugins;if(Gd!=e){Ud=!1,Gd=e;for(var n=0;n<e.length;n++)if(e[n].spec.historyPreserveItems){Ud=!0;break}}return Ud}var Qd=new un("history"),Xd=new un("closeHistory");function tf(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return t={depth:t.depth||100,newGroupDelay:t.newGroupDelay||500},new on({key:Qd,state:{init:function(){return new jd(Pd.empty,Pd.empty,null,0,-1)},apply:function(e,n,r){return Vd(n,r,e,t)}},config:t,props:{handleDOMEvents:{beforeinput:function(t,e){var n=e.inputType,r="historyUndo"==n?ef:"historyRedo"==n?nf:null;return!!r&&(e.preventDefault(),r(t.state,t.dispatch))}}}})}var ef=function(t,e){var n=Qd.getState(t);return!(!n||0==n.done.eventCount)&&(e&&Wd(n,t,e,!1),!0)},nf=function(t,e){var n=Qd.getState(t);return!(!n||0==n.undone.eventCount)&&(e&&Wd(n,t,e,!0),!0)},rf=Jc.create({name:"history",addOptions:function(){return{depth:100,newGroupDelay:500}},addCommands:function(){return{undo:function(){return function(t){var e=t.state,n=t.dispatch;return ef(e,n)}},redo:function(){return function(t){var e=t.state,n=t.dispatch;return nf(e,n)}}}},addProseMirrorPlugins:function(){return[tf(this.options)]},addKeyboardShortcuts:function(){var t=this;return{"Mod-z":function(){return t.editor.commands.undo()},"Mod-y":function(){return t.editor.commands.redo()},"Shift-Mod-z":function(){return t.editor.commands.redo()},"Mod-я":function(){return t.editor.commands.undo()},"Shift-Mod-я":function(){return t.editor.commands.redo()}}}}),of=Qh.create({name:"horizontalRule",addOptions:function(){return{HTMLAttributes:{}}},group:"block",parseHTML:function(){return[{tag:"hr"}]},renderHTML:function(t){var e=t.HTMLAttributes;return["hr",kc(this.options.HTMLAttributes,e)]},addCommands:function(){var t=this;return{setHorizontalRule:function(){return function(e){var n=e.chain;return n().insertContent({type:t.name}).command((function(t){var e,n=t.tr,r=t.dispatch;if(r){var i=n.selection.$to,o=i.end();if(i.nodeAfter)n.setSelection(Ze.create(n.doc,i.pos));else{var s=null===(e=i.parent.type.contentMatch.defaultType)||void 0===e?void 0:e.create();s&&(n.insert(o,s),n.setSelection(Ze.create(n.doc,o)))}n.scrollIntoView()}return!0})).run()}}}},addInputRules:function(){return[Wh({find:/^(?:---|—-|___\s|\*\*\*\s)$/,type:this.type})]}}),sf=/(?:^|\s)((?:\*)((?:[^*]+))(?:\*))$/,af=/(?:^|\s)((?:\*)((?:[^*]+))(?:\*))/g,uf=/(?:^|\s)((?:_)((?:[^_]+))(?:_))$/,cf=/(?:^|\s)((?:_)((?:[^_]+))(?:_))/g,lf=Yh.create({name:"italic",addOptions:function(){return{HTMLAttributes:{}}},parseHTML:function(){return[{tag:"em"},{tag:"i",getAttrs:function(t){return"normal"!==t.style.fontStyle&&null}},{style:"font-style=italic"}]},renderHTML:function(t){var e=t.HTMLAttributes;return["em",kc(this.options.HTMLAttributes,e),0]},addCommands:function(){var t=this;return{setItalic:function(){return function(e){var n=e.commands;return n.setMark(t.name)}},toggleItalic:function(){return function(e){var n=e.commands;return n.toggleMark(t.name)}},unsetItalic:function(){return function(e){var n=e.commands;return n.unsetMark(t.name)}}}},addKeyboardShortcuts:function(){var t=this;return{"Mod-i":function(){return t.editor.commands.toggleItalic()},"Mod-I":function(){return t.editor.commands.toggleItalic()}}},addInputRules:function(){return[Kh({find:sf,type:this.type}),Kh({find:uf,type:this.type})]},addPasteRules:function(){return[Xh({find:af,type:this.type}),Xh({find:cf,type:this.type})]}}),hf=Qh.create({name:"listItem",addOptions:function(){return{HTMLAttributes:{}}},content:"paragraph block*",defining:!0,parseHTML:function(){return[{tag:"li"}]},renderHTML:function(t){var e=t.HTMLAttributes;return["li",kc(this.options.HTMLAttributes,e),0]},addKeyboardShortcuts:function(){var t=this;return{Enter:function(){return t.editor.commands.splitListItem(t.name)},Tab:function(){return t.editor.commands.sinkListItem(t.name)},"Shift-Tab":function(){return t.editor.commands.liftListItem(t.name)}}}}),df=Qh.create({name:"listItem",addOptions:function(){return{HTMLAttributes:{}}},content:"paragraph block*",defining:!0,parseHTML:function(){return[{tag:"li"}]},renderHTML:function(t){var e=t.HTMLAttributes;return["li",kc(this.options.HTMLAttributes,e),0]},addKeyboardShortcuts:function(){var t=this;return{Enter:function(){return t.editor.commands.splitListItem(t.name)},Tab:function(){return t.editor.commands.sinkListItem(t.name)},"Shift-Tab":function(){return t.editor.commands.liftListItem(t.name)}}}}),ff=Yh.create({name:"textStyle",addOptions:function(){return{HTMLAttributes:{}}},parseHTML:function(){return[{tag:"span",getAttrs:function(t){var e=t.hasAttribute("style");return!!e&&{}}}]},renderHTML:function(t){var e=t.HTMLAttributes;return["span",kc(this.options.HTMLAttributes,e),0]},addCommands:function(){var t=this;return{removeEmptyTextStyle:function(){return function(e){var n=e.state,r=e.commands,i=rh(n,t.type),o=Object.entries(i).some((function(t){var e=(0,h.Z)(t,2),n=e[1];return!!n}));return!!o||r.unsetMark(t.name)}}}}}),pf=/^(\d+)\.\s$/,vf=Qh.create({name:"orderedList",addOptions:function(){return{itemTypeName:"listItem",HTMLAttributes:{},keepMarks:!1,keepAttributes:!1}},group:"block list",content:function(){return"".concat(this.options.itemTypeName,"+")},addAttributes:function(){return{start:{default:1,parseHTML:function(t){return t.hasAttribute("start")?parseInt(t.getAttribute("start")||"",10):1}}}},parseHTML:function(){return[{tag:"ol"}]},renderHTML:function(t){var e=t.HTMLAttributes,n=e.start,r=i(e,E);return 1===n?["ol",kc(this.options.HTMLAttributes,r),0]:["ol",kc(this.options.HTMLAttributes,e),0]},addCommands:function(){var t=this;return{toggleOrderedList:function(){return function(e){var n=e.commands,r=e.chain;return t.options.keepAttributes?r().toggleList(t.name,t.options.itemTypeName,t.options.keepMarks).updateAttributes(df.name,t.editor.getAttributes(ff.name)).run():n.toggleList(t.name,t.options.itemTypeName,t.options.keepMarks)}}}},addKeyboardShortcuts:function(){var t=this;return{"Mod-Shift-7":function(){return t.editor.commands.toggleOrderedList()}}},addInputRules:function(){var t=this,e=Gh({find:pf,type:this.type,getAttributes:function(t){return{start:+t[1]}},joinPredicate:function(t,e){return e.childCount+e.attrs.start===+t[1]}});return(this.options.keepMarks||this.options.keepAttributes)&&(e=Gh({find:pf,type:this.type,keepMarks:this.options.keepMarks,keepAttributes:this.options.keepAttributes,getAttributes:function(e){return u({start:+e[1]},t.editor.getAttributes(ff.name))},joinPredicate:function(t,e){return e.childCount+e.attrs.start===+t[1]},editor:this.editor})),[e]}}),mf=Qh.create({name:"paragraph",priority:1e3,addOptions:function(){return{HTMLAttributes:{}}},group:"block",content:"inline*",parseHTML:function(){return[{tag:"p"}]},renderHTML:function(t){var e=t.HTMLAttributes;return["p",kc(this.options.HTMLAttributes,e),0]},addCommands:function(){var t=this;return{setParagraph:function(){return function(e){var n=e.commands;return n.setNode(t.name)}}}},addKeyboardShortcuts:function(){var t=this;return{"Mod-Alt-0":function(){return t.editor.commands.setParagraph()}}}}),gf=/(?:^|\s)((?:~~)((?:[^~]+))(?:~~))$/,yf=/(?:^|\s)((?:~~)((?:[^~]+))(?:~~))/g,kf=Yh.create({name:"strike",addOptions:function(){return{HTMLAttributes:{}}},parseHTML:function(){return[{tag:"s"},{tag:"del"},{tag:"strike"},{style:"text-decoration",consuming:!1,getAttrs:function(t){return!!t.includes("line-through")&&{}}}]},renderHTML:function(t){var e=t.HTMLAttributes;return["s",kc(this.options.HTMLAttributes,e),0]},addCommands:function(){var t=this;return{setStrike:function(){return function(e){var n=e.commands;return n.setMark(t.name)}},toggleStrike:function(){return function(e){var n=e.commands;return n.toggleMark(t.name)}},unsetStrike:function(){return function(e){var n=e.commands;return n.unsetMark(t.name)}}}},addKeyboardShortcuts:function(){var t=this;return{"Mod-Shift-x":function(){return t.editor.commands.toggleStrike()}}},addInputRules:function(){return[Kh({find:gf,type:this.type})]},addPasteRules:function(){return[Xh({find:yf,type:this.type})]}}),bf=Qh.create({name:"text",group:"inline"}),wf=Jc.create({name:"starterKit",addExtensions:function(){var t,e,n,r,i,o,s,a,u,c,l,h,d,f,p,v,m,g,y=[];return!1!==this.options.blockquote&&y.push(ed.configure(null===(t=this.options)||void 0===t?void 0:t.blockquote)),!1!==this.options.bold&&y.push(sd.configure(null===(e=this.options)||void 0===e?void 0:e.bold)),!1!==this.options.bulletList&&y.push(ld.configure(null===(n=this.options)||void 0===n?void 0:n.bulletList)),!1!==this.options.code&&y.push(fd.configure(null===(r=this.options)||void 0===r?void 0:r.code)),!1!==this.options.codeBlock&&y.push(md.configure(null===(i=this.options)||void 0===i?void 0:i.codeBlock)),!1!==this.options.document&&y.push(gd.configure(null===(o=this.options)||void 0===o?void 0:o.document)),!1!==this.options.dropcursor&&y.push(bd.configure(null===(s=this.options)||void 0===s?void 0:s.dropcursor)),!1!==this.options.gapcursor&&y.push(Td.configure(null===(a=this.options)||void 0===a?void 0:a.gapcursor)),!1!==this.options.hardBreak&&y.push(Fd.configure(null===(u=this.options)||void 0===u?void 0:u.hardBreak)),!1!==this.options.heading&&y.push(Nd.configure(null===(c=this.options)||void 0===c?void 0:c.heading)),!1!==this.options.history&&y.push(rf.configure(null===(l=this.options)||void 0===l?void 0:l.history)),!1!==this.options.horizontalRule&&y.push(of.configure(null===(h=this.options)||void 0===h?void 0:h.horizontalRule)),!1!==this.options.italic&&y.push(lf.configure(null===(d=this.options)||void 0===d?void 0:d.italic)),!1!==this.options.listItem&&y.push(hf.configure(null===(f=this.options)||void 0===f?void 0:f.listItem)),!1!==this.options.orderedList&&y.push(vf.configure(null===(p=this.options)||void 0===p?void 0:p.orderedList)),!1!==this.options.paragraph&&y.push(mf.configure(null===(v=this.options)||void 0===v?void 0:v.paragraph)),!1!==this.options.strike&&y.push(kf.configure(null===(m=this.options)||void 0===m?void 0:m.strike)),!1!==this.options.text&&y.push(bf.configure(null===(g=this.options)||void 0===g?void 0:g.text)),y}}),Df=/^\s*(\[([( |x])?\])\s$/,xf=Qh.create({name:"taskItem",addOptions:function(){return{nested:!1,HTMLAttributes:{}}},content:function(){return this.options.nested?"paragraph block*":"paragraph+"},defining:!0,addAttributes:function(){return{checked:{default:!1,keepOnSplit:!1,parseHTML:function(t){return"true"===t.getAttribute("data-checked")},renderHTML:function(t){return{"data-checked":t.checked}}}}},parseHTML:function(){return[{tag:'li[data-type="'.concat(this.name,'"]'),priority:51}]},renderHTML:function(t){var e=t.node,n=t.HTMLAttributes;return["li",kc(this.options.HTMLAttributes,n,{"data-type":this.name}),["label",["input",{type:"checkbox",checked:e.attrs.checked?"checked":null}],["span"]],["div",0]]},addKeyboardShortcuts:function(){var t=this,e={Enter:function(){return t.editor.commands.splitListItem(t.name)},"Shift-Tab":function(){return t.editor.commands.liftListItem(t.name)}};return this.options.nested?u(u({},e),{},{Tab:function(){return t.editor.commands.sinkListItem(t.name)}}):e},addNodeView:function(){var t=this;return function(e){var n=e.node,r=e.HTMLAttributes,i=e.getPos,o=e.editor,s=document.createElement("li"),a=document.createElement("label"),c=document.createElement("span"),l=document.createElement("input"),d=document.createElement("div");return a.contentEditable="false",l.type="checkbox",l.addEventListener("change",(function(e){if(o.isEditable||t.options.onReadOnlyChecked){var r=e.target.checked;o.isEditable&&"function"===typeof i&&o.chain().focus(void 0,{scrollIntoView:!1}).command((function(t){var e=t.tr,n=i(),o=e.doc.nodeAt(n);return e.setNodeMarkup(n,void 0,u(u({},null===o||void 0===o?void 0:o.attrs),{},{checked:r})),!0})).run(),!o.isEditable&&t.options.onReadOnlyChecked&&(t.options.onReadOnlyChecked(n,r)||(l.checked=!l.checked))}else l.checked=!l.checked})),Object.entries(t.options.HTMLAttributes).forEach((function(t){var e=(0,h.Z)(t,2),n=e[0],r=e[1];s.setAttribute(n,r)})),s.dataset.checked=n.attrs.checked,n.attrs.checked&&l.setAttribute("checked","checked"),a.append(l,c),s.append(a,d),Object.entries(r).forEach((function(t){var e=(0,h.Z)(t,2),n=e[0],r=e[1];s.setAttribute(n,r)})),{dom:s,contentDOM:d,update:function(e){return e.type===t.type&&(s.dataset.checked=e.attrs.checked,e.attrs.checked?l.setAttribute("checked","checked"):l.removeAttribute("checked"),!0)}}}},addInputRules:function(){return[Gh({find:Df,type:this.type,getAttributes:function(t){return{checked:"x"===t[t.length-1]}}})]}}),Cf=/^\s*([-+*]\s\[([( |x])?])\s$/,Af=xf.extend({addOptions:function(){var t;return Object.assign(Object.assign({},null===(t=this.parent)||void 0===t?void 0:t.call(this)),{nested:!0})},addAttributes:function(){return{checked:{default:!1,keepOnSplit:!1,parseHTML:function(t){var e=t.querySelector("input[type=checkbox].task-list-item-checkbox");return null===e||void 0===e?void 0:e.checked},renderHTML:function(t){return{"data-checked":t.checked}}}}},addNodeView:function(){var t=this;return function(e){var n=e.node,r=e.HTMLAttributes,i=e.getPos,o=e.editor,s=document.createElement("li"),a=document.createElement("label"),u=document.createElement("span"),c=document.createElement("input"),l=document.createElement("div");return a.contentEditable="false",c.type="checkbox",c.addEventListener("change",(function(e){if(o.isEditable||t.options.onReadOnlyChecked){var r=e.target.checked;o.isEditable&&"function"===typeof i&&o.chain().focus(void 0,{scrollIntoView:!1}).command((function(t){var e=t.tr,n=i(),o=e.doc.nodeAt(n);return e.setNodeMarkup(n,void 0,Object.assign(Object.assign({},null===o||void 0===o?void 0:o.attrs),{checked:r})),!0})).run(),!o.isEditable&&t.options.onReadOnlyChecked&&(t.options.onReadOnlyChecked(n,r)||(c.checked=!c.checked))}else c.checked=!c.checked})),Object.entries(t.options.HTMLAttributes).forEach((function(t){var e=(0,h.Z)(t,2),n=e[0],r=e[1];s.setAttribute(n,r)})),s.dataset.checked=n.attrs.checked,n.attrs.checked&&c.setAttribute("checked","checked"),a.append(c,u),s.append(a,l),Object.entries(r).forEach((function(t){var e=(0,h.Z)(t,2),n=e[0],r=e[1];s.setAttribute(n,r)})),{dom:s,contentDOM:l,update:function(e){return e.type===t.type&&(s.dataset.checked=e.attrs.checked,e.attrs.checked?c.setAttribute("checked","checked"):c.removeAttribute("checked"),!0)},ignoreMutation:function(t){return"data-checked"!==t.attributeName}}}},parseHTML:function(){var t;return[].concat((0,s.Z)(null===(t=this.parent)||void 0===t?void 0:t.call(this)),[{tag:"li.task-list-item",priority:100}])},addInputRules:function(){var t;return[].concat((0,s.Z)(null===(t=this.parent)||void 0===t?void 0:t.call(this)),[Gh({find:Cf,type:this.type,getAttributes:function(t){return{checked:"x"===t[t.length-1]}}})])}});
/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */
function Ef(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]])}return n}var Sf,_f=Qh.create({name:"taskList",addOptions:function(){return{itemTypeName:"taskItem",HTMLAttributes:{}}},group:"block list",content:function(){return"".concat(this.options.itemTypeName,"+")},parseHTML:function(){return[{tag:'ul[data-type="'.concat(this.name,'"]'),priority:51}]},renderHTML:function(t){var e=t.HTMLAttributes;return["ul",kc(this.options.HTMLAttributes,e,{"data-type":this.name}),0]},addCommands:function(){var t=this;return{toggleTaskList:function(){return function(e){var n=e.commands;return n.toggleList(t.name,t.options.itemTypeName)}}}},addKeyboardShortcuts:function(){var t=this;return{"Mod-Shift-9":function(){return t.editor.commands.toggleTaskList()}}}}),Mf=_f.extend({addAttributes:function(){return{numeric:{default:!1,parseHTML:function(t){return"ol"===t.tagName.toLowerCase()}}}},parseHTML:function(){return[{tag:".contains-task-list",priority:100}]},renderHTML:function(t){var e=t.HTMLAttributes,n=e.numeric,r=Ef(e,["numeric"]);return[n?"ol":"ul",kc(r,{"data-type":"taskList"}),0]}}),Of=/^\s*([-+*]\s[^\[])$/,Tf=ld.extend({addInputRules:function(){return[Gh({find:Of,type:this.type})]}});(function(t){t["MARKDOWN"]="markdown",t["PREVIEW"]="preview",t["READONLY"]="readonly"})(Sf||(Sf={}));var Ff="Á",Nf="á",Bf="Ă",If="ă",Lf="∾",Rf="∿",zf="∾̳",Pf="Â",Zf="â",qf="´",jf="А",$f="а",Vf="Æ",Hf="æ",Jf="⁡",Kf="𝔄",Wf="𝔞",Uf="À",Gf="à",Yf="ℵ",Qf="ℵ",Xf="Α",tp="α",ep="Ā",np="ā",rp="⨿",ip="&",op="&",sp="⩕",ap="⩓",up="∧",cp="⩜",lp="⩘",hp="⩚",dp="∠",fp="⦤",pp="∠",vp="⦨",mp="⦩",gp="⦪",yp="⦫",kp="⦬",bp="⦭",wp="⦮",Dp="⦯",xp="∡",Cp="∟",Ap="⊾",Ep="⦝",Sp="∢",_p="Å",Mp="⍼",Op="Ą",Tp="ą",Fp="𝔸",Np="𝕒",Bp="⩯",Ip="≈",Lp="⩰",Rp="≊",zp="≋",Pp="'",Zp="⁡",qp="≈",jp="≊",$p="Å",Vp="å",Hp="𝒜",Jp="𝒶",Kp="≔",Wp="*",Up="≈",Gp="≍",Yp="Ã",Qp="ã",Xp="Ä",tv="ä",ev="∳",nv="⨑",rv="≌",iv="϶",ov="‵",sv="∽",av="⋍",uv="∖",cv="⫧",lv="⊽",hv="⌅",dv="⌆",fv="⌅",pv="⎵",vv="⎶",mv="≌",gv="Б",yv="б",kv="„",bv="∵",wv="∵",Dv="∵",xv="⦰",Cv="϶",Av="ℬ",Ev="ℬ",Sv="Β",_v="β",Mv="ℶ",Ov="≬",Tv="𝔅",Fv="𝔟",Nv="⋂",Bv="◯",Iv="⋃",Lv="⨀",Rv="⨁",zv="⨂",Pv="⨆",Zv="★",qv="▽",jv="△",$v="⨄",Vv="⋁",Hv="⋀",Jv="⤍",Kv="⧫",Wv="▪",Uv="▴",Gv="▾",Yv="◂",Qv="▸",Xv="␣",tm="▒",em="░",nm="▓",rm="█",im="=⃥",om="≡⃥",sm="⫭",am="⌐",um="𝔹",cm="𝕓",lm="⊥",hm="⊥",dm="⋈",fm="⧉",pm="┐",vm="╕",mm="╖",gm="╗",ym="┌",km="╒",bm="╓",wm="╔",Dm="─",xm="═",Cm="┬",Am="╤",Em="╥",Sm="╦",_m="┴",Mm="╧",Om="╨",Tm="╩",Fm="⊟",Nm="⊞",Bm="⊠",Im="┘",Lm="╛",Rm="╜",zm="╝",Pm="└",Zm="╘",qm="╙",jm="╚",$m="│",Vm="║",Hm="┼",Jm="╪",Km="╫",Wm="╬",Um="┤",Gm="╡",Ym="╢",Qm="╣",Xm="├",tg="╞",eg="╟",ng="╠",rg="‵",ig="˘",og="˘",sg="¦",ag="𝒷",ug="ℬ",cg="⁏",lg="∽",hg="⋍",dg="⧅",fg="\\",pg="⟈",vg="•",mg="•",gg="≎",yg="⪮",kg="≏",bg="≎",wg="≏",Dg="Ć",xg="ć",Cg="⩄",Ag="⩉",Eg="⩋",Sg="∩",_g="⋒",Mg="⩇",Og="⩀",Tg="ⅅ",Fg="∩︀",Ng="⁁",Bg="ˇ",Ig="ℭ",Lg="⩍",Rg="Č",zg="č",Pg="Ç",Zg="ç",qg="Ĉ",jg="ĉ",$g="∰",Vg="⩌",Hg="⩐",Jg="Ċ",Kg="ċ",Wg="¸",Ug="¸",Gg="⦲",Yg="¢",Qg="·",Xg="·",ty="𝔠",ey="ℭ",ny="Ч",ry="ч",iy="✓",oy="✓",sy="Χ",ay="χ",uy="ˆ",cy="≗",ly="↺",hy="↻",dy="⊛",fy="⊚",py="⊝",vy="⊙",my="®",gy="Ⓢ",yy="⊖",ky="⊕",by="⊗",wy="○",Dy="⧃",xy="≗",Cy="⨐",Ay="⫯",Ey="⧂",Sy="∲",_y="”",My="’",Oy="♣",Ty="♣",Fy=":",Ny="∷",By="⩴",Iy="≔",Ly="≔",Ry=",",zy="@",Py="∁",Zy="∘",qy="∁",jy="ℂ",$y="≅",Vy="⩭",Hy="≡",Jy="∮",Ky="∯",Wy="∮",Uy="𝕔",Gy="ℂ",Yy="∐",Qy="∐",Xy="©",tk="©",ek="℗",nk="∳",rk="↵",ik="✗",ok="⨯",sk="𝒞",ak="𝒸",uk="⫏",ck="⫑",lk="⫐",hk="⫒",dk="⋯",fk="⤸",pk="⤵",vk="⋞",mk="⋟",gk="↶",yk="⤽",kk="⩈",bk="⩆",wk="≍",Dk="∪",xk="⋓",Ck="⩊",Ak="⊍",Ek="⩅",Sk="∪︀",_k="↷",Mk="⤼",Ok="⋞",Tk="⋟",Fk="⋎",Nk="⋏",Bk="¤",Ik="↶",Lk="↷",Rk="⋎",zk="⋏",Pk="∲",Zk="∱",qk="⌭",jk="†",$k="‡",Vk="ℸ",Hk="↓",Jk="↡",Kk="⇓",Wk="‐",Uk="⫤",Gk="⊣",Yk="⤏",Qk="˝",Xk="Ď",tb="ď",eb="Д",nb="д",rb="‡",ib="⇊",ob="ⅅ",sb="ⅆ",ab="⤑",ub="⩷",cb="°",lb="∇",hb="Δ",db="δ",fb="⦱",pb="⥿",vb="𝔇",mb="𝔡",gb="⥥",yb="⇃",kb="⇂",bb="´",wb="˙",Db="˝",xb="`",Cb="˜",Ab="⋄",Eb="⋄",Sb="⋄",_b="♦",Mb="♦",Ob="¨",Tb="ⅆ",Fb="ϝ",Nb="⋲",Bb="÷",Ib="÷",Lb="⋇",Rb="⋇",zb="Ђ",Pb="ђ",Zb="⌞",qb="⌍",jb="$",$b="𝔻",Vb="𝕕",Hb="¨",Jb="˙",Kb="⃜",Wb="≐",Ub="≑",Gb="≐",Yb="∸",Qb="∔",Xb="⊡",tw="⌆",ew="∯",nw="¨",rw="⇓",iw="⇐",ow="⇔",sw="⫤",aw="⟸",uw="⟺",cw="⟹",lw="⇒",hw="⊨",dw="⇑",fw="⇕",pw="∥",vw="⤓",mw="↓",gw="↓",yw="⇓",kw="⇵",bw="̑",ww="⇊",Dw="⇃",xw="⇂",Cw="⥐",Aw="⥞",Ew="⥖",Sw="↽",_w="⥟",Mw="⥗",Ow="⇁",Tw="↧",Fw="⊤",Nw="⤐",Bw="⌟",Iw="⌌",Lw="𝒟",Rw="𝒹",zw="Ѕ",Pw="ѕ",Zw="⧶",qw="Đ",jw="đ",$w="⋱",Vw="▿",Hw="▾",Jw="⇵",Kw="⥯",Ww="⦦",Uw="Џ",Gw="џ",Yw="⟿",Qw="É",Xw="é",tD="⩮",eD="Ě",nD="ě",rD="Ê",iD="ê",oD="≖",sD="≕",aD="Э",uD="э",cD="⩷",lD="Ė",hD="ė",dD="≑",fD="ⅇ",pD="≒",vD="𝔈",mD="𝔢",gD="⪚",yD="È",kD="è",bD="⪖",wD="⪘",DD="⪙",xD="∈",CD="⏧",AD="ℓ",ED="⪕",SD="⪗",_D="Ē",MD="ē",OD="∅",TD="∅",FD="◻",ND="∅",BD="▫",ID=" ",LD=" ",RD=" ",zD="Ŋ",PD="ŋ",ZD=" ",qD="Ę",jD="ę",$D="𝔼",VD="𝕖",HD="⋕",JD="⧣",KD="⩱",WD="ε",UD="Ε",GD="ε",YD="ϵ",QD="≖",XD="≕",tx="≂",ex="⪖",nx="⪕",rx="⩵",ix="=",ox="≂",sx="≟",ax="⇌",ux="≡",cx="⩸",lx="⧥",hx="⥱",dx="≓",fx="ℯ",px="ℰ",vx="≐",mx="⩳",gx="≂",yx="Η",kx="η",bx="Ð",wx="ð",Dx="Ë",xx="ë",Cx="€",Ax="!",Ex="∃",Sx="∃",_x="ℰ",Mx="ⅇ",Ox="ⅇ",Tx="≒",Fx="Ф",Nx="ф",Bx="♀",Ix="ﬃ",Lx="ﬀ",Rx="ﬄ",zx="𝔉",Px="𝔣",Zx="ﬁ",qx="◼",jx="▪",$x="fj",Vx="♭",Hx="ﬂ",Jx="▱",Kx="ƒ",Wx="𝔽",Ux="𝕗",Gx="∀",Yx="∀",Qx="⋔",Xx="⫙",tC="ℱ",eC="⨍",nC="½",rC="⅓",iC="¼",oC="⅕",sC="⅙",aC="⅛",uC="⅔",cC="⅖",lC="¾",hC="⅗",dC="⅜",fC="⅘",pC="⅚",vC="⅝",mC="⅞",gC="⁄",yC="⌢",kC="𝒻",bC="ℱ",wC="ǵ",DC="Γ",xC="γ",CC="Ϝ",AC="ϝ",EC="⪆",SC="Ğ",_C="ğ",MC="Ģ",OC="Ĝ",TC="ĝ",FC="Г",NC="г",BC="Ġ",IC="ġ",LC="≥",RC="≧",zC="⪌",PC="⋛",ZC="≥",qC="≧",jC="⩾",$C="⪩",VC="⩾",HC="⪀",JC="⪂",KC="⪄",WC="⋛︀",UC="⪔",GC="𝔊",YC="𝔤",QC="≫",XC="⋙",tA="⋙",eA="ℷ",nA="Ѓ",rA="ѓ",iA="⪥",oA="≷",sA="⪒",aA="⪤",uA="⪊",cA="⪊",lA="⪈",hA="≩",dA="⪈",fA="≩",pA="⋧",vA="𝔾",mA="𝕘",gA="`",yA="≥",kA="⋛",bA="≧",wA="⪢",DA="≷",xA="⩾",CA="≳",AA="𝒢",EA="ℊ",SA="≳",_A="⪎",MA="⪐",OA="⪧",TA="⩺",FA=">",NA=">",BA="≫",IA="⋗",LA="⦕",RA="⩼",zA="⪆",PA="⥸",ZA="⋗",qA="⋛",jA="⪌",$A="≷",VA="≳",HA="≩︀",JA="≩︀",KA="ˇ",WA=" ",UA="½",GA="ℋ",YA="Ъ",QA="ъ",XA="⥈",tE="↔",eE="⇔",nE="↭",rE="^",iE="ℏ",oE="Ĥ",sE="ĥ",aE="♥",uE="♥",cE="…",lE="⊹",hE="𝔥",dE="ℌ",fE="ℋ",pE="⤥",vE="⤦",mE="⇿",gE="∻",yE="↩",kE="↪",bE="𝕙",wE="ℍ",DE="―",xE="─",CE="𝒽",AE="ℋ",EE="ℏ",SE="Ħ",_E="ħ",ME="≎",OE="≏",TE="⁃",FE="‐",NE="Í",BE="í",IE="⁣",LE="Î",RE="î",zE="И",PE="и",ZE="İ",qE="Е",jE="е",$E="¡",VE="⇔",HE="𝔦",JE="ℑ",KE="Ì",WE="ì",UE="ⅈ",GE="⨌",YE="∭",QE="⧜",XE="℩",tS="Ĳ",eS="ĳ",nS="Ī",rS="ī",iS="ℑ",oS="ⅈ",sS="ℐ",aS="ℑ",uS="ı",cS="ℑ",lS="⊷",hS="Ƶ",dS="⇒",fS="℅",pS="∞",vS="⧝",mS="ı",gS="⊺",yS="∫",kS="∬",bS="ℤ",wS="∫",DS="⊺",xS="⋂",CS="⨗",AS="⨼",ES="⁣",SS="⁢",_S="Ё",MS="ё",OS="Į",TS="į",FS="𝕀",NS="𝕚",BS="Ι",IS="ι",LS="⨼",RS="¿",zS="𝒾",PS="ℐ",ZS="∈",qS="⋵",jS="⋹",$S="⋴",VS="⋳",HS="∈",JS="⁢",KS="Ĩ",WS="ĩ",US="І",GS="і",YS="Ï",QS="ï",XS="Ĵ",t_="ĵ",e_="Й",n_="й",r_="𝔍",i_="𝔧",o_="ȷ",s_="𝕁",a_="𝕛",u_="𝒥",c_="𝒿",l_="Ј",h_="ј",d_="Є",f_="є",p_="Κ",v_="κ",m_="ϰ",g_="Ķ",y_="ķ",k_="К",b_="к",w_="𝔎",D_="𝔨",x_="ĸ",C_="Х",A_="х",E_="Ќ",S_="ќ",__="𝕂",M_="𝕜",O_="𝒦",T_="𝓀",F_="⇚",N_="Ĺ",B_="ĺ",I_="⦴",L_="ℒ",R_="Λ",z_="λ",P_="⟨",Z_="⟪",q_="⦑",j_="⟨",$_="⪅",V_="ℒ",H_="«",J_="⇤",K_="⤟",W_="←",U_="↞",G_="⇐",Y_="⤝",Q_="↩",X_="↫",tM="⤹",eM="⥳",nM="↢",rM="⤙",iM="⤛",oM="⪫",sM="⪭",aM="⪭︀",uM="⤌",cM="⤎",lM="❲",hM="{",dM="[",fM="⦋",pM="⦏",vM="⦍",mM="Ľ",gM="ľ",yM="Ļ",kM="ļ",bM="⌈",wM="{",DM="Л",xM="л",CM="⤶",AM="“",EM="„",SM="⥧",_M="⥋",MM="↲",OM="≤",TM="≦",FM="⟨",NM="⇤",BM="←",IM="←",LM="⇐",RM="⇆",zM="↢",PM="⌈",ZM="⟦",qM="⥡",jM="⥙",$M="⇃",VM="⌊",HM="↽",JM="↼",KM="⇇",WM="↔",UM="↔",GM="⇔",YM="⇆",QM="⇋",XM="↭",tO="⥎",eO="↤",nO="⊣",rO="⥚",iO="⋋",oO="⧏",sO="⊲",aO="⊴",uO="⥑",cO="⥠",lO="⥘",hO="↿",dO="⥒",fO="↼",pO="⪋",vO="⋚",mO="≤",gO="≦",yO="⩽",kO="⪨",bO="⩽",wO="⩿",DO="⪁",xO="⪃",CO="⋚︀",AO="⪓",EO="⪅",SO="⋖",_O="⋚",MO="⪋",OO="⋚",TO="≦",FO="≶",NO="≶",BO="⪡",IO="≲",LO="⩽",RO="≲",zO="⥼",PO="⌊",ZO="𝔏",qO="𝔩",jO="≶",$O="⪑",VO="⥢",HO="↽",JO="↼",KO="⥪",WO="▄",UO="Љ",GO="љ",YO="⇇",QO="≪",XO="⋘",tT="⌞",eT="⇚",nT="⥫",rT="◺",iT="Ŀ",oT="ŀ",sT="⎰",aT="⎰",uT="⪉",cT="⪉",lT="⪇",hT="≨",dT="⪇",fT="≨",pT="⋦",vT="⟬",mT="⇽",gT="⟦",yT="⟵",kT="⟵",bT="⟸",wT="⟷",DT="⟷",xT="⟺",CT="⟼",AT="⟶",ET="⟶",ST="⟹",_T="↫",MT="↬",OT="⦅",TT="𝕃",FT="𝕝",NT="⨭",BT="⨴",IT="∗",LT="_",RT="↙",zT="↘",PT="◊",ZT="◊",qT="⧫",jT="(",$T="⦓",VT="⇆",HT="⌟",JT="⇋",KT="⥭",WT="‎",UT="⊿",GT="‹",YT="𝓁",QT="ℒ",XT="↰",tF="↰",eF="≲",nF="⪍",rF="⪏",iF="[",oF="‘",sF="‚",aF="Ł",uF="ł",cF="⪦",lF="⩹",hF="<",dF="<",fF="≪",pF="⋖",vF="⋋",mF="⋉",gF="⥶",yF="⩻",kF="◃",bF="⊴",wF="◂",DF="⦖",xF="⥊",CF="⥦",AF="≨︀",EF="≨︀",SF="¯",_F="♂",MF="✠",OF="✠",TF="↦",FF="↦",NF="↧",BF="↤",IF="↥",LF="▮",RF="⨩",zF="М",PF="м",ZF="—",qF="∺",jF="∡",$F=" ",VF="ℳ",HF="𝔐",JF="𝔪",KF="℧",WF="µ",UF="*",GF="⫰",YF="∣",QF="·",XF="⊟",tN="−",eN="∸",nN="⨪",rN="∓",iN="⫛",oN="…",sN="∓",aN="⊧",uN="𝕄",cN="𝕞",lN="∓",hN="𝓂",dN="ℳ",fN="∾",pN="Μ",vN="μ",mN="⊸",gN="⊸",yN="∇",kN="Ń",bN="ń",wN="∠⃒",DN="≉",xN="⩰̸",CN="≋̸",AN="ŉ",EN="≉",SN="♮",_N="ℕ",MN="♮",ON=" ",TN="≎̸",FN="≏̸",NN="⩃",BN="Ň",IN="ň",LN="Ņ",RN="ņ",zN="≇",PN="⩭̸",ZN="⩂",qN="Н",jN="н",$N="–",VN="⤤",HN="↗",JN="⇗",KN="↗",WN="≠",UN="≐̸",GN="​",YN="​",QN="​",XN="​",tB="≢",eB="⤨",nB="≂̸",rB="≫",iB="≪",oB="\n",sB="∄",aB="∄",uB="𝔑",cB="𝔫",lB="≧̸",hB="≱",dB="≱",fB="≧̸",pB="⩾̸",vB="⩾̸",mB="⋙̸",gB="≵",yB="≫⃒",kB="≯",bB="≯",wB="≫̸",DB="↮",xB="⇎",CB="⫲",AB="∋",EB="⋼",SB="⋺",_B="∋",MB="Њ",OB="њ",TB="↚",FB="⇍",NB="‥",BB="≦̸",IB="≰",LB="↚",RB="⇍",zB="↮",PB="⇎",ZB="≰",qB="≦̸",jB="⩽̸",$B="⩽̸",VB="≮",HB="⋘̸",JB="≴",KB="≪⃒",WB="≮",UB="⋪",GB="⋬",YB="≪̸",QB="∤",XB="⁠",tI=" ",eI="𝕟",nI="ℕ",rI="⫬",iI="¬",oI="≢",sI="≭",aI="∦",uI="∉",cI="≠",lI="≂̸",hI="∄",dI="≯",fI="≱",pI="≧̸",vI="≫̸",mI="≹",gI="⩾̸",yI="≵",kI="≎̸",bI="≏̸",wI="∉",DI="⋵̸",xI="⋹̸",CI="∉",AI="⋷",EI="⋶",SI="⧏̸",_I="⋪",MI="⋬",OI="≮",TI="≰",FI="≸",NI="≪̸",BI="⩽̸",II="≴",LI="⪢̸",RI="⪡̸",zI="∌",PI="∌",ZI="⋾",qI="⋽",jI="⊀",$I="⪯̸",VI="⋠",HI="∌",JI="⧐̸",KI="⋫",WI="⋭",UI="⊏̸",GI="⋢",YI="⊐̸",QI="⋣",XI="⊂⃒",tL="⊈",eL="⊁",nL="⪰̸",rL="⋡",iL="≿̸",oL="⊃⃒",sL="⊉",aL="≁",uL="≄",cL="≇",lL="≉",hL="∤",dL="∦",fL="∦",pL="⫽⃥",vL="∂̸",mL="⨔",gL="⊀",yL="⋠",kL="⊀",bL="⪯̸",wL="⪯̸",DL="⤳̸",xL="↛",CL="⇏",AL="↝̸",EL="↛",SL="⇏",_L="⋫",ML="⋭",OL="⊁",TL="⋡",FL="⪰̸",NL="𝒩",BL="𝓃",IL="∤",LL="∦",RL="≁",zL="≄",PL="≄",ZL="∤",qL="∦",jL="⋢",$L="⋣",VL="⊄",HL="⫅̸",JL="⊈",KL="⊂⃒",WL="⊈",UL="⫅̸",GL="⊁",YL="⪰̸",QL="⊅",XL="⫆̸",tR="⊉",eR="⊃⃒",nR="⊉",rR="⫆̸",iR="≹",oR="Ñ",sR="ñ",aR="≸",uR="⋪",cR="⋬",lR="⋫",hR="⋭",dR="Ν",fR="ν",pR="#",vR="№",mR=" ",gR="≍⃒",yR="⊬",kR="⊭",bR="⊮",wR="⊯",DR="≥⃒",xR=">⃒",CR="⤄",AR="⧞",ER="⤂",SR="≤⃒",_R="<⃒",MR="⊴⃒",OR="⤃",TR="⊵⃒",FR="∼⃒",NR="⤣",BR="↖",IR="⇖",LR="↖",RR="⤧",zR="Ó",PR="ó",ZR="⊛",qR="Ô",jR="ô",$R="⊚",VR="О",HR="о",JR="⊝",KR="Ő",WR="ő",UR="⨸",GR="⊙",YR="⦼",QR="Œ",XR="œ",tz="⦿",ez="𝔒",nz="𝔬",rz="˛",iz="Ò",oz="ò",sz="⧁",az="⦵",uz="Ω",cz="∮",lz="↺",hz="⦾",dz="⦻",fz="‾",pz="⧀",vz="Ō",mz="ō",gz="Ω",yz="ω",kz="Ο",bz="ο",wz="⦶",Dz="⊖",xz="𝕆",Cz="𝕠",Az="⦷",Ez="“",Sz="‘",_z="⦹",Mz="⊕",Oz="↻",Tz="⩔",Fz="∨",Nz="⩝",Bz="ℴ",Iz="ℴ",Lz="ª",Rz="º",zz="⊶",Pz="⩖",Zz="⩗",qz="⩛",jz="Ⓢ",$z="𝒪",Vz="ℴ",Hz="Ø",Jz="ø",Kz="⊘",Wz="Õ",Uz="õ",Gz="⨶",Yz="⨷",Qz="⊗",Xz="Ö",tP="ö",eP="⌽",nP="‾",rP="⏞",iP="⎴",oP="⏜",sP="¶",aP="∥",uP="∥",cP="⫳",lP="⫽",hP="∂",dP="∂",fP="П",pP="п",vP="%",mP=".",gP="‰",yP="⊥",kP="‱",bP="𝔓",wP="𝔭",DP="Φ",xP="φ",CP="ϕ",AP="ℳ",EP="☎",SP="Π",_P="π",MP="⋔",OP="ϖ",TP="ℏ",FP="ℎ",NP="ℏ",BP="⨣",IP="⊞",LP="⨢",RP="+",zP="∔",PP="⨥",ZP="⩲",qP="±",jP="±",$P="⨦",VP="⨧",HP="±",JP="ℌ",KP="⨕",WP="𝕡",UP="ℙ",GP="£",YP="⪷",QP="⪻",XP="≺",tZ="≼",eZ="⪷",nZ="≺",rZ="≼",iZ="≺",oZ="⪯",sZ="≼",aZ="≾",uZ="⪯",cZ="⪹",lZ="⪵",hZ="⋨",dZ="⪯",fZ="⪳",pZ="≾",vZ="′",mZ="″",gZ="ℙ",yZ="⪹",kZ="⪵",bZ="⋨",wZ="∏",DZ="∏",xZ="⌮",CZ="⌒",AZ="⌓",EZ="∝",SZ="∝",_Z="∷",MZ="∝",OZ="≾",TZ="⊰",FZ="𝒫",NZ="𝓅",BZ="Ψ",IZ="ψ",LZ=" ",RZ="𝔔",zZ="𝔮",PZ="⨌",ZZ="𝕢",qZ="ℚ",jZ="⁗",$Z="𝒬",VZ="𝓆",HZ="ℍ",JZ="⨖",KZ="?",WZ="≟",UZ='"',GZ='"',YZ="⇛",QZ="∽̱",XZ="Ŕ",tq="ŕ",eq="√",nq="⦳",rq="⟩",iq="⟫",oq="⦒",sq="⦥",aq="⟩",uq="»",cq="⥵",lq="⇥",hq="⤠",dq="⤳",fq="→",pq="↠",vq="⇒",mq="⤞",gq="↪",yq="↬",kq="⥅",bq="⥴",wq="⤖",Dq="↣",xq="↝",Cq="⤚",Aq="⤜",Eq="∶",Sq="ℚ",_q="⤍",Mq="⤏",Oq="⤐",Tq="❳",Fq="}",Nq="]",Bq="⦌",Iq="⦎",Lq="⦐",Rq="Ř",zq="ř",Pq="Ŗ",Zq="ŗ",qq="⌉",jq="}",$q="Р",Vq="р",Hq="⤷",Jq="⥩",Kq="”",Wq="”",Uq="↳",Gq="ℜ",Yq="ℛ",Qq="ℜ",Xq="ℝ",tj="ℜ",ej="▭",nj="®",rj="®",ij="∋",oj="⇋",sj="⥯",aj="⥽",uj="⌋",cj="𝔯",lj="ℜ",hj="⥤",dj="⇁",fj="⇀",pj="⥬",vj="Ρ",mj="ρ",gj="ϱ",yj="⟩",kj="⇥",bj="→",wj="→",Dj="⇒",xj="⇄",Cj="↣",Aj="⌉",Ej="⟧",Sj="⥝",_j="⥕",Mj="⇂",Oj="⌋",Tj="⇁",Fj="⇀",Nj="⇄",Bj="⇌",Ij="⇉",Lj="↝",Rj="↦",zj="⊢",Pj="⥛",Zj="⋌",qj="⧐",jj="⊳",$j="⊵",Vj="⥏",Hj="⥜",Jj="⥔",Kj="↾",Wj="⥓",Uj="⇀",Gj="˚",Yj="≓",Qj="⇄",Xj="⇌",t$="‏",e$="⎱",n$="⎱",r$="⫮",i$="⟭",o$="⇾",s$="⟧",a$="⦆",u$="𝕣",c$="ℝ",l$="⨮",h$="⨵",d$="⥰",f$=")",p$="⦔",v$="⨒",m$="⇉",g$="⇛",y$="›",k$="𝓇",b$="ℛ",w$="↱",D$="↱",x$="]",C$="’",A$="’",E$="⋌",S$="⋊",_$="▹",M$="⊵",O$="▸",T$="⧎",F$="⧴",N$="⥨",B$="℞",I$="Ś",L$="ś",R$="‚",z$="⪸",P$="Š",Z$="š",q$="⪼",j$="≻",$$="≽",V$="⪰",H$="⪴",J$="Ş",K$="ş",W$="Ŝ",U$="ŝ",G$="⪺",Y$="⪶",Q$="⋩",X$="⨓",tV="≿",eV="С",nV="с",rV="⊡",iV="⋅",oV="⩦",sV="⤥",aV="↘",uV="⇘",cV="↘",lV="§",hV=";",dV="⤩",fV="∖",pV="∖",vV="✶",mV="𝔖",gV="𝔰",yV="⌢",kV="♯",bV="Щ",wV="щ",DV="Ш",xV="ш",CV="↓",AV="←",EV="∣",SV="∥",_V="→",MV="↑",OV="­",TV="Σ",FV="σ",NV="ς",BV="ς",IV="∼",LV="⩪",RV="≃",zV="≃",PV="⪞",ZV="⪠",qV="⪝",jV="⪟",$V="≆",VV="⨤",HV="⥲",JV="←",KV="∘",WV="∖",UV="⨳",GV="⧤",YV="∣",QV="⌣",XV="⪪",tH="⪬",eH="⪬︀",nH="Ь",rH="ь",iH="⌿",oH="⧄",sH="/",aH="𝕊",uH="𝕤",cH="♠",lH="♠",hH="∥",dH="⊓",fH="⊓︀",pH="⊔",vH="⊔︀",mH="√",gH="⊏",yH="⊑",kH="⊏",bH="⊑",wH="⊐",DH="⊒",xH="⊐",CH="⊒",AH="□",EH="□",SH="⊓",_H="⊏",MH="⊑",OH="⊐",TH="⊒",FH="⊔",NH="▪",BH="□",IH="▪",LH="→",RH="𝒮",zH="𝓈",PH="∖",ZH="⌣",qH="⋆",jH="⋆",$H="☆",VH="★",HH="ϵ",JH="ϕ",KH="¯",WH="⊂",UH="⋐",GH="⪽",YH="⫅",QH="⊆",XH="⫃",tJ="⫁",eJ="⫋",nJ="⊊",rJ="⪿",iJ="⥹",oJ="⊂",sJ="⋐",aJ="⊆",uJ="⫅",cJ="⊆",lJ="⊊",hJ="⫋",dJ="⫇",fJ="⫕",pJ="⫓",vJ="⪸",mJ="≻",gJ="≽",yJ="≻",kJ="⪰",bJ="≽",wJ="≿",DJ="⪰",xJ="⪺",CJ="⪶",AJ="⋩",EJ="≿",SJ="∋",_J="∑",MJ="∑",OJ="♪",TJ="¹",FJ="²",NJ="³",BJ="⊃",IJ="⋑",LJ="⪾",RJ="⫘",zJ="⫆",PJ="⊇",ZJ="⫄",qJ="⊃",jJ="⊇",$J="⟉",VJ="⫗",HJ="⥻",JJ="⫂",KJ="⫌",WJ="⊋",UJ="⫀",GJ="⊃",YJ="⋑",QJ="⊇",XJ="⫆",tK="⊋",eK="⫌",nK="⫈",rK="⫔",iK="⫖",oK="⤦",sK="↙",aK="⇙",uK="↙",cK="⤪",lK="ß",hK="\t",dK="⌖",fK="Τ",pK="τ",vK="⎴",mK="Ť",gK="ť",yK="Ţ",kK="ţ",bK="Т",wK="т",DK="⃛",xK="⌕",CK="𝔗",AK="𝔱",EK="∴",SK="∴",_K="∴",MK="Θ",OK="θ",TK="ϑ",FK="ϑ",NK="≈",BK="∼",IK="  ",LK=" ",RK=" ",zK="≈",PK="∼",ZK="Þ",qK="þ",jK="˜",$K="∼",VK="≃",HK="≅",JK="≈",KK="⨱",WK="⊠",UK="×",GK="⨰",YK="∭",QK="⤨",XK="⌶",tW="⫱",eW="⊤",nW="𝕋",rW="𝕥",iW="⫚",oW="⤩",sW="‴",aW="™",uW="™",cW="▵",lW="▿",hW="◃",dW="⊴",fW="≜",pW="▹",vW="⊵",mW="◬",gW="≜",yW="⨺",kW="⃛",bW="⨹",wW="⧍",DW="⨻",xW="⏢",CW="𝒯",AW="𝓉",EW="Ц",SW="ц",_W="Ћ",MW="ћ",OW="Ŧ",TW="ŧ",FW="≬",NW="↞",BW="↠",IW="Ú",LW="ú",RW="↑",zW="↟",PW="⇑",ZW="⥉",qW="Ў",jW="ў",$W="Ŭ",VW="ŭ",HW="Û",JW="û",KW="У",WW="у",UW="⇅",GW="Ű",YW="ű",QW="⥮",XW="⥾",tU="𝔘",eU="𝔲",nU="Ù",rU="ù",iU="⥣",oU="↿",sU="↾",aU="▀",uU="⌜",cU="⌜",lU="⌏",hU="◸",dU="Ū",fU="ū",pU="¨",vU="_",mU="⏟",gU="⎵",yU="⏝",kU="⋃",bU="⊎",wU="Ų",DU="ų",xU="𝕌",CU="𝕦",AU="⤒",EU="↑",SU="↑",_U="⇑",MU="⇅",OU="↕",TU="↕",FU="⇕",NU="⥮",BU="↿",IU="↾",LU="⊎",RU="↖",zU="↗",PU="υ",ZU="ϒ",qU="ϒ",jU="Υ",$U="υ",VU="↥",HU="⊥",JU="⇈",KU="⌝",WU="⌝",UU="⌎",GU="Ů",YU="ů",QU="◹",XU="𝒰",tG="𝓊",eG="⋰",nG="Ũ",rG="ũ",iG="▵",oG="▴",sG="⇈",aG="Ü",uG="ü",cG="⦧",lG="⦜",hG="ϵ",dG="ϰ",fG="∅",pG="ϕ",vG="ϖ",mG="∝",gG="↕",yG="⇕",kG="ϱ",bG="ς",wG="⊊︀",DG="⫋︀",xG="⊋︀",CG="⫌︀",AG="ϑ",EG="⊲",SG="⊳",_G="⫨",MG="⫫",OG="⫩",TG="В",FG="в",NG="⊢",BG="⊨",IG="⊩",LG="⊫",RG="⫦",zG="⊻",PG="∨",ZG="⋁",qG="≚",jG="⋮",$G="|",VG="‖",HG="|",JG="‖",KG="∣",WG="|",UG="❘",GG="≀",YG=" ",QG="𝔙",XG="𝔳",tY="⊲",eY="⊂⃒",nY="⊃⃒",rY="𝕍",iY="𝕧",oY="∝",sY="⊳",aY="𝒱",uY="𝓋",cY="⫋︀",lY="⊊︀",hY="⫌︀",dY="⊋︀",fY="⊪",pY="⦚",vY="Ŵ",mY="ŵ",gY="⩟",yY="∧",kY="⋀",bY="≙",wY="℘",DY="𝔚",xY="𝔴",CY="𝕎",AY="𝕨",EY="℘",SY="≀",_Y="≀",MY="𝒲",OY="𝓌",TY="⋂",FY="◯",NY="⋃",BY="▽",IY="𝔛",LY="𝔵",RY="⟷",zY="⟺",PY="Ξ",ZY="ξ",qY="⟵",jY="⟸",$Y="⟼",VY="⋻",HY="⨀",JY="𝕏",KY="𝕩",WY="⨁",UY="⨂",GY="⟶",YY="⟹",QY="𝒳",XY="𝓍",tQ="⨆",eQ="⨄",nQ="△",rQ="⋁",iQ="⋀",oQ="Ý",sQ="ý",aQ="Я",uQ="я",cQ="Ŷ",lQ="ŷ",hQ="Ы",dQ="ы",fQ="¥",pQ="𝔜",vQ="𝔶",mQ="Ї",gQ="ї",yQ="𝕐",kQ="𝕪",bQ="𝒴",wQ="𝓎",DQ="Ю",xQ="ю",CQ="ÿ",AQ="Ÿ",EQ="Ź",SQ="ź",_Q="Ž",MQ="ž",OQ="З",TQ="з",FQ="Ż",NQ="ż",BQ="ℨ",IQ="​",LQ="Ζ",RQ="ζ",zQ="𝔷",PQ="ℨ",ZQ="Ж",qQ="ж",jQ="⇝",$Q="𝕫",VQ="ℤ",HQ="𝒵",JQ="𝓏",KQ="‍",WQ="‌",UQ={Aacute:Ff,aacute:Nf,Abreve:Bf,abreve:If,ac:Lf,acd:Rf,acE:zf,Acirc:Pf,acirc:Zf,acute:qf,Acy:jf,acy:$f,AElig:Vf,aelig:Hf,af:Jf,Afr:Kf,afr:Wf,Agrave:Uf,agrave:Gf,alefsym:Yf,aleph:Qf,Alpha:Xf,alpha:tp,Amacr:ep,amacr:np,amalg:rp,amp:ip,AMP:op,andand:sp,And:ap,and:up,andd:cp,andslope:lp,andv:hp,ang:dp,ange:fp,angle:pp,angmsdaa:vp,angmsdab:mp,angmsdac:gp,angmsdad:yp,angmsdae:kp,angmsdaf:bp,angmsdag:wp,angmsdah:Dp,angmsd:xp,angrt:Cp,angrtvb:Ap,angrtvbd:Ep,angsph:Sp,angst:_p,angzarr:Mp,Aogon:Op,aogon:Tp,Aopf:Fp,aopf:Np,apacir:Bp,ap:Ip,apE:Lp,ape:Rp,apid:zp,apos:Pp,ApplyFunction:Zp,approx:qp,approxeq:jp,Aring:$p,aring:Vp,Ascr:Hp,ascr:Jp,Assign:Kp,ast:Wp,asymp:Up,asympeq:Gp,Atilde:Yp,atilde:Qp,Auml:Xp,auml:tv,awconint:ev,awint:nv,backcong:rv,backepsilon:iv,backprime:ov,backsim:sv,backsimeq:av,Backslash:uv,Barv:cv,barvee:lv,barwed:hv,Barwed:dv,barwedge:fv,bbrk:pv,bbrktbrk:vv,bcong:mv,Bcy:gv,bcy:yv,bdquo:kv,becaus:bv,because:wv,Because:Dv,bemptyv:xv,bepsi:Cv,bernou:Av,Bernoullis:Ev,Beta:Sv,beta:_v,beth:Mv,between:Ov,Bfr:Tv,bfr:Fv,bigcap:Nv,bigcirc:Bv,bigcup:Iv,bigodot:Lv,bigoplus:Rv,bigotimes:zv,bigsqcup:Pv,bigstar:Zv,bigtriangledown:qv,bigtriangleup:jv,biguplus:$v,bigvee:Vv,bigwedge:Hv,bkarow:Jv,blacklozenge:Kv,blacksquare:Wv,blacktriangle:Uv,blacktriangledown:Gv,blacktriangleleft:Yv,blacktriangleright:Qv,blank:Xv,blk12:tm,blk14:em,blk34:nm,block:rm,bne:im,bnequiv:om,bNot:sm,bnot:am,Bopf:um,bopf:cm,bot:lm,bottom:hm,bowtie:dm,boxbox:fm,boxdl:pm,boxdL:vm,boxDl:mm,boxDL:gm,boxdr:ym,boxdR:km,boxDr:bm,boxDR:wm,boxh:Dm,boxH:xm,boxhd:Cm,boxHd:Am,boxhD:Em,boxHD:Sm,boxhu:_m,boxHu:Mm,boxhU:Om,boxHU:Tm,boxminus:Fm,boxplus:Nm,boxtimes:Bm,boxul:Im,boxuL:Lm,boxUl:Rm,boxUL:zm,boxur:Pm,boxuR:Zm,boxUr:qm,boxUR:jm,boxv:$m,boxV:Vm,boxvh:Hm,boxvH:Jm,boxVh:Km,boxVH:Wm,boxvl:Um,boxvL:Gm,boxVl:Ym,boxVL:Qm,boxvr:Xm,boxvR:tg,boxVr:eg,boxVR:ng,bprime:rg,breve:ig,Breve:og,brvbar:sg,bscr:ag,Bscr:ug,bsemi:cg,bsim:lg,bsime:hg,bsolb:dg,bsol:fg,bsolhsub:pg,bull:vg,bullet:mg,bump:gg,bumpE:yg,bumpe:kg,Bumpeq:bg,bumpeq:wg,Cacute:Dg,cacute:xg,capand:Cg,capbrcup:Ag,capcap:Eg,cap:Sg,Cap:_g,capcup:Mg,capdot:Og,CapitalDifferentialD:Tg,caps:Fg,caret:Ng,caron:Bg,Cayleys:Ig,ccaps:Lg,Ccaron:Rg,ccaron:zg,Ccedil:Pg,ccedil:Zg,Ccirc:qg,ccirc:jg,Cconint:$g,ccups:Vg,ccupssm:Hg,Cdot:Jg,cdot:Kg,cedil:Wg,Cedilla:Ug,cemptyv:Gg,cent:Yg,centerdot:Qg,CenterDot:Xg,cfr:ty,Cfr:ey,CHcy:ny,chcy:ry,check:iy,checkmark:oy,Chi:sy,chi:ay,circ:uy,circeq:cy,circlearrowleft:ly,circlearrowright:hy,circledast:dy,circledcirc:fy,circleddash:py,CircleDot:vy,circledR:my,circledS:gy,CircleMinus:yy,CirclePlus:ky,CircleTimes:by,cir:wy,cirE:Dy,cire:xy,cirfnint:Cy,cirmid:Ay,cirscir:Ey,ClockwiseContourIntegral:Sy,CloseCurlyDoubleQuote:_y,CloseCurlyQuote:My,clubs:Oy,clubsuit:Ty,colon:Fy,Colon:Ny,Colone:By,colone:Iy,coloneq:Ly,comma:Ry,commat:zy,comp:Py,compfn:Zy,complement:qy,complexes:jy,cong:$y,congdot:Vy,Congruent:Hy,conint:Jy,Conint:Ky,ContourIntegral:Wy,copf:Uy,Copf:Gy,coprod:Yy,Coproduct:Qy,copy:Xy,COPY:tk,copysr:ek,CounterClockwiseContourIntegral:nk,crarr:rk,cross:ik,Cross:ok,Cscr:sk,cscr:ak,csub:uk,csube:ck,csup:lk,csupe:hk,ctdot:dk,cudarrl:fk,cudarrr:pk,cuepr:vk,cuesc:mk,cularr:gk,cularrp:yk,cupbrcap:kk,cupcap:bk,CupCap:wk,cup:Dk,Cup:xk,cupcup:Ck,cupdot:Ak,cupor:Ek,cups:Sk,curarr:_k,curarrm:Mk,curlyeqprec:Ok,curlyeqsucc:Tk,curlyvee:Fk,curlywedge:Nk,curren:Bk,curvearrowleft:Ik,curvearrowright:Lk,cuvee:Rk,cuwed:zk,cwconint:Pk,cwint:Zk,cylcty:qk,dagger:jk,Dagger:$k,daleth:Vk,darr:Hk,Darr:Jk,dArr:Kk,dash:Wk,Dashv:Uk,dashv:Gk,dbkarow:Yk,dblac:Qk,Dcaron:Xk,dcaron:tb,Dcy:eb,dcy:nb,ddagger:rb,ddarr:ib,DD:ob,dd:sb,DDotrahd:ab,ddotseq:ub,deg:cb,Del:lb,Delta:hb,delta:db,demptyv:fb,dfisht:pb,Dfr:vb,dfr:mb,dHar:gb,dharl:yb,dharr:kb,DiacriticalAcute:bb,DiacriticalDot:wb,DiacriticalDoubleAcute:Db,DiacriticalGrave:xb,DiacriticalTilde:Cb,diam:Ab,diamond:Eb,Diamond:Sb,diamondsuit:_b,diams:Mb,die:Ob,DifferentialD:Tb,digamma:Fb,disin:Nb,div:Bb,divide:Ib,divideontimes:Lb,divonx:Rb,DJcy:zb,djcy:Pb,dlcorn:Zb,dlcrop:qb,dollar:jb,Dopf:$b,dopf:Vb,Dot:Hb,dot:Jb,DotDot:Kb,doteq:Wb,doteqdot:Ub,DotEqual:Gb,dotminus:Yb,dotplus:Qb,dotsquare:Xb,doublebarwedge:tw,DoubleContourIntegral:ew,DoubleDot:nw,DoubleDownArrow:rw,DoubleLeftArrow:iw,DoubleLeftRightArrow:ow,DoubleLeftTee:sw,DoubleLongLeftArrow:aw,DoubleLongLeftRightArrow:uw,DoubleLongRightArrow:cw,DoubleRightArrow:lw,DoubleRightTee:hw,DoubleUpArrow:dw,DoubleUpDownArrow:fw,DoubleVerticalBar:pw,DownArrowBar:vw,downarrow:mw,DownArrow:gw,Downarrow:yw,DownArrowUpArrow:kw,DownBreve:bw,downdownarrows:ww,downharpoonleft:Dw,downharpoonright:xw,DownLeftRightVector:Cw,DownLeftTeeVector:Aw,DownLeftVectorBar:Ew,DownLeftVector:Sw,DownRightTeeVector:_w,DownRightVectorBar:Mw,DownRightVector:Ow,DownTeeArrow:Tw,DownTee:Fw,drbkarow:Nw,drcorn:Bw,drcrop:Iw,Dscr:Lw,dscr:Rw,DScy:zw,dscy:Pw,dsol:Zw,Dstrok:qw,dstrok:jw,dtdot:$w,dtri:Vw,dtrif:Hw,duarr:Jw,duhar:Kw,dwangle:Ww,DZcy:Uw,dzcy:Gw,dzigrarr:Yw,Eacute:Qw,eacute:Xw,easter:tD,Ecaron:eD,ecaron:nD,Ecirc:rD,ecirc:iD,ecir:oD,ecolon:sD,Ecy:aD,ecy:uD,eDDot:cD,Edot:lD,edot:hD,eDot:dD,ee:fD,efDot:pD,Efr:vD,efr:mD,eg:gD,Egrave:yD,egrave:kD,egs:bD,egsdot:wD,el:DD,Element:xD,elinters:CD,ell:AD,els:ED,elsdot:SD,Emacr:_D,emacr:MD,empty:OD,emptyset:TD,EmptySmallSquare:FD,emptyv:ND,EmptyVerySmallSquare:BD,emsp13:ID,emsp14:LD,emsp:RD,ENG:zD,eng:PD,ensp:ZD,Eogon:qD,eogon:jD,Eopf:$D,eopf:VD,epar:HD,eparsl:JD,eplus:KD,epsi:WD,Epsilon:UD,epsilon:GD,epsiv:YD,eqcirc:QD,eqcolon:XD,eqsim:tx,eqslantgtr:ex,eqslantless:nx,Equal:rx,equals:ix,EqualTilde:ox,equest:sx,Equilibrium:ax,equiv:ux,equivDD:cx,eqvparsl:lx,erarr:hx,erDot:dx,escr:fx,Escr:px,esdot:vx,Esim:mx,esim:gx,Eta:yx,eta:kx,ETH:bx,eth:wx,Euml:Dx,euml:xx,euro:Cx,excl:Ax,exist:Ex,Exists:Sx,expectation:_x,exponentiale:Mx,ExponentialE:Ox,fallingdotseq:Tx,Fcy:Fx,fcy:Nx,female:Bx,ffilig:Ix,fflig:Lx,ffllig:Rx,Ffr:zx,ffr:Px,filig:Zx,FilledSmallSquare:qx,FilledVerySmallSquare:jx,fjlig:$x,flat:Vx,fllig:Hx,fltns:Jx,fnof:Kx,Fopf:Wx,fopf:Ux,forall:Gx,ForAll:Yx,fork:Qx,forkv:Xx,Fouriertrf:tC,fpartint:eC,frac12:nC,frac13:rC,frac14:iC,frac15:oC,frac16:sC,frac18:aC,frac23:uC,frac25:cC,frac34:lC,frac35:hC,frac38:dC,frac45:fC,frac56:pC,frac58:vC,frac78:mC,frasl:gC,frown:yC,fscr:kC,Fscr:bC,gacute:wC,Gamma:DC,gamma:xC,Gammad:CC,gammad:AC,gap:EC,Gbreve:SC,gbreve:_C,Gcedil:MC,Gcirc:OC,gcirc:TC,Gcy:FC,gcy:NC,Gdot:BC,gdot:IC,ge:LC,gE:RC,gEl:zC,gel:PC,geq:ZC,geqq:qC,geqslant:jC,gescc:$C,ges:VC,gesdot:HC,gesdoto:JC,gesdotol:KC,gesl:WC,gesles:UC,Gfr:GC,gfr:YC,gg:QC,Gg:XC,ggg:tA,gimel:eA,GJcy:nA,gjcy:rA,gla:iA,gl:oA,glE:sA,glj:aA,gnap:uA,gnapprox:cA,gne:lA,gnE:hA,gneq:dA,gneqq:fA,gnsim:pA,Gopf:vA,gopf:mA,grave:gA,GreaterEqual:yA,GreaterEqualLess:kA,GreaterFullEqual:bA,GreaterGreater:wA,GreaterLess:DA,GreaterSlantEqual:xA,GreaterTilde:CA,Gscr:AA,gscr:EA,gsim:SA,gsime:_A,gsiml:MA,gtcc:OA,gtcir:TA,gt:FA,GT:NA,Gt:BA,gtdot:IA,gtlPar:LA,gtquest:RA,gtrapprox:zA,gtrarr:PA,gtrdot:ZA,gtreqless:qA,gtreqqless:jA,gtrless:$A,gtrsim:VA,gvertneqq:HA,gvnE:JA,Hacek:KA,hairsp:WA,half:UA,hamilt:GA,HARDcy:YA,hardcy:QA,harrcir:XA,harr:tE,hArr:eE,harrw:nE,Hat:rE,hbar:iE,Hcirc:oE,hcirc:sE,hearts:aE,heartsuit:uE,hellip:cE,hercon:lE,hfr:hE,Hfr:dE,HilbertSpace:fE,hksearow:pE,hkswarow:vE,hoarr:mE,homtht:gE,hookleftarrow:yE,hookrightarrow:kE,hopf:bE,Hopf:wE,horbar:DE,HorizontalLine:xE,hscr:CE,Hscr:AE,hslash:EE,Hstrok:SE,hstrok:_E,HumpDownHump:ME,HumpEqual:OE,hybull:TE,hyphen:FE,Iacute:NE,iacute:BE,ic:IE,Icirc:LE,icirc:RE,Icy:zE,icy:PE,Idot:ZE,IEcy:qE,iecy:jE,iexcl:$E,iff:VE,ifr:HE,Ifr:JE,Igrave:KE,igrave:WE,ii:UE,iiiint:GE,iiint:YE,iinfin:QE,iiota:XE,IJlig:tS,ijlig:eS,Imacr:nS,imacr:rS,image:iS,ImaginaryI:oS,imagline:sS,imagpart:aS,imath:uS,Im:cS,imof:lS,imped:hS,Implies:dS,incare:fS,in:"∈",infin:pS,infintie:vS,inodot:mS,intcal:gS,int:yS,Int:kS,integers:bS,Integral:wS,intercal:DS,Intersection:xS,intlarhk:CS,intprod:AS,InvisibleComma:ES,InvisibleTimes:SS,IOcy:_S,iocy:MS,Iogon:OS,iogon:TS,Iopf:FS,iopf:NS,Iota:BS,iota:IS,iprod:LS,iquest:RS,iscr:zS,Iscr:PS,isin:ZS,isindot:qS,isinE:jS,isins:$S,isinsv:VS,isinv:HS,it:JS,Itilde:KS,itilde:WS,Iukcy:US,iukcy:GS,Iuml:YS,iuml:QS,Jcirc:XS,jcirc:t_,Jcy:e_,jcy:n_,Jfr:r_,jfr:i_,jmath:o_,Jopf:s_,jopf:a_,Jscr:u_,jscr:c_,Jsercy:l_,jsercy:h_,Jukcy:d_,jukcy:f_,Kappa:p_,kappa:v_,kappav:m_,Kcedil:g_,kcedil:y_,Kcy:k_,kcy:b_,Kfr:w_,kfr:D_,kgreen:x_,KHcy:C_,khcy:A_,KJcy:E_,kjcy:S_,Kopf:__,kopf:M_,Kscr:O_,kscr:T_,lAarr:F_,Lacute:N_,lacute:B_,laemptyv:I_,lagran:L_,Lambda:R_,lambda:z_,lang:P_,Lang:Z_,langd:q_,langle:j_,lap:$_,Laplacetrf:V_,laquo:H_,larrb:J_,larrbfs:K_,larr:W_,Larr:U_,lArr:G_,larrfs:Y_,larrhk:Q_,larrlp:X_,larrpl:tM,larrsim:eM,larrtl:nM,latail:rM,lAtail:iM,lat:oM,late:sM,lates:aM,lbarr:uM,lBarr:cM,lbbrk:lM,lbrace:hM,lbrack:dM,lbrke:fM,lbrksld:pM,lbrkslu:vM,Lcaron:mM,lcaron:gM,Lcedil:yM,lcedil:kM,lceil:bM,lcub:wM,Lcy:DM,lcy:xM,ldca:CM,ldquo:AM,ldquor:EM,ldrdhar:SM,ldrushar:_M,ldsh:MM,le:OM,lE:TM,LeftAngleBracket:FM,LeftArrowBar:NM,leftarrow:BM,LeftArrow:IM,Leftarrow:LM,LeftArrowRightArrow:RM,leftarrowtail:zM,LeftCeiling:PM,LeftDoubleBracket:ZM,LeftDownTeeVector:qM,LeftDownVectorBar:jM,LeftDownVector:$M,LeftFloor:VM,leftharpoondown:HM,leftharpoonup:JM,leftleftarrows:KM,leftrightarrow:WM,LeftRightArrow:UM,Leftrightarrow:GM,leftrightarrows:YM,leftrightharpoons:QM,leftrightsquigarrow:XM,LeftRightVector:tO,LeftTeeArrow:eO,LeftTee:nO,LeftTeeVector:rO,leftthreetimes:iO,LeftTriangleBar:oO,LeftTriangle:sO,LeftTriangleEqual:aO,LeftUpDownVector:uO,LeftUpTeeVector:cO,LeftUpVectorBar:lO,LeftUpVector:hO,LeftVectorBar:dO,LeftVector:fO,lEg:pO,leg:vO,leq:mO,leqq:gO,leqslant:yO,lescc:kO,les:bO,lesdot:wO,lesdoto:DO,lesdotor:xO,lesg:CO,lesges:AO,lessapprox:EO,lessdot:SO,lesseqgtr:_O,lesseqqgtr:MO,LessEqualGreater:OO,LessFullEqual:TO,LessGreater:FO,lessgtr:NO,LessLess:BO,lesssim:IO,LessSlantEqual:LO,LessTilde:RO,lfisht:zO,lfloor:PO,Lfr:ZO,lfr:qO,lg:jO,lgE:$O,lHar:VO,lhard:HO,lharu:JO,lharul:KO,lhblk:WO,LJcy:UO,ljcy:GO,llarr:YO,ll:QO,Ll:XO,llcorner:tT,Lleftarrow:eT,llhard:nT,lltri:rT,Lmidot:iT,lmidot:oT,lmoustache:sT,lmoust:aT,lnap:uT,lnapprox:cT,lne:lT,lnE:hT,lneq:dT,lneqq:fT,lnsim:pT,loang:vT,loarr:mT,lobrk:gT,longleftarrow:yT,LongLeftArrow:kT,Longleftarrow:bT,longleftrightarrow:wT,LongLeftRightArrow:DT,Longleftrightarrow:xT,longmapsto:CT,longrightarrow:AT,LongRightArrow:ET,Longrightarrow:ST,looparrowleft:_T,looparrowright:MT,lopar:OT,Lopf:TT,lopf:FT,loplus:NT,lotimes:BT,lowast:IT,lowbar:LT,LowerLeftArrow:RT,LowerRightArrow:zT,loz:PT,lozenge:ZT,lozf:qT,lpar:jT,lparlt:$T,lrarr:VT,lrcorner:HT,lrhar:JT,lrhard:KT,lrm:WT,lrtri:UT,lsaquo:GT,lscr:YT,Lscr:QT,lsh:XT,Lsh:tF,lsim:eF,lsime:nF,lsimg:rF,lsqb:iF,lsquo:oF,lsquor:sF,Lstrok:aF,lstrok:uF,ltcc:cF,ltcir:lF,lt:hF,LT:dF,Lt:fF,ltdot:pF,lthree:vF,ltimes:mF,ltlarr:gF,ltquest:yF,ltri:kF,ltrie:bF,ltrif:wF,ltrPar:DF,lurdshar:xF,luruhar:CF,lvertneqq:AF,lvnE:EF,macr:SF,male:_F,malt:MF,maltese:OF,Map:"⤅",map:TF,mapsto:FF,mapstodown:NF,mapstoleft:BF,mapstoup:IF,marker:LF,mcomma:RF,Mcy:zF,mcy:PF,mdash:ZF,mDDot:qF,measuredangle:jF,MediumSpace:$F,Mellintrf:VF,Mfr:HF,mfr:JF,mho:KF,micro:WF,midast:UF,midcir:GF,mid:YF,middot:QF,minusb:XF,minus:tN,minusd:eN,minusdu:nN,MinusPlus:rN,mlcp:iN,mldr:oN,mnplus:sN,models:aN,Mopf:uN,mopf:cN,mp:lN,mscr:hN,Mscr:dN,mstpos:fN,Mu:pN,mu:vN,multimap:mN,mumap:gN,nabla:yN,Nacute:kN,nacute:bN,nang:wN,nap:DN,napE:xN,napid:CN,napos:AN,napprox:EN,natural:SN,naturals:_N,natur:MN,nbsp:ON,nbump:TN,nbumpe:FN,ncap:NN,Ncaron:BN,ncaron:IN,Ncedil:LN,ncedil:RN,ncong:zN,ncongdot:PN,ncup:ZN,Ncy:qN,ncy:jN,ndash:$N,nearhk:VN,nearr:HN,neArr:JN,nearrow:KN,ne:WN,nedot:UN,NegativeMediumSpace:GN,NegativeThickSpace:YN,NegativeThinSpace:QN,NegativeVeryThinSpace:XN,nequiv:tB,nesear:eB,nesim:nB,NestedGreaterGreater:rB,NestedLessLess:iB,NewLine:oB,nexist:sB,nexists:aB,Nfr:uB,nfr:cB,ngE:lB,nge:hB,ngeq:dB,ngeqq:fB,ngeqslant:pB,nges:vB,nGg:mB,ngsim:gB,nGt:yB,ngt:kB,ngtr:bB,nGtv:wB,nharr:DB,nhArr:xB,nhpar:CB,ni:AB,nis:EB,nisd:SB,niv:_B,NJcy:MB,njcy:OB,nlarr:TB,nlArr:FB,nldr:NB,nlE:BB,nle:IB,nleftarrow:LB,nLeftarrow:RB,nleftrightarrow:zB,nLeftrightarrow:PB,nleq:ZB,nleqq:qB,nleqslant:jB,nles:$B,nless:VB,nLl:HB,nlsim:JB,nLt:KB,nlt:WB,nltri:UB,nltrie:GB,nLtv:YB,nmid:QB,NoBreak:XB,NonBreakingSpace:tI,nopf:eI,Nopf:nI,Not:rI,not:iI,NotCongruent:oI,NotCupCap:sI,NotDoubleVerticalBar:aI,NotElement:uI,NotEqual:cI,NotEqualTilde:lI,NotExists:hI,NotGreater:dI,NotGreaterEqual:fI,NotGreaterFullEqual:pI,NotGreaterGreater:vI,NotGreaterLess:mI,NotGreaterSlantEqual:gI,NotGreaterTilde:yI,NotHumpDownHump:kI,NotHumpEqual:bI,notin:wI,notindot:DI,notinE:xI,notinva:CI,notinvb:AI,notinvc:EI,NotLeftTriangleBar:SI,NotLeftTriangle:_I,NotLeftTriangleEqual:MI,NotLess:OI,NotLessEqual:TI,NotLessGreater:FI,NotLessLess:NI,NotLessSlantEqual:BI,NotLessTilde:II,NotNestedGreaterGreater:LI,NotNestedLessLess:RI,notni:zI,notniva:PI,notnivb:ZI,notnivc:qI,NotPrecedes:jI,NotPrecedesEqual:$I,NotPrecedesSlantEqual:VI,NotReverseElement:HI,NotRightTriangleBar:JI,NotRightTriangle:KI,NotRightTriangleEqual:WI,NotSquareSubset:UI,NotSquareSubsetEqual:GI,NotSquareSuperset:YI,NotSquareSupersetEqual:QI,NotSubset:XI,NotSubsetEqual:tL,NotSucceeds:eL,NotSucceedsEqual:nL,NotSucceedsSlantEqual:rL,NotSucceedsTilde:iL,NotSuperset:oL,NotSupersetEqual:sL,NotTilde:aL,NotTildeEqual:uL,NotTildeFullEqual:cL,NotTildeTilde:lL,NotVerticalBar:hL,nparallel:dL,npar:fL,nparsl:pL,npart:vL,npolint:mL,npr:gL,nprcue:yL,nprec:kL,npreceq:bL,npre:wL,nrarrc:DL,nrarr:xL,nrArr:CL,nrarrw:AL,nrightarrow:EL,nRightarrow:SL,nrtri:_L,nrtrie:ML,nsc:OL,nsccue:TL,nsce:FL,Nscr:NL,nscr:BL,nshortmid:IL,nshortparallel:LL,nsim:RL,nsime:zL,nsimeq:PL,nsmid:ZL,nspar:qL,nsqsube:jL,nsqsupe:$L,nsub:VL,nsubE:HL,nsube:JL,nsubset:KL,nsubseteq:WL,nsubseteqq:UL,nsucc:GL,nsucceq:YL,nsup:QL,nsupE:XL,nsupe:tR,nsupset:eR,nsupseteq:nR,nsupseteqq:rR,ntgl:iR,Ntilde:oR,ntilde:sR,ntlg:aR,ntriangleleft:uR,ntrianglelefteq:cR,ntriangleright:lR,ntrianglerighteq:hR,Nu:dR,nu:fR,num:pR,numero:vR,numsp:mR,nvap:gR,nvdash:yR,nvDash:kR,nVdash:bR,nVDash:wR,nvge:DR,nvgt:xR,nvHarr:CR,nvinfin:AR,nvlArr:ER,nvle:SR,nvlt:_R,nvltrie:MR,nvrArr:OR,nvrtrie:TR,nvsim:FR,nwarhk:NR,nwarr:BR,nwArr:IR,nwarrow:LR,nwnear:RR,Oacute:zR,oacute:PR,oast:ZR,Ocirc:qR,ocirc:jR,ocir:$R,Ocy:VR,ocy:HR,odash:JR,Odblac:KR,odblac:WR,odiv:UR,odot:GR,odsold:YR,OElig:QR,oelig:XR,ofcir:tz,Ofr:ez,ofr:nz,ogon:rz,Ograve:iz,ograve:oz,ogt:sz,ohbar:az,ohm:uz,oint:cz,olarr:lz,olcir:hz,olcross:dz,oline:fz,olt:pz,Omacr:vz,omacr:mz,Omega:gz,omega:yz,Omicron:kz,omicron:bz,omid:wz,ominus:Dz,Oopf:xz,oopf:Cz,opar:Az,OpenCurlyDoubleQuote:Ez,OpenCurlyQuote:Sz,operp:_z,oplus:Mz,orarr:Oz,Or:Tz,or:Fz,ord:Nz,order:Bz,orderof:Iz,ordf:Lz,ordm:Rz,origof:zz,oror:Pz,orslope:Zz,orv:qz,oS:jz,Oscr:$z,oscr:Vz,Oslash:Hz,oslash:Jz,osol:Kz,Otilde:Wz,otilde:Uz,otimesas:Gz,Otimes:Yz,otimes:Qz,Ouml:Xz,ouml:tP,ovbar:eP,OverBar:nP,OverBrace:rP,OverBracket:iP,OverParenthesis:oP,para:sP,parallel:aP,par:uP,parsim:cP,parsl:lP,part:hP,PartialD:dP,Pcy:fP,pcy:pP,percnt:vP,period:mP,permil:gP,perp:yP,pertenk:kP,Pfr:bP,pfr:wP,Phi:DP,phi:xP,phiv:CP,phmmat:AP,phone:EP,Pi:SP,pi:_P,pitchfork:MP,piv:OP,planck:TP,planckh:FP,plankv:NP,plusacir:BP,plusb:IP,pluscir:LP,plus:RP,plusdo:zP,plusdu:PP,pluse:ZP,PlusMinus:qP,plusmn:jP,plussim:$P,plustwo:VP,pm:HP,Poincareplane:JP,pointint:KP,popf:WP,Popf:UP,pound:GP,prap:YP,Pr:QP,pr:XP,prcue:tZ,precapprox:eZ,prec:nZ,preccurlyeq:rZ,Precedes:iZ,PrecedesEqual:oZ,PrecedesSlantEqual:sZ,PrecedesTilde:aZ,preceq:uZ,precnapprox:cZ,precneqq:lZ,precnsim:hZ,pre:dZ,prE:fZ,precsim:pZ,prime:vZ,Prime:mZ,primes:gZ,prnap:yZ,prnE:kZ,prnsim:bZ,prod:wZ,Product:DZ,profalar:xZ,profline:CZ,profsurf:AZ,prop:EZ,Proportional:SZ,Proportion:_Z,propto:MZ,prsim:OZ,prurel:TZ,Pscr:FZ,pscr:NZ,Psi:BZ,psi:IZ,puncsp:LZ,Qfr:RZ,qfr:zZ,qint:PZ,qopf:ZZ,Qopf:qZ,qprime:jZ,Qscr:$Z,qscr:VZ,quaternions:HZ,quatint:JZ,quest:KZ,questeq:WZ,quot:UZ,QUOT:GZ,rAarr:YZ,race:QZ,Racute:XZ,racute:tq,radic:eq,raemptyv:nq,rang:rq,Rang:iq,rangd:oq,range:sq,rangle:aq,raquo:uq,rarrap:cq,rarrb:lq,rarrbfs:hq,rarrc:dq,rarr:fq,Rarr:pq,rArr:vq,rarrfs:mq,rarrhk:gq,rarrlp:yq,rarrpl:kq,rarrsim:bq,Rarrtl:wq,rarrtl:Dq,rarrw:xq,ratail:Cq,rAtail:Aq,ratio:Eq,rationals:Sq,rbarr:_q,rBarr:Mq,RBarr:Oq,rbbrk:Tq,rbrace:Fq,rbrack:Nq,rbrke:Bq,rbrksld:Iq,rbrkslu:Lq,Rcaron:Rq,rcaron:zq,Rcedil:Pq,rcedil:Zq,rceil:qq,rcub:jq,Rcy:$q,rcy:Vq,rdca:Hq,rdldhar:Jq,rdquo:Kq,rdquor:Wq,rdsh:Uq,real:Gq,realine:Yq,realpart:Qq,reals:Xq,Re:tj,rect:ej,reg:nj,REG:rj,ReverseElement:ij,ReverseEquilibrium:oj,ReverseUpEquilibrium:sj,rfisht:aj,rfloor:uj,rfr:cj,Rfr:lj,rHar:hj,rhard:dj,rharu:fj,rharul:pj,Rho:vj,rho:mj,rhov:gj,RightAngleBracket:yj,RightArrowBar:kj,rightarrow:bj,RightArrow:wj,Rightarrow:Dj,RightArrowLeftArrow:xj,rightarrowtail:Cj,RightCeiling:Aj,RightDoubleBracket:Ej,RightDownTeeVector:Sj,RightDownVectorBar:_j,RightDownVector:Mj,RightFloor:Oj,rightharpoondown:Tj,rightharpoonup:Fj,rightleftarrows:Nj,rightleftharpoons:Bj,rightrightarrows:Ij,rightsquigarrow:Lj,RightTeeArrow:Rj,RightTee:zj,RightTeeVector:Pj,rightthreetimes:Zj,RightTriangleBar:qj,RightTriangle:jj,RightTriangleEqual:$j,RightUpDownVector:Vj,RightUpTeeVector:Hj,RightUpVectorBar:Jj,RightUpVector:Kj,RightVectorBar:Wj,RightVector:Uj,ring:Gj,risingdotseq:Yj,rlarr:Qj,rlhar:Xj,rlm:t$,rmoustache:e$,rmoust:n$,rnmid:r$,roang:i$,roarr:o$,robrk:s$,ropar:a$,ropf:u$,Ropf:c$,roplus:l$,rotimes:h$,RoundImplies:d$,rpar:f$,rpargt:p$,rppolint:v$,rrarr:m$,Rrightarrow:g$,rsaquo:y$,rscr:k$,Rscr:b$,rsh:w$,Rsh:D$,rsqb:x$,rsquo:C$,rsquor:A$,rthree:E$,rtimes:S$,rtri:_$,rtrie:M$,rtrif:O$,rtriltri:T$,RuleDelayed:F$,ruluhar:N$,rx:B$,Sacute:I$,sacute:L$,sbquo:R$,scap:z$,Scaron:P$,scaron:Z$,Sc:q$,sc:j$,sccue:$$,sce:V$,scE:H$,Scedil:J$,scedil:K$,Scirc:W$,scirc:U$,scnap:G$,scnE:Y$,scnsim:Q$,scpolint:X$,scsim:tV,Scy:eV,scy:nV,sdotb:rV,sdot:iV,sdote:oV,searhk:sV,searr:aV,seArr:uV,searrow:cV,sect:lV,semi:hV,seswar:dV,setminus:fV,setmn:pV,sext:vV,Sfr:mV,sfr:gV,sfrown:yV,sharp:kV,SHCHcy:bV,shchcy:wV,SHcy:DV,shcy:xV,ShortDownArrow:CV,ShortLeftArrow:AV,shortmid:EV,shortparallel:SV,ShortRightArrow:_V,ShortUpArrow:MV,shy:OV,Sigma:TV,sigma:FV,sigmaf:NV,sigmav:BV,sim:IV,simdot:LV,sime:RV,simeq:zV,simg:PV,simgE:ZV,siml:qV,simlE:jV,simne:$V,simplus:VV,simrarr:HV,slarr:JV,SmallCircle:KV,smallsetminus:WV,smashp:UV,smeparsl:GV,smid:YV,smile:QV,smt:XV,smte:tH,smtes:eH,SOFTcy:nH,softcy:rH,solbar:iH,solb:oH,sol:sH,Sopf:aH,sopf:uH,spades:cH,spadesuit:lH,spar:hH,sqcap:dH,sqcaps:fH,sqcup:pH,sqcups:vH,Sqrt:mH,sqsub:gH,sqsube:yH,sqsubset:kH,sqsubseteq:bH,sqsup:wH,sqsupe:DH,sqsupset:xH,sqsupseteq:CH,square:AH,Square:EH,SquareIntersection:SH,SquareSubset:_H,SquareSubsetEqual:MH,SquareSuperset:OH,SquareSupersetEqual:TH,SquareUnion:FH,squarf:NH,squ:BH,squf:IH,srarr:LH,Sscr:RH,sscr:zH,ssetmn:PH,ssmile:ZH,sstarf:qH,Star:jH,star:$H,starf:VH,straightepsilon:HH,straightphi:JH,strns:KH,sub:WH,Sub:UH,subdot:GH,subE:YH,sube:QH,subedot:XH,submult:tJ,subnE:eJ,subne:nJ,subplus:rJ,subrarr:iJ,subset:oJ,Subset:sJ,subseteq:aJ,subseteqq:uJ,SubsetEqual:cJ,subsetneq:lJ,subsetneqq:hJ,subsim:dJ,subsub:fJ,subsup:pJ,succapprox:vJ,succ:mJ,succcurlyeq:gJ,Succeeds:yJ,SucceedsEqual:kJ,SucceedsSlantEqual:bJ,SucceedsTilde:wJ,succeq:DJ,succnapprox:xJ,succneqq:CJ,succnsim:AJ,succsim:EJ,SuchThat:SJ,sum:_J,Sum:MJ,sung:OJ,sup1:TJ,sup2:FJ,sup3:NJ,sup:BJ,Sup:IJ,supdot:LJ,supdsub:RJ,supE:zJ,supe:PJ,supedot:ZJ,Superset:qJ,SupersetEqual:jJ,suphsol:$J,suphsub:VJ,suplarr:HJ,supmult:JJ,supnE:KJ,supne:WJ,supplus:UJ,supset:GJ,Supset:YJ,supseteq:QJ,supseteqq:XJ,supsetneq:tK,supsetneqq:eK,supsim:nK,supsub:rK,supsup:iK,swarhk:oK,swarr:sK,swArr:aK,swarrow:uK,swnwar:cK,szlig:lK,Tab:hK,target:dK,Tau:fK,tau:pK,tbrk:vK,Tcaron:mK,tcaron:gK,Tcedil:yK,tcedil:kK,Tcy:bK,tcy:wK,tdot:DK,telrec:xK,Tfr:CK,tfr:AK,there4:EK,therefore:SK,Therefore:_K,Theta:MK,theta:OK,thetasym:TK,thetav:FK,thickapprox:NK,thicksim:BK,ThickSpace:IK,ThinSpace:LK,thinsp:RK,thkap:zK,thksim:PK,THORN:ZK,thorn:qK,tilde:jK,Tilde:$K,TildeEqual:VK,TildeFullEqual:HK,TildeTilde:JK,timesbar:KK,timesb:WK,times:UK,timesd:GK,tint:YK,toea:QK,topbot:XK,topcir:tW,top:eW,Topf:nW,topf:rW,topfork:iW,tosa:oW,tprime:sW,trade:aW,TRADE:uW,triangle:cW,triangledown:lW,triangleleft:hW,trianglelefteq:dW,triangleq:fW,triangleright:pW,trianglerighteq:vW,tridot:mW,trie:gW,triminus:yW,TripleDot:kW,triplus:bW,trisb:wW,tritime:DW,trpezium:xW,Tscr:CW,tscr:AW,TScy:EW,tscy:SW,TSHcy:_W,tshcy:MW,Tstrok:OW,tstrok:TW,twixt:FW,twoheadleftarrow:NW,twoheadrightarrow:BW,Uacute:IW,uacute:LW,uarr:RW,Uarr:zW,uArr:PW,Uarrocir:ZW,Ubrcy:qW,ubrcy:jW,Ubreve:$W,ubreve:VW,Ucirc:HW,ucirc:JW,Ucy:KW,ucy:WW,udarr:UW,Udblac:GW,udblac:YW,udhar:QW,ufisht:XW,Ufr:tU,ufr:eU,Ugrave:nU,ugrave:rU,uHar:iU,uharl:oU,uharr:sU,uhblk:aU,ulcorn:uU,ulcorner:cU,ulcrop:lU,ultri:hU,Umacr:dU,umacr:fU,uml:pU,UnderBar:vU,UnderBrace:mU,UnderBracket:gU,UnderParenthesis:yU,Union:kU,UnionPlus:bU,Uogon:wU,uogon:DU,Uopf:xU,uopf:CU,UpArrowBar:AU,uparrow:EU,UpArrow:SU,Uparrow:_U,UpArrowDownArrow:MU,updownarrow:OU,UpDownArrow:TU,Updownarrow:FU,UpEquilibrium:NU,upharpoonleft:BU,upharpoonright:IU,uplus:LU,UpperLeftArrow:RU,UpperRightArrow:zU,upsi:PU,Upsi:ZU,upsih:qU,Upsilon:jU,upsilon:$U,UpTeeArrow:VU,UpTee:HU,upuparrows:JU,urcorn:KU,urcorner:WU,urcrop:UU,Uring:GU,uring:YU,urtri:QU,Uscr:XU,uscr:tG,utdot:eG,Utilde:nG,utilde:rG,utri:iG,utrif:oG,uuarr:sG,Uuml:aG,uuml:uG,uwangle:cG,vangrt:lG,varepsilon:hG,varkappa:dG,varnothing:fG,varphi:pG,varpi:vG,varpropto:mG,varr:gG,vArr:yG,varrho:kG,varsigma:bG,varsubsetneq:wG,varsubsetneqq:DG,varsupsetneq:xG,varsupsetneqq:CG,vartheta:AG,vartriangleleft:EG,vartriangleright:SG,vBar:_G,Vbar:MG,vBarv:OG,Vcy:TG,vcy:FG,vdash:NG,vDash:BG,Vdash:IG,VDash:LG,Vdashl:RG,veebar:zG,vee:PG,Vee:ZG,veeeq:qG,vellip:jG,verbar:$G,Verbar:VG,vert:HG,Vert:JG,VerticalBar:KG,VerticalLine:WG,VerticalSeparator:UG,VerticalTilde:GG,VeryThinSpace:YG,Vfr:QG,vfr:XG,vltri:tY,vnsub:eY,vnsup:nY,Vopf:rY,vopf:iY,vprop:oY,vrtri:sY,Vscr:aY,vscr:uY,vsubnE:cY,vsubne:lY,vsupnE:hY,vsupne:dY,Vvdash:fY,vzigzag:pY,Wcirc:vY,wcirc:mY,wedbar:gY,wedge:yY,Wedge:kY,wedgeq:bY,weierp:wY,Wfr:DY,wfr:xY,Wopf:CY,wopf:AY,wp:EY,wr:SY,wreath:_Y,Wscr:MY,wscr:OY,xcap:TY,xcirc:FY,xcup:NY,xdtri:BY,Xfr:IY,xfr:LY,xharr:RY,xhArr:zY,Xi:PY,xi:ZY,xlarr:qY,xlArr:jY,xmap:$Y,xnis:VY,xodot:HY,Xopf:JY,xopf:KY,xoplus:WY,xotime:UY,xrarr:GY,xrArr:YY,Xscr:QY,xscr:XY,xsqcup:tQ,xuplus:eQ,xutri:nQ,xvee:rQ,xwedge:iQ,Yacute:oQ,yacute:sQ,YAcy:aQ,yacy:uQ,Ycirc:cQ,ycirc:lQ,Ycy:hQ,ycy:dQ,yen:fQ,Yfr:pQ,yfr:vQ,YIcy:mQ,yicy:gQ,Yopf:yQ,yopf:kQ,Yscr:bQ,yscr:wQ,YUcy:DQ,yucy:xQ,yuml:CQ,Yuml:AQ,Zacute:EQ,zacute:SQ,Zcaron:_Q,zcaron:MQ,Zcy:OQ,zcy:TQ,Zdot:FQ,zdot:NQ,zeetrf:BQ,ZeroWidthSpace:IQ,Zeta:LQ,zeta:RQ,zfr:zQ,Zfr:PQ,ZHcy:ZQ,zhcy:qQ,zigrarr:jQ,zopf:$Q,Zopf:VQ,Zscr:HQ,zscr:JQ,zwj:KQ,zwnj:WQ},GQ=UQ,YQ=/[!-#%-\*,-\/:;\?@\[-\]_\{\}\xA1\xA7\xAB\xB6\xB7\xBB\xBF\u037E\u0387\u055A-\u055F\u0589\u058A\u05BE\u05C0\u05C3\u05C6\u05F3\u05F4\u0609\u060A\u060C\u060D\u061B\u061E\u061F\u066A-\u066D\u06D4\u0700-\u070D\u07F7-\u07F9\u0830-\u083E\u085E\u0964\u0965\u0970\u09FD\u0A76\u0AF0\u0C84\u0DF4\u0E4F\u0E5A\u0E5B\u0F04-\u0F12\u0F14\u0F3A-\u0F3D\u0F85\u0FD0-\u0FD4\u0FD9\u0FDA\u104A-\u104F\u10FB\u1360-\u1368\u1400\u166D\u166E\u169B\u169C\u16EB-\u16ED\u1735\u1736\u17D4-\u17D6\u17D8-\u17DA\u1800-\u180A\u1944\u1945\u1A1E\u1A1F\u1AA0-\u1AA6\u1AA8-\u1AAD\u1B5A-\u1B60\u1BFC-\u1BFF\u1C3B-\u1C3F\u1C7E\u1C7F\u1CC0-\u1CC7\u1CD3\u2010-\u2027\u2030-\u2043\u2045-\u2051\u2053-\u205E\u207D\u207E\u208D\u208E\u2308-\u230B\u2329\u232A\u2768-\u2775\u27C5\u27C6\u27E6-\u27EF\u2983-\u2998\u29D8-\u29DB\u29FC\u29FD\u2CF9-\u2CFC\u2CFE\u2CFF\u2D70\u2E00-\u2E2E\u2E30-\u2E4E\u3001-\u3003\u3008-\u3011\u3014-\u301F\u3030\u303D\u30A0\u30FB\uA4FE\uA4FF\uA60D-\uA60F\uA673\uA67E\uA6F2-\uA6F7\uA874-\uA877\uA8CE\uA8CF\uA8F8-\uA8FA\uA8FC\uA92E\uA92F\uA95F\uA9C1-\uA9CD\uA9DE\uA9DF\uAA5C-\uAA5F\uAADE\uAADF\uAAF0\uAAF1\uABEB\uFD3E\uFD3F\uFE10-\uFE19\uFE30-\uFE52\uFE54-\uFE61\uFE63\uFE68\uFE6A\uFE6B\uFF01-\uFF03\uFF05-\uFF0A\uFF0C-\uFF0F\uFF1A\uFF1B\uFF1F\uFF20\uFF3B-\uFF3D\uFF3F\uFF5B\uFF5D\uFF5F-\uFF65]|\uD800[\uDD00-\uDD02\uDF9F\uDFD0]|\uD801\uDD6F|\uD802[\uDC57\uDD1F\uDD3F\uDE50-\uDE58\uDE7F\uDEF0-\uDEF6\uDF39-\uDF3F\uDF99-\uDF9C]|\uD803[\uDF55-\uDF59]|\uD804[\uDC47-\uDC4D\uDCBB\uDCBC\uDCBE-\uDCC1\uDD40-\uDD43\uDD74\uDD75\uDDC5-\uDDC8\uDDCD\uDDDB\uDDDD-\uDDDF\uDE38-\uDE3D\uDEA9]|\uD805[\uDC4B-\uDC4F\uDC5B\uDC5D\uDCC6\uDDC1-\uDDD7\uDE41-\uDE43\uDE60-\uDE6C\uDF3C-\uDF3E]|\uD806[\uDC3B\uDE3F-\uDE46\uDE9A-\uDE9C\uDE9E-\uDEA2]|\uD807[\uDC41-\uDC45\uDC70\uDC71\uDEF7\uDEF8]|\uD809[\uDC70-\uDC74]|\uD81A[\uDE6E\uDE6F\uDEF5\uDF37-\uDF3B\uDF44]|\uD81B[\uDE97-\uDE9A]|\uD82F\uDC9F|\uD836[\uDE87-\uDE8B]|\uD83A[\uDD5E\uDD5F]/,QQ={};function XQ(t){var e,n,r=QQ[t];if(r)return r;for(r=QQ[t]=[],e=0;e<128;e++)n=String.fromCharCode(e),/^[0-9a-z]$/i.test(n)?r.push(n):r.push("%"+("0"+e.toString(16).toUpperCase()).slice(-2));for(e=0;e<t.length;e++)r[t.charCodeAt(e)]=t[e];return r}function tX(t,e,n){var r,i,o,s,a,u="";for("string"!==typeof e&&(n=e,e=tX.defaultChars),"undefined"===typeof n&&(n=!0),a=XQ(e),r=0,i=t.length;r<i;r++)if(o=t.charCodeAt(r),n&&37===o&&r+2<i&&/^[0-9a-f]{2}$/i.test(t.slice(r+1,r+3)))u+=t.slice(r,r+3),r+=2;else if(o<128)u+=a[o];else if(o>=55296&&o<=57343){if(o>=55296&&o<=56319&&r+1<i&&(s=t.charCodeAt(r+1),s>=56320&&s<=57343)){u+=encodeURIComponent(t[r]+t[r+1]),r++;continue}u+="%EF%BF%BD"}else u+=encodeURIComponent(t[r]);return u}tX.defaultChars=";/?:@&=+$,-_.!~*'()#",tX.componentChars="-_.!~*'()";var eX=tX,nX={};function rX(t){var e,n,r=nX[t];if(r)return r;for(r=nX[t]=[],e=0;e<128;e++)n=String.fromCharCode(e),r.push(n);for(e=0;e<t.length;e++)n=t.charCodeAt(e),r[n]="%"+("0"+n.toString(16).toUpperCase()).slice(-2);return r}function iX(t,e){var n;return"string"!==typeof e&&(e=iX.defaultChars),n=rX(e),t.replace(/(%[a-f0-9]{2})+/gi,(function(t){var e,r,i,o,s,a,u,c="";for(e=0,r=t.length;e<r;e+=3)i=parseInt(t.slice(e+1,e+3),16),i<128?c+=n[i]:192===(224&i)&&e+3<r&&(o=parseInt(t.slice(e+4,e+6),16),128===(192&o))?(u=i<<6&1984|63&o,c+=u<128?"��":String.fromCharCode(u),e+=3):224===(240&i)&&e+6<r&&(o=parseInt(t.slice(e+4,e+6),16),s=parseInt(t.slice(e+7,e+9),16),128===(192&o)&&128===(192&s))?(u=i<<12&61440|o<<6&4032|63&s,c+=u<2048||u>=55296&&u<=57343?"���":String.fromCharCode(u),e+=6):240===(248&i)&&e+9<r&&(o=parseInt(t.slice(e+4,e+6),16),s=parseInt(t.slice(e+7,e+9),16),a=parseInt(t.slice(e+10,e+12),16),128===(192&o)&&128===(192&s)&&128===(192&a))?(u=i<<18&1835008|o<<12&258048|s<<6&4032|63&a,u<65536||u>1114111?c+="����":(u-=65536,c+=String.fromCharCode(55296+(u>>10),56320+(1023&u))),e+=9):c+="�";return c}))}iX.defaultChars=";/?:@&=+$,#",iX.componentChars="";var oX=iX,sX=function(t){var e="";return e+=t.protocol||"",e+=t.slashes?"//":"",e+=t.auth?t.auth+"@":"",t.hostname&&-1!==t.hostname.indexOf(":")?e+="["+t.hostname+"]":e+=t.hostname||"",e+=t.port?":"+t.port:"",e+=t.pathname||"",e+=t.search||"",e+=t.hash||"",e};function aX(){this.protocol=null,this.slashes=null,this.auth=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.pathname=null}var uX=/^([a-z0-9.+-]+:)/i,cX=/:[0-9]*$/,lX=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,hX=["<",">",'"',"`"," ","\r","\n","\t"],dX=["{","}","|","\\","^","`"].concat(hX),fX=["'"].concat(dX),pX=["%","/","?",";","#"].concat(fX),vX=["/","?","#"],mX=255,gX=/^[+a-z0-9A-Z_-]{0,63}$/,yX=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,kX={javascript:!0,"javascript:":!0},bX={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0};function wX(t,e){if(t&&t instanceof aX)return t;var n=new aX;return n.parse(t,e),n}aX.prototype.parse=function(t,e){var n,r,i,o,s,a=t;if(a=a.trim(),!e&&1===t.split("#").length){var u=lX.exec(a);if(u)return this.pathname=u[1],u[2]&&(this.search=u[2]),this}var c=uX.exec(a);if(c&&(c=c[0],i=c.toLowerCase(),this.protocol=c,a=a.substr(c.length)),(e||c||a.match(/^\/\/[^@\/]+@[^@\/]+/))&&(s="//"===a.substr(0,2),!s||c&&kX[c]||(a=a.substr(2),this.slashes=!0)),!kX[c]&&(s||c&&!bX[c])){var l,h,d=-1;for(n=0;n<vX.length;n++)o=a.indexOf(vX[n]),-1!==o&&(-1===d||o<d)&&(d=o);for(h=-1===d?a.lastIndexOf("@"):a.lastIndexOf("@",d),-1!==h&&(l=a.slice(0,h),a=a.slice(h+1),this.auth=l),d=-1,n=0;n<pX.length;n++)o=a.indexOf(pX[n]),-1!==o&&(-1===d||o<d)&&(d=o);-1===d&&(d=a.length),":"===a[d-1]&&d--;var f=a.slice(0,d);a=a.slice(d),this.parseHost(f),this.hostname=this.hostname||"";var p="["===this.hostname[0]&&"]"===this.hostname[this.hostname.length-1];if(!p){var v=this.hostname.split(/\./);for(n=0,r=v.length;n<r;n++){var m=v[n];if(m&&!m.match(gX)){for(var g="",y=0,k=m.length;y<k;y++)m.charCodeAt(y)>127?g+="x":g+=m[y];if(!g.match(gX)){var b=v.slice(0,n),w=v.slice(n+1),D=m.match(yX);D&&(b.push(D[1]),w.unshift(D[2])),w.length&&(a=w.join(".")+a),this.hostname=b.join(".");break}}}}this.hostname.length>mX&&(this.hostname=""),p&&(this.hostname=this.hostname.substr(1,this.hostname.length-2))}var x=a.indexOf("#");-1!==x&&(this.hash=a.substr(x),a=a.slice(0,x));var C=a.indexOf("?");return-1!==C&&(this.search=a.substr(C),a=a.slice(0,C)),a&&(this.pathname=a),bX[i]&&this.hostname&&!this.pathname&&(this.pathname=""),this},aX.prototype.parseHost=function(t){var e=cX.exec(t);e&&(e=e[0],":"!==e&&(this.port=e.substr(1)),t=t.substr(0,t.length-e.length)),t&&(this.hostname=t)};var DX=wX,xX=eX,CX=oX,AX=sX,EX=DX,SX={encode:xX,decode:CX,format:AX,parse:EX},_X=/[\0-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/,MX=/[\0-\x1F\x7F-\x9F]/,OX=/[\xAD\u0600-\u0605\u061C\u06DD\u070F\u08E2\u180E\u200B-\u200F\u202A-\u202E\u2060-\u2064\u2066-\u206F\uFEFF\uFFF9-\uFFFB]|\uD804[\uDCBD\uDCCD]|\uD82F[\uDCA0-\uDCA3]|\uD834[\uDD73-\uDD7A]|\uDB40[\uDC01\uDC20-\uDC7F]/,TX=/[ \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000]/,FX=_X,NX=MX,BX=OX,IX=YQ,LX=TX,RX={Any:FX,Cc:NX,Cf:BX,P:IX,Z:LX},zX=(0,A.c)((function(t,e){function n(t){return Object.prototype.toString.call(t)}function r(t){return"[object String]"===n(t)}var i=Object.prototype.hasOwnProperty;function o(t,e){return i.call(t,e)}function s(t){var e=Array.prototype.slice.call(arguments,1);return e.forEach((function(e){if(e){if("object"!==(0,b.Z)(e))throw new TypeError(e+"must be object");Object.keys(e).forEach((function(n){t[n]=e[n]}))}})),t}function a(t,e,n){return[].concat(t.slice(0,e),n,t.slice(e+1))}function u(t){return!(t>=55296&&t<=57343)&&(!(t>=64976&&t<=65007)&&(65535!==(65535&t)&&65534!==(65535&t)&&(!(t>=0&&t<=8)&&(11!==t&&(!(t>=14&&t<=31)&&(!(t>=127&&t<=159)&&!(t>1114111)))))))}function c(t){if(t>65535){t-=65536;var e=55296+(t>>10),n=56320+(1023&t);return String.fromCharCode(e,n)}return String.fromCharCode(t)}var l=/\\([!"#$%&'()*+,\-.\/:;<=>?@[\\\]^_`{|}~])/g,h=/&([a-z#][a-z0-9]{1,31});/gi,d=new RegExp(l.source+"|"+h.source,"gi"),f=/^#((?:x[a-f0-9]{1,8}|[0-9]{1,8}))/i;function p(t,e){var n=0;return o(GQ,e)?GQ[e]:35===e.charCodeAt(0)&&f.test(e)&&(n="x"===e[1].toLowerCase()?parseInt(e.slice(2),16):parseInt(e.slice(1),10),u(n))?c(n):t}function v(t){return t.indexOf("\\")<0?t:t.replace(l,"$1")}function m(t){return t.indexOf("\\")<0&&t.indexOf("&")<0?t:t.replace(d,(function(t,e,n){return e||p(t,n)}))}var g=/[&<>"]/,y=/[&<>"]/g,k={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;"};function w(t){return k[t]}function D(t){return g.test(t)?t.replace(y,w):t}var x=/[.?*+^$[\]\\(){}|-]/g;function C(t){return t.replace(x,"\\$&")}function A(t){switch(t){case 9:case 32:return!0}return!1}function E(t){if(t>=8192&&t<=8202)return!0;switch(t){case 9:case 10:case 11:case 12:case 13:case 32:case 160:case 5760:case 8239:case 8287:case 12288:return!0}return!1}function S(t){return YQ.test(t)}function _(t){switch(t){case 33:case 34:case 35:case 36:case 37:case 38:case 39:case 40:case 41:case 42:case 43:case 44:case 45:case 46:case 47:case 58:case 59:case 60:case 61:case 62:case 63:case 64:case 91:case 92:case 93:case 94:case 95:case 96:case 123:case 124:case 125:case 126:return!0;default:return!1}}function M(t){return t=t.trim().replace(/\s+/g," "),"Ṿ"==="ẞ".toLowerCase()&&(t=t.replace(/ẞ/g,"ß")),t.toLowerCase().toUpperCase()}e.lib={},e.lib.mdurl=SX,e.lib.ucmicro=RX,e.assign=s,e.isString=r,e.has=o,e.unescapeMd=v,e.unescapeAll=m,e.isValidEntityCode=u,e.fromCodePoint=c,e.escapeHtml=D,e.arrayReplaceAt=a,e.isSpace=A,e.isWhiteSpace=E,e.isMdAsciiPunct=_,e.isPunctChar=S,e.escapeRE=C,e.normalizeReference=M})),PX=function(t,e,n){var r,i,o,s,a=-1,u=t.posMax,c=t.pos;t.pos=e+1,r=1;while(t.pos<u){if(o=t.src.charCodeAt(t.pos),93===o&&(r--,0===r)){i=!0;break}if(s=t.pos,t.md.inline.skipToken(t),91===o)if(s===t.pos-1)r++;else if(n)return t.pos=c,-1}return i&&(a=t.pos),t.pos=c,a},ZX=zX.unescapeAll,qX=function(t,e,n){var r,i,o=0,s=e,a={ok:!1,pos:0,lines:0,str:""};if(60===t.charCodeAt(e)){e++;while(e<n){if(r=t.charCodeAt(e),10===r)return a;if(60===r)return a;if(62===r)return a.pos=e+1,a.str=ZX(t.slice(s+1,e)),a.ok=!0,a;92===r&&e+1<n?e+=2:e++}return a}i=0;while(e<n){if(r=t.charCodeAt(e),32===r)break;if(r<32||127===r)break;if(92===r&&e+1<n){if(32===t.charCodeAt(e+1))break;e+=2}else{if(40===r&&(i++,i>32))return a;if(41===r){if(0===i)break;i--}e++}}return s===e||0!==i||(a.str=ZX(t.slice(s,e)),a.lines=o,a.pos=e,a.ok=!0),a},jX=zX.unescapeAll,$X=function(t,e,n){var r,i,o=0,s=e,a={ok:!1,pos:0,lines:0,str:""};if(e>=n)return a;if(i=t.charCodeAt(e),34!==i&&39!==i&&40!==i)return a;e++,40===i&&(i=41);while(e<n){if(r=t.charCodeAt(e),r===i)return a.pos=e+1,a.lines=o,a.str=jX(t.slice(s+1,e)),a.ok=!0,a;if(40===r&&41===i)return a;10===r?o++:92===r&&e+1<n&&(e++,10===t.charCodeAt(e)&&o++),e++}return a},VX=PX,HX=qX,JX=$X,KX={parseLinkLabel:VX,parseLinkDestination:HX,parseLinkTitle:JX},WX=zX.assign,UX=zX.unescapeAll,GX=zX.escapeHtml,YX={};function QX(){this.rules=WX({},YX)}YX.code_inline=function(t,e,n,r,i){var o=t[e];return"<code"+i.renderAttrs(o)+">"+GX(t[e].content)+"</code>"},YX.code_block=function(t,e,n,r,i){var o=t[e];return"<pre"+i.renderAttrs(o)+"><code>"+GX(t[e].content)+"</code></pre>\n"},YX.fence=function(t,e,n,r,i){var o,s,a,u,c,l=t[e],h=l.info?UX(l.info).trim():"",d="",f="";return h&&(a=h.split(/(\s+)/g),d=a[0],f=a.slice(2).join("")),o=n.highlight&&n.highlight(l.content,d,f)||GX(l.content),0===o.indexOf("<pre")?o+"\n":h?(s=l.attrIndex("class"),u=l.attrs?l.attrs.slice():[],s<0?u.push(["class",n.langPrefix+d]):(u[s]=u[s].slice(),u[s][1]+=" "+n.langPrefix+d),c={attrs:u},"<pre><code"+i.renderAttrs(c)+">"+o+"</code></pre>\n"):"<pre><code"+i.renderAttrs(l)+">"+o+"</code></pre>\n"},YX.image=function(t,e,n,r,i){var o=t[e];return o.attrs[o.attrIndex("alt")][1]=i.renderInlineAsText(o.children,n,r),i.renderToken(t,e,n)},YX.hardbreak=function(t,e,n){return n.xhtmlOut?"<br />\n":"<br>\n"},YX.softbreak=function(t,e,n){return n.breaks?n.xhtmlOut?"<br />\n":"<br>\n":"\n"},YX.text=function(t,e){return GX(t[e].content)},YX.html_block=function(t,e){return t[e].content},YX.html_inline=function(t,e){return t[e].content},QX.prototype.renderAttrs=function(t){var e,n,r;if(!t.attrs)return"";for(r="",e=0,n=t.attrs.length;e<n;e++)r+=" "+GX(t.attrs[e][0])+'="'+GX(t.attrs[e][1])+'"';return r},QX.prototype.renderToken=function(t,e,n){var r,i="",o=!1,s=t[e];return s.hidden?"":(s.block&&-1!==s.nesting&&e&&t[e-1].hidden&&(i+="\n"),i+=(-1===s.nesting?"</":"<")+s.tag,i+=this.renderAttrs(s),0===s.nesting&&n.xhtmlOut&&(i+=" /"),s.block&&(o=!0,1===s.nesting&&e+1<t.length&&(r=t[e+1],("inline"===r.type||r.hidden||-1===r.nesting&&r.tag===s.tag)&&(o=!1))),i+=o?">\n":">",i)},QX.prototype.renderInline=function(t,e,n){for(var r,i="",o=this.rules,s=0,a=t.length;s<a;s++)r=t[s].type,"undefined"!==typeof o[r]?i+=o[r](t,s,e,n,this):i+=this.renderToken(t,s,e);return i},QX.prototype.renderInlineAsText=function(t,e,n){for(var r="",i=0,o=t.length;i<o;i++)"text"===t[i].type?r+=t[i].content:"image"===t[i].type?r+=this.renderInlineAsText(t[i].children,e,n):"softbreak"===t[i].type&&(r+="\n");return r},QX.prototype.render=function(t,e,n){var r,i,o,s="",a=this.rules;for(r=0,i=t.length;r<i;r++)o=t[r].type,"inline"===o?s+=this.renderInline(t[r].children,e,n):"undefined"!==typeof a[o]?s+=a[t[r].type](t,r,e,n,this):s+=this.renderToken(t,r,e,n);return s};var XX=QX;function t0(){this.__rules__=[],this.__cache__=null}t0.prototype.__find__=function(t){for(var e=0;e<this.__rules__.length;e++)if(this.__rules__[e].name===t)return e;return-1},t0.prototype.__compile__=function(){var t=this,e=[""];t.__rules__.forEach((function(t){t.enabled&&t.alt.forEach((function(t){e.indexOf(t)<0&&e.push(t)}))})),t.__cache__={},e.forEach((function(e){t.__cache__[e]=[],t.__rules__.forEach((function(n){n.enabled&&(e&&n.alt.indexOf(e)<0||t.__cache__[e].push(n.fn))}))}))},t0.prototype.at=function(t,e,n){var r=this.__find__(t),i=n||{};if(-1===r)throw new Error("Parser rule not found: "+t);this.__rules__[r].fn=e,this.__rules__[r].alt=i.alt||[],this.__cache__=null},t0.prototype.before=function(t,e,n,r){var i=this.__find__(t),o=r||{};if(-1===i)throw new Error("Parser rule not found: "+t);this.__rules__.splice(i,0,{name:e,enabled:!0,fn:n,alt:o.alt||[]}),this.__cache__=null},t0.prototype.after=function(t,e,n,r){var i=this.__find__(t),o=r||{};if(-1===i)throw new Error("Parser rule not found: "+t);this.__rules__.splice(i+1,0,{name:e,enabled:!0,fn:n,alt:o.alt||[]}),this.__cache__=null},t0.prototype.push=function(t,e,n){var r=n||{};this.__rules__.push({name:t,enabled:!0,fn:e,alt:r.alt||[]}),this.__cache__=null},t0.prototype.enable=function(t,e){Array.isArray(t)||(t=[t]);var n=[];return t.forEach((function(t){var r=this.__find__(t);if(r<0){if(e)return;throw new Error("Rules manager: invalid rule name "+t)}this.__rules__[r].enabled=!0,n.push(t)}),this),this.__cache__=null,n},t0.prototype.enableOnly=function(t,e){Array.isArray(t)||(t=[t]),this.__rules__.forEach((function(t){t.enabled=!1})),this.enable(t,e)},t0.prototype.disable=function(t,e){Array.isArray(t)||(t=[t]);var n=[];return t.forEach((function(t){var r=this.__find__(t);if(r<0){if(e)return;throw new Error("Rules manager: invalid rule name "+t)}this.__rules__[r].enabled=!1,n.push(t)}),this),this.__cache__=null,n},t0.prototype.getRules=function(t){return null===this.__cache__&&this.__compile__(),this.__cache__[t]||[]};var e0=t0,n0=/\r\n?|\n/g,r0=/\0/g,i0=function(t){var e;e=t.src.replace(n0,"\n"),e=e.replace(r0,"�"),t.src=e},o0=function(t){var e;t.inlineMode?(e=new t.Token("inline","",0),e.content=t.src,e.map=[0,1],e.children=[],t.tokens.push(e)):t.md.block.parse(t.src,t.md,t.env,t.tokens)},s0=function(t){var e,n,r,i=t.tokens;for(n=0,r=i.length;n<r;n++)e=i[n],"inline"===e.type&&t.md.inline.parse(e.content,t.md,t.env,e.children)},a0=zX.arrayReplaceAt;function u0(t){return/^<a[>\s]/i.test(t)}function c0(t){return/^<\/a\s*>/i.test(t)}var l0=function(t){var e,n,r,i,o,s,a,u,c,l,h,d,f,p,v,m,g,y=t.tokens;if(t.md.options.linkify)for(n=0,r=y.length;n<r;n++)if("inline"===y[n].type&&t.md.linkify.pretest(y[n].content))for(i=y[n].children,f=0,e=i.length-1;e>=0;e--)if(s=i[e],"link_close"!==s.type){if("html_inline"===s.type&&(u0(s.content)&&f>0&&f--,c0(s.content)&&f++),!(f>0)&&"text"===s.type&&t.md.linkify.test(s.content)){for(c=s.content,g=t.md.linkify.match(c),a=[],d=s.level,h=0,g.length>0&&0===g[0].index&&e>0&&"text_special"===i[e-1].type&&(g=g.slice(1)),u=0;u<g.length;u++)p=g[u].url,v=t.md.normalizeLink(p),t.md.validateLink(v)&&(m=g[u].text,m=g[u].schema?"mailto:"!==g[u].schema||/^mailto:/i.test(m)?t.md.normalizeLinkText(m):t.md.normalizeLinkText("mailto:"+m).replace(/^mailto:/,""):t.md.normalizeLinkText("http://"+m).replace(/^http:\/\//,""),l=g[u].index,l>h&&(o=new t.Token("text","",0),o.content=c.slice(h,l),o.level=d,a.push(o)),o=new t.Token("link_open","a",1),o.attrs=[["href",v]],o.level=d++,o.markup="linkify",o.info="auto",a.push(o),o=new t.Token("text","",0),o.content=m,o.level=d,a.push(o),o=new t.Token("link_close","a",-1),o.level=--d,o.markup="linkify",o.info="auto",a.push(o),h=g[u].lastIndex);h<c.length&&(o=new t.Token("text","",0),o.content=c.slice(h),o.level=d,a.push(o)),y[n].children=i=a0(i,e,a)}}else{e--;while(i[e].level!==s.level&&"link_open"!==i[e].type)e--}},h0=/\+-|\.\.|\?\?\?\?|!!!!|,,|--/,d0=/\((c|tm|r)\)/i,f0=/\((c|tm|r)\)/gi,p0={c:"©",r:"®",tm:"™"};function v0(t,e){return p0[e.toLowerCase()]}function m0(t){var e,n,r=0;for(e=t.length-1;e>=0;e--)n=t[e],"text"!==n.type||r||(n.content=n.content.replace(f0,v0)),"link_open"===n.type&&"auto"===n.info&&r--,"link_close"===n.type&&"auto"===n.info&&r++}function g0(t){var e,n,r=0;for(e=t.length-1;e>=0;e--)n=t[e],"text"!==n.type||r||h0.test(n.content)&&(n.content=n.content.replace(/\+-/g,"±").replace(/\.{2,}/g,"…").replace(/([?!])…/g,"$1..").replace(/([?!]){4,}/g,"$1$1$1").replace(/,{2,}/g,",").replace(/(^|[^-])---(?=[^-]|$)/gm,"$1—").replace(/(^|\s)--(?=\s|$)/gm,"$1–").replace(/(^|[^-\s])--(?=[^-\s]|$)/gm,"$1–")),"link_open"===n.type&&"auto"===n.info&&r--,"link_close"===n.type&&"auto"===n.info&&r++}var y0=function(t){var e;if(t.md.options.typographer)for(e=t.tokens.length-1;e>=0;e--)"inline"===t.tokens[e].type&&(d0.test(t.tokens[e].content)&&m0(t.tokens[e].children),h0.test(t.tokens[e].content)&&g0(t.tokens[e].children))},k0=zX.isWhiteSpace,b0=zX.isPunctChar,w0=zX.isMdAsciiPunct,D0=/['"]/,x0=/['"]/g,C0="’";function A0(t,e,n){return t.slice(0,e)+n+t.slice(e+1)}function E0(t,e){var n,r,i,o,s,a,u,c,l,h,d,f,p,v,m,g,y,k,b,w,D;for(b=[],n=0;n<t.length;n++){for(r=t[n],u=t[n].level,y=b.length-1;y>=0;y--)if(b[y].level<=u)break;if(b.length=y+1,"text"===r.type){i=r.content,s=0,a=i.length;t:while(s<a){if(x0.lastIndex=s,o=x0.exec(i),!o)break;if(m=g=!0,s=o.index+1,k="'"===o[0],l=32,o.index-1>=0)l=i.charCodeAt(o.index-1);else for(y=n-1;y>=0;y--){if("softbreak"===t[y].type||"hardbreak"===t[y].type)break;if(t[y].content){l=t[y].content.charCodeAt(t[y].content.length-1);break}}if(h=32,s<a)h=i.charCodeAt(s);else for(y=n+1;y<t.length;y++){if("softbreak"===t[y].type||"hardbreak"===t[y].type)break;if(t[y].content){h=t[y].content.charCodeAt(0);break}}if(d=w0(l)||b0(String.fromCharCode(l)),f=w0(h)||b0(String.fromCharCode(h)),p=k0(l),v=k0(h),v?m=!1:f&&(p||d||(m=!1)),p?g=!1:d&&(v||f||(g=!1)),34===h&&'"'===o[0]&&l>=48&&l<=57&&(g=m=!1),m&&g&&(m=d,g=f),m||g){if(g)for(y=b.length-1;y>=0;y--){if(c=b[y],b[y].level<u)break;if(c.single===k&&b[y].level===u){c=b[y],k?(w=e.md.options.quotes[2],D=e.md.options.quotes[3]):(w=e.md.options.quotes[0],D=e.md.options.quotes[1]),r.content=A0(r.content,o.index,D),t[c.token].content=A0(t[c.token].content,c.pos,w),s+=D.length-1,c.token===n&&(s+=w.length-1),i=r.content,a=i.length,b.length=y;continue t}}m?b.push({token:n,pos:o.index,single:k,level:u}):g&&k&&(r.content=A0(r.content,o.index,C0))}else k&&(r.content=A0(r.content,o.index,C0))}}}}var S0=function(t){var e;if(t.md.options.typographer)for(e=t.tokens.length-1;e>=0;e--)"inline"===t.tokens[e].type&&D0.test(t.tokens[e].content)&&E0(t.tokens[e].children,t)},_0=function(t){var e,n,r,i,o,s,a=t.tokens;for(e=0,n=a.length;e<n;e++)if("inline"===a[e].type){for(r=a[e].children,o=r.length,i=0;i<o;i++)"text_special"===r[i].type&&(r[i].type="text");for(i=s=0;i<o;i++)"text"===r[i].type&&i+1<o&&"text"===r[i+1].type?r[i+1].content=r[i].content+r[i+1].content:(i!==s&&(r[s]=r[i]),s++);i!==s&&(r.length=s)}};function M0(t,e,n){this.type=t,this.tag=e,this.attrs=null,this.map=null,this.nesting=n,this.level=0,this.children=null,this.content="",this.markup="",this.info="",this.meta=null,this.block=!1,this.hidden=!1}M0.prototype.attrIndex=function(t){var e,n,r;if(!this.attrs)return-1;for(e=this.attrs,n=0,r=e.length;n<r;n++)if(e[n][0]===t)return n;return-1},M0.prototype.attrPush=function(t){this.attrs?this.attrs.push(t):this.attrs=[t]},M0.prototype.attrSet=function(t,e){var n=this.attrIndex(t),r=[t,e];n<0?this.attrPush(r):this.attrs[n]=r},M0.prototype.attrGet=function(t){var e=this.attrIndex(t),n=null;return e>=0&&(n=this.attrs[e][1]),n},M0.prototype.attrJoin=function(t,e){var n=this.attrIndex(t);n<0?this.attrPush([t,e]):this.attrs[n][1]=this.attrs[n][1]+" "+e};var O0=M0;function T0(t,e,n){this.src=t,this.env=n,this.tokens=[],this.inlineMode=!1,this.md=e}T0.prototype.Token=O0;var F0=T0,N0=[["normalize",i0],["block",o0],["inline",s0],["linkify",l0],["replacements",y0],["smartquotes",S0],["text_join",_0]];function B0(){this.ruler=new e0;for(var t=0;t<N0.length;t++)this.ruler.push(N0[t][0],N0[t][1])}B0.prototype.process=function(t){var e,n,r;for(r=this.ruler.getRules(""),e=0,n=r.length;e<n;e++)r[e](t)},B0.prototype.State=F0;var I0=B0,L0=zX.isSpace;function R0(t,e){var n=t.bMarks[e]+t.tShift[e],r=t.eMarks[e];return t.src.slice(n,r)}function z0(t){var e,n=[],r=0,i=t.length,o=!1,s=0,a="";e=t.charCodeAt(r);while(r<i)124===e&&(o?(a+=t.substring(s,r-1),s=r):(n.push(a+t.substring(s,r)),a="",s=r+1)),o=92===e,r++,e=t.charCodeAt(r);return n.push(a+t.substring(s)),n}var P0=function(t,e,n,r){var i,o,s,a,u,c,l,h,d,f,p,v,m,g,y,k,b,w;if(e+2>n)return!1;if(c=e+1,t.sCount[c]<t.blkIndent)return!1;if(t.sCount[c]-t.blkIndent>=4)return!1;if(s=t.bMarks[c]+t.tShift[c],s>=t.eMarks[c])return!1;if(b=t.src.charCodeAt(s++),124!==b&&45!==b&&58!==b)return!1;if(s>=t.eMarks[c])return!1;if(w=t.src.charCodeAt(s++),124!==w&&45!==w&&58!==w&&!L0(w))return!1;if(45===b&&L0(w))return!1;while(s<t.eMarks[c]){if(i=t.src.charCodeAt(s),124!==i&&45!==i&&58!==i&&!L0(i))return!1;s++}for(o=R0(t,e+1),l=o.split("|"),f=[],a=0;a<l.length;a++){if(p=l[a].trim(),!p){if(0===a||a===l.length-1)continue;return!1}if(!/^:?-+:?$/.test(p))return!1;58===p.charCodeAt(p.length-1)?f.push(58===p.charCodeAt(0)?"center":"right"):58===p.charCodeAt(0)?f.push("left"):f.push("")}if(o=R0(t,e).trim(),-1===o.indexOf("|"))return!1;if(t.sCount[e]-t.blkIndent>=4)return!1;if(l=z0(o),l.length&&""===l[0]&&l.shift(),l.length&&""===l[l.length-1]&&l.pop(),h=l.length,0===h||h!==f.length)return!1;if(r)return!0;for(g=t.parentType,t.parentType="table",k=t.md.block.ruler.getRules("blockquote"),d=t.push("table_open","table",1),d.map=v=[e,0],d=t.push("thead_open","thead",1),d.map=[e,e+1],d=t.push("tr_open","tr",1),d.map=[e,e+1],a=0;a<l.length;a++)d=t.push("th_open","th",1),f[a]&&(d.attrs=[["style","text-align:"+f[a]]]),d=t.push("inline","",0),d.content=l[a].trim(),d.children=[],d=t.push("th_close","th",-1);for(d=t.push("tr_close","tr",-1),d=t.push("thead_close","thead",-1),c=e+2;c<n;c++){if(t.sCount[c]<t.blkIndent)break;for(y=!1,a=0,u=k.length;a<u;a++)if(k[a](t,c,n,!0)){y=!0;break}if(y)break;if(o=R0(t,c).trim(),!o)break;if(t.sCount[c]-t.blkIndent>=4)break;for(l=z0(o),l.length&&""===l[0]&&l.shift(),l.length&&""===l[l.length-1]&&l.pop(),c===e+2&&(d=t.push("tbody_open","tbody",1),d.map=m=[e+2,0]),d=t.push("tr_open","tr",1),d.map=[c,c+1],a=0;a<h;a++)d=t.push("td_open","td",1),f[a]&&(d.attrs=[["style","text-align:"+f[a]]]),d=t.push("inline","",0),d.content=l[a]?l[a].trim():"",d.children=[],d=t.push("td_close","td",-1);d=t.push("tr_close","tr",-1)}return m&&(d=t.push("tbody_close","tbody",-1),m[1]=c),d=t.push("table_close","table",-1),v[1]=c,t.parentType=g,t.line=c,!0},Z0=function(t,e,n){var r,i,o;if(t.sCount[e]-t.blkIndent<4)return!1;i=r=e+1;while(r<n)if(t.isEmpty(r))r++;else{if(!(t.sCount[r]-t.blkIndent>=4))break;r++,i=r}return t.line=i,o=t.push("code_block","code",0),o.content=t.getLines(e,i,4+t.blkIndent,!1)+"\n",o.map=[e,t.line],!0},q0=function(t,e,n,r){var i,o,s,a,u,c,l,h=!1,d=t.bMarks[e]+t.tShift[e],f=t.eMarks[e];if(t.sCount[e]-t.blkIndent>=4)return!1;if(d+3>f)return!1;if(i=t.src.charCodeAt(d),126!==i&&96!==i)return!1;if(u=d,d=t.skipChars(d,i),o=d-u,o<3)return!1;if(l=t.src.slice(u,d),s=t.src.slice(d,f),96===i&&s.indexOf(String.fromCharCode(i))>=0)return!1;if(r)return!0;for(a=e;;){if(a++,a>=n)break;if(d=u=t.bMarks[a]+t.tShift[a],f=t.eMarks[a],d<f&&t.sCount[a]<t.blkIndent)break;if(t.src.charCodeAt(d)===i&&(!(t.sCount[a]-t.blkIndent>=4)&&(d=t.skipChars(d,i),!(d-u<o)&&(d=t.skipSpaces(d),!(d<f))))){h=!0;break}}return o=t.sCount[e],t.line=a+(h?1:0),c=t.push("fence","code",0),c.info=s,c.content=t.getLines(e+1,a,o,!0),c.markup=l,c.map=[e,t.line],!0},j0=zX.isSpace,$0=function(t,e,n,r){var i,o,s,a,u,c,l,h,d,f,p,v,m,g,y,k,b,w,D,x,C=t.lineMax,A=t.bMarks[e]+t.tShift[e],E=t.eMarks[e];if(t.sCount[e]-t.blkIndent>=4)return!1;if(62!==t.src.charCodeAt(A++))return!1;if(r)return!0;a=d=t.sCount[e]+1,32===t.src.charCodeAt(A)?(A++,a++,d++,i=!1,k=!0):9===t.src.charCodeAt(A)?(k=!0,(t.bsCount[e]+d)%4===3?(A++,a++,d++,i=!1):i=!0):k=!1,f=[t.bMarks[e]],t.bMarks[e]=A;while(A<E){if(o=t.src.charCodeAt(A),!j0(o))break;9===o?d+=4-(d+t.bsCount[e]+(i?1:0))%4:d++,A++}for(p=[t.bsCount[e]],t.bsCount[e]=t.sCount[e]+1+(k?1:0),c=A>=E,g=[t.sCount[e]],t.sCount[e]=d-a,y=[t.tShift[e]],t.tShift[e]=A-t.bMarks[e],w=t.md.block.ruler.getRules("blockquote"),m=t.parentType,t.parentType="blockquote",h=e+1;h<n;h++){if(x=t.sCount[h]<t.blkIndent,A=t.bMarks[h]+t.tShift[h],E=t.eMarks[h],A>=E)break;if(62!==t.src.charCodeAt(A++)||x){if(c)break;for(b=!1,s=0,u=w.length;s<u;s++)if(w[s](t,h,n,!0)){b=!0;break}if(b){t.lineMax=h,0!==t.blkIndent&&(f.push(t.bMarks[h]),p.push(t.bsCount[h]),y.push(t.tShift[h]),g.push(t.sCount[h]),t.sCount[h]-=t.blkIndent);break}f.push(t.bMarks[h]),p.push(t.bsCount[h]),y.push(t.tShift[h]),g.push(t.sCount[h]),t.sCount[h]=-1}else{a=d=t.sCount[h]+1,32===t.src.charCodeAt(A)?(A++,a++,d++,i=!1,k=!0):9===t.src.charCodeAt(A)?(k=!0,(t.bsCount[h]+d)%4===3?(A++,a++,d++,i=!1):i=!0):k=!1,f.push(t.bMarks[h]),t.bMarks[h]=A;while(A<E){if(o=t.src.charCodeAt(A),!j0(o))break;9===o?d+=4-(d+t.bsCount[h]+(i?1:0))%4:d++,A++}c=A>=E,p.push(t.bsCount[h]),t.bsCount[h]=t.sCount[h]+1+(k?1:0),g.push(t.sCount[h]),t.sCount[h]=d-a,y.push(t.tShift[h]),t.tShift[h]=A-t.bMarks[h]}}for(v=t.blkIndent,t.blkIndent=0,D=t.push("blockquote_open","blockquote",1),D.markup=">",D.map=l=[e,0],t.md.block.tokenize(t,e,h),D=t.push("blockquote_close","blockquote",-1),D.markup=">",t.lineMax=C,t.parentType=m,l[1]=t.line,s=0;s<y.length;s++)t.bMarks[s+e]=f[s],t.tShift[s+e]=y[s],t.sCount[s+e]=g[s],t.bsCount[s+e]=p[s];return t.blkIndent=v,!0},V0=zX.isSpace,H0=function(t,e,n,r){var i,o,s,a,u=t.bMarks[e]+t.tShift[e],c=t.eMarks[e];if(t.sCount[e]-t.blkIndent>=4)return!1;if(i=t.src.charCodeAt(u++),42!==i&&45!==i&&95!==i)return!1;o=1;while(u<c){if(s=t.src.charCodeAt(u++),s!==i&&!V0(s))return!1;s===i&&o++}return!(o<3)&&(r||(t.line=e+1,a=t.push("hr","hr",0),a.map=[e,t.line],a.markup=Array(o+1).join(String.fromCharCode(i))),!0)},J0=zX.isSpace;function K0(t,e){var n,r,i,o;return r=t.bMarks[e]+t.tShift[e],i=t.eMarks[e],n=t.src.charCodeAt(r++),42!==n&&45!==n&&43!==n||r<i&&(o=t.src.charCodeAt(r),!J0(o))?-1:r}function W0(t,e){var n,r=t.bMarks[e]+t.tShift[e],i=r,o=t.eMarks[e];if(i+1>=o)return-1;if(n=t.src.charCodeAt(i++),n<48||n>57)return-1;for(;;){if(i>=o)return-1;if(n=t.src.charCodeAt(i++),!(n>=48&&n<=57)){if(41===n||46===n)break;return-1}if(i-r>=10)return-1}return i<o&&(n=t.src.charCodeAt(i),!J0(n))?-1:i}function U0(t,e){var n,r,i=t.level+2;for(n=e+2,r=t.tokens.length-2;n<r;n++)t.tokens[n].level===i&&"paragraph_open"===t.tokens[n].type&&(t.tokens[n+2].hidden=!0,t.tokens[n].hidden=!0,n+=2)}var G0=function(t,e,n,r){var i,o,s,a,u,c,l,h,d,f,p,v,m,g,y,k,b,w,D,x,C,A,E,S,_,M,O,T,F=!1,N=!0;if(t.sCount[e]-t.blkIndent>=4)return!1;if(t.listIndent>=0&&t.sCount[e]-t.listIndent>=4&&t.sCount[e]<t.blkIndent)return!1;if(r&&"paragraph"===t.parentType&&t.sCount[e]>=t.blkIndent&&(F=!0),(E=W0(t,e))>=0){if(l=!0,_=t.bMarks[e]+t.tShift[e],m=Number(t.src.slice(_,E-1)),F&&1!==m)return!1}else{if(!((E=K0(t,e))>=0))return!1;l=!1}if(F&&t.skipSpaces(E)>=t.eMarks[e])return!1;if(v=t.src.charCodeAt(E-1),r)return!0;p=t.tokens.length,l?(T=t.push("ordered_list_open","ol",1),1!==m&&(T.attrs=[["start",m]])):T=t.push("bullet_list_open","ul",1),T.map=f=[e,0],T.markup=String.fromCharCode(v),y=e,S=!1,O=t.md.block.ruler.getRules("list"),w=t.parentType,t.parentType="list";while(y<n){A=E,g=t.eMarks[y],c=k=t.sCount[y]+E-(t.bMarks[e]+t.tShift[e]);while(A<g){if(i=t.src.charCodeAt(A),9===i)k+=4-(k+t.bsCount[y])%4;else{if(32!==i)break;k++}A++}if(o=A,u=o>=g?1:k-c,u>4&&(u=1),a=c+u,T=t.push("list_item_open","li",1),T.markup=String.fromCharCode(v),T.map=h=[e,0],l&&(T.info=t.src.slice(_,E-1)),C=t.tight,x=t.tShift[e],D=t.sCount[e],b=t.listIndent,t.listIndent=t.blkIndent,t.blkIndent=a,t.tight=!0,t.tShift[e]=o-t.bMarks[e],t.sCount[e]=k,o>=g&&t.isEmpty(e+1)?t.line=Math.min(t.line+2,n):t.md.block.tokenize(t,e,n,!0),t.tight&&!S||(N=!1),S=t.line-e>1&&t.isEmpty(t.line-1),t.blkIndent=t.listIndent,t.listIndent=b,t.tShift[e]=x,t.sCount[e]=D,t.tight=C,T=t.push("list_item_close","li",-1),T.markup=String.fromCharCode(v),y=e=t.line,h[1]=y,o=t.bMarks[e],y>=n)break;if(t.sCount[y]<t.blkIndent)break;if(t.sCount[e]-t.blkIndent>=4)break;for(M=!1,s=0,d=O.length;s<d;s++)if(O[s](t,y,n,!0)){M=!0;break}if(M)break;if(l){if(E=W0(t,y),E<0)break;_=t.bMarks[y]+t.tShift[y]}else if(E=K0(t,y),E<0)break;if(v!==t.src.charCodeAt(E-1))break}return T=l?t.push("ordered_list_close","ol",-1):t.push("bullet_list_close","ul",-1),T.markup=String.fromCharCode(v),f[1]=y,t.line=y,t.parentType=w,N&&U0(t,p),!0},Y0=zX.normalizeReference,Q0=zX.isSpace,X0=function(t,e,n,r){var i,o,s,a,u,c,l,h,d,f,p,v,m,g,y,k,b=0,w=t.bMarks[e]+t.tShift[e],D=t.eMarks[e],x=e+1;if(t.sCount[e]-t.blkIndent>=4)return!1;if(91!==t.src.charCodeAt(w))return!1;while(++w<D)if(93===t.src.charCodeAt(w)&&92!==t.src.charCodeAt(w-1)){if(w+1===D)return!1;if(58!==t.src.charCodeAt(w+1))return!1;break}for(a=t.lineMax,y=t.md.block.ruler.getRules("reference"),f=t.parentType,t.parentType="reference";x<a&&!t.isEmpty(x);x++)if(!(t.sCount[x]-t.blkIndent>3)&&!(t.sCount[x]<0)){for(g=!1,c=0,l=y.length;c<l;c++)if(y[c](t,x,a,!0)){g=!0;break}if(g)break}for(m=t.getLines(e,x,t.blkIndent,!1).trim(),D=m.length,w=1;w<D;w++){if(i=m.charCodeAt(w),91===i)return!1;if(93===i){d=w;break}10===i?b++:92===i&&(w++,w<D&&10===m.charCodeAt(w)&&b++)}if(d<0||58!==m.charCodeAt(d+1))return!1;for(w=d+2;w<D;w++)if(i=m.charCodeAt(w),10===i)b++;else if(!Q0(i))break;if(p=t.md.helpers.parseLinkDestination(m,w,D),!p.ok)return!1;if(u=t.md.normalizeLink(p.str),!t.md.validateLink(u))return!1;for(w=p.pos,b+=p.lines,o=w,s=b,v=w;w<D;w++)if(i=m.charCodeAt(w),10===i)b++;else if(!Q0(i))break;p=t.md.helpers.parseLinkTitle(m,w,D),w<D&&v!==w&&p.ok?(k=p.str,w=p.pos,b+=p.lines):(k="",w=o,b=s);while(w<D){if(i=m.charCodeAt(w),!Q0(i))break;w++}if(w<D&&10!==m.charCodeAt(w)&&k){k="",w=o,b=s;while(w<D){if(i=m.charCodeAt(w),!Q0(i))break;w++}}return!(w<D&&10!==m.charCodeAt(w))&&(h=Y0(m.slice(1,d)),!!h&&(r||("undefined"===typeof t.env.references&&(t.env.references={}),"undefined"===typeof t.env.references[h]&&(t.env.references[h]={title:k,href:u}),t.parentType=f,t.line=e+b+1),!0))},t1=["address","article","aside","base","basefont","blockquote","body","caption","center","col","colgroup","dd","details","dialog","dir","div","dl","dt","fieldset","figcaption","figure","footer","form","frame","frameset","h1","h2","h3","h4","h5","h6","head","header","hr","html","iframe","legend","li","link","main","menu","menuitem","nav","noframes","ol","optgroup","option","p","param","section","source","summary","table","tbody","td","tfoot","th","thead","title","tr","track","ul"],e1="[a-zA-Z_:][a-zA-Z0-9:._-]*",n1="[^\"'=<>`\\x00-\\x20]+",r1="'[^']*'",i1='"[^"]*"',o1="(?:"+n1+"|"+r1+"|"+i1+")",s1="(?:\\s+"+e1+"(?:\\s*=\\s*"+o1+")?)",a1="<[A-Za-z][A-Za-z0-9\\-]*"+s1+"*\\s*\\/?>",u1="<\\/[A-Za-z][A-Za-z0-9\\-]*\\s*>",c1="\x3c!----\x3e|\x3c!--(?:-?[^>-])(?:-?[^-])*--\x3e",l1="<[?][\\s\\S]*?[?]>",h1="<![A-Z]+\\s+[^>]*>",d1="<!\\[CDATA\\[[\\s\\S]*?\\]\\]>",f1=new RegExp("^(?:"+a1+"|"+u1+"|"+c1+"|"+l1+"|"+h1+"|"+d1+")"),p1=new RegExp("^(?:"+a1+"|"+u1+")"),v1=f1,m1=p1,g1={HTML_TAG_RE:v1,HTML_OPEN_CLOSE_TAG_RE:m1},y1=g1.HTML_OPEN_CLOSE_TAG_RE,k1=[[/^<(script|pre|style|textarea)(?=(\s|>|$))/i,/<\/(script|pre|style|textarea)>/i,!0],[/^<!--/,/-->/,!0],[/^<\?/,/\?>/,!0],[/^<![A-Z]/,/>/,!0],[/^<!\[CDATA\[/,/\]\]>/,!0],[new RegExp("^</?("+t1.join("|")+")(?=(\\s|/?>|$))","i"),/^$/,!0],[new RegExp(y1.source+"\\s*$"),/^$/,!1]],b1=function(t,e,n,r){var i,o,s,a,u=t.bMarks[e]+t.tShift[e],c=t.eMarks[e];if(t.sCount[e]-t.blkIndent>=4)return!1;if(!t.md.options.html)return!1;if(60!==t.src.charCodeAt(u))return!1;for(a=t.src.slice(u,c),i=0;i<k1.length;i++)if(k1[i][0].test(a))break;if(i===k1.length)return!1;if(r)return k1[i][2];if(o=e+1,!k1[i][1].test(a))for(;o<n;o++){if(t.sCount[o]<t.blkIndent)break;if(u=t.bMarks[o]+t.tShift[o],c=t.eMarks[o],a=t.src.slice(u,c),k1[i][1].test(a)){0!==a.length&&o++;break}}return t.line=o,s=t.push("html_block","",0),s.map=[e,o],s.content=t.getLines(e,o,t.blkIndent,!0),!0},w1=zX.isSpace,D1=function(t,e,n,r){var i,o,s,a,u=t.bMarks[e]+t.tShift[e],c=t.eMarks[e];if(t.sCount[e]-t.blkIndent>=4)return!1;if(i=t.src.charCodeAt(u),35!==i||u>=c)return!1;o=1,i=t.src.charCodeAt(++u);while(35===i&&u<c&&o<=6)o++,i=t.src.charCodeAt(++u);return!(o>6||u<c&&!w1(i))&&(r||(c=t.skipSpacesBack(c,u),s=t.skipCharsBack(c,35,u),s>u&&w1(t.src.charCodeAt(s-1))&&(c=s),t.line=e+1,a=t.push("heading_open","h"+String(o),1),a.markup="########".slice(0,o),a.map=[e,t.line],a=t.push("inline","",0),a.content=t.src.slice(u,c).trim(),a.map=[e,t.line],a.children=[],a=t.push("heading_close","h"+String(o),-1),a.markup="########".slice(0,o)),!0)},x1=function(t,e,n){var r,i,o,s,a,u,c,l,h,d,f=e+1,p=t.md.block.ruler.getRules("paragraph");if(t.sCount[e]-t.blkIndent>=4)return!1;for(d=t.parentType,t.parentType="paragraph";f<n&&!t.isEmpty(f);f++)if(!(t.sCount[f]-t.blkIndent>3)){if(t.sCount[f]>=t.blkIndent&&(u=t.bMarks[f]+t.tShift[f],c=t.eMarks[f],u<c&&(h=t.src.charCodeAt(u),(45===h||61===h)&&(u=t.skipChars(u,h),u=t.skipSpaces(u),u>=c)))){l=61===h?1:2;break}if(!(t.sCount[f]<0)){for(i=!1,o=0,s=p.length;o<s;o++)if(p[o](t,f,n,!0)){i=!0;break}if(i)break}}return!!l&&(r=t.getLines(e,f,t.blkIndent,!1).trim(),t.line=f+1,a=t.push("heading_open","h"+String(l),1),a.markup=String.fromCharCode(h),a.map=[e,t.line],a=t.push("inline","",0),a.content=r,a.map=[e,t.line-1],a.children=[],a=t.push("heading_close","h"+String(l),-1),a.markup=String.fromCharCode(h),t.parentType=d,!0)},C1=function(t,e){var n,r,i,o,s,a,u=e+1,c=t.md.block.ruler.getRules("paragraph"),l=t.lineMax;for(a=t.parentType,t.parentType="paragraph";u<l&&!t.isEmpty(u);u++)if(!(t.sCount[u]-t.blkIndent>3)&&!(t.sCount[u]<0)){for(r=!1,i=0,o=c.length;i<o;i++)if(c[i](t,u,l,!0)){r=!0;break}if(r)break}return n=t.getLines(e,u,t.blkIndent,!1).trim(),t.line=u,s=t.push("paragraph_open","p",1),s.map=[e,t.line],s=t.push("inline","",0),s.content=n,s.map=[e,t.line],s.children=[],s=t.push("paragraph_close","p",-1),t.parentType=a,!0},A1=zX.isSpace;function E1(t,e,n,r){var i,o,s,a,u,c,l,h;for(this.src=t,this.md=e,this.env=n,this.tokens=r,this.bMarks=[],this.eMarks=[],this.tShift=[],this.sCount=[],this.bsCount=[],this.blkIndent=0,this.line=0,this.lineMax=0,this.tight=!1,this.ddIndent=-1,this.listIndent=-1,this.parentType="root",this.level=0,this.result="",o=this.src,h=!1,s=a=c=l=0,u=o.length;a<u;a++){if(i=o.charCodeAt(a),!h){if(A1(i)){c++,9===i?l+=4-l%4:l++;continue}h=!0}10!==i&&a!==u-1||(10!==i&&a++,this.bMarks.push(s),this.eMarks.push(a),this.tShift.push(c),this.sCount.push(l),this.bsCount.push(0),h=!1,c=0,l=0,s=a+1)}this.bMarks.push(o.length),this.eMarks.push(o.length),this.tShift.push(0),this.sCount.push(0),this.bsCount.push(0),this.lineMax=this.bMarks.length-1}E1.prototype.push=function(t,e,n){var r=new O0(t,e,n);return r.block=!0,n<0&&this.level--,r.level=this.level,n>0&&this.level++,this.tokens.push(r),r},E1.prototype.isEmpty=function(t){return this.bMarks[t]+this.tShift[t]>=this.eMarks[t]},E1.prototype.skipEmptyLines=function(t){for(var e=this.lineMax;t<e;t++)if(this.bMarks[t]+this.tShift[t]<this.eMarks[t])break;return t},E1.prototype.skipSpaces=function(t){for(var e,n=this.src.length;t<n;t++)if(e=this.src.charCodeAt(t),!A1(e))break;return t},E1.prototype.skipSpacesBack=function(t,e){if(t<=e)return t;while(t>e)if(!A1(this.src.charCodeAt(--t)))return t+1;return t},E1.prototype.skipChars=function(t,e){for(var n=this.src.length;t<n;t++)if(this.src.charCodeAt(t)!==e)break;return t},E1.prototype.skipCharsBack=function(t,e,n){if(t<=n)return t;while(t>n)if(e!==this.src.charCodeAt(--t))return t+1;return t},E1.prototype.getLines=function(t,e,n,r){var i,o,s,a,u,c,l,h=t;if(t>=e)return"";for(c=new Array(e-t),i=0;h<e;h++,i++){o=0,l=a=this.bMarks[h],u=h+1<e||r?this.eMarks[h]+1:this.eMarks[h];while(a<u&&o<n){if(s=this.src.charCodeAt(a),A1(s))9===s?o+=4-(o+this.bsCount[h])%4:o++;else{if(!(a-l<this.tShift[h]))break;o++}a++}c[i]=o>n?new Array(o-n+1).join(" ")+this.src.slice(a,u):this.src.slice(a,u)}return c.join("")},E1.prototype.Token=O0;var S1=E1,_1=[["table",P0,["paragraph","reference"]],["code",Z0],["fence",q0,["paragraph","reference","blockquote","list"]],["blockquote",$0,["paragraph","reference","blockquote","list"]],["hr",H0,["paragraph","reference","blockquote","list"]],["list",G0,["paragraph","reference","blockquote"]],["reference",X0],["html_block",b1,["paragraph","reference","blockquote"]],["heading",D1,["paragraph","reference","blockquote"]],["lheading",x1],["paragraph",C1]];function M1(){this.ruler=new e0;for(var t=0;t<_1.length;t++)this.ruler.push(_1[t][0],_1[t][1],{alt:(_1[t][2]||[]).slice()})}M1.prototype.tokenize=function(t,e,n){var r,i,o=this.ruler.getRules(""),s=o.length,a=e,u=!1,c=t.md.options.maxNesting;while(a<n){if(t.line=a=t.skipEmptyLines(a),a>=n)break;if(t.sCount[a]<t.blkIndent)break;if(t.level>=c){t.line=n;break}for(i=0;i<s;i++)if(r=o[i](t,a,n,!1),r)break;t.tight=!u,t.isEmpty(t.line-1)&&(u=!0),a=t.line,a<n&&t.isEmpty(a)&&(u=!0,a++,t.line=a)}},M1.prototype.parse=function(t,e,n,r){var i;t&&(i=new this.State(t,e,n,r),this.tokenize(i,i.line,i.lineMax))},M1.prototype.State=S1;var O1=M1;function T1(t){switch(t){case 10:case 33:case 35:case 36:case 37:case 38:case 42:case 43:case 45:case 58:case 60:case 61:case 62:case 64:case 91:case 92:case 93:case 94:case 95:case 96:case 123:case 125:case 126:return!0;default:return!1}}for(var F1=function(t,e){var n=t.pos;while(n<t.posMax&&!T1(t.src.charCodeAt(n)))n++;return n!==t.pos&&(e||(t.pending+=t.src.slice(t.pos,n)),t.pos=n,!0)},N1=/(?:^|[^a-z0-9.+-])([a-z][a-z0-9.+-]*)$/i,B1=function(t,e){var n,r,i,o,s,a,u,c;return!!t.md.options.linkify&&(!(t.linkLevel>0)&&(n=t.pos,r=t.posMax,!(n+3>r)&&(58===t.src.charCodeAt(n)&&(47===t.src.charCodeAt(n+1)&&(47===t.src.charCodeAt(n+2)&&(i=t.pending.match(N1),!!i&&(o=i[1],s=t.md.linkify.matchAtStart(t.src.slice(n-o.length)),!!s&&(a=s.url,a=a.replace(/\*+$/,""),u=t.md.normalizeLink(a),!!t.md.validateLink(u)&&(e||(t.pending=t.pending.slice(0,-o.length),c=t.push("link_open","a",1),c.attrs=[["href",u]],c.markup="linkify",c.info="auto",c=t.push("text","",0),c.content=t.md.normalizeLinkText(a),c=t.push("link_close","a",-1),c.markup="linkify",c.info="auto"),t.pos+=a.length-o.length,!0)))))))))},I1=zX.isSpace,L1=function(t,e){var n,r,i,o=t.pos;if(10!==t.src.charCodeAt(o))return!1;if(n=t.pending.length-1,r=t.posMax,!e)if(n>=0&&32===t.pending.charCodeAt(n))if(n>=1&&32===t.pending.charCodeAt(n-1)){i=n-1;while(i>=1&&32===t.pending.charCodeAt(i-1))i--;t.pending=t.pending.slice(0,i),t.push("hardbreak","br",0)}else t.pending=t.pending.slice(0,-1),t.push("softbreak","br",0);else t.push("softbreak","br",0);o++;while(o<r&&I1(t.src.charCodeAt(o)))o++;return t.pos=o,!0},R1=zX.isSpace,z1=[],P1=0;P1<256;P1++)z1.push(0);"\\!\"#$%&'()*+,./:;<=>?@[]^_`{|}~-".split("").forEach((function(t){z1[t.charCodeAt(0)]=1}));var Z1=function(t,e){var n,r,i,o,s,a=t.pos,u=t.posMax;if(92!==t.src.charCodeAt(a))return!1;if(a++,a>=u)return!1;if(n=t.src.charCodeAt(a),10===n){e||t.push("hardbreak","br",0),a++;while(a<u){if(n=t.src.charCodeAt(a),!R1(n))break;a++}return t.pos=a,!0}return o=t.src[a],n>=55296&&n<=56319&&a+1<u&&(r=t.src.charCodeAt(a+1),r>=56320&&r<=57343&&(o+=t.src[a+1],a++)),i="\\"+o,e||(s=t.push("text_special","",0),n<256&&0!==z1[n]?s.content=o:s.content=i,s.markup=i,s.info="escape"),t.pos=a+1,!0},q1=function(t,e){var n,r,i,o,s,a,u,c,l=t.pos,h=t.src.charCodeAt(l);if(96!==h)return!1;n=l,l++,r=t.posMax;while(l<r&&96===t.src.charCodeAt(l))l++;if(i=t.src.slice(n,l),u=i.length,t.backticksScanned&&(t.backticks[u]||0)<=n)return e||(t.pending+=i),t.pos+=u,!0;s=a=l;while(-1!==(s=t.src.indexOf("`",a))){a=s+1;while(a<r&&96===t.src.charCodeAt(a))a++;if(c=a-s,c===u)return e||(o=t.push("code_inline","code",0),o.markup=i,o.content=t.src.slice(l,s).replace(/\n/g," ").replace(/^ (.+) $/,"$1")),t.pos=a,!0;t.backticks[c]=s}return t.backticksScanned=!0,e||(t.pending+=i),t.pos+=u,!0},j1=function(t,e){var n,r,i,o,s,a=t.pos,u=t.src.charCodeAt(a);if(e)return!1;if(126!==u)return!1;if(r=t.scanDelims(t.pos,!0),o=r.length,s=String.fromCharCode(u),o<2)return!1;for(o%2&&(i=t.push("text","",0),i.content=s,o--),n=0;n<o;n+=2)i=t.push("text","",0),i.content=s+s,t.delimiters.push({marker:u,length:0,token:t.tokens.length-1,end:-1,open:r.can_open,close:r.can_close});return t.pos+=r.length,!0};function $1(t,e){var n,r,i,o,s,a=[],u=e.length;for(n=0;n<u;n++)i=e[n],126===i.marker&&-1!==i.end&&(o=e[i.end],s=t.tokens[i.token],s.type="s_open",s.tag="s",s.nesting=1,s.markup="~~",s.content="",s=t.tokens[o.token],s.type="s_close",s.tag="s",s.nesting=-1,s.markup="~~",s.content="","text"===t.tokens[o.token-1].type&&"~"===t.tokens[o.token-1].content&&a.push(o.token-1));while(a.length){n=a.pop(),r=n+1;while(r<t.tokens.length&&"s_close"===t.tokens[r].type)r++;r--,n!==r&&(s=t.tokens[r],t.tokens[r]=t.tokens[n],t.tokens[n]=s)}}var V1=function(t){var e,n=t.tokens_meta,r=t.tokens_meta.length;for($1(t,t.delimiters),e=0;e<r;e++)n[e]&&n[e].delimiters&&$1(t,n[e].delimiters)},H1={tokenize:j1,postProcess:V1},J1=function(t,e){var n,r,i,o=t.pos,s=t.src.charCodeAt(o);if(e)return!1;if(95!==s&&42!==s)return!1;for(r=t.scanDelims(t.pos,42===s),n=0;n<r.length;n++)i=t.push("text","",0),i.content=String.fromCharCode(s),t.delimiters.push({marker:s,length:r.length,token:t.tokens.length-1,end:-1,open:r.can_open,close:r.can_close});return t.pos+=r.length,!0};function K1(t,e){var n,r,i,o,s,a,u=e.length;for(n=u-1;n>=0;n--)r=e[n],95!==r.marker&&42!==r.marker||-1!==r.end&&(i=e[r.end],a=n>0&&e[n-1].end===r.end+1&&e[n-1].marker===r.marker&&e[n-1].token===r.token-1&&e[r.end+1].token===i.token+1,s=String.fromCharCode(r.marker),o=t.tokens[r.token],o.type=a?"strong_open":"em_open",o.tag=a?"strong":"em",o.nesting=1,o.markup=a?s+s:s,o.content="",o=t.tokens[i.token],o.type=a?"strong_close":"em_close",o.tag=a?"strong":"em",o.nesting=-1,o.markup=a?s+s:s,o.content="",a&&(t.tokens[e[n-1].token].content="",t.tokens[e[r.end+1].token].content="",n--))}var W1=function(t){var e,n=t.tokens_meta,r=t.tokens_meta.length;for(K1(t,t.delimiters),e=0;e<r;e++)n[e]&&n[e].delimiters&&K1(t,n[e].delimiters)},U1={tokenize:J1,postProcess:W1},G1=zX.normalizeReference,Y1=zX.isSpace,Q1=function(t,e){var n,r,i,o,s,a,u,c,l,h="",d="",f=t.pos,p=t.posMax,v=t.pos,m=!0;if(91!==t.src.charCodeAt(t.pos))return!1;if(s=t.pos+1,o=t.md.helpers.parseLinkLabel(t,t.pos,!0),o<0)return!1;if(a=o+1,a<p&&40===t.src.charCodeAt(a)){for(m=!1,a++;a<p;a++)if(r=t.src.charCodeAt(a),!Y1(r)&&10!==r)break;if(a>=p)return!1;if(v=a,u=t.md.helpers.parseLinkDestination(t.src,a,t.posMax),u.ok){for(h=t.md.normalizeLink(u.str),t.md.validateLink(h)?a=u.pos:h="",v=a;a<p;a++)if(r=t.src.charCodeAt(a),!Y1(r)&&10!==r)break;if(u=t.md.helpers.parseLinkTitle(t.src,a,t.posMax),a<p&&v!==a&&u.ok)for(d=u.str,a=u.pos;a<p;a++)if(r=t.src.charCodeAt(a),!Y1(r)&&10!==r)break}(a>=p||41!==t.src.charCodeAt(a))&&(m=!0),a++}if(m){if("undefined"===typeof t.env.references)return!1;if(a<p&&91===t.src.charCodeAt(a)?(v=a+1,a=t.md.helpers.parseLinkLabel(t,a),a>=0?i=t.src.slice(v,a++):a=o+1):a=o+1,i||(i=t.src.slice(s,o)),c=t.env.references[G1(i)],!c)return t.pos=f,!1;h=c.href,d=c.title}return e||(t.pos=s,t.posMax=o,l=t.push("link_open","a",1),l.attrs=n=[["href",h]],d&&n.push(["title",d]),t.linkLevel++,t.md.inline.tokenize(t),t.linkLevel--,l=t.push("link_close","a",-1)),t.pos=a,t.posMax=p,!0},X1=zX.normalizeReference,t2=zX.isSpace,e2=function(t,e){var n,r,i,o,s,a,u,c,l,h,d,f,p,v="",m=t.pos,g=t.posMax;if(33!==t.src.charCodeAt(t.pos))return!1;if(91!==t.src.charCodeAt(t.pos+1))return!1;if(a=t.pos+2,s=t.md.helpers.parseLinkLabel(t,t.pos+1,!1),s<0)return!1;if(u=s+1,u<g&&40===t.src.charCodeAt(u)){for(u++;u<g;u++)if(r=t.src.charCodeAt(u),!t2(r)&&10!==r)break;if(u>=g)return!1;for(p=u,l=t.md.helpers.parseLinkDestination(t.src,u,t.posMax),l.ok&&(v=t.md.normalizeLink(l.str),t.md.validateLink(v)?u=l.pos:v=""),p=u;u<g;u++)if(r=t.src.charCodeAt(u),!t2(r)&&10!==r)break;if(l=t.md.helpers.parseLinkTitle(t.src,u,t.posMax),u<g&&p!==u&&l.ok){for(h=l.str,u=l.pos;u<g;u++)if(r=t.src.charCodeAt(u),!t2(r)&&10!==r)break}else h="";if(u>=g||41!==t.src.charCodeAt(u))return t.pos=m,!1;u++}else{if("undefined"===typeof t.env.references)return!1;if(u<g&&91===t.src.charCodeAt(u)?(p=u+1,u=t.md.helpers.parseLinkLabel(t,u),u>=0?o=t.src.slice(p,u++):u=s+1):u=s+1,o||(o=t.src.slice(a,s)),c=t.env.references[X1(o)],!c)return t.pos=m,!1;v=c.href,h=c.title}return e||(i=t.src.slice(a,s),t.md.inline.parse(i,t.md,t.env,f=[]),d=t.push("image","img",0),d.attrs=n=[["src",v],["alt",""]],d.children=f,d.content=i,h&&n.push(["title",h])),t.pos=u,t.posMax=g,!0},n2=/^([a-zA-Z0-9.!#$%&'*+\/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*)$/,r2=/^([a-zA-Z][a-zA-Z0-9+.\-]{1,31}):([^<>\x00-\x20]*)$/,i2=function(t,e){var n,r,i,o,s,a,u=t.pos;if(60!==t.src.charCodeAt(u))return!1;for(s=t.pos,a=t.posMax;;){if(++u>=a)return!1;if(o=t.src.charCodeAt(u),60===o)return!1;if(62===o)break}return n=t.src.slice(s+1,u),r2.test(n)?(r=t.md.normalizeLink(n),!!t.md.validateLink(r)&&(e||(i=t.push("link_open","a",1),i.attrs=[["href",r]],i.markup="autolink",i.info="auto",i=t.push("text","",0),i.content=t.md.normalizeLinkText(n),i=t.push("link_close","a",-1),i.markup="autolink",i.info="auto"),t.pos+=n.length+2,!0)):!!n2.test(n)&&(r=t.md.normalizeLink("mailto:"+n),!!t.md.validateLink(r)&&(e||(i=t.push("link_open","a",1),i.attrs=[["href",r]],i.markup="autolink",i.info="auto",i=t.push("text","",0),i.content=t.md.normalizeLinkText(n),i=t.push("link_close","a",-1),i.markup="autolink",i.info="auto"),t.pos+=n.length+2,!0))},o2=g1.HTML_TAG_RE;function s2(t){return/^<a[>\s]/i.test(t)}function a2(t){return/^<\/a\s*>/i.test(t)}function u2(t){var e=32|t;return e>=97&&e<=122}var c2=function(t,e){var n,r,i,o,s=t.pos;return!!t.md.options.html&&(i=t.posMax,!(60!==t.src.charCodeAt(s)||s+2>=i)&&(n=t.src.charCodeAt(s+1),!(33!==n&&63!==n&&47!==n&&!u2(n))&&(r=t.src.slice(s).match(o2),!!r&&(e||(o=t.push("html_inline","",0),o.content=t.src.slice(s,s+r[0].length),s2(o.content)&&t.linkLevel++,a2(o.content)&&t.linkLevel--),t.pos+=r[0].length,!0))))},l2=zX.has,h2=zX.isValidEntityCode,d2=zX.fromCodePoint,f2=/^&#((?:x[a-f0-9]{1,6}|[0-9]{1,7}));/i,p2=/^&([a-z][a-z0-9]{1,31});/i,v2=function(t,e){var n,r,i,o,s=t.pos,a=t.posMax;if(38!==t.src.charCodeAt(s))return!1;if(s+1>=a)return!1;if(n=t.src.charCodeAt(s+1),35===n){if(i=t.src.slice(s).match(f2),i)return e||(r="x"===i[1][0].toLowerCase()?parseInt(i[1].slice(1),16):parseInt(i[1],10),o=t.push("text_special","",0),o.content=h2(r)?d2(r):d2(65533),o.markup=i[0],o.info="entity"),t.pos+=i[0].length,!0}else if(i=t.src.slice(s).match(p2),i&&l2(GQ,i[1]))return e||(o=t.push("text_special","",0),o.content=GQ[i[1]],o.markup=i[0],o.info="entity"),t.pos+=i[0].length,!0;return!1};function m2(t,e){var n,r,i,o,s,a,u,c,l={},h=e.length;if(h){var d=0,f=-2,p=[];for(n=0;n<h;n++)if(i=e[n],p.push(0),e[d].marker===i.marker&&f===i.token-1||(d=n),f=i.token,i.length=i.length||0,i.close){for(l.hasOwnProperty(i.marker)||(l[i.marker]=[-1,-1,-1,-1,-1,-1]),s=l[i.marker][(i.open?3:0)+i.length%3],r=d-p[d]-1,a=r;r>s;r-=p[r]+1)if(o=e[r],o.marker===i.marker&&o.open&&o.end<0&&(u=!1,(o.close||i.open)&&(o.length+i.length)%3===0&&(o.length%3===0&&i.length%3===0||(u=!0)),!u)){c=r>0&&!e[r-1].open?p[r-1]+1:0,p[n]=n-r+c,p[r]=c,i.open=!1,o.end=n,o.close=!1,a=-1,f=-2;break}-1!==a&&(l[i.marker][(i.open?3:0)+(i.length||0)%3]=a)}}}var g2=function(t){var e,n=t.tokens_meta,r=t.tokens_meta.length;for(m2(t,t.delimiters),e=0;e<r;e++)n[e]&&n[e].delimiters&&m2(t,n[e].delimiters)},y2=function(t){var e,n,r=0,i=t.tokens,o=t.tokens.length;for(e=n=0;e<o;e++)i[e].nesting<0&&r--,i[e].level=r,i[e].nesting>0&&r++,"text"===i[e].type&&e+1<o&&"text"===i[e+1].type?i[e+1].content=i[e].content+i[e+1].content:(e!==n&&(i[n]=i[e]),n++);e!==n&&(i.length=n)},k2=zX.isWhiteSpace,b2=zX.isPunctChar,w2=zX.isMdAsciiPunct;function D2(t,e,n,r){this.src=t,this.env=n,this.md=e,this.tokens=r,this.tokens_meta=Array(r.length),this.pos=0,this.posMax=this.src.length,this.level=0,this.pending="",this.pendingLevel=0,this.cache={},this.delimiters=[],this._prev_delimiters=[],this.backticks={},this.backticksScanned=!1,this.linkLevel=0}D2.prototype.pushPending=function(){var t=new O0("text","",0);return t.content=this.pending,t.level=this.pendingLevel,this.tokens.push(t),this.pending="",t},D2.prototype.push=function(t,e,n){this.pending&&this.pushPending();var r=new O0(t,e,n),i=null;return n<0&&(this.level--,this.delimiters=this._prev_delimiters.pop()),r.level=this.level,n>0&&(this.level++,this._prev_delimiters.push(this.delimiters),this.delimiters=[],i={delimiters:this.delimiters}),this.pendingLevel=this.level,this.tokens.push(r),this.tokens_meta.push(i),r},D2.prototype.scanDelims=function(t,e){var n,r,i,o,s,a,u,c,l,h=t,d=!0,f=!0,p=this.posMax,v=this.src.charCodeAt(t);n=t>0?this.src.charCodeAt(t-1):32;while(h<p&&this.src.charCodeAt(h)===v)h++;return i=h-t,r=h<p?this.src.charCodeAt(h):32,u=w2(n)||b2(String.fromCharCode(n)),l=w2(r)||b2(String.fromCharCode(r)),a=k2(n),c=k2(r),c?d=!1:l&&(a||u||(d=!1)),a?f=!1:u&&(c||l||(f=!1)),e?(o=d,s=f):(o=d&&(!f||u),s=f&&(!d||l)),{can_open:o,can_close:s,length:i}},D2.prototype.Token=O0;var x2=D2,C2=[["text",F1],["linkify",B1],["newline",L1],["escape",Z1],["backticks",q1],["strikethrough",H1.tokenize],["emphasis",U1.tokenize],["link",Q1],["image",e2],["autolink",i2],["html_inline",c2],["entity",v2]],A2=[["balance_pairs",g2],["strikethrough",H1.postProcess],["emphasis",U1.postProcess],["fragments_join",y2]];function E2(){var t;for(this.ruler=new e0,t=0;t<C2.length;t++)this.ruler.push(C2[t][0],C2[t][1]);for(this.ruler2=new e0,t=0;t<A2.length;t++)this.ruler2.push(A2[t][0],A2[t][1])}E2.prototype.skipToken=function(t){var e,n,r=t.pos,i=this.ruler.getRules(""),o=i.length,s=t.md.options.maxNesting,a=t.cache;if("undefined"===typeof a[r]){if(t.level<s){for(n=0;n<o;n++)if(t.level++,e=i[n](t,!0),t.level--,e)break}else t.pos=t.posMax;e||t.pos++,a[r]=t.pos}else t.pos=a[r]},E2.prototype.tokenize=function(t){var e,n,r=this.ruler.getRules(""),i=r.length,o=t.posMax,s=t.md.options.maxNesting;while(t.pos<o){if(t.level<s)for(n=0;n<i;n++)if(e=r[n](t,!1),e)break;if(e){if(t.pos>=o)break}else t.pending+=t.src[t.pos++]}t.pending&&t.pushPending()},E2.prototype.parse=function(t,e,n,r){var i,o,s,a=new this.State(t,e,n,r);for(this.tokenize(a),o=this.ruler2.getRules(""),s=o.length,i=0;i<s;i++)o[i](a)},E2.prototype.State=x2;var S2=E2,_2=function(t){var e={};t=t||{},e.src_Any=_X.source,e.src_Cc=MX.source,e.src_Z=TX.source,e.src_P=YQ.source,e.src_ZPCc=[e.src_Z,e.src_P,e.src_Cc].join("|"),e.src_ZCc=[e.src_Z,e.src_Cc].join("|");var n="[><｜]";return e.src_pseudo_letter="(?:(?!"+n+"|"+e.src_ZPCc+")"+e.src_Any+")",e.src_ip4="(?:(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\\.){3}(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)",e.src_auth="(?:(?:(?!"+e.src_ZCc+"|[@/\\[\\]()]).)+@)?",e.src_port="(?::(?:6(?:[0-4]\\d{3}|5(?:[0-4]\\d{2}|5(?:[0-2]\\d|3[0-5])))|[1-5]?\\d{1,4}))?",e.src_host_terminator="(?=$|"+n+"|"+e.src_ZPCc+")(?!"+(t["---"]?"-(?!--)|":"-|")+"_|:\\d|\\.-|\\.(?!$|"+e.src_ZPCc+"))",e.src_path="(?:[/?#](?:(?!"+e.src_ZCc+"|"+n+"|[()[\\]{}.,\"'?!\\-;]).|\\[(?:(?!"+e.src_ZCc+"|\\]).)*\\]|\\((?:(?!"+e.src_ZCc+"|[)]).)*\\)|\\{(?:(?!"+e.src_ZCc+'|[}]).)*\\}|\\"(?:(?!'+e.src_ZCc+'|["]).)+\\"|\\\'(?:(?!'+e.src_ZCc+"|[']).)+\\'|\\'(?="+e.src_pseudo_letter+"|[-])|\\.{2,}[a-zA-Z0-9%/&]|\\.(?!"+e.src_ZCc+"|[.]|$)|"+(t["---"]?"\\-(?!--(?:[^-]|$))(?:-*)|":"\\-+|")+",(?!"+e.src_ZCc+"|$)|;(?!"+e.src_ZCc+"|$)|\\!+(?!"+e.src_ZCc+"|[!]|$)|\\?(?!"+e.src_ZCc+"|[?]|$))+|\\/)?",e.src_email_name='[\\-;:&=\\+\\$,\\.a-zA-Z0-9_][\\-;:&=\\+\\$,\\"\\.a-zA-Z0-9_]*',e.src_xn="xn--[a-z0-9\\-]{1,59}",e.src_domain_root="(?:"+e.src_xn+"|"+e.src_pseudo_letter+"{1,63})",e.src_domain="(?:"+e.src_xn+"|(?:"+e.src_pseudo_letter+")|(?:"+e.src_pseudo_letter+"(?:-|"+e.src_pseudo_letter+"){0,61}"+e.src_pseudo_letter+"))",e.src_host="(?:(?:(?:(?:"+e.src_domain+")\\.)*"+e.src_domain+"))",e.tpl_host_fuzzy="(?:"+e.src_ip4+"|(?:(?:(?:"+e.src_domain+")\\.)+(?:%TLDS%)))",e.tpl_host_no_ip_fuzzy="(?:(?:(?:"+e.src_domain+")\\.)+(?:%TLDS%))",e.src_host_strict=e.src_host+e.src_host_terminator,e.tpl_host_fuzzy_strict=e.tpl_host_fuzzy+e.src_host_terminator,e.src_host_port_strict=e.src_host+e.src_port+e.src_host_terminator,e.tpl_host_port_fuzzy_strict=e.tpl_host_fuzzy+e.src_port+e.src_host_terminator,e.tpl_host_port_no_ip_fuzzy_strict=e.tpl_host_no_ip_fuzzy+e.src_port+e.src_host_terminator,e.tpl_host_fuzzy_test="localhost|www\\.|\\.\\d{1,3}\\.|(?:\\.(?:%TLDS%)(?:"+e.src_ZPCc+"|>|$))",e.tpl_email_fuzzy="(^|"+n+'|"|\\(|'+e.src_ZCc+")("+e.src_email_name+"@"+e.tpl_host_fuzzy_strict+")",e.tpl_link_fuzzy="(^|(?![.:/\\-_@])(?:[$+<=>^`|｜]|"+e.src_ZPCc+"))((?![$+<=>^`|｜])"+e.tpl_host_port_fuzzy_strict+e.src_path+")",e.tpl_link_no_ip_fuzzy="(^|(?![.:/\\-_@])(?:[$+<=>^`|｜]|"+e.src_ZPCc+"))((?![$+<=>^`|｜])"+e.tpl_host_port_no_ip_fuzzy_strict+e.src_path+")",e};function M2(t){var e=Array.prototype.slice.call(arguments,1);return e.forEach((function(e){e&&Object.keys(e).forEach((function(n){t[n]=e[n]}))})),t}function O2(t){return Object.prototype.toString.call(t)}function T2(t){return"[object String]"===O2(t)}function F2(t){return"[object Object]"===O2(t)}function N2(t){return"[object RegExp]"===O2(t)}function B2(t){return"[object Function]"===O2(t)}function I2(t){return t.replace(/[.?*+^$[\]\\(){}|-]/g,"\\$&")}var L2={fuzzyLink:!0,fuzzyEmail:!0,fuzzyIP:!1};function R2(t){return Object.keys(t||{}).reduce((function(t,e){return t||L2.hasOwnProperty(e)}),!1)}var z2={"http:":{validate:function(t,e,n){var r=t.slice(e);return n.re.http||(n.re.http=new RegExp("^\\/\\/"+n.re.src_auth+n.re.src_host_port_strict+n.re.src_path,"i")),n.re.http.test(r)?r.match(n.re.http)[0].length:0}},"https:":"http:","ftp:":"http:","//":{validate:function(t,e,n){var r=t.slice(e);return n.re.no_http||(n.re.no_http=new RegExp("^"+n.re.src_auth+"(?:localhost|(?:(?:"+n.re.src_domain+")\\.)+"+n.re.src_domain_root+")"+n.re.src_port+n.re.src_host_terminator+n.re.src_path,"i")),n.re.no_http.test(r)?e>=3&&":"===t[e-3]||e>=3&&"/"===t[e-3]?0:r.match(n.re.no_http)[0].length:0}},"mailto:":{validate:function(t,e,n){var r=t.slice(e);return n.re.mailto||(n.re.mailto=new RegExp("^"+n.re.src_email_name+"@"+n.re.src_host_strict,"i")),n.re.mailto.test(r)?r.match(n.re.mailto)[0].length:0}}},P2="a[cdefgilmnoqrstuwxz]|b[abdefghijmnorstvwyz]|c[acdfghiklmnoruvwxyz]|d[ejkmoz]|e[cegrstu]|f[ijkmor]|g[abdefghilmnpqrstuwy]|h[kmnrtu]|i[delmnoqrst]|j[emop]|k[eghimnprwyz]|l[abcikrstuvy]|m[acdeghklmnopqrstuvwxyz]|n[acefgilopruz]|om|p[aefghklmnrstwy]|qa|r[eosuw]|s[abcdeghijklmnortuvxyz]|t[cdfghjklmnortvwz]|u[agksyz]|v[aceginu]|w[fs]|y[et]|z[amw]",Z2="biz|com|edu|gov|net|org|pro|web|xxx|aero|asia|coop|info|museum|name|shop|рф".split("|");function q2(t){t.__index__=-1,t.__text_cache__=""}function j2(t){return function(e,n){var r=e.slice(n);return t.test(r)?r.match(t)[0].length:0}}function $2(){return function(t,e){e.normalize(t)}}function V2(t){var e=t.re=_2(t.__opts__),n=t.__tlds__.slice();function r(t){return t.replace("%TLDS%",e.src_tlds)}t.onCompile(),t.__tlds_replaced__||n.push(P2),n.push(e.src_xn),e.src_tlds=n.join("|"),e.email_fuzzy=RegExp(r(e.tpl_email_fuzzy),"i"),e.link_fuzzy=RegExp(r(e.tpl_link_fuzzy),"i"),e.link_no_ip_fuzzy=RegExp(r(e.tpl_link_no_ip_fuzzy),"i"),e.host_fuzzy_test=RegExp(r(e.tpl_host_fuzzy_test),"i");var i=[];function o(t,e){throw new Error('(LinkifyIt) Invalid schema "'+t+'": '+e)}t.__compiled__={},Object.keys(t.__schemas__).forEach((function(e){var n=t.__schemas__[e];if(null!==n){var r={validate:null,link:null};if(t.__compiled__[e]=r,F2(n))return N2(n.validate)?r.validate=j2(n.validate):B2(n.validate)?r.validate=n.validate:o(e,n),void(B2(n.normalize)?r.normalize=n.normalize:n.normalize?o(e,n):r.normalize=$2());T2(n)?i.push(e):o(e,n)}})),i.forEach((function(e){t.__compiled__[t.__schemas__[e]]&&(t.__compiled__[e].validate=t.__compiled__[t.__schemas__[e]].validate,t.__compiled__[e].normalize=t.__compiled__[t.__schemas__[e]].normalize)})),t.__compiled__[""]={validate:null,normalize:$2()};var s=Object.keys(t.__compiled__).filter((function(e){return e.length>0&&t.__compiled__[e]})).map(I2).join("|");t.re.schema_test=RegExp("(^|(?!_)(?:[><｜]|"+e.src_ZPCc+"))("+s+")","i"),t.re.schema_search=RegExp("(^|(?!_)(?:[><｜]|"+e.src_ZPCc+"))("+s+")","ig"),t.re.schema_at_start=RegExp("^"+t.re.schema_search.source,"i"),t.re.pretest=RegExp("("+t.re.schema_test.source+")|("+t.re.host_fuzzy_test.source+")|@","i"),q2(t)}function H2(t,e){var n=t.__index__,r=t.__last_index__,i=t.__text_cache__.slice(n,r);this.schema=t.__schema__.toLowerCase(),this.index=n+e,this.lastIndex=r+e,this.raw=i,this.text=i,this.url=i}function J2(t,e){var n=new H2(t,e);return t.__compiled__[n.schema].normalize(n,t),n}function K2(t,e){if(!(this instanceof K2))return new K2(t,e);e||R2(t)&&(e=t,t={}),this.__opts__=M2({},L2,e),this.__index__=-1,this.__last_index__=-1,this.__schema__="",this.__text_cache__="",this.__schemas__=M2({},z2,t),this.__compiled__={},this.__tlds__=Z2,this.__tlds_replaced__=!1,this.re={},V2(this)}K2.prototype.add=function(t,e){return this.__schemas__[t]=e,V2(this),this},K2.prototype.set=function(t){return this.__opts__=M2(this.__opts__,t),this},K2.prototype.test=function(t){if(this.__text_cache__=t,this.__index__=-1,!t.length)return!1;var e,n,r,i,o,s,a,u,c;if(this.re.schema_test.test(t)){a=this.re.schema_search,a.lastIndex=0;while(null!==(e=a.exec(t)))if(i=this.testSchemaAt(t,e[2],a.lastIndex),i){this.__schema__=e[2],this.__index__=e.index+e[1].length,this.__last_index__=e.index+e[0].length+i;break}}return this.__opts__.fuzzyLink&&this.__compiled__["http:"]&&(u=t.search(this.re.host_fuzzy_test),u>=0&&(this.__index__<0||u<this.__index__)&&null!==(n=t.match(this.__opts__.fuzzyIP?this.re.link_fuzzy:this.re.link_no_ip_fuzzy))&&(o=n.index+n[1].length,(this.__index__<0||o<this.__index__)&&(this.__schema__="",this.__index__=o,this.__last_index__=n.index+n[0].length))),this.__opts__.fuzzyEmail&&this.__compiled__["mailto:"]&&(c=t.indexOf("@"),c>=0&&null!==(r=t.match(this.re.email_fuzzy))&&(o=r.index+r[1].length,s=r.index+r[0].length,(this.__index__<0||o<this.__index__||o===this.__index__&&s>this.__last_index__)&&(this.__schema__="mailto:",this.__index__=o,this.__last_index__=s))),this.__index__>=0},K2.prototype.pretest=function(t){return this.re.pretest.test(t)},K2.prototype.testSchemaAt=function(t,e,n){return this.__compiled__[e.toLowerCase()]?this.__compiled__[e.toLowerCase()].validate(t,n,this):0},K2.prototype.match=function(t){var e=0,n=[];this.__index__>=0&&this.__text_cache__===t&&(n.push(J2(this,e)),e=this.__last_index__);var r=e?t.slice(e):t;while(this.test(r))n.push(J2(this,e)),r=r.slice(this.__last_index__),e+=this.__last_index__;return n.length?n:null},K2.prototype.matchAtStart=function(t){if(this.__text_cache__=t,this.__index__=-1,!t.length)return null;var e=this.re.schema_at_start.exec(t);if(!e)return null;var n=this.testSchemaAt(t,e[2],e[0].length);return n?(this.__schema__=e[2],this.__index__=e.index+e[1].length,this.__last_index__=e.index+e[0].length+n,J2(this,0)):null},K2.prototype.tlds=function(t,e){return t=Array.isArray(t)?t:[t],e?(this.__tlds__=this.__tlds__.concat(t).sort().filter((function(t,e,n){return t!==n[e-1]})).reverse(),V2(this),this):(this.__tlds__=t.slice(),this.__tlds_replaced__=!0,V2(this),this)},K2.prototype.normalize=function(t){t.schema||(t.url="http://"+t.url),"mailto:"!==t.schema||/^mailto:/i.test(t.url)||(t.url="mailto:"+t.url)},K2.prototype.onCompile=function(){};var W2=K2,U2=2147483647,G2=36,Y2=1,Q2=26,X2=38,t3=700,e3=72,n3=128,r3="-",i3=/^xn--/,o3=/[^\0-\x7F]/,s3=/[\x2E\u3002\uFF0E\uFF61]/g,a3={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},u3=G2-Y2,c3=Math.floor,l3=String.fromCharCode;function h3(t){throw new RangeError(a3[t])}function d3(t,e){var n=[],r=t.length;while(r--)n[r]=e(t[r]);return n}function f3(t,e){var n=t.split("@"),r="";n.length>1&&(r=n[0]+"@",t=n[1]),t=t.replace(s3,".");var i=t.split("."),o=d3(i,e).join(".");return r+o}function p3(t){var e=[],n=0,r=t.length;while(n<r){var i=t.charCodeAt(n++);if(i>=55296&&i<=56319&&n<r){var o=t.charCodeAt(n++);56320==(64512&o)?e.push(((1023&i)<<10)+(1023&o)+65536):(e.push(i),n--)}else e.push(i)}return e}var v3=function(t){return String.fromCodePoint.apply(String,(0,s.Z)(t))},m3=function(t){return t>=48&&t<58?t-48+26:t>=65&&t<91?t-65:t>=97&&t<123?t-97:G2},g3=function(t,e){return t+22+75*(t<26)-((0!=e)<<5)},y3=function(t,e,n){var r=0;for(t=n?c3(t/t3):t>>1,t+=c3(t/e);t>u3*Q2>>1;r+=G2)t=c3(t/u3);return c3(r+(u3+1)*t/(t+X2))},k3=function(t){var e=[],n=t.length,r=0,i=n3,o=e3,s=t.lastIndexOf(r3);s<0&&(s=0);for(var a=0;a<s;++a)t.charCodeAt(a)>=128&&h3("not-basic"),e.push(t.charCodeAt(a));for(var u=s>0?s+1:0;u<n;){for(var c=r,l=1,h=G2;;h+=G2){u>=n&&h3("invalid-input");var d=m3(t.charCodeAt(u++));d>=G2&&h3("invalid-input"),d>c3((U2-r)/l)&&h3("overflow"),r+=d*l;var f=h<=o?Y2:h>=o+Q2?Q2:h-o;if(d<f)break;var p=G2-f;l>c3(U2/p)&&h3("overflow"),l*=p}var v=e.length+1;o=y3(r-c,v,0==c),c3(r/v)>U2-i&&h3("overflow"),i+=c3(r/v),r%=v,e.splice(r++,0,i)}return String.fromCodePoint.apply(String,e)},b3=function(t){var e=[];t=p3(t);var n,r=t.length,i=n3,o=0,s=e3,a=(0,c.Z)(t);try{for(a.s();!(n=a.n()).done;){var u=n.value;u<128&&e.push(l3(u))}}catch(A){a.e(A)}finally{a.f()}var l=e.length,h=l;l&&e.push(r3);while(h<r){var d,f=U2,p=(0,c.Z)(t);try{for(p.s();!(d=p.n()).done;){var v=d.value;v>=i&&v<f&&(f=v)}}catch(A){p.e(A)}finally{p.f()}var m=h+1;f-i>c3((U2-o)/m)&&h3("overflow"),o+=(f-i)*m,i=f;var g,y=(0,c.Z)(t);try{for(y.s();!(g=y.n()).done;){var k=g.value;if(k<i&&++o>U2&&h3("overflow"),k===i){for(var b=o,w=G2;;w+=G2){var D=w<=s?Y2:w>=s+Q2?Q2:w-s;if(b<D)break;var x=b-D,C=G2-D;e.push(l3(g3(D+x%C,0))),b=c3(x/C)}e.push(l3(g3(b,0))),s=y3(o,m,h===l),o=0,++h}}}catch(A){y.e(A)}finally{y.f()}++o,++i}return e.join("")},w3=function(t){return f3(t,(function(t){return i3.test(t)?k3(t.slice(4).toLowerCase()):t}))},D3=function(t){return f3(t,(function(t){return o3.test(t)?"xn--"+b3(t):t}))},x3={version:"2.1.0",ucs2:{decode:p3,encode:v3},decode:k3,encode:b3,toASCII:D3,toUnicode:w3},C3=x3,A3={options:{html:!1,xhtmlOut:!1,breaks:!1,langPrefix:"language-",linkify:!1,typographer:!1,quotes:"“”‘’",highlight:null,maxNesting:100},components:{core:{},block:{},inline:{}}},E3={options:{html:!1,xhtmlOut:!1,breaks:!1,langPrefix:"language-",linkify:!1,typographer:!1,quotes:"“”‘’",highlight:null,maxNesting:20},components:{core:{rules:["normalize","block","inline","text_join"]},block:{rules:["paragraph"]},inline:{rules:["text"],rules2:["balance_pairs","fragments_join"]}}},S3={options:{html:!0,xhtmlOut:!0,breaks:!1,langPrefix:"language-",linkify:!1,typographer:!1,quotes:"“”‘’",highlight:null,maxNesting:20},components:{core:{rules:["normalize","block","inline","text_join"]},block:{rules:["blockquote","code","fence","heading","hr","html_block","lheading","list","reference","paragraph"]},inline:{rules:["autolink","backticks","emphasis","entity","escape","html_inline","image","link","newline","text"],rules2:["balance_pairs","emphasis","fragments_join"]}}},_3={default:A3,zero:E3,commonmark:S3},M3=/^(vbscript|javascript|file|data):/,O3=/^data:image\/(gif|png|jpeg|webp);/;function T3(t){var e=t.trim().toLowerCase();return!M3.test(e)||!!O3.test(e)}var F3=["http:","https:","mailto:"];function N3(t){var e=SX.parse(t,!0);if(e.hostname&&(!e.protocol||F3.indexOf(e.protocol)>=0))try{e.hostname=C3.toASCII(e.hostname)}catch(n){}return SX.encode(SX.format(e))}function B3(t){var e=SX.parse(t,!0);if(e.hostname&&(!e.protocol||F3.indexOf(e.protocol)>=0))try{e.hostname=C3.toUnicode(e.hostname)}catch(n){}return SX.decode(SX.format(e),SX.decode.defaultChars+"%")}function I3(t,e){if(!(this instanceof I3))return new I3(t,e);e||zX.isString(t)||(e=t||{},t="default"),this.inline=new S2,this.block=new O1,this.core=new I0,this.renderer=new XX,this.linkify=new W2,this.validateLink=T3,this.normalizeLink=N3,this.normalizeLinkText=B3,this.utils=zX,this.helpers=zX.assign({},KX),this.options={},this.configure(t),e&&this.set(e)}I3.prototype.set=function(t){return zX.assign(this.options,t),this},I3.prototype.configure=function(t){var e,n=this;if(zX.isString(t)&&(e=t,t=_3[e],!t))throw new Error('Wrong `markdown-it` preset "'+e+'", check name');if(!t)throw new Error("Wrong `markdown-it` preset, can't be empty");return t.options&&n.set(t.options),t.components&&Object.keys(t.components).forEach((function(e){t.components[e].rules&&n[e].ruler.enableOnly(t.components[e].rules),t.components[e].rules2&&n[e].ruler2.enableOnly(t.components[e].rules2)})),this},I3.prototype.enable=function(t,e){var n=[];Array.isArray(t)||(t=[t]),["core","block","inline"].forEach((function(e){n=n.concat(this[e].ruler.enable(t,!0))}),this),n=n.concat(this.inline.ruler2.enable(t,!0));var r=t.filter((function(t){return n.indexOf(t)<0}));if(r.length&&!e)throw new Error("MarkdownIt. Failed to enable unknown rule(s): "+r);return this},I3.prototype.disable=function(t,e){var n=[];Array.isArray(t)||(t=[t]),["core","block","inline"].forEach((function(e){n=n.concat(this[e].ruler.disable(t,!0))}),this),n=n.concat(this.inline.ruler2.disable(t,!0));var r=t.filter((function(t){return n.indexOf(t)<0}));if(r.length&&!e)throw new Error("MarkdownIt. Failed to disable unknown rule(s): "+r);return this},I3.prototype.use=function(t){var e=[this].concat(Array.prototype.slice.call(arguments,1));return t.apply(t,e),this},I3.prototype.parse=function(t,e){if("string"!==typeof t)throw new Error("Input data should be a String");var n=new this.core.State(t,this,e);return this.core.process(n),n.tokens},I3.prototype.render=function(t,e){return e=e||{},this.renderer.render(this.parse(t,e),this.options,e)},I3.prototype.parseInline=function(t,e){var n=new this.core.State(t,this,e);return n.inlineMode=!0,this.core.process(n),n.tokens},I3.prototype.renderInline=function(t,e){return e=e||{},this.renderer.render(this.parseInline(t,e),this.options,e)};var L3=I3,R3=L3,z3=new Ct({nodes:{doc:{content:"block+"},paragraph:{content:"inline*",group:"block",parseDOM:[{tag:"p"}],toDOM:function(){return["p",0]}},blockquote:{content:"block+",group:"block",parseDOM:[{tag:"blockquote"}],toDOM:function(){return["blockquote",0]}},horizontal_rule:{group:"block",parseDOM:[{tag:"hr"}],toDOM:function(){return["div",["hr"]]}},heading:{attrs:{level:{default:1}},content:"(text | image)*",group:"block",defining:!0,parseDOM:[{tag:"h1",attrs:{level:1}},{tag:"h2",attrs:{level:2}},{tag:"h3",attrs:{level:3}},{tag:"h4",attrs:{level:4}},{tag:"h5",attrs:{level:5}},{tag:"h6",attrs:{level:6}}],toDOM:function(t){return["h"+t.attrs.level,0]}},code_block:{content:"text*",group:"block",code:!0,defining:!0,marks:"",attrs:{params:{default:""}},parseDOM:[{tag:"pre",preserveWhitespace:"full",getAttrs:function(t){return{params:t.getAttribute("data-params")||""}}}],toDOM:function(t){return["pre",t.attrs.params?{"data-params":t.attrs.params}:{},["code",0]]}},ordered_list:{content:"list_item+",group:"block",attrs:{order:{default:1},tight:{default:!1}},parseDOM:[{tag:"ol",getAttrs:function(t){return{order:t.hasAttribute("start")?+t.getAttribute("start"):1,tight:t.hasAttribute("data-tight")}}}],toDOM:function(t){return["ol",{start:1==t.attrs.order?null:t.attrs.order,"data-tight":t.attrs.tight?"true":null},0]}},bullet_list:{content:"list_item+",group:"block",attrs:{tight:{default:!1}},parseDOM:[{tag:"ul",getAttrs:function(t){return{tight:t.hasAttribute("data-tight")}}}],toDOM:function(t){return["ul",{"data-tight":t.attrs.tight?"true":null},0]}},list_item:{content:"paragraph block*",defining:!0,parseDOM:[{tag:"li"}],toDOM:function(){return["li",0]}},text:{group:"inline"},image:{inline:!0,attrs:{src:{},alt:{default:null},title:{default:null}},group:"inline",draggable:!0,parseDOM:[{tag:"img[src]",getAttrs:function(t){return{src:t.getAttribute("src"),title:t.getAttribute("title"),alt:t.getAttribute("alt")}}}],toDOM:function(t){return["img",t.attrs]}},hard_break:{inline:!0,group:"inline",selectable:!1,parseDOM:[{tag:"br"}],toDOM:function(){return["br"]}}},marks:{em:{parseDOM:[{tag:"i"},{tag:"em"},{style:"font-style",getAttrs:function(t){return"italic"==t&&null}}],toDOM:function(){return["em"]}},strong:{parseDOM:[{tag:"b"},{tag:"strong"},{style:"font-weight",getAttrs:function(t){return/^(bold(er)?|[5-9]\d{2,})$/.test(t)&&null}}],toDOM:function(){return["strong"]}},link:{attrs:{href:{},title:{default:null}},inclusive:!1,parseDOM:[{tag:"a[href]",getAttrs:function(t){return{href:t.getAttribute("href"),title:t.getAttribute("title")}}}],toDOM:function(t){return["a",t.attrs]}},code:{parseDOM:[{tag:"code"}],toDOM:function(){return["code"]}}}});function P3(t,e){if(t.isText&&e.isText&&B.sameSet(t.marks,e.marks))return t.withText(t.text+e.text)}var Z3=function(){function t(e,n){(0,w.Z)(this,t),this.schema=e,this.tokenHandlers=n,this.stack=[{type:e.topNodeType,attrs:null,content:[],marks:B.none}]}return(0,D.Z)(t,[{key:"top",value:function(){return this.stack[this.stack.length-1]}},{key:"push",value:function(t){this.stack.length&&this.top().content.push(t)}},{key:"addText",value:function(t){if(t){var e,n=this.top(),r=n.content,i=r[r.length-1],o=this.schema.text(t,n.marks);i&&(e=P3(i,o))?r[r.length-1]=e:r.push(o)}}},{key:"openMark",value:function(t){var e=this.top();e.marks=t.addToSet(e.marks)}},{key:"closeMark",value:function(t){var e=this.top();e.marks=t.removeFromSet(e.marks)}},{key:"parseTokens",value:function(t){for(var e=0;e<t.length;e++){var n=t[e],r=this.tokenHandlers[n.type];if(!r)throw new Error("Token type `"+n.type+"` not supported by Markdown parser");r(this,n,t,e)}}},{key:"addNode",value:function(t,e,n){var r=this.top(),i=t.createAndFill(e,n,r?r.marks:[]);return i?(this.push(i),i):null}},{key:"openNode",value:function(t,e){this.stack.push({type:t,attrs:e,content:[],marks:B.none})}},{key:"closeNode",value:function(){var t=this.stack.pop();return this.addNode(t.type,t.attrs,t.content)}}]),t}();function q3(t,e,n,r){return t.getAttrs?t.getAttrs(e,n,r):t.attrs instanceof Function?t.attrs(e):t.attrs}function j3(t,e){return t.noCloseToken||"code_inline"==e||"code_block"==e||"fence"==e}function $3(t){return"\n"==t[t.length-1]?t.slice(0,t.length-1):t}function V3(){}function H3(t,e){var n=Object.create(null),r=function(){var r=e[i];if(r.block){var o=t.nodeType(r.block);j3(r,i)?n[i]=function(t,e,n,i){t.openNode(o,q3(r,e,n,i)),t.addText($3(e.content)),t.closeNode()}:(n[i+"_open"]=function(t,e,n,i){return t.openNode(o,q3(r,e,n,i))},n[i+"_close"]=function(t){return t.closeNode()})}else if(r.node){var s=t.nodeType(r.node);n[i]=function(t,e,n,i){return t.addNode(s,q3(r,e,n,i))}}else if(r.mark){var a=t.marks[r.mark];j3(r,i)?n[i]=function(t,e,n,i){t.openMark(a.create(q3(r,e,n,i))),t.addText($3(e.content)),t.closeMark(a)}:(n[i+"_open"]=function(t,e,n,i){return t.openMark(a.create(q3(r,e,n,i)))},n[i+"_close"]=function(t){return t.closeMark(a)})}else{if(!r.ignore)throw new RangeError("Unrecognized parsing spec "+JSON.stringify(r));j3(r,i)?n[i]=V3:(n[i+"_open"]=V3,n[i+"_close"]=V3)}};for(var i in e)r();return n.text=function(t,e){return t.addText(e.content)},n.inline=function(t,e){return t.parseTokens(e.children)},n.softbreak=n.softbreak||function(t){return t.addText(" ")},n}var J3=function(){function t(e,n,r){(0,w.Z)(this,t),this.schema=e,this.tokenizer=n,this.tokens=r,this.tokenHandlers=H3(e,r)}return(0,D.Z)(t,[{key:"parse",value:function(t){var e,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=new Z3(this.schema,this.tokenHandlers);r.parseTokens(this.tokenizer.parse(t,n));do{e=r.closeNode()}while(r.stack.length);return e||this.schema.topNodeType.createAndFill()}}]),t}();function K3(t,e){while(++e<t.length)if("list_item_open"!=t[e].type)return t[e].hidden;return!1}var W3=new J3(z3,R3("commonmark",{html:!1}),{blockquote:{block:"blockquote"},paragraph:{block:"paragraph"},list_item:{block:"list_item"},bullet_list:{block:"bullet_list",getAttrs:function(t,e,n){return{tight:K3(e,n)}}},ordered_list:{block:"ordered_list",getAttrs:function(t,e,n){return{order:+t.attrGet("start")||1,tight:K3(e,n)}}},heading:{block:"heading",getAttrs:function(t){return{level:+t.tag.slice(1)}}},code_block:{block:"code_block",noCloseToken:!0},fence:{block:"code_block",getAttrs:function(t){return{params:t.info||""}},noCloseToken:!0},hr:{node:"horizontal_rule"},image:{node:"image",getAttrs:function(t){return{src:t.attrGet("src"),title:t.attrGet("title")||null,alt:t.children[0]&&t.children[0].content||null}}},hardbreak:{node:"hard_break"},em:{mark:"em"},strong:{mark:"strong"},link:{mark:"link",getAttrs:function(t){return{href:t.attrGet("href"),title:t.attrGet("title")||null}}},code_inline:{mark:"code",noCloseToken:!0}}),U3=function(){function t(e,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};(0,w.Z)(this,t),this.nodes=e,this.marks=n,this.options=r}return(0,D.Z)(t,[{key:"serialize",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};e=Object.assign({},this.options,e);var n=new X3(this.nodes,this.marks,e);return n.renderContent(t),n.out}}]),t}(),G3=new U3({blockquote:function(t,e){t.wrapBlock("> ",null,e,(function(){return t.renderContent(e)}))},code_block:function(t,e){var n=e.textContent.match(/`{3,}/gm),r=n?n.sort().slice(-1)[0]+"`":"```";t.write(r+(e.attrs.params||"")+"\n"),t.text(e.textContent,!1),t.write("\n"),t.write(r),t.closeBlock(e)},heading:function(t,e){t.write(t.repeat("#",e.attrs.level)+" "),t.renderInline(e),t.closeBlock(e)},horizontal_rule:function(t,e){t.write(e.attrs.markup||"---"),t.closeBlock(e)},bullet_list:function(t,e){t.renderList(e,"  ",(function(){return(e.attrs.bullet||"*")+" "}))},ordered_list:function(t,e){var n=e.attrs.order||1,r=String(n+e.childCount-1).length,i=t.repeat(" ",r+2);t.renderList(e,i,(function(e){var i=String(n+e);return t.repeat(" ",r-i.length)+i+". "}))},list_item:function(t,e){t.renderContent(e)},paragraph:function(t,e){t.renderInline(e),t.closeBlock(e)},image:function(t,e){t.write("!["+t.esc(e.attrs.alt||"")+"]("+e.attrs.src.replace(/[\(\)]/g,"\\$&")+(e.attrs.title?' "'+e.attrs.title.replace(/"/g,'\\"')+'"':"")+")")},hard_break:function(t,e,n,r){for(var i=r+1;i<n.childCount;i++)if(n.child(i).type!=e.type)return void t.write("\\\n")},text:function(t,e){t.text(e.text,!t.inAutolink)}},{em:{open:"*",close:"*",mixable:!0,expelEnclosingWhitespace:!0},strong:{open:"**",close:"**",mixable:!0,expelEnclosingWhitespace:!0},link:{open:function(t,e,n,r){return t.inAutolink=Q3(e,n,r),t.inAutolink?"<":"["},close:function(t,e,n,r){var i=t.inAutolink;return t.inAutolink=void 0,i?">":"]("+e.attrs.href.replace(/[\(\)"]/g,"\\$&")+(e.attrs.title?' "'.concat(e.attrs.title.replace(/"/g,'\\"'),'"'):"")+")"},mixable:!0},code:{open:function(t,e,n,r){return Y3(n.child(r),-1)},close:function(t,e,n,r){return Y3(n.child(r-1),1)},escape:!1}});function Y3(t,e){var n,r=/`+/g,i=0;if(t.isText)while(n=r.exec(t.text))i=Math.max(i,n[0].length);for(var o=i>0&&e>0?" `":"`",s=0;s<i;s++)o+="`";return i>0&&e<0&&(o+=" "),o}function Q3(t,e,n){if(t.attrs.title||!/^\w+:/.test(t.attrs.href))return!1;var r=e.child(n);return!(!r.isText||r.text!=t.attrs.href||r.marks[r.marks.length-1]!=t)&&(n==e.childCount-1||!t.isInSet(e.child(n+1).marks))}var X3=function(){function t(e,n,r){(0,w.Z)(this,t),this.nodes=e,this.marks=n,this.options=r,this.delim="",this.out="",this.closed=null,this.inAutolink=void 0,this.atBlockStart=!1,this.inTightList=!1,"undefined"==typeof this.options.tightLists&&(this.options.tightLists=!1),"undefined"==typeof this.options.hardBreakNodeName&&(this.options.hardBreakNodeName="hard_break")}return(0,D.Z)(t,[{key:"flushClose",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:2;if(this.closed){if(this.atBlank()||(this.out+="\n"),t>1){var e=this.delim,n=/\s+$/.exec(e);n&&(e=e.slice(0,e.length-n[0].length));for(var r=1;r<t;r++)this.out+=e+"\n"}this.closed=null}}},{key:"wrapBlock",value:function(t,e,n,r){var i=this.delim;this.write(null!=e?e:t),this.delim+=t,r(),this.delim=i,this.closeBlock(n)}},{key:"atBlank",value:function(){return/(^|\n)$/.test(this.out)}},{key:"ensureNewLine",value:function(){this.atBlank()||(this.out+="\n")}},{key:"write",value:function(t){this.flushClose(),this.delim&&this.atBlank()&&(this.out+=this.delim),t&&(this.out+=t)}},{key:"closeBlock",value:function(t){this.closed=t}},{key:"text",value:function(t){for(var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=t.split("\n"),r=0;r<n.length;r++)this.write(),!e&&"["==n[r][0]&&/(^|[^\\])\!$/.test(this.out)&&(this.out=this.out.slice(0,this.out.length-1)+"\\!"),this.out+=e?this.esc(n[r],this.atBlockStart):n[r],r!=n.length-1&&(this.out+="\n")}},{key:"render",value:function(t,e,n){if("number"==typeof e)throw new Error("!");if(!this.nodes[t.type.name])throw new Error("Token type `"+t.type.name+"` not supported by Markdown renderer");this.nodes[t.type.name](this,t,e,n)}},{key:"renderContent",value:function(t){var e=this;t.forEach((function(n,r,i){return e.render(n,t,i)}))}},{key:"renderInline",value:function(t){var e=this;this.atBlockStart=!0;var n=[],r="",i=function(i,o,s){var a=i?i.marks:[];i&&i.type.name===e.options.hardBreakNodeName&&(a=a.filter((function(e){if(s+1==t.childCount)return!1;var n=t.child(s+1);return e.isInSet(n.marks)&&(!n.isText||/\S/.test(n.text))})));var u=r;if(r="",i&&i.isText&&a.some((function(r){var i=e.marks[r.type.name];return i&&i.expelEnclosingWhitespace&&!(r.isInSet(n)||s<t.childCount-1&&r.isInSet(t.child(s+1).marks))}))){var c=/^(\s*)(.*?)(\s*)$/m.exec(i.text),l=(0,h.Z)(c,4),d=(l[0],l[1]),f=l[2],p=l[3];u+=d,r=p,(d||p)&&(i=f?i.withText(f):null,i||(a=n))}var v=a.length?a[a.length-1]:null,m=v&&!1===e.marks[v.type.name].escape,g=a.length-(m?1:0);t:for(var y=0;y<g;y++){var k=a[y];if(!e.marks[k.type.name].mixable)break;for(var b=0;b<n.length;b++){var w=n[b];if(!e.marks[w.type.name].mixable)break;if(k.eq(w)){y>b?a=a.slice(0,b).concat(k).concat(a.slice(b,y)).concat(a.slice(y+1,g)):b>y&&(a=a.slice(0,y).concat(a.slice(y+1,b)).concat(k).concat(a.slice(b,g)));continue t}}}var D=0;while(D<Math.min(n.length,g)&&a[D].eq(n[D]))++D;while(D<n.length)e.text(e.markString(n.pop(),!1,t,s),!1);if(u&&e.text(u),i){while(n.length<g){var x=a[n.length];n.push(x),e.text(e.markString(x,!0,t,s),!1)}m&&i.isText?e.text(e.markString(v,!0,t,s)+i.text+e.markString(v,!1,t,s+1),!1):e.render(i,t,s)}};t.forEach(i),i(null,0,t.childCount),this.atBlockStart=!1}},{key:"renderList",value:function(t,e,n){var r=this;this.closed&&this.closed.type==t.type?this.flushClose(3):this.inTightList&&this.flushClose(1);var i="undefined"!=typeof t.attrs.tight?t.attrs.tight:this.options.tightLists,o=this.inTightList;this.inTightList=i,t.forEach((function(o,s,a){a&&i&&r.flushClose(1),r.wrapBlock(e,n(a),t,(function(){return r.render(o,t,a)}))})),this.inTightList=o}},{key:"esc",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return t=t.replace(/[`*\\~\[\]_]/g,(function(e,n){return"_"==e&&n>0&&n+1<t.length&&t[n-1].match(/\w/)&&t[n+1].match(/\w/)?e:"\\"+e})),e&&(t=t.replace(/^[#\-*+>]/,"\\$&").replace(/^(\s*\d+)\./,"$1\\.")),this.options.escapeExtraCharacters&&(t=t.replace(this.options.escapeExtraCharacters,"\\$&")),t}},{key:"quote",value:function(t){var e=-1==t.indexOf('"')?'""':-1==t.indexOf("'")?"''":"()";return e[0]+t+e[1]}},{key:"repeat",value:function(t,e){for(var n="",r=0;r<e;r++)n+=t;return n}},{key:"markString",value:function(t,e,n,r){var i=this.marks[t.type.name],o=e?i.open:i.close;return"string"==typeof o?o:o(this,t,n,r)}},{key:"getEnclosingWhitespace",value:function(t){return{leading:(t.match(/^(\s+)/)||[void 0])[0],trailing:(t.match(/(\s+)$/)||[void 0])[0]}}}]),t}(),t6=(0,A.c)((function(t,e){var n=A.a&&A.a.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var r=n(O0),i=/^ *\[([\sx])] /i;function o(t,e){void 0===e&&(e={enabled:!1,label:!1,lineNumber:!1}),t.core.ruler.after("inline","task-lists",(function(t){return s(t,e)})),t.renderer.rules.taskListItemCheckbox=function(t){var n=t[0],r=n.attrGet("checked")?'checked="" ':"",i=n.attrGet("disabled")?'disabled="" ':"",o=n.attrGet("line"),s='id="'.concat(n.attrGet("id"),'" '),a=o&&e.lineNumber?'data-line="'.concat(o,'" '):"";return'<input class="task-list-item-checkbox" type="checkbox" '.concat(r).concat(i).concat(a).concat(s,"/>")},t.renderer.rules.taskListItemLabel_close=function(){return"</label>"},t.renderer.rules.taskListItemLabel_open=function(t){var e=t[0],n=e.attrGet("id");return'<label for="'.concat(n,'">')}}function s(t,e){for(var n=t.tokens,r=2;r<n.length;r++)if(u(n,r)){c(n[r],e),n[r-2].attrJoin("class","task-list-item ".concat(e.enabled?" enabled":""));var i=a(n,r-2);i&&i.attrJoin("class","contains-task-list")}return!1}function a(t,e){for(var n=t[e].level-1,r=e-1;r>=0;r--)if(t[r].level===n)return t[r]}function u(t,e){return p(t[e])&&v(t[e-1])&&m(t[e-2])&&g(t[e])}function c(t,e){if(null!=t.children){var n=l(t);t.children.splice(0,0,h(t,e.enabled,n)),t.children[1].content=t.children[1].content.replace(i,""),e.label&&(t.children.splice(1,0,d(n)),t.children.push(f()))}}function l(t){return t.map?"task-item-".concat(t.map[0]):"task-item-".concat(Math.ceil(1e7*Math.random()-1e3))}function h(t,e,n){var o=new r.default("taskListItemCheckbox","",0);e||o.attrSet("disabled","true"),t.map&&o.attrSet("line",t.map[0].toString()),o.attrSet("id",n);var s=i.exec(t.content),a="x"===(null===s||void 0===s?void 0:s[1].toLowerCase());return a&&o.attrSet("checked","true"),o}function d(t){var e=new r.default("taskListItemLabel_open","",1);return e.attrSet("id",t),e}function f(){return new r.default("taskListItemLabel_close","",-1)}function p(t){return"inline"===t.type}function v(t){return"paragraph_open"===t.type}function m(t){return"list_item_open"===t.type}function g(t){return i.test(t.content)}e.default=o})),e6=(0,A.g)(t6),n6="aaa1rp3barth4b_ott3vie4c1le2ogado5udhabi7c_ademy5centure6ountant_s9o1tor4d_s1ult4e_g1ro2tna4f_l1rica5g_akhan5ency5i_g1rbus3force5tel5kdn3l_faromeo7ibaba4pay4lfinanz6state5y2sace3tom5m_azon4ericanexpress7family11x2fam3ica3sterdam8nalytics7droid5quan4z2o_l2partments8p_le4q_uarelle8r_ab1mco4chi3my2pa2t_e3s_da2ia2sociates9t_hleta5torney7u_ction5di_ble3o3spost5thor3o_s4vianca6w_s2x_a2z_ure5ba_by2idu3namex3narepublic11d1k2r_celona5laycard4s5efoot5gains6seball5ketball8uhaus5yern5b_c1t1va3cg1n2d1e_ats2uty4er2ntley5rlin4st_buy5t2f1g1h_arti5i_ble3d1ke2ng_o3o1z2j1lack_friday9ockbuster8g1omberg7ue3m_s1w2n_pparibas9o_ats3ehringer8fa2m1nd2o_k_ing5sch2tik2on4t1utique6x2r_adesco6idgestone9oadway5ker3ther5ussels7s1t1uild_ers6siness6y1zz3v1w1y1z_h3ca_b1fe2l_l1vinklein9m_era3p2non3petown5ital_one8r_avan4ds2e_er_s4s2sa1e1h1ino4t_ering5holic7ba1n1re2s2c1d1enter4o1rn3f_a1d2g1h_anel2nel4rity4se2t2eap3intai5ristmas6ome4urch5i_priani6rcle4sco3tadel4i_c2y_eats7k1l_aims4eaning6ick2nic1que6othing5ud3ub_med6m1n1o_ach3des3ffee4llege4ogne5m_cast4mbank4unity6pany2re3uter5sec4ndos3struction8ulting7tact3ractors9oking_channel11l1p2rsica5untry4pon_s4rses6pa2r_edit_card4union9icket5own3s1uise_s6u_isinella9v1w1x1y_mru3ou3z2dabur3d1nce3ta1e1ing3sun4y2clk3ds2e_al_er2s3gree4livery5l1oitte5ta3mocrat6ntal2ist5si_gn4v2hl2iamonds6et2gital5rect_ory7scount3ver5h2y2j1k1m1np2o_cs1tor4g1mains5t1wnload7rive4tv2ubai3nlop4pont4rban5vag2r2z2earth3t2c_o2deka3u_cation8e1g1mail3erck5nergy4gineer_ing9terprises10pson4quipment8r_icsson6ni3s_q1tate5t_isalat7u_rovision8s2vents5xchange6pert3osed4ress5traspace10fage2il1rwinds6th3mily4n_s2rm_ers5shion4t3edex3edback6rrari3ero6i_at2delity5o2lm2nal1nce1ial7re_stone6mdale6sh_ing5t_ness6j1k1lickr3ghts4r2orist4wers5y2m1o_o_d_network8tball6rd1ex2sale4um3undation8x2r_ee1senius7l1ogans4ntdoor4ier7tr2ujitsu5n_d2rniture7tbol5yi3ga_l_lery3o1up4me_s3p1rden4y2b_iz3d_n2e_a1nt_ing5orge5f1g_ee3h1i_ft_s3ves2ing5l_ass3e1obal2o4m_ail3bh2o1x2n1odaddy5ld_point6f2o_dyear5g_le4p1t1v2p1q1r_ainger5phics5tis4een3ipe3ocery4up4s1t1u_ardian6cci3ge2ide2tars5ru3w1y2hair2mburg5ngout5us3bo2dfc_bank7ealth_care8lp1sinki6re1mes5gtv3iphop4samitsu7tachi5v2k_t2m1n1ockey4ldings5iday5medepot5goods5s_ense7nda3rse3spital5t_ing5t_eles2s3mail5use3w2r1sbc3t1u_ghes5yatt3undai7ibm2cbc2e1u2d1e_ee3fm2kano4l1m_amat4db2mo_bilien9n_c1dustries8finiti5o2g1k1stitute6urance4e4t_ernational10uit4vestments10o1piranga7q1r_ish4s_maili5t_anbul7t_au2v3jaguar4va3cb2e_ep2tzt3welry6io2ll2m_p2nj2o_bs1urg4t1y2p_morgan6rs3uegos4niper7kaufen5ddi3e_rryhotels6logistics9properties14fh2g1h1i_a1ds2m1nder2le4tchen5wi3m1n1oeln3matsu5sher5p_mg2n2r_d1ed3uokgroup8w1y_oto4z2la_caixa5mborghini8er3ncaster5ia3d_rover6xess5salle5t_ino3robe5w_yer5b1c1ds2ease3clerc5frak4gal2o2xus4gbt3i_dl2fe_insurance9style7ghting6ke2lly3mited4o2ncoln4de2k2psy3ve1ing5k1lc1p2oan_s3cker3us3l1ndon4tte1o3ve3pl_financial11r1s1t_d_a3u_ndbeck6xe1ury5v1y2ma_cys3drid4if1son4keup4n_agement7go3p1rket_ing3s4riott5shalls7serati6ttel5ba2c_kinsey7d1e_d_ia3et2lbourne7me1orial6n_u2rckmsd7g1h1iami3crosoft7l1ni1t2t_subishi9k1l_b1s2m_a2n1o_bi_le4da2e1i1m1nash3ey2ster5rmon3tgage6scow4to_rcycles9v_ie4p1q1r1s_d2t_n1r2u_seum3ic3tual5v1w1x1y1z2na_b1goya4me2tura4vy3ba2c1e_c1t_bank4flix4work5ustar5w_s2xt_direct7us4f_l2g_o2hk2i_co2ke1on3nja3ssan1y5l1o_kia3rthwesternmutual14on4w_ruz3tv4p1r_a1w2tt2u1yc2z2obi1server7ffice5kinawa6layan_group9dnavy5lo3m_ega4ne1g1l_ine5oo2pen3racle3nge4g_anic5igins6saka4tsuka4t2vh3pa_ge2nasonic7ris2s1tners4s1y3ssagens7y2ccw3e_t2f_izer5g1h_armacy6d1ilips5one2to_graphy6s4ysio5ics1tet2ures6d1n_g1k2oneer5zza4k1l_ace2y_station9umbing5s3m1n_c2ohl2ker3litie5rn2st3r_america6xi3ess3ime3o_d_uctions8f1gressive8mo2perties3y5tection8u_dential9s1t1ub2w_c2y2qa1pon3uebec3st5racing4dio4e_ad1lestate6tor2y4cipes5d_stone5umbrella9hab3ise_n3t2liance6n_t_als5pair3ort3ublican8st_aurant8view_s5xroth6ich_ardli6oh3l1o1p2o_cher3ks3deo3gers4om3s_vp3u_gby3hr2n2w_e2yukyu6sa_arland6fe_ty4kura4le1on3msclub4ung5ndvik_coromant12ofi4p1rl2s1ve2xo3b_i1s2c_a1b1haeffler7midt4olarships8ol3ule3warz5ience5ot3d1e_arch3t2cure1ity6ek2lect4ner3rvices6ven3w1x_y3fr2g1h_angrila6rp2w2ell3ia1ksha5oes2p_ping5uji3w_time7i_lk2na1gles5te3j1k_i_n2y_pe4l_ing4m_art3ile4n_cf3o_ccer3ial4ftbank4ware6hu2lar2utions7ng1y2y2pa_ce3ort2t3r_l2s1t_ada2ples4r1tebank4farm7c_group6ockholm6rage3e3ream4udio2y3yle4u_cks3pplies3y2ort5rf1gery5zuki5v1watch4iss4x1y_dney4stems6z2tab1ipei4lk2obao4rget4tamotors6r2too4x_i3c_i2d_k2eam2ch_nology8l1masek5nnis4va3f1g1h_d1eater2re6iaa2ckets5enda4ffany5ps2res2ol4j_maxx4x2k_maxx5l1m_all4n1o_day3kyo3ols3p1ray3shiba5tal3urs3wn2yota3s3r_ade1ing4ining5vel_channel7ers_insurance16ust3v2t1ube2i1nes3shu4v_s2w1z2ua1bank3s2g1k1nicom3versity8o2ol2ps2s1y1z2va_cations7na1guard7c1e_gas3ntures6risign5mögensberater2ung14sicherung10t2g1i_ajes4deo3g1king4llas4n1p1rgin4sa1ion4va1o3laanderen9n1odka3lkswagen7vo3te1ing3o2yage5u_elos6wales2mart4ter4ng_gou5tch_es6eather_channel12bcam3er2site5d_ding5ibo2r3f1hoswho6ien2ki2lliamhill9n_dows4e1ners6me2olterskluwer11odside6rk_s2ld3w2s1tc1f3xbox3erox4finity6ihuan4n2xx2yz3yachts4hoo3maxun5ndex5e1odobashi7ga2kohama6u_tube6t1un3za_ppos4ra3ero3ip2m1one3uerich6w2",r6="ελ1υ2бг1ел3дети4ею2католик6ом3мкд2он1сква6онлайн5рг3рус2ф2сайт3рб3укр3қаз3հայ3ישראל5קום3ابوظبي5تصالات6رامكو5لاردن4بحرين5جزائر5سعودية6عليان5مغرب5مارات5یران5بارت2زار4يتك3ھارت5تونس4سودان3رية5شبكة4عراق2ب2مان4فلسطين6قطر3كاثوليك6وم3مصر2ليسيا5وريتانيا7قع4همراه5پاکستان7ڀارت4कॉम3नेट3भारत_म्3ोत5संगठन5বাংলা5ভারত2ৰত4ਭਾਰਤ4ભારત4ଭାରତ4இந்தியா6லங்கை6சிங்கப்பூர்11భారత్5ಭಾರತ4ഭാരതം5ලංකා4คอม3ไทย3ລາວ3გე2みんな3アマゾン4クラウド4グーグル4コム2ストア3セール3ファッション6ポイント4世界2中信1国1國1文网3亚马逊3企业2佛山2信息2健康2八卦2公司1益2台湾1灣2商城1店1标2嘉里_大酒店5在线2大拿2天主教3娱乐2家電2广东2微博2慈善2我爱你3手机2招聘2政务1府2新加坡2闻2时尚2書籍2机构2淡马锡3游戏2澳門2点看2移动2组织机构4网址1店1站1络2联通2谷歌2购物2通販2集团2電訊盈科4飞利浦3食品2餐厅2香格里拉3港2닷넷1컴2삼성2한국2",i6=function(t,e){for(var n in e)t[n]=e[n];return t},o6="numeric",s6="ascii",a6="alpha",u6="asciinumeric",c6="alphanumeric",l6="domain",h6="emoji",d6="scheme",f6="slashscheme",p6="whitespace";function v6(t,e){return t in e||(e[t]=[]),e[t]}function m6(t,e,n){for(var r in e[o6]&&(e[u6]=!0,e[c6]=!0),e[s6]&&(e[u6]=!0,e[a6]=!0),e[u6]&&(e[c6]=!0),e[a6]&&(e[c6]=!0),e[c6]&&(e[l6]=!0),e[h6]&&(e[l6]=!0),e){var i=v6(r,n);i.indexOf(t)<0&&i.push(t)}}function g6(t,e){var n={};for(var r in e)e[r].indexOf(t)>=0&&(n[r]=!0);return n}function y6(t){void 0===t&&(t=null),this.j={},this.jr=[],this.jd=null,this.t=t}y6.groups={},y6.prototype={accepts:function(){return!!this.t},go:function(t){var e=this,n=e.j[t];if(n)return n;for(var r=0;r<e.jr.length;r++){var i=e.jr[r][0],o=e.jr[r][1];if(o&&i.test(t))return o}return e.jd},has:function(t,e){return void 0===e&&(e=!1),e?t in this.j:!!this.go(t)},ta:function(t,e,n,r){for(var i=0;i<t.length;i++)this.tt(t[i],e,n,r)},tr:function(t,e,n,r){var i;return r=r||y6.groups,e&&e.j?i=e:(i=new y6(e),n&&r&&m6(e,n,r)),this.jr.push([t,i]),i},ts:function(t,e,n,r){var i=this,o=t.length;if(!o)return i;for(var s=0;s<o-1;s++)i=i.tt(t[s]);return i.tt(t[o-1],e,n,r)},tt:function(t,e,n,r){r=r||y6.groups;var i=this;if(e&&e.j)return i.j[t]=e,e;var o,s=e,a=i.go(t);if(a?(o=new y6,i6(o.j,a.j),o.jr.push.apply(o.jr,a.jr),o.jd=a.jd,o.t=a.t):o=new y6,s){if(r)if(o.t&&"string"===typeof o.t){var u=i6(g6(o.t,r),n);m6(s,u,r)}else n&&m6(s,n,r);o.t=s}return i.j[t]=o,o}};var k6=function(t,e,n,r,i){return t.ta(e,n,r,i)},b6=function(t,e,n,r,i){return t.tr(e,n,r,i)},w6=function(t,e,n,r,i){return t.ts(e,n,r,i)},D6=function(t,e,n,r,i){return t.tt(e,n,r,i)},x6="WORD",C6="UWORD",A6="LOCALHOST",E6="TLD",S6="UTLD",_6="SCHEME",M6="SLASH_SCHEME",O6="NUM",T6="WS",F6="NL",N6="OPENBRACE",B6="OPENBRACKET",I6="OPENANGLEBRACKET",L6="OPENPAREN",R6="CLOSEBRACE",z6="CLOSEBRACKET",P6="CLOSEANGLEBRACKET",Z6="CLOSEPAREN",q6="AMPERSAND",j6="APOSTROPHE",$6="ASTERISK",V6="AT",H6="BACKSLASH",J6="BACKTICK",K6="CARET",W6="COLON",U6="COMMA",G6="DOLLAR",Y6="DOT",Q6="EQUALS",X6="EXCLAMATION",t5="HYPHEN",e5="PERCENT",n5="PIPE",r5="PLUS",i5="POUND",o5="QUERY",s5="QUOTE",a5="SEMI",u5="SLASH",c5="TILDE",l5="UNDERSCORE",h5="EMOJI",d5="SYM",f5=Object.freeze({__proto__:null,WORD:x6,UWORD:C6,LOCALHOST:A6,TLD:E6,UTLD:S6,SCHEME:_6,SLASH_SCHEME:M6,NUM:O6,WS:T6,NL:F6,OPENBRACE:N6,OPENBRACKET:B6,OPENANGLEBRACKET:I6,OPENPAREN:L6,CLOSEBRACE:R6,CLOSEBRACKET:z6,CLOSEANGLEBRACKET:P6,CLOSEPAREN:Z6,AMPERSAND:q6,APOSTROPHE:j6,ASTERISK:$6,AT:V6,BACKSLASH:H6,BACKTICK:J6,CARET:K6,COLON:W6,COMMA:U6,DOLLAR:G6,DOT:Y6,EQUALS:Q6,EXCLAMATION:X6,HYPHEN:t5,PERCENT:e5,PIPE:n5,PLUS:r5,POUND:i5,QUERY:o5,QUOTE:s5,SEMI:a5,SLASH:u5,TILDE:c5,UNDERSCORE:l5,EMOJI:h5,SYM:d5}),p5=/[a-z]/,v5=/(?:[A-Za-z\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0560-\u0588\u05D0-\u05EA\u05EF-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u0860-\u086A\u0870-\u0887\u0889-\u088E\u08A0-\u08C9\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u09FC\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C5D\u0C60\u0C61\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D04-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E86-\u0E8A\u0E8C-\u0EA3\u0EA5\u0EA7-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16F1-\u16F8\u1700-\u1711\u171F-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1878\u1880-\u1884\u1887-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4C\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1C80-\u1C88\u1C90-\u1CBA\u1CBD-\u1CBF\u1CE9-\u1CEC\u1CEE-\u1CF3\u1CF5\u1CF6\u1CFA\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2183\u2184\u2C00-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005\u3006\u3031-\u3035\u303B\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312F\u3131-\u318E\u31A0-\u31BF\u31F0-\u31FF\u3400-\u4DBF\u4E00-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6E5\uA717-\uA71F\uA722-\uA788\uA78B-\uA7CA\uA7D0\uA7D1\uA7D3\uA7D5-\uA7D9\uA7F2-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA8FE\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB69\uAB70-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDE80-\uDE9C\uDEA0-\uDED0\uDF00-\uDF1F\uDF2D-\uDF40\uDF42-\uDF49\uDF50-\uDF75\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF]|\uD801[\uDC00-\uDC9D\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDD70-\uDD7A\uDD7C-\uDD8A\uDD8C-\uDD92\uDD94\uDD95\uDD97-\uDDA1\uDDA3-\uDDB1\uDDB3-\uDDB9\uDDBB\uDDBC\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67\uDF80-\uDF85\uDF87-\uDFB0\uDFB2-\uDFBA]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00\uDE10-\uDE13\uDE15-\uDE17\uDE19-\uDE35\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE4\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2\uDD00-\uDD23\uDE80-\uDEA9\uDEB0\uDEB1\uDF00-\uDF1C\uDF27\uDF30-\uDF45\uDF70-\uDF81\uDFB0-\uDFC4\uDFE0-\uDFF6]|\uD804[\uDC03-\uDC37\uDC71\uDC72\uDC75\uDC83-\uDCAF\uDCD0-\uDCE8\uDD03-\uDD26\uDD44\uDD47\uDD50-\uDD72\uDD76\uDD83-\uDDB2\uDDC1-\uDDC4\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE2B\uDE3F\uDE40\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEDE\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3D\uDF50\uDF5D-\uDF61]|\uD805[\uDC00-\uDC34\uDC47-\uDC4A\uDC5F-\uDC61\uDC80-\uDCAF\uDCC4\uDCC5\uDCC7\uDD80-\uDDAE\uDDD8-\uDDDB\uDE00-\uDE2F\uDE44\uDE80-\uDEAA\uDEB8\uDF00-\uDF1A\uDF40-\uDF46]|\uD806[\uDC00-\uDC2B\uDCA0-\uDCDF\uDCFF-\uDD06\uDD09\uDD0C-\uDD13\uDD15\uDD16\uDD18-\uDD2F\uDD3F\uDD41\uDDA0-\uDDA7\uDDAA-\uDDD0\uDDE1\uDDE3\uDE00\uDE0B-\uDE32\uDE3A\uDE50\uDE5C-\uDE89\uDE9D\uDEB0-\uDEF8]|\uD807[\uDC00-\uDC08\uDC0A-\uDC2E\uDC40\uDC72-\uDC8F\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD30\uDD46\uDD60-\uDD65\uDD67\uDD68\uDD6A-\uDD89\uDD98\uDEE0-\uDEF2\uDF02\uDF04-\uDF10\uDF12-\uDF33\uDFB0]|\uD808[\uDC00-\uDF99]|\uD809[\uDC80-\uDD43]|\uD80B[\uDF90-\uDFF0]|[\uD80C\uD81C-\uD820\uD822\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879\uD880-\uD883\uD885-\uD887][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2F\uDC41-\uDC46]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDE70-\uDEBE\uDED0-\uDEED\uDF00-\uDF2F\uDF40-\uDF43\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDE40-\uDE7F\uDF00-\uDF4A\uDF50\uDF93-\uDF9F\uDFE0\uDFE1\uDFE3]|\uD821[\uDC00-\uDFF7]|\uD823[\uDC00-\uDCD5\uDD00-\uDD08]|\uD82B[\uDFF0-\uDFF3\uDFF5-\uDFFB\uDFFD\uDFFE]|\uD82C[\uDC00-\uDD22\uDD32\uDD50-\uDD52\uDD55\uDD64-\uDD67\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB]|\uD837[\uDF00-\uDF1E\uDF25-\uDF2A]|\uD838[\uDC30-\uDC6D\uDD00-\uDD2C\uDD37-\uDD3D\uDD4E\uDE90-\uDEAD\uDEC0-\uDEEB]|\uD839[\uDCD0-\uDCEB\uDFE0-\uDFE6\uDFE8-\uDFEB\uDFED\uDFEE\uDFF0-\uDFFE]|\uD83A[\uDC00-\uDCC4\uDD00-\uDD43\uDD4B]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDEDF\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF39\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0]|\uD87E[\uDC00-\uDE1D]|\uD884[\uDC00-\uDF4A\uDF50-\uDFFF]|\uD888[\uDC00-\uDFAF])/,m5=/(?:[#\*0-9\xA9\xAE\u203C\u2049\u2122\u2139\u2194-\u2199\u21A9\u21AA\u231A\u231B\u2328\u23CF\u23E9-\u23F3\u23F8-\u23FA\u24C2\u25AA\u25AB\u25B6\u25C0\u25FB-\u25FE\u2600-\u2604\u260E\u2611\u2614\u2615\u2618\u261D\u2620\u2622\u2623\u2626\u262A\u262E\u262F\u2638-\u263A\u2640\u2642\u2648-\u2653\u265F\u2660\u2663\u2665\u2666\u2668\u267B\u267E\u267F\u2692-\u2697\u2699\u269B\u269C\u26A0\u26A1\u26A7\u26AA\u26AB\u26B0\u26B1\u26BD\u26BE\u26C4\u26C5\u26C8\u26CE\u26CF\u26D1\u26D3\u26D4\u26E9\u26EA\u26F0-\u26F5\u26F7-\u26FA\u26FD\u2702\u2705\u2708-\u270D\u270F\u2712\u2714\u2716\u271D\u2721\u2728\u2733\u2734\u2744\u2747\u274C\u274E\u2753-\u2755\u2757\u2763\u2764\u2795-\u2797\u27A1\u27B0\u27BF\u2934\u2935\u2B05-\u2B07\u2B1B\u2B1C\u2B50\u2B55\u3030\u303D\u3297\u3299]|\uD83C[\uDC04\uDCCF\uDD70\uDD71\uDD7E\uDD7F\uDD8E\uDD91-\uDD9A\uDDE6-\uDDFF\uDE01\uDE02\uDE1A\uDE2F\uDE32-\uDE3A\uDE50\uDE51\uDF00-\uDF21\uDF24-\uDF93\uDF96\uDF97\uDF99-\uDF9B\uDF9E-\uDFF0\uDFF3-\uDFF5\uDFF7-\uDFFF]|\uD83D[\uDC00-\uDCFD\uDCFF-\uDD3D\uDD49-\uDD4E\uDD50-\uDD67\uDD6F\uDD70\uDD73-\uDD7A\uDD87\uDD8A-\uDD8D\uDD90\uDD95\uDD96\uDDA4\uDDA5\uDDA8\uDDB1\uDDB2\uDDBC\uDDC2-\uDDC4\uDDD1-\uDDD3\uDDDC-\uDDDE\uDDE1\uDDE3\uDDE8\uDDEF\uDDF3\uDDFA-\uDE4F\uDE80-\uDEC5\uDECB-\uDED2\uDED5-\uDED7\uDEDC-\uDEE5\uDEE9\uDEEB\uDEEC\uDEF0\uDEF3-\uDEFC\uDFE0-\uDFEB\uDFF0]|\uD83E[\uDD0C-\uDD3A\uDD3C-\uDD45\uDD47-\uDDFF\uDE70-\uDE7C\uDE80-\uDE88\uDE90-\uDEBD\uDEBF-\uDEC5\uDECE-\uDEDB\uDEE0-\uDEE8\uDEF0-\uDEF8])/,g5=/\d/,y5=/\s/,k5="\n",b5="️",w5="‍",D5=null,x5=null;function C5(t){void 0===t&&(t=[]);var e={};y6.groups=e;var n=new y6;null==D5&&(D5=_5(n6)),null==x5&&(x5=_5(r6)),D6(n,"'",j6),D6(n,"{",N6),D6(n,"[",B6),D6(n,"<",I6),D6(n,"(",L6),D6(n,"}",R6),D6(n,"]",z6),D6(n,">",P6),D6(n,")",Z6),D6(n,"&",q6),D6(n,"*",$6),D6(n,"@",V6),D6(n,"`",J6),D6(n,"^",K6),D6(n,":",W6),D6(n,",",U6),D6(n,"$",G6),D6(n,".",Y6),D6(n,"=",Q6),D6(n,"!",X6),D6(n,"-",t5),D6(n,"%",e5),D6(n,"|",n5),D6(n,"+",r5),D6(n,"#",i5),D6(n,"?",o5),D6(n,'"',s5),D6(n,"/",u5),D6(n,";",a5),D6(n,"~",c5),D6(n,"_",l5),D6(n,"\\",H6);var r=b6(n,g5,O6,(0,o.Z)({},o6,!0));b6(r,g5,r);var i=b6(n,p5,x6,(0,o.Z)({},s6,!0));b6(i,p5,i);var s=b6(n,v5,C6,(0,o.Z)({},a6,!0));b6(s,p5),b6(s,v5,s);var a=b6(n,y5,T6,(0,o.Z)({},p6,!0));D6(n,k5,F6,(0,o.Z)({},p6,!0)),D6(a,k5),b6(a,y5,a);var u=b6(n,m5,h5,(0,o.Z)({},h6,!0));b6(u,m5,u),D6(u,b5,u);var c=D6(u,w5);b6(c,m5,u);for(var l=[[p5,i]],h=[[p5,null],[v5,s]],d=0;d<D5.length;d++)S5(n,D5[d],E6,x6,l);for(var f=0;f<x5.length;f++)S5(n,x5[f],S6,C6,h);m6(E6,{tld:!0,ascii:!0},e),m6(S6,{utld:!0,alpha:!0},e),S5(n,"file",_6,x6,l),S5(n,"mailto",_6,x6,l),S5(n,"http",M6,x6,l),S5(n,"https",M6,x6,l),S5(n,"ftp",M6,x6,l),S5(n,"ftps",M6,x6,l),m6(_6,{scheme:!0,ascii:!0},e),m6(M6,{slashscheme:!0,ascii:!0},e),t=t.sort((function(t,e){return t[0]>e[0]?1:-1}));for(var p=0;p<t.length;p++){var v=t[p][0],m=t[p][1],g=m?(0,o.Z)({},d6,!0):(0,o.Z)({},f6,!0);v.indexOf("-")>=0?g[l6]=!0:p5.test(v)?g5.test(v)?g[u6]=!0:g[s6]=!0:g[o6]=!0,w6(n,v,v,g)}return w6(n,"localhost",A6,{ascii:!0}),n.jd=new y6(d5),{start:n,tokens:i6({groups:e},f5)}}function A5(t,e){var n=E5(e.replace(/[A-Z]/g,(function(t){return t.toLowerCase()}))),r=n.length,i=[],o=0,s=0;while(s<r){var a=t,u=null,c=0,l=null,h=-1,d=-1;while(s<r&&(u=a.go(n[s])))a=u,a.accepts()?(h=0,d=0,l=a):h>=0&&(h+=n[s].length,d++),c+=n[s].length,o+=n[s].length,s++;o-=h,s-=d,c-=h,i.push({t:l.t,v:e.slice(o-c,o),s:o-c,e:o})}return i}function E5(t){var e=[],n=t.length,r=0;while(r<n){var i=t.charCodeAt(r),o=void 0,s=i<55296||i>56319||r+1===n||(o=t.charCodeAt(r+1))<56320||o>57343?t[r]:t.slice(r,r+2);e.push(s),r+=s.length}return e}function S5(t,e,n,r,i){for(var o,s=e.length,a=0;a<s-1;a++){var u=e[a];t.j[u]?o=t.j[u]:(o=new y6(r),o.jr=i.slice(),t.j[u]=o),t=o}return o=new y6(n),o.jr=i.slice(),t.j[e[s-1]]=o,o}function _5(t){var e=[],n=[],r=0,i="0123456789";while(r<t.length){var o=0;while(i.indexOf(t[r+o])>=0)o++;if(o>0){e.push(n.join(""));for(var s=parseInt(t.substring(r,r+o),10);s>0;s--)n.pop();r+=o}else"_"===t[r]?(e.push(n.join("")),r++):(n.push(t[r]),r++)}return e}var M5={defaultProtocol:"http",events:null,format:T5,formatHref:T5,nl2br:!1,tagName:"a",target:null,rel:null,validate:!0,truncate:1/0,className:null,attributes:null,ignoreTags:[],render:null};function O5(t,e){void 0===e&&(e=null);var n=i6({},M5);t&&(n=i6(n,t instanceof O5?t.o:t));for(var r=n.ignoreTags,i=[],o=0;o<r.length;o++)i.push(r[o].toUpperCase());this.o=n,e&&(this.defaultRender=e),this.ignoreTags=i}function T5(t){return t}function F5(t,e){this.t="token",this.v=t,this.tk=e}function N5(t,e){var n=function(e){(0,g.Z)(r,e);var n=(0,y.Z)(r);function r(e,i){var o;return(0,w.Z)(this,r),o=n.call(this,e,i),o.t=t,o}return(0,D.Z)(r)}(F5);for(var r in e)n.prototype[r]=e[r];return n.t=t,n}O5.prototype={o:M5,ignoreTags:[],defaultRender:function(t){return t},check:function(t){return this.get("validate",t.toString(),t)},get:function(t,e,n){var r=null!=e,i=this.o[t];return i?("object"===(0,b.Z)(i)?(i=n.t in i?i[n.t]:M5[t],"function"===typeof i&&r&&(i=i(e,n))):"function"===typeof i&&r&&(i=i(e,n.t,n)),i):i},getObj:function(t,e,n){var r=this.o[t];return"function"===typeof r&&null!=e&&(r=r(e,n.t,n)),r},render:function(t){var e=t.render(this),n=this.get("render",null,t)||this.defaultRender;return n(e,t.t,t)}},F5.prototype={isLink:!1,toString:function(){return this.v},toHref:function(t){return this.toString()},toFormattedString:function(t){var e=this.toString(),n=t.get("truncate",e,this),r=t.get("format",e,this);return n&&r.length>n?r.substring(0,n)+"…":r},toFormattedHref:function(t){return t.get("formatHref",this.toHref(t.get("defaultProtocol")),this)},startIndex:function(){return this.tk[0].s},endIndex:function(){return this.tk[this.tk.length-1].e},toObject:function(t){return void 0===t&&(t=M5.defaultProtocol),{type:this.t,value:this.toString(),isLink:this.isLink,href:this.toHref(t),start:this.startIndex(),end:this.endIndex()}},toFormattedObject:function(t){return{type:this.t,value:this.toFormattedString(t),isLink:this.isLink,href:this.toFormattedHref(t),start:this.startIndex(),end:this.endIndex()}},validate:function(t){return t.get("validate",this.toString(),this)},render:function(t){var e=this,n=this.toFormattedHref(t),r=t.get("tagName",n,e),i=this.toFormattedString(t),o={},s=t.get("className",n,e),a=t.get("target",n,e),u=t.get("rel",n,e),c=t.getObj("attributes",n,e),l=t.getObj("events",n,e);return o.href=n,s&&(o.class=s),a&&(o.target=a),u&&(o.rel=u),c&&i6(o,c),{tagName:r,attributes:o,content:i,eventListeners:l}}};var B5=N5("email",{isLink:!0,toHref:function(){return"mailto:"+this.toString()}}),I5=N5("text"),L5=N5("nl"),R5=N5("url",{isLink:!0,toHref:function(t){return void 0===t&&(t=M5.defaultProtocol),this.hasProtocol()?this.v:"".concat(t,"://").concat(this.v)},hasProtocol:function(){var t=this.tk;return t.length>=2&&t[0].t!==A6&&t[1].t===W6}}),z5=function(t){return new y6(t)};function P5(t){var e=t.groups,n=e.domain.concat([q6,$6,V6,H6,J6,K6,G6,Q6,t5,O6,e5,n5,r5,i5,u5,d5,c5,l5]),r=[j6,P6,R6,z6,Z6,W6,U6,Y6,X6,I6,N6,B6,L6,o5,s5,a5],i=[q6,j6,$6,H6,J6,K6,R6,G6,Q6,t5,O6,N6,e5,n5,r5,i5,o5,u5,d5,c5,l5],o=z5(),s=D6(o,c5);k6(s,i,s),k6(s,e.domain,s);var a=z5(),u=z5(),c=z5();k6(o,e.domain,a),k6(o,e.scheme,u),k6(o,e.slashscheme,c),k6(a,i,s),k6(a,e.domain,a);var l=D6(a,V6);D6(s,V6,l),D6(u,V6,l),D6(c,V6,l);var h=D6(s,Y6);k6(h,i,s),k6(h,e.domain,s);var d=z5();k6(l,e.domain,d),k6(d,e.domain,d);var f=D6(d,Y6);k6(f,e.domain,d);var p=z5(B5);k6(f,e.tld,p),k6(f,e.utld,p),D6(l,A6,p);var v=D6(d,t5);k6(v,e.domain,d),k6(p,e.domain,d),D6(p,Y6,f),D6(p,t5,v);var m=D6(p,W6);k6(m,e.numeric,B5);var g=D6(a,t5),y=D6(a,Y6);k6(g,e.domain,a),k6(y,i,s),k6(y,e.domain,a);var k=z5(R5);k6(y,e.tld,k),k6(y,e.utld,k),k6(k,e.domain,a),k6(k,i,s),D6(k,Y6,y),D6(k,t5,g),D6(k,V6,l);var b=D6(k,W6),w=z5(R5);k6(b,e.numeric,w);var D=z5(R5),x=z5();k6(D,n,D),k6(D,r,x),k6(x,n,D),k6(x,r,x),D6(k,u5,D),D6(w,u5,D);var C=D6(u,W6),A=D6(c,W6),E=D6(A,u5);D6(E,u5,C),k6(u,e.domain,a),D6(u,Y6,y),D6(u,t5,g),k6(c,e.domain,a),D6(c,Y6,y),D6(c,t5,g),k6(C,e.domain,D),D6(C,u5,D);var S=D6(D,N6),_=D6(D,B6),M=D6(D,I6),O=D6(D,L6);D6(x,N6,S),D6(x,B6,_),D6(x,I6,M),D6(x,L6,O),D6(S,R6,D),D6(_,z6,D),D6(M,P6,D),D6(O,Z6,D),D6(S,R6,D);var T=z5(R5),F=z5(R5),N=z5(R5),B=z5(R5);k6(S,n,T),k6(_,n,F),k6(M,n,N),k6(O,n,B);var I=z5(),L=z5(),R=z5(),z=z5();return k6(S,r),k6(_,r),k6(M,r),k6(O,r),k6(T,n,T),k6(F,n,F),k6(N,n,N),k6(B,n,B),k6(T,r,T),k6(F,r,F),k6(N,r,N),k6(B,r,B),k6(I,n,I),k6(L,n,F),k6(R,n,N),k6(z,n,B),k6(I,r,I),k6(L,r,L),k6(R,r,R),k6(z,r,z),D6(F,z6,D),D6(N,P6,D),D6(B,Z6,D),D6(T,R6,D),D6(L,z6,D),D6(R,P6,D),D6(z,Z6,D),D6(I,Z6,D),D6(o,A6,k),D6(o,F6,L5),{start:o,tokens:f5}}function Z5(t,e,n){var r=n.length,i=0,o=[],s=[];while(i<r){var a=t,u=null,c=null,l=0,h=null,d=-1;while(i<r&&!(u=a.go(n[i].t)))s.push(n[i++]);while(i<r&&(c=u||a.go(n[i].t)))u=null,a=c,a.accepts()?(d=0,h=a):d>=0&&d++,i++,l++;if(d<0)i-=l,i<r&&(s.push(n[i]),i++);else{s.length>0&&(o.push(q5(I5,e,s)),s=[]),i-=d,l-=d;var f=h.t,p=n.slice(i-l,i);o.push(q5(f,e,p))}}return s.length>0&&o.push(q5(I5,e,s)),o}function q5(t,e,n){var r=n[0].s,i=n[n.length-1].e,o=e.slice(r,i);return new t(o,n)}var j5="undefined"!==typeof console&&console&&console.warn||function(){},$5="until manual call of linkify.init(). Register all schemes and plugins before invoking linkify the first time.",V5={scanner:null,parser:null,tokenQueue:[],pluginQueue:[],customSchemes:[],initialized:!1};function H5(){y6.groups={},V5.scanner=null,V5.parser=null,V5.tokenQueue=[],V5.pluginQueue=[],V5.customSchemes=[],V5.initialized=!1}function J5(t,e){if(void 0===e&&(e=!1),V5.initialized&&j5('linkifyjs: already initialized - will not register custom scheme "'.concat(t,'" ').concat($5)),!/^[0-9a-z]+(-[0-9a-z]+)*$/.test(t))throw new Error('linkifyjs: incorrect scheme format.\n 1. Must only contain digits, lowercase ASCII letters or "-"\n 2. Cannot start or end with "-"\n 3. "-" cannot repeat');V5.customSchemes.push([t,e])}function K5(){V5.scanner=C5(V5.customSchemes);for(var t=0;t<V5.tokenQueue.length;t++)V5.tokenQueue[t][1]({scanner:V5.scanner});V5.parser=P5(V5.scanner.tokens);for(var e=0;e<V5.pluginQueue.length;e++)V5.pluginQueue[e][1]({scanner:V5.scanner,parser:V5.parser});V5.initialized=!0}function W5(t){return V5.initialized||K5(),Z5(V5.parser.start,t,A5(V5.scanner.start,t))}function U5(t,e,n){if(void 0===e&&(e=null),void 0===n&&(n=null),e&&"object"===(0,b.Z)(e)){if(n)throw Error("linkifyjs: Invalid link type ".concat(e,"; must be a string"));n=e,e=null}for(var r=new O5(n),i=W5(t),o=[],s=0;s<i.length;s++){var a=i[s];!a.isLink||e&&a.t!==e||o.push(a.toFormattedObject(r))}return o}function G5(t,e){void 0===e&&(e=null);var n=W5(t);return 1===n.length&&n[0].isLink&&(!e||n[0].t===e)}function Y5(t){return new on({key:new un("autolink"),appendTransaction:function(e,n,r){var i=e.some((function(t){return t.docChanged}))&&!n.doc.eq(r.doc),o=e.some((function(t){return t.getMeta("preventAutolink")}));if(i&&!o){var a=r.tr,c=Gl(n.doc,(0,s.Z)(e)),l=c.mapping,h=uh(c);if(h.forEach((function(e){var i=e.oldRange,o=e.newRange;ch(i.from,i.to,n.doc).filter((function(e){return e.mark.type===t.type})).forEach((function(e){var i=l.map(e.from),o=l.map(e.to),s=ch(i,o,r.doc).filter((function(e){return e.mark.type===t.type}));if(s.length){var u=s[0],c=n.doc.textBetween(e.from,e.to,void 0," "),h=r.doc.textBetween(u.from,u.to,void 0," "),d=G5(c),f=G5(h);d&&!f&&a.removeMark(u.from,u.to,t.type)}}));var s,c,h=Ql(r.doc,o,(function(t){return t.isTextblock}));if(h.length>1?(s=h[0],c=r.doc.textBetween(s.pos,s.pos+s.node.nodeSize,void 0," ")):h.length&&r.doc.textBetween(o.from,o.to," "," ").endsWith(" ")&&(s=h[0],c=r.doc.textBetween(s.pos,o.to,void 0," ")),s&&c){var d=c.split(" ").filter((function(t){return""!==t}));if(d.length<=0)return!1;var f=d[d.length-1],p=s.pos+c.lastIndexOf(f);if(!f)return!1;U5(f).filter((function(t){return t.isLink})).filter((function(e){return!t.validate||t.validate(e.value)})).map((function(t){return u(u({},t),{},{from:p+t.start+1,to:p+t.end+1})})).forEach((function(e){a.addMark(e.from,e.to,t.type.create({href:e.href}))}))}})),a.steps.length)return a}}})}function Q5(t){return new on({key:new un("handleClickLink"),props:{handleClick:function(e,n,r){var i,o,s;if(0!==r.button)return!1;var a=oh(e.state,t.type.name),u=null===(i=r.target)||void 0===i?void 0:i.closest("a"),c=null!==(o=null===u||void 0===u?void 0:u.href)&&void 0!==o?o:a.href,l=null!==(s=null===u||void 0===u?void 0:u.target)&&void 0!==s?s:a.target;return!(!u||!c)&&(window.open(c,l),!0)}}})}function X5(t){return new on({key:new un("handlePasteLink"),props:{handlePaste:function(e,n,r){var i=e.state,o=i.selection,s=o.empty;if(s)return!1;var a="";r.content.forEach((function(t){a+=t.textContent}));var u=U5(a).find((function(t){return t.isLink&&t.value===a}));return!(!a||!u)&&(t.editor.commands.setMark(t.type,{href:u.href}),!0)}}})}var t4,e4=Yh.create({name:"link",priority:1e3,keepOnSplit:!1,onCreate:function(){this.options.protocols.forEach((function(t){"string"!==typeof t?J5(t.scheme,t.optionalSlashes):J5(t)}))},onDestroy:function(){H5()},inclusive:function(){return this.options.autolink},addOptions:function(){return{openOnClick:!0,linkOnPaste:!0,autolink:!0,protocols:[],HTMLAttributes:{target:"_blank",rel:"noopener noreferrer nofollow",class:null},validate:void 0}},addAttributes:function(){return{href:{default:null},target:{default:this.options.HTMLAttributes.target},class:{default:this.options.HTMLAttributes.class}}},parseHTML:function(){return[{tag:'a[href]:not([href *= "javascript:" i])'}]},renderHTML:function(t){var e=t.HTMLAttributes;return["a",kc(this.options.HTMLAttributes,e),0]},addCommands:function(){var t=this;return{setLink:function(e){return function(n){var r=n.chain;return r().setMark(t.name,e).setMeta("preventAutolink",!0).run()}},toggleLink:function(e){return function(n){var r=n.chain;return r().toggleMark(t.name,e,{extendEmptyMarkRange:!0}).setMeta("preventAutolink",!0).run()}},unsetLink:function(){return function(e){var n=e.chain;return n().unsetMark(t.name,{extendEmptyMarkRange:!0}).setMeta("preventAutolink",!0).run()}}}},addPasteRules:function(){var t=this;return[Xh({find:function(e){return U5(e).filter((function(e){return!t.options.validate||t.options.validate(e.value)})).filter((function(t){return t.isLink})).map((function(t){return{text:t.value,index:t.start,data:t}}))},type:this.type,getAttributes:function(t){var e;return{href:null===(e=t.data)||void 0===e?void 0:e.href}}})]},addProseMirrorPlugins:function(){var t=[];return this.options.autolink&&t.push(Y5({type:this.type,validate:this.options.validate})),this.options.openOnClick&&t.push(Q5({type:this.type})),this.options.linkOnPaste&&t.push(X5({editor:this.editor,type:this.type})),t}}),n4={marks:(v={em:G3.marks.em},(0,o.Z)(v,sd.name,G3.marks.strong),(0,o.Z)(v,fd.name,G3.marks.code),(0,o.Z)(v,lf.name,{open:"_",close:"_",mixable:!0,expelEnclosingWhitespace:!0}),(0,o.Z)(v,e4.name,G3.marks.link),(0,o.Z)(v,kf.name,{open:"~~",close:"~~",mixable:!0,expelEnclosingWhitespace:!0}),v),nodes:Object.assign(Object.assign({},G3.nodes),(m={},(0,o.Z)(m,ed.name,(function(t,e){e.attrs.multiline?(t.write(">>>"),t.ensureNewLine(),t.renderContent(e),t.ensureNewLine(),t.write(">>>"),t.closeBlock(e)):t.wrapBlock("> ",null,e,(function(){return t.renderContent(e)}))})),(0,o.Z)(m,md.name,G3.nodes.code_block),(0,o.Z)(m,Nd.name,G3.nodes.heading),(0,o.Z)(m,Fd.name,G3.nodes.hard_break),(0,o.Z)(m,of.name,G3.nodes.horizontal_rule),(0,o.Z)(m,Tf.name,G3.nodes.bullet_list),(0,o.Z)(m,vf.name,G3.nodes.ordered_list),(0,o.Z)(m,hf.name,G3.nodes.list_item),(0,o.Z)(m,mf.name,G3.nodes.paragraph),(0,o.Z)(m,Text.name,G3.nodes.text),(0,o.Z)(m,Af.name,(function(t,e){t.write("[".concat(e.attrs.checked?"x":" ","] ")),t.renderContent(e)})),(0,o.Z)(m,Mf.name,(function(t,e,n,r){e.attrs.numeric?G3.nodes.ordered_list(t,e,n,r):G3.nodes.bullet_list(t,e,n,r)})),m))},r4=new U3(n4.nodes,n4.marks),i4=null,o4={serialize:function(t){return r4.serialize(t,{tightLists:!0})},parse:function(t){return i4||(i4=W3["tokenizer"].enable("strikethrough").use(e6,{enabled:!0,label:!0,labelAfter:!0})),i4.render(t)}};(function(t){t[t["ITALIC"]=0]="ITALIC",t[t["BOLD"]=1]="BOLD",t[t["H1"]=2]="H1",t[t["H2"]=3]="H2",t[t["STRIKE"]=4]="STRIKE",t[t["OL"]=5]="OL",t[t["UL"]=6]="UL",t[t["LINK"]=7]="LINK",t[t["CODE_BLOCK"]=8]="CODE_BLOCK",t[t["BLOCKQUOTE"]=9]="BLOCKQUOTE",t[t["TASK_LIST"]=10]="TASK_LIST"})(t4||(t4={}));var s4=function(t){return t.chain().focus()};function a4(t,e){switch(e){case t4.H1:s4(t).toggleHeading({level:1}).run();break;case t4.H2:s4(t).toggleHeading({level:2}).run();break;case t4.BOLD:s4(t).toggleBold().run();break;case t4.ITALIC:s4(t).toggleItalic().run();break;case t4.STRIKE:s4(t).toggleStrike().run();break;case t4.LINK:s4(t).unsetLink().run();break;case t4.OL:s4(t).toggleOrderedList().run();break;case t4.UL:s4(t).toggleBulletList().run();break;case t4.BLOCKQUOTE:s4(t).toggleBlockquote().run();break;case t4.CODE_BLOCK:s4(t).toggleCodeBlock().run();break;case t4.TASK_LIST:s4(t).toggleTaskList().run();break;default:console.warn("case missing:",e)}}function u4(t,e){if(!t)return!1;switch(e){case t4.H1:return t.isActive("heading",{level:1});case t4.H2:return t.isActive("heading",{level:2});case t4.BOLD:return t.isActive("bold");case t4.ITALIC:return t.isActive("italic");case t4.STRIKE:return t.isActive("strike");case t4.LINK:return t.isActive("link");case t4.OL:return t.isActive("orderedList");case t4.UL:return t.isActive("bulletList");case t4.BLOCKQUOTE:return t.isActive("blockquote");case t4.CODE_BLOCK:return t.isActive("code");case t4.TASK_LIST:return t.isActive("taskList");default:console.warn("case missing:",e)}}var c4="ino-markdown-editor .markdown-editor{border-radius:10px}ino-markdown-editor .markdown-editor--readonly .markdown-editor__toolbar{display:none}ino-markdown-editor .markdown-editor--readonly .ProseMirror{padding:0;border:0}ino-markdown-editor .markdown-editor--readonly .ProseMirror-focused{outline:none}ino-markdown-editor .markdown-editor__error-text{display:block;padding:10px;color:#9f0028}ino-markdown-editor .markdown-editor__toolbar{display:grid;grid-template-columns:auto auto;justify-content:space-between;border-radius:10px;background-color:#f9f9f9;padding:10px 20px;margin-bottom:10px}ino-markdown-editor .toolbar__action-button{--ino-icon-color-primary:#9d9d9d;border:0;margin:0;padding:1px 2px;border-radius:10px;background-color:transparent;font-size:22px}ino-markdown-editor .toolbar__action-button:hover{--ino-icon-color-primary:#0d10f3;background-color:rgba(13, 16, 243, 0.1);color:#0d10f3;cursor:pointer}ino-markdown-editor .toolbar__action-button--active{--ino-icon-color-primary:#0d10f3;background-color:rgba(13, 16, 243, 0.1);color:#0d10f3;box-shadow:inset 0 3px 6px rgba(0, 0, 0, 0.16)}ino-markdown-editor .toolbar__action-button ino-icon{vertical-align:middle;padding:5px}ino-markdown-editor .toolbar__view-mode{border-radius:0;margin:0}ino-markdown-editor .toolbar__view-mode:first-of-type{border-radius:10px 0 0 10px}ino-markdown-editor .toolbar__view-mode:last-of-type{border-radius:0 10px 10px 0}ino-markdown-editor .toolbar__text-format--show{display:block}ino-markdown-editor .toolbar__text-format--hide{display:none}ino-markdown-editor .markdown-editor__content__container{height:100%;width:100%}ino-markdown-editor .markdown-editor__content{overflow:auto;max-height:var(--ino-markdown-editor-max-height, none)}ino-markdown-editor .markdown-editor__content ino-textarea{width:100%;height:100%}ino-markdown-editor .markdown-editor__content ino-textarea .mdc-text-field--textarea.mdc-text-field--outlined{display:flex}ino-markdown-editor .markdown-editor__content ino-textarea .mdc-text-field--textarea.mdc-text-field--outlined:not(.mdc-text-field--disabled) .mdc-notched-outline__leading,ino-markdown-editor .markdown-editor__content ino-textarea .mdc-text-field--textarea.mdc-text-field--outlined:not(.mdc-text-field--disabled) .mdc-notched-outline__notch,ino-markdown-editor .markdown-editor__content ino-textarea .mdc-text-field--textarea.mdc-text-field--outlined:not(.mdc-text-field--disabled) .mdc-notched-outline__trailing{border-color:#e7e7e7}ino-markdown-editor .markdown-editor__content ino-textarea .mdc-text-field--textarea.mdc-text-field--outlined:not(.mdc-text-field--disabled):not(.mdc-text-field--focused):hover .mdc-notched-outline .mdc-notched-outline__leading,ino-markdown-editor .markdown-editor__content ino-textarea .mdc-text-field--textarea.mdc-text-field--outlined:not(.mdc-text-field--disabled):not(.mdc-text-field--focused):hover .mdc-notched-outline .mdc-notched-outline__notch,ino-markdown-editor .markdown-editor__content ino-textarea .mdc-text-field--textarea.mdc-text-field--outlined:not(.mdc-text-field--disabled):not(.mdc-text-field--focused):hover .mdc-notched-outline .mdc-notched-outline__trailing{border-color:#9b9b9b}ino-markdown-editor .markdown-editor__content ino-textarea .mdc-text-field--textarea.mdc-text-field--outlined .mdc-text-field__input{min-height:var(--ino-markdown-editor-min-height, 100px);line-height:normal;letter-spacing:0}ino-markdown-editor .show-editor{display:block}ino-markdown-editor .hide-editor{display:none}ino-markdown-editor .ProseMirror{min-height:var(--ino-markdown-editor-min-height, 100px);padding:15px;border-radius:4px;border:1px solid #e7e7e7;color:rgba(0, 0, 0, 0.87)}ino-markdown-editor .ProseMirror:hover:not(ino-markdown-editor .ProseMirror-focused){border-color:#9b9b9b}ino-markdown-editor .ProseMirror-focused{outline:#3d40f5 auto 1px}ino-markdown-editor .ProseMirror *:first-child{margin-top:0;padding-top:0}ino-markdown-editor .ProseMirror *:last-child{margin-bottom:0;padding-bottom:0}ino-markdown-editor .ProseMirror blockquote{padding-left:10px;border-left:3px solid #c1c1c1}ino-markdown-editor .ProseMirror p{margin-top:0;margin-bottom:1.2em}ino-markdown-editor .ProseMirror pre code{display:block;background-color:rgba(193, 193, 193, 0.15);white-space:pre;-webkit-overflow-scrolling:touch;overflow-x:auto;max-width:100%;min-width:100px;padding:6px 8px}ino-markdown-editor .ProseMirror ul[data-type=taskList]{list-style:none}ino-markdown-editor .ProseMirror :is(ul,ol)[data-type=taskList]{padding-left:12px}ino-markdown-editor .ProseMirror :is(ul,ol)[data-type=taskList] p{margin:0}ino-markdown-editor .ProseMirror :is(ul,ol)[data-type=taskList] li{display:flex}ino-markdown-editor .ProseMirror :is(ul,ol)[data-type=taskList] li>label{flex:0 0 auto;margin-right:0.5rem;user-select:none}ino-markdown-editor .ProseMirror :is(ul,ol)[data-type=taskList] li>div{flex:1 1 auto;display:inline-block}ino-markdown-editor .ProseMirror :is(ul,ol)[data-type=taskList] li input[type=checkbox]{accent-color:#3d40f5}",l4=function(){function t(e){var n=this;(0,w.Z)(this,t),(0,x.r)(this,e),this.viewModeChange=(0,x.c)(this,"viewModeChange",7),this.valueChange=(0,x.c)(this,"valueChange",7),this.inoBlur=(0,x.c)(this,"inoBlur",3),this.viewMode="preview",this.toolbarActionsState=new Set,this.errorMessage="",this.handlePreviewBlur=function(){var t=n.htmlToMarkdown();n.errorMessage||n.valueChange.emit(t),n.inoBlur.emit()},this.onEditorTransaction=function(){n.toolbarActionsState=new Set(Object.values(t4).filter((function(t){return"number"===typeof t&&u4(n.editor,t)})))},this.onTextareaChange=function(t){t.stopPropagation(),n.textareaRef.value=t.detail},this.handleMarkdownBlur=function(t){t.stopPropagation(),n.editor.commands.clearContent(),n.editor.commands.setContent(n.markdownToHtml(n.textareaRef.value)),n.errorMessage||n.valueChange.emit(n.textareaRef.value),n.inoBlur.emit()}}return(0,D.Z)(t,[{key:"handleInitialValueChange",value:function(t){this.initializeEditor(t)}},{key:"handleViewModeChange",value:function(t){var e;t===Sf.MARKDOWN&&this.textareaRef?(this.textareaRef.value=this.htmlToMarkdown(),this.textareaRef.rows=this.textareaRef.value.split("\n").length):null===(e=this.editor)||void 0===e||e.setEditable(t!==Sf.READONLY)}},{key:"componentDidLoad",value:function(){this.createEditor(),this.initialValue&&this.initializeEditor(this.initialValue),this.textareaRef.addEventListener("valueChange",this.onTextareaChange),this.textareaRef.addEventListener("inoBlur",this.handleMarkdownBlur)}},{key:"disconnectedCallback",value:function(){var t;null===(t=this.editor)||void 0===t||t.destroy(),this.textareaRef.removeEventListener("valueChange",this.onTextareaChange),this.textareaRef.removeEventListener("inoBlur",this.handleMarkdownBlur)}},{key:"initializeEditor",value:function(t){this.editor&&(this.editor.commands.setContent(this.markdownToHtml(t),!0),this.textareaRef.value=this.htmlToMarkdown(),this.textareaRef.rows=this.textareaRef.value.split("\n").length)}},{key:"createEditor",value:function(){this.editor=new Jh({element:this.editorRef,extensions:[wf.configure({bulletList:!1}),Tf,e4,Af,Mf],onBlur:this.handlePreviewBlur,onTransaction:this.onEditorTransaction,editable:this.viewMode!==Sf.READONLY})}},{key:"htmlToMarkdown",value:function(){var t=this;return this.tryParse((function(){var e=t.editor.schema.nodeFromJSON(t.editor.getJSON());return o4.serialize(e)}),this.textareaRef.value)}},{key:"markdownToHtml",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.initialValue;return this.tryParse((function(){return o4.parse(t)}),this.editor.getHTML())}},{key:"tryParse",value:function(t,e){try{return this.errorMessage="",t()}catch(n){return this.errorMessage=n.message,console.error(n),e}}},{key:"handleViewModeBtnClick",value:function(t){this.errorMessage||this.viewModeChange.emit(t)}},{key:"handleToolbarActionClick",value:function(t){a4(this.editor,t)}},{key:"render",value:function(){var t=this,e=this.viewMode===Sf.READONLY,n=e||this.viewMode===Sf.PREVIEW,r=this.viewMode===Sf.MARKDOWN,i=(0,C.c)({"markdown-editor":!0,"markdown-editor--readonly":e}),o=(0,C.c)({"markdown-editor__content__container":!0,"show-editor":n,"hide-editor":r}),s=(0,C.c)({"show-editor":r,"hide-editor":n}),a=function(e){return(0,C.c)({"toolbar__action-button":!0,"toolbar__view-mode":!0,"toolbar__action-button--active":t.viewMode===e})},u=(0,C.c)({"toolbar__text-format":!0,"toolbar__text-format--show":n,"toolbar__text-format--hide":r}),c=function(e){return(0,C.c)({"toolbar__action-button":!0,"toolbar__action-button--active":t.toolbarActionsState.has(e)})};return(0,x.h)("div",{class:i},(0,x.h)("div",{class:"markdown-editor__toolbar"},(0,x.h)("div",null,(0,x.h)("button",{class:a(Sf.PREVIEW),onClick:function(){return t.handleViewModeBtnClick(Sf.PREVIEW)}},(0,x.h)("ino-icon",{icon:"edit_text"})),(0,x.h)("button",{class:a(Sf.MARKDOWN),onClick:function(){return t.handleViewModeBtnClick(Sf.MARKDOWN)}},(0,x.h)("ino-icon",{icon:"code"}))),(0,x.h)("div",{class:u},(0,x.h)("button",{class:c(t4.H1),onClick:function(){return t.handleToolbarActionClick(t4.H1)}},(0,x.h)("ino-icon",{icon:"headline_one"})),(0,x.h)("button",{class:c(t4.H2),onClick:function(){return t.handleToolbarActionClick(t4.H2)}},(0,x.h)("ino-icon",{icon:"headline_two"})),(0,x.h)("button",{class:c(t4.BOLD),onClick:function(){return t.handleToolbarActionClick(t4.BOLD)}},(0,x.h)("ino-icon",{icon:"bold"})),(0,x.h)("button",{class:c(t4.ITALIC),onClick:function(){return t.handleToolbarActionClick(t4.ITALIC)}},(0,x.h)("ino-icon",{icon:"italic"})),(0,x.h)("button",{class:c(t4.STRIKE),onClick:function(){return t.handleToolbarActionClick(t4.STRIKE)}},(0,x.h)("ino-icon",{icon:"strikethrough"})),(0,x.h)("button",{class:c(t4.LINK),onClick:function(){return t.handleToolbarActionClick(t4.LINK)}},(0,x.h)("ino-icon",{icon:"link"})),(0,x.h)("button",{class:c(t4.UL),onClick:function(){return t.handleToolbarActionClick(t4.UL)}},(0,x.h)("ino-icon",{icon:"bullet_list"})),(0,x.h)("button",{class:c(t4.OL),onClick:function(){return t.handleToolbarActionClick(t4.OL)}},(0,x.h)("ino-icon",{icon:"numeric_list"})),(0,x.h)("button",{class:c(t4.TASK_LIST),onClick:function(){return t.handleToolbarActionClick(t4.TASK_LIST)}},(0,x.h)("ino-icon",{icon:"checkmark"})),(0,x.h)("button",{class:c(t4.BLOCKQUOTE),onClick:function(){return t.handleToolbarActionClick(t4.BLOCKQUOTE)}},(0,x.h)("ino-icon",{icon:"quote"})),(0,x.h)("button",{class:c(t4.CODE_BLOCK),onClick:function(){return t.handleToolbarActionClick(t4.CODE_BLOCK)}},(0,x.h)("ino-icon",{icon:"code_block"}))),(0,x.h)("ino-popover",{placement:"top-start",controlled:!0,"color-scheme":"transparent",visible:Boolean(this.errorMessage)},(0,x.h)("span",{class:"markdown-editor__error-text"},this.errorMessage))),(0,x.h)("div",{class:"markdown-editor__content"},(0,x.h)("div",{class:o,ref:function(e){return t.editorRef=e}}),(0,x.h)("ino-textarea",{ref:function(e){return t.textareaRef=e},class:s,cols:100,autogrow:!0,outline:!0})))}}],[{key:"watchers",get:function(){return{initialValue:["handleInitialValueChange"],viewMode:["handleViewModeChange"]}}}]),t}();l4.style=c4},4282:function(t,e,n){"use strict";n.d(e,{Z:function(){return i}});n(4115),n(634),n(8188),n(796),n(8673),n(6886),n(1372);var r=n(1644);function i(t,e){var n="undefined"!==typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=(0,r.Z)(t))||e&&t&&"number"===typeof t.length){n&&(t=n);var i=0,o=function(){};return{s:o,n:function(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var s,a=!0,u=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return a=t.done,t},e:function(t){u=!0,s=t},f:function(){try{a||null==n["return"]||n["return"]()}finally{if(u)throw s}}}}}}]);
//# sourceMappingURL=3226-legacy.710ebd7c.js.map