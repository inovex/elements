name: Deploy Example Projects

on:
  workflow_run:
    workflows: [ "Test & Build" ]
    types: [completed]
    branches: [master, elements-701_example_projects_no_nesting]

jobs:
  deploy:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v3
        with:
          ref: gh-pages
      - uses: actions/checkout@v3
        with:
          ref: master
          path: master_branch
      - uses: master_branch/.github/workflows/artifacts-download
        with:
          workflow-id: ${{ github.event.workflow_run.workflow_id }}
          download-example-artifacts: true
          example-artifacts-base-path: example-artifacts

      - name: Deploy Example Projects to Github Pages ðŸš€
        uses: JamesIves/github-pages-deploy-action@4.1.7
        with:
          branch: gh-pages # The branch the action should deploy to.
          commit-message: Deploying example projects
          folder: example-artifacts
          target-folder: example-projects
