"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4542],{9794:function(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__){__webpack_require__.d(__webpack_exports__,{CH:function(){return CH}});var ColorName,SandpackLogLevel2,ColorName1,SandpackLogLevel,react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(7294),react_dom__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(3935);function __rest(s,e){var t={};for(var p in s)Object.prototype.hasOwnProperty.call(s,p)&&0>e.indexOf(p)&&(t[p]=s[p]);if(null!=s&&"function"==typeof Object.getOwnPropertySymbols)for(var i=0,p=Object.getOwnPropertySymbols(s);i<p.length;i++)0>e.indexOf(p[i])&&Object.prototype.propertyIsEnumerable.call(s,p[i])&&(t[p[i]]=s[p[i]]);return t}let isValidHex=hex=>/^#([A-Fa-f0-9]{3,4}){1,2}$/.test(hex),getChunksFromString=(st,chunkSize)=>st.match(RegExp(`.{${chunkSize}}`,"g")),convertHexUnitTo256=hex=>parseInt(hex.repeat(2/hex.length),16);function transparent(color,opacity){if(!color)return color;let{r,g,b,a}=function(hex){if(!hex)return;if(!isValidHex(hex))throw Error("Invalid color string, must be a valid hex color");let chunkSize=Math.floor((hex.length-1)/3),hexArr=getChunksFromString(hex.slice(1),chunkSize),[r,g,b,a]=hexArr.map(convertHexUnitTo256);return{r,g,b,a:void 0!==a?a/255:1}}(color);return function(object){if(!object)return;let{r,g,b,a}=object;return`#${r.toString(16).padStart(2,"0")}${g.toString(16).padStart(2,"0")}${b.toString(16).padStart(2,"0")}${Math.round(255*a).toString(16).padStart(2,"0")}`}({r,g,b,a:a*opacity})}function map(tween,fn){return{prev:fn(tween.prev,"prev"),next:fn(tween.next,"next")}}function withDefault(t,deft){return{prev:(null==t?void 0:t.prev)===void 0?deft:t.prev,next:(null==t?void 0:t.next)===void 0?deft:t.next}}function codeToText(code){return code.lines.map(line=>line.tokens.map(token=>token.content).join("")).join("\n")}function splitParts(focus){return focus.split(/,(?![^\[]*\])/g)}function mergeToObject(entries){return entries.reduce((acc,obj)=>Object.assign(acc,obj),{})}function parsePartToObject(part){let columnsMatch=part.match(/(\d+)\[(.+)\]/);if(!columnsMatch)return mergeToObject(expandString(part).map(lineNumber=>({[lineNumber]:!0})));{let[,line,columns]=columnsMatch,columnsList=columns.split(",").map(parseExtremes),lineNumber=Number(line);return{[lineNumber]:columnsList}}}function parseExtremes(part){let[start,end]=part.split(":");if(!isNaturalNumber(start))throw new FocusNumberError(start);let startNumber=Number(start);if(startNumber<1)throw new LineOrColumnNumberError;if(!end)return{start:startNumber,end:startNumber};if(!isNaturalNumber(end))throw new FocusNumberError(end);return{start:startNumber,end:+end}}function parseFocus(focus){if(!focus)throw Error("Focus cannot be empty");try{let parts=focus.split(/,(?![^\[]*\])/g).map(parsePart);return function(pairs){let result={},index=-1,length=null==pairs?0:pairs.length;for(;++index<length;){var pair=pairs[index];result[pair[0]]=pair[1]}return result}(parts.flat())}catch(error){throw error}}function parsePart(part){let columnsMatch=part.match(/(\d+)\[(.+)\]/);if(!columnsMatch)return expandString(part).map(lineNumber=>[lineNumber-1,!0]);{let[,line,columns]=columnsMatch,columnsList=columns.split(",").map(expandString),lineIndex=Number(line)-1,columnIndexes=columnsList.flat().map(c=>c-1);return[[lineIndex,columnIndexes]]}}function expandString(part){let[start,end]=part.split(":");if(!isNaturalNumber(start))throw new FocusNumberError(start);let startNumber=Number(start);if(startNumber<1)throw new LineOrColumnNumberError;if(!end)return[startNumber];{if(!isNaturalNumber(end))throw new FocusNumberError(end);let list=[];for(let i=startNumber;i<=+end;i++)list.push(i);return list}}function isNaturalNumber(n){var n1=Math.abs(n=n.toString()),n2=parseInt(n,10);return!isNaN(n1)&&n2===n1&&n1.toString()===n}class LineOrColumnNumberError extends Error{constructor(){super("Invalid line or column number in focus string"),Object.setPrototypeOf(this,new.target.prototype)}}class FocusNumberError extends Error{constructor(number){super(`Invalid number "${number}" in focus string`),this.number=number,Object.setPrototypeOf(this,new.target.prototype)}}(ColorName=ColorName1||(ColorName1={}))[ColorName.CodeForeground=0]="CodeForeground",ColorName[ColorName.CodeBackground=1]="CodeBackground",ColorName[ColorName.EditorForeground=2]="EditorForeground",ColorName[ColorName.EditorBackground=3]="EditorBackground",ColorName[ColorName.FocusBorder=4]="FocusBorder",ColorName[ColorName.ActiveTabBackground=5]="ActiveTabBackground",ColorName[ColorName.ActiveTabForeground=6]="ActiveTabForeground",ColorName[ColorName.InactiveTabBackground=7]="InactiveTabBackground",ColorName[ColorName.InactiveTabForeground=8]="InactiveTabForeground",ColorName[ColorName.EditorGroupBorder=9]="EditorGroupBorder",ColorName[ColorName.EditorGroupHeaderBackground=10]="EditorGroupHeaderBackground",ColorName[ColorName.TabBorder=11]="TabBorder",ColorName[ColorName.ActiveTabBottomBorder=12]="ActiveTabBottomBorder",ColorName[ColorName.LineNumberForeground=13]="LineNumberForeground",ColorName[ColorName.InputForeground=14]="InputForeground",ColorName[ColorName.InputBackground=15]="InputBackground",ColorName[ColorName.InputBorder=16]="InputBorder",ColorName[ColorName.SelectionBackground=17]="SelectionBackground",ColorName[ColorName.IconForeground=18]="IconForeground",ColorName[ColorName.ListActiveSelectionBackground=19]="ListActiveSelectionBackground",ColorName[ColorName.ListActiveSelectionForeground=20]="ListActiveSelectionForeground",ColorName[ColorName.ListHoverBackground=21]="ListHoverBackground",ColorName[ColorName.ListHoverForeground=22]="ListHoverForeground",ColorName[ColorName.SideBarBackground=23]="SideBarBackground",ColorName[ColorName.SideBarForeground=24]="SideBarForeground",ColorName[ColorName.SideBarBorder=25]="SideBarBorder",ColorName[ColorName.LineHighlightBackground=26]="LineHighlightBackground",ColorName[ColorName.RangeHighlightBackground=27]="RangeHighlightBackground",ColorName[ColorName.EditorInfoForeground=28]="EditorInfoForeground";let contrastBorder="#6FC3DF";function getColor(theme,colorName){var _a,_b;let colors=theme.colors||{};switch(colorName){case ColorName1.CodeForeground:return(null===(_a=getGlobalSettings(theme))||void 0===_a?void 0:_a.foreground)||getColor(theme,ColorName1.EditorForeground);case ColorName1.CodeBackground:return(null===(_b=getGlobalSettings(theme))||void 0===_b?void 0:_b.background)||getColor(theme,ColorName1.EditorBackground);case ColorName1.EditorBackground:return colors["editor.background"]||getDefault(theme,{light:"#fffffe",dark:"#1E1E1E",hc:"#000000"});case ColorName1.EditorForeground:return colors["editor.foreground"]||getDefault(theme,{light:"#333333",dark:"#BBBBBB",hc:"#fffffe"});case ColorName1.FocusBorder:return colors.focusBorder||getDefault(theme,{light:"#0090F1",dark:"#007FD4",hc:contrastBorder});case ColorName1.ActiveTabBackground:return colors["tab.activeBackground"]||getColor(theme,ColorName1.EditorBackground);case ColorName1.ActiveTabForeground:return colors["tab.activeForeground"]||getDefault(theme,{dark:"#ffffff",light:"#333333",hc:"#ffffff"});case ColorName1.InactiveTabBackground:return colors["tab.inactiveBackground"]||getDefault(theme,{dark:"#2D2D2D",light:"#ECECEC",hc:void 0});case ColorName1.InactiveTabForeground:return colors["tab.inactiveForeground"]||getDefault(theme,{dark:transparent(getColor(theme,ColorName1.ActiveTabForeground),.5),light:transparent(getColor(theme,ColorName1.ActiveTabForeground),.7),hc:"#ffffff"});case ColorName1.TabBorder:return colors["tab.border"]||getDefault(theme,{dark:"#252526",light:"#F3F3F3",hc:contrastBorder});case ColorName1.ActiveTabBottomBorder:return colors["tab.activeBorder"]||getColor(theme,ColorName1.ActiveTabBackground);case ColorName1.EditorGroupBorder:return colors["editorGroup.border"]||getDefault(theme,{dark:"#444444",light:"#E7E7E7",hc:contrastBorder});case ColorName1.EditorGroupHeaderBackground:return colors["editorGroupHeader.tabsBackground"]||getDefault(theme,{dark:"#252526",light:"#F3F3F3",hc:void 0});case ColorName1.LineNumberForeground:return colors["editorLineNumber.foreground"]||getDefault(theme,{dark:"#858585",light:"#237893",hc:"#fffffe"});case ColorName1.InputBackground:return colors["input.background"]||getDefault(theme,{dark:"#3C3C3C",light:"#fffffe",hc:"#000000"});case ColorName1.InputForeground:return colors["input.foreground"]||getColor(theme,ColorName1.EditorForeground);case ColorName1.InputBorder:return colors["input.border"]||getDefault(theme,{dark:void 0,light:void 0,hc:contrastBorder});case ColorName1.SelectionBackground:return colors["editor.selectionBackground"]||getDefault(theme,{light:"#ADD6FF",dark:"#264F78",hc:"#f3f518"});case ColorName1.IconForeground:return colors["icon.foreground"]||getDefault(theme,{dark:"#C5C5C5",light:"#424242",hc:"#FFFFFF"});case ColorName1.SideBarBackground:return colors["sideBar.background"]||getDefault(theme,{dark:"#252526",light:"#F3F3F3",hc:"#000000"});case ColorName1.SideBarForeground:return colors["sideBar.foreground"]||getColor(theme,ColorName1.EditorForeground);case ColorName1.SideBarBorder:return colors["sideBar.border"]||getColor(theme,ColorName1.SideBarBackground);case ColorName1.ListActiveSelectionBackground:return colors["list.activeSelectionBackground"]||getDefault(theme,{dark:"#094771",light:"#0060C0",hc:"#000000"});case ColorName1.ListActiveSelectionForeground:return colors["list.activeSelectionForeground"]||getDefault(theme,{dark:"#fffffe",light:"#fffffe",hc:"#fffffe"});case ColorName1.ListHoverBackground:return colors["list.hoverBackground"]||getDefault(theme,{dark:"#2A2D2E",light:"#F0F0F0",hc:void 0});case ColorName1.ListHoverForeground:return colors["list.hoverForeground"]||void 0;case ColorName1.LineHighlightBackground:return colors["editor.lineHighlightBackground"]||getDefault(theme,{dark:void 0,light:void 0,hc:void 0});case ColorName1.RangeHighlightBackground:return colors["editor.rangeHighlightBackground"]||getDefault(theme,{dark:"#ffffff0b",light:"#fdff0033",hc:void 0});case ColorName1.EditorInfoForeground:return colors["editor.infoForeground"]||getDefault(theme,{dark:"#3794FF",light:"#1a85ff",hc:"#3794FF"});default:return"#f00"}}function getColorScheme(theme){let themeType=getThemeType(theme);return"dark"===themeType?"dark":"light"===themeType?"light":void 0}function getDefault(theme,defaults){return defaults[getThemeType(theme)]}function getThemeType(theme){var _a;return theme.type?theme.type:(null===(_a=theme.name)||void 0===_a?void 0:_a.toLowerCase().includes("light"))?"light":"dark"}function getGlobalSettings(theme){let settings=theme.settings?theme.settings:theme.tokenColors,globalSetting=settings?settings.find(s=>!s.name&&!s.scope):void 0;return null==globalSetting?void 0:globalSetting.settings}let useLayoutEffect$4="undefined"!=typeof window?react__WEBPACK_IMPORTED_MODULE_0__.useLayoutEffect:react__WEBPACK_IMPORTED_MODULE_0__.useEffect;function clamp$2(x,min,max){return Math.min(Math.max(x,min),max)}let newlineRe=/\r\n|\r|\n/;function getLongestLine(code,focus){let lines=code?code.split(newlineRe):[""],focusIndexes=function(focus,lines){if(!focus)return[...lines.keys()];{let parsed=parseFocus(focus),focusedIndexes=Object.keys(parsed).map(i=>parseInt(i,10));return focusedIndexes}}(focus,lines),longestLine="";return lines.forEach((line,index)=>{focusIndexes.includes(index)&&line.length>longestLine.length&&(longestLine=line)}),longestLine}function getWidthWithoutPadding(element){let computedStyle=getComputedStyle(element);return parseFloat(computedStyle.width)-parseFloat(computedStyle.paddingLeft)-parseFloat(computedStyle.paddingRight)}function getHeightWithoutPadding(element){if(!element)return null;let computedStyle=getComputedStyle(element);return parseFloat(computedStyle.height)-parseFloat(computedStyle.paddingTop)-parseFloat(computedStyle.paddingBottom)}function Diff(){}Diff.prototype={diff:function(oldString,newString){var options=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},callback=options.callback;"function"==typeof options&&(callback=options,options={}),this.options=options;var self1=this;function done(value){return callback?(setTimeout(function(){callback(void 0,value)},0),!0):value}oldString=this.castInput(oldString),newString=this.castInput(newString),oldString=this.removeEmpty(this.tokenize(oldString));var newLen=(newString=this.removeEmpty(this.tokenize(newString))).length,oldLen=oldString.length,editLength=1,maxEditLength=newLen+oldLen,bestPath=[{newPos:-1,components:[]}],oldPos=this.extractCommon(bestPath[0],newString,oldString,0);if(bestPath[0].newPos+1>=newLen&&oldPos+1>=oldLen)return done([{value:this.join(newString),count:newString.length}]);function execEditLength(){for(var diagonalPath=-1*editLength;diagonalPath<=editLength;diagonalPath+=2){var basePath=void 0,addPath=bestPath[diagonalPath-1],removePath=bestPath[diagonalPath+1],_oldPos=(removePath?removePath.newPos:0)-diagonalPath;addPath&&(bestPath[diagonalPath-1]=void 0);var canAdd=addPath&&addPath.newPos+1<newLen,canRemove=removePath&&0<=_oldPos&&_oldPos<oldLen;if(!canAdd&&!canRemove){bestPath[diagonalPath]=void 0;continue}if(!canAdd||canRemove&&addPath.newPos<removePath.newPos?(basePath={newPos:removePath.newPos,components:removePath.components.slice(0)},self1.pushComponent(basePath.components,void 0,!0)):(basePath=addPath,basePath.newPos++,self1.pushComponent(basePath.components,!0,void 0)),_oldPos=self1.extractCommon(basePath,newString,oldString,diagonalPath),basePath.newPos+1>=newLen&&_oldPos+1>=oldLen)return done(function(diff,components,newString,oldString,useLongestToken){for(var componentPos=0,componentLen=components.length,newPos=0,oldPos=0;componentPos<componentLen;componentPos++){var component=components[componentPos];if(component.removed){if(component.value=diff.join(oldString.slice(oldPos,oldPos+component.count)),oldPos+=component.count,componentPos&&components[componentPos-1].added){var tmp=components[componentPos-1];components[componentPos-1]=components[componentPos],components[componentPos]=tmp}}else{if(!component.added&&useLongestToken){var value=newString.slice(newPos,newPos+component.count);value=value.map(function(value,i){var oldValue=oldString[oldPos+i];return oldValue.length>value.length?oldValue:value}),component.value=diff.join(value)}else component.value=diff.join(newString.slice(newPos,newPos+component.count));newPos+=component.count,component.added||(oldPos+=component.count)}}var lastComponent=components[componentLen-1];return componentLen>1&&"string"==typeof lastComponent.value&&(lastComponent.added||lastComponent.removed)&&diff.equals("",lastComponent.value)&&(components[componentLen-2].value+=lastComponent.value,components.pop()),components}(self1,basePath.components,newString,oldString,self1.useLongestToken));bestPath[diagonalPath]=basePath}editLength++}if(callback)!function exec(){setTimeout(function(){if(editLength>maxEditLength)return callback();execEditLength()||exec()},0)}();else for(;editLength<=maxEditLength;){var ret=execEditLength();if(ret)return ret}},pushComponent:function(components,added,removed){var last=components[components.length-1];last&&last.added===added&&last.removed===removed?components[components.length-1]={count:last.count+1,added:added,removed:removed}:components.push({count:1,added:added,removed:removed})},extractCommon:function(basePath,newString,oldString,diagonalPath){for(var newLen=newString.length,oldLen=oldString.length,newPos=basePath.newPos,oldPos=newPos-diagonalPath,commonCount=0;newPos+1<newLen&&oldPos+1<oldLen&&this.equals(newString[newPos+1],oldString[oldPos+1]);)newPos++,oldPos++,commonCount++;return commonCount&&basePath.components.push({count:commonCount}),basePath.newPos=newPos,oldPos},equals:function(left,right){return this.options.comparator?this.options.comparator(left,right):left===right||this.options.ignoreCase&&left.toLowerCase()===right.toLowerCase()},removeEmpty:function(array){for(var ret=[],i=0;i<array.length;i++)array[i]&&ret.push(array[i]);return ret},castInput:function(value){return value},tokenize:function(value){return value.split("")},join:function(chars){return chars.join("")}};var extendedWordChars=/^[A-Za-z\xC0-\u02C6\u02C8-\u02D7\u02DE-\u02FF\u1E00-\u1EFF]+$/,reWhitespace=/\S/,wordDiff=new Diff;wordDiff.equals=function(left,right){return this.options.ignoreCase&&(left=left.toLowerCase(),right=right.toLowerCase()),left===right||this.options.ignoreWhitespace&&!reWhitespace.test(left)&&!reWhitespace.test(right)},wordDiff.tokenize=function(value){for(var tokens=value.split(/(\s+|[()[\]{}'"]|\b)/),i=0;i<tokens.length-1;i++)!tokens[i+1]&&tokens[i+2]&&extendedWordChars.test(tokens[i])&&extendedWordChars.test(tokens[i+2])&&(tokens[i]+=tokens[i+2],tokens.splice(i+1,2),i--);return tokens};var lineDiff=new Diff;function _typeof(obj){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj})(obj)}lineDiff.tokenize=function(value){var retLines=[],linesAndNewlines=value.split(/(\n|\r\n)/);linesAndNewlines[linesAndNewlines.length-1]||linesAndNewlines.pop();for(var i=0;i<linesAndNewlines.length;i++){var line=linesAndNewlines[i];i%2&&!this.options.newlineIsToken?retLines[retLines.length-1]+=line:(this.options.ignoreWhitespace&&(line=line.trim()),retLines.push(line))}return retLines},new Diff().tokenize=function(value){return value.split(/(\S.+?[.!?])(?=\s+|$)/)},new Diff().tokenize=function(value){return value.split(/([{}:;,]|\s+)/)};var objectPrototypeToString=Object.prototype.toString,jsonDiff=new Diff;jsonDiff.useLongestToken=!0,jsonDiff.tokenize=lineDiff.tokenize,jsonDiff.castInput=function(value){var _this$options=this.options,undefinedReplacement=_this$options.undefinedReplacement,_this$options$stringi=_this$options.stringifyReplacer,stringifyReplacer=void 0===_this$options$stringi?function(k,v){return void 0===v?undefinedReplacement:v}:_this$options$stringi;return"string"==typeof value?value:JSON.stringify(function canonicalize(obj,stack,replacementStack,replacer,key){for(stack=stack||[],replacementStack=replacementStack||[],replacer&&(obj=replacer(key,obj)),i=0;i<stack.length;i+=1)if(stack[i]===obj)return replacementStack[i];if("[object Array]"===objectPrototypeToString.call(obj)){for(stack.push(obj),canonicalizedObj=Array(obj.length),replacementStack.push(canonicalizedObj),i=0;i<obj.length;i+=1)canonicalizedObj[i]=canonicalize(obj[i],stack,replacementStack,replacer,key);return stack.pop(),replacementStack.pop(),canonicalizedObj}if(obj&&obj.toJSON&&(obj=obj.toJSON()),"object"===_typeof(obj)&&null!==obj){stack.push(obj),canonicalizedObj={},replacementStack.push(canonicalizedObj);var i,canonicalizedObj,_key,sortedKeys=[];for(_key in obj)obj.hasOwnProperty(_key)&&sortedKeys.push(_key);for(sortedKeys.sort(),i=0;i<sortedKeys.length;i+=1)canonicalizedObj[_key=sortedKeys[i]]=canonicalize(obj[_key],stack,replacementStack,replacer,_key);stack.pop(),replacementStack.pop()}else canonicalizedObj=obj;return canonicalizedObj}(value,null,null,stringifyReplacer),stringifyReplacer,"  ")},jsonDiff.equals=function(left,right){return Diff.prototype.equals.call(jsonDiff,left.replace(/,([\r\n])/g,"$1"),right.replace(/,([\r\n])/g,"$1"))};var arrayDiff=new Diff;function isIn(index,intervals){return Array.isArray(intervals)?intervals.some(({start,end})=>start-1<=index&&index<end):intervals}function getAnnotation(index,annotations){return annotations.find(({columnNumbers})=>columnNumbers.start-1<=index&&index<columnNumbers.end)}function tween$1(params,t){if(!0===params.fixed)return params.value;{let[start,end]=params.interval,[from,to]=params.extremes;if(t<start)return from;if(t>end)return to;let ease=params.ease||easing.linear;return from+ease((t-start)/(end-start))*(to-from)}}function stagger([start,end],index,count){if(count<=1)return[start,end];let totalDuration=end-start,stepDuration=totalDuration/Math.pow(count,1/8),stepStart=start+(totalDuration-stepDuration)/(count-1)*index;return[stepStart,stepStart+stepDuration]}arrayDiff.tokenize=function(value){return value.slice()},arrayDiff.join=arrayDiff.removeEmpty=function(value){return value};let easing={linear:function(t){return t},easeInQuad:function(t){return t*t},easeOutQuad:function(t){return t*(2-t)},easeInOutCubic:function(t){return t<.5?4*t*t*t:(t-1)*(2*t-2)*(2*t-2)+1}};function isInline(annotation){return!!annotation.focus.match(/(\d+)\[(.+)\]/)}function annotateMultilineSide(lines,ogAnnotations,getLineNumber){let annotations=[...ogAnnotations];annotations.sort((a,b)=>a.lineNumbers.start-b.lineNumbers.start);let lineIndex=0,groups=[];for(;lineIndex<lines.length;){let annotation=annotations[0],line=lines[lineIndex];if(annotation&&getLineNumber(line)>annotation.lineNumbers.start)throw"Code Hike can't handle two annotations for the same line";if(annotation&&getLineNumber(line)===annotation.lineNumbers.start){let group={lines:[],annotation};for(;line&&(!getLineNumber(line)||getLineNumber(line)<=annotation.lineNumbers.end);)group.lines.push(line),line=lines[++lineIndex];groups.push(group),annotations.shift()}else if(annotation){let group1={lines:[]};for(;line&&(!getLineNumber(line)||getLineNumber(line)<annotation.lineNumbers.start);)group1.lines.push(line),line=lines[++lineIndex];groups.push(group1)}else groups.push({lines:lines.slice(lineIndex)}),lineIndex=lines.length}return groups}function shiftGroups(tokenGroups,startColumn,newStartColumn){let removedGroups=[],currentStartColumn=startColumn;for(;currentStartColumn<newStartColumn&&tokenGroups.length>0;){let currentTokenGroup=tokenGroups.shift();removedGroups.push(currentTokenGroup);let length=currentTokenGroup.tokens.reduce((a,t)=>a+t.content.length,0);currentStartColumn+=length}return removedGroups}function SmoothContainer({dimensions,codeStep,children,minZoom=0,maxZoom=1.2,center=!1,progress}){let{prev,next}=function(_a){var{codeStep}=_a,rest=__rest(_a,["codeStep"]);let{lineHeight,lineWidth}=rest.dimensions,paramTween={prev:{extremes:[codeStep.firstFocusedLineNumber.prev-1,codeStep.lastFocusedLineNumber.prev-1],originalContentHeight:codeStep.lineCount.prev*lineHeight,lineWidth:lineWidth[0]},next:{extremes:[codeStep.firstFocusedLineNumber.next-1,codeStep.lastFocusedLineNumber.next-1],originalContentHeight:codeStep.lineCount.next*lineHeight,lineWidth:lineWidth[1]}};return map(paramTween,({extremes,originalContentHeight,lineWidth})=>(function({dimensions,lineWidth,minZoom,maxZoom,extremes,originalContentHeight,horizontalCenter}){var num,min;let{lineHeight}=dimensions,containerHeight=null==dimensions?void 0:dimensions.contentHeight,containerWidth=null==dimensions?void 0:dimensions.contentWidth,originalFocusHeight=(extremes[1]-extremes[0]+3)*lineHeight,leftPadding=(null==dimensions?void 0:dimensions.lineNumberWidth)||16,zoom=Math.max(Math.min((containerWidth-leftPadding-16)/lineWidth,containerHeight/originalFocusHeight,maxZoom),minZoom),contentHeight=originalContentHeight*zoom,focusStart=(extremes[0]-1)*lineHeight*zoom,focusEnd=(extremes[1]+2)*lineHeight*zoom,dy=containerHeight>contentHeight?(containerHeight-contentHeight)/2:(num=containerHeight/2-(focusEnd+focusStart)/2)<=(min=Math.max(containerHeight-contentHeight,-focusStart))?min:num>=0?0:num;return{zoom,dx:horizontalCenter?Math.max(containerWidth/2-lineWidth*zoom/2,0):0,dy,focusHeight:focusEnd-focusStart,focusWidth:lineWidth*zoom}})(Object.assign({extremes,originalContentHeight,lineWidth},rest)))}({codeStep,dimensions,minZoom,maxZoom,horizontalCenter:center}),zoom=tweenProp(prev.zoom,next.zoom,progress),dx=tweenProp(prev.dx,next.dx,progress),dy=tweenProp(prev.dy,next.dy,progress,codeStep.verticalInterval),focusHeight=tweenProp(prev.focusHeight,next.focusHeight,progress),focusWidth=tweenProp(prev.focusWidth,next.focusWidth,progress),lineNumberPad=((null==dimensions?void 0:dimensions.lineNumberWidth)||0)*zoom,leftPad=lineNumberPad||16,width=Math.max(focusWidth+leftPad,dimensions.contentWidth);return react__WEBPACK_IMPORTED_MODULE_0__.createElement(Container,{width:dimensions.containerWidth,height:dimensions.containerHeight,lang:codeStep.lang},react__WEBPACK_IMPORTED_MODULE_0__.createElement(Content$1,{dx:dx,dy:dy,scale:zoom,height:Math.max(focusHeight,dimensions.contentHeight),width:width},children(focusWidth,leftPad/zoom)))}function Container({width,height,children,lang}){return react__WEBPACK_IMPORTED_MODULE_0__.createElement("code",{style:{width,height,position:"relative",overflow:"auto"},className:"ch-code-scroll-parent",children:children,"data-ch-lang":lang})}function Content$1({dx,dy,scale,height,width,children}){return react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",{style:{position:"absolute",top:0,left:0,transformOrigin:"top left",width:width,height:height,overflow:"hidden"},className:"ch-code-scroll-content"},react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",{style:{position:"absolute",top:0,left:0,transform:`translateX(${dx}px) translateY(${dy}px) scale(${scale})`,transformOrigin:"left top",width:width/scale,height:(height-2*dy)/scale},children:children}))}function tweenProp(start,end,progress,interval=[0,1]){return tween$1({fixed:!1,interval,extremes:[start,end],ease:easing.easeInOutCubic},progress)}function SmoothLines(props){return react__WEBPACK_IMPORTED_MODULE_0__.createElement(SmoothContainer,Object.assign({},props),(focusWidth,startX)=>react__WEBPACK_IMPORTED_MODULE_0__.createElement(Lines,{codeStep:props.codeStep,focusWidth:focusWidth,lineHeight:props.dimensions.lineHeight,progress:props.progress,theme:props.theme,startX:startX,lineNumberWidth:props.dimensions.lineNumberWidth}))}function Lines({codeStep,progress,focusWidth,lineHeight,startX,theme,lineNumberWidth}){let groups=progress<.5?codeStep.groups.prev:codeStep.groups.next;return react__WEBPACK_IMPORTED_MODULE_0__.createElement(react__WEBPACK_IMPORTED_MODULE_0__.Fragment,null,groups.map((group,i)=>{if(!group.annotation)return react__WEBPACK_IMPORTED_MODULE_0__.createElement(LineGroup,{lines:group.lines,t:progress,focusWidth:focusWidth,lineHeight:lineHeight,startX:startX,key:i,theme:theme,lineNumberWidth:lineNumberWidth});let startY=tween$1(group.lines[0].tweenY,progress),lineCount=group.annotation.lineNumbers.end-group.annotation.lineNumbers.start+1,Component=group.annotation.Component;return react__WEBPACK_IMPORTED_MODULE_0__.createElement(Component,{style:{position:"absolute",height:lineCount*lineHeight,width:"100%",transform:`translateY(${startY*lineHeight}px)`},key:i,data:group.annotation.data,theme:group.annotation.theme,isInline:!1},react__WEBPACK_IMPORTED_MODULE_0__.createElement(LineGroup,{lines:group.lines,t:progress,focusWidth:focusWidth,lineHeight:lineHeight,startY:startY,startX:startX,theme:theme,lineNumberWidth:lineNumberWidth}))}))}function LineGroup({lines,focusWidth,lineHeight,t,startX,startY=0,theme,lineNumberWidth}){return react__WEBPACK_IMPORTED_MODULE_0__.createElement(react__WEBPACK_IMPORTED_MODULE_0__.Fragment,null,lines.map((line,key)=>{let{tweenX,tweenY,focused}=line,dx=tween$1(tweenX,t),dy=tween$1(tweenY,t),opacity=getOpacity(focused,t,dx);return react__WEBPACK_IMPORTED_MODULE_0__.createElement(react__WEBPACK_IMPORTED_MODULE_0__.Fragment,{key:key},lineNumberWidth?react__WEBPACK_IMPORTED_MODULE_0__.createElement("span",{className:"ch-code-line-number",style:{position:"absolute",top:0,left:0,transform:`translate(${dx*focusWidth}px, ${(dy-startY)*lineHeight}px)`,width:lineNumberWidth,opacity,color:getColor(theme,ColorName1.LineNumberForeground)}},t<.5?line.lineNumber.prev:line.lineNumber.next):void 0,react__WEBPACK_IMPORTED_MODULE_0__.createElement(LineContainer,{dx:startX+dx*focusWidth,dy:(dy-startY)*lineHeight,width:focusWidth,opacity:opacity},react__WEBPACK_IMPORTED_MODULE_0__.createElement(LineContent,{line:line,progress:t,dx:dx})))}))}function LineContent({line,progress,dx}){return react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",{style:{display:"inline-block",width:"100%"}},line.annotatedGroups.map((annotatedGroup,i)=>react__WEBPACK_IMPORTED_MODULE_0__.createElement(AnnotatedTokens,{annotatedGroup:annotatedGroup,progress:progress,dx:dx,key:i})),react__WEBPACK_IMPORTED_MODULE_0__.createElement("br",null))}function AnnotatedTokens({annotatedGroup,progress,dx}){var _a,_b,_c;let annotated=progress<.5?annotatedGroup.prev:annotatedGroup.next,tokenGroups=(null==annotated?void 0:annotated.groups)||[],Component=null===(_a=null==annotated?void 0:annotated.annotation)||void 0===_a?void 0:_a.Component,children=tokenGroups.map((group,i)=>{let opacity=getOpacity(group.focused,progress,dx);return react__WEBPACK_IMPORTED_MODULE_0__.createElement("span",{style:{opacity},key:i+1},group.element)});return Component?react__WEBPACK_IMPORTED_MODULE_0__.createElement(Component,{children:children,data:null===(_b=null==annotated?void 0:annotated.annotation)||void 0===_b?void 0:_b.data,theme:null===(_c=null==annotated?void 0:annotated.annotation)||void 0===_c?void 0:_c.theme,isInline:!0}):react__WEBPACK_IMPORTED_MODULE_0__.createElement(react__WEBPACK_IMPORTED_MODULE_0__.Fragment,null,children)}function LineContainer({children,dx,dy,opacity,width}){return react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",{style:{position:"absolute",top:0,left:0,transform:`translate(${dx}px, ${dy}px)`,width,display:opacity<=0?"none":void 0}},children)}function getOpacity(focused,progress,dx){return tween$1({fixed:!1,extremes:[focused.prev?.99:.33,focused.next?.99:.33],interval:[0,1]},progress)-1*Math.abs(dx)}function CopyButton({content,style,className}){let[copied,setCopied]=react__WEBPACK_IMPORTED_MODULE_0__.useState(!1);return react__WEBPACK_IMPORTED_MODULE_0__.createElement("svg",{style:style,onClick(){(function(text){if(!navigator.clipboard){(function(text){var textArea=document.createElement("textarea");textArea.value=text,textArea.style.top="0",textArea.style.left="0",textArea.style.position="fixed",document.body.appendChild(textArea),textArea.focus(),textArea.select();try{document.execCommand("copy")}catch(err){}document.body.removeChild(textArea)})(text);return}navigator.clipboard.writeText(text)})(content),setCopied(!0),setTimeout(()=>{setCopied(!1)},1200)},fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",className:className},react__WEBPACK_IMPORTED_MODULE_0__.createElement("title",null,"Copy"),copied?react__WEBPACK_IMPORTED_MODULE_0__.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"}):react__WEBPACK_IMPORTED_MODULE_0__.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"1.6px",d:"M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"}))}function CodeTween(_a){var{tween,progress,config}=_a,preProps=__rest(_a,["tween","progress","config"]);let stepInfo=function({tween,theme}){var fn;return function(input){let{highlightedLines,theme,focus}=input;return react__WEBPACK_IMPORTED_MODULE_0__.useMemo(()=>(function({theme,focus,annotations,highlightedLines,lang}){let normalCode=map(highlightedLines,lines=>lines.map(line=>line.tokens.map(t=>t.content).join("")).join("\n").trimEnd().concat("\n")),mergedCode=function(code,lines){let enterIndex=0,exitIndex=0,indexes=function(code){var oldStr,newStr;let changes=(oldStr=code.prev,newStr=code.next,lineDiff.diff(oldStr,newStr,void 0)),indexes=[],prevIndex=0,nextIndex=0;return changes.forEach(change=>{if(change.added)for(let i=0;i<change.count;i++)indexes.push({next:nextIndex++});else if(change.removed)for(let i1=0;i1<change.count;i1++)indexes.push({prev:prevIndex++});else for(let i2=0;i2<change.count;i2++)indexes.push({prev:prevIndex++,next:nextIndex++})}),indexes}(code),newLines=indexes.map(index=>void 0===index.next?Object.assign(Object.assign({},lines.prev[index.prev]),{lineNumber:{prev:index.prev+1},move:"exit",enterIndex:null,exitIndex:exitIndex++}):void 0===index.prev?Object.assign(Object.assign({},lines.next[index.next]),{lineNumber:{next:index.next+1},move:"enter",enterIndex:enterIndex++,exitIndex:null}):Object.assign(Object.assign({},lines.prev[index.prev]),{lineNumber:{prev:index.prev+1,next:index.next+1},move:"stay",enterIndex:null,exitIndex:null}));return{lines:newLines,enterCount:enterIndex,exitCount:exitIndex}}(normalCode,highlightedLines),{inlineAnnotations,multilineAnnotations}=function(annotations,theme){var fn,fn1,fn2;let expandedAnnotations=(fn=annotations=>annotations.flatMap(annotation=>splitParts(annotation.focus).map(part=>Object.assign(Object.assign({},annotation),{focus:part}))),map(withDefault(annotations,[]),fn)),inlineCodeAnnotations=(fn1=annotations=>annotations.filter(isInline),map(withDefault(expandedAnnotations,[]),fn1)),multilineCodeAnnotations=(fn2=annotations=>annotations.filter(a=>!isInline(a)),map(withDefault(expandedAnnotations,[]),fn2));return{inlineAnnotations:map(inlineCodeAnnotations,annotations=>(function(annotations,theme){let annotationMap={};return annotations.forEach(annotation=>{let focusMap=parsePartToObject(annotation.focus),lineNumber=+Object.keys(focusMap)[0],columnNumbersList=focusMap[lineNumber],lineAnnotations=annotationMap[lineNumber]||[];lineAnnotations.push({columnNumbers:columnNumbersList[0],data:annotation.data,theme:theme,Component:annotation.Component||(({children})=>react__WEBPACK_IMPORTED_MODULE_0__.createElement("span",{style:{outline:"red 1px solid"}},children))}),annotationMap[lineNumber]=lineAnnotations}),annotationMap})(annotations,theme)),multilineAnnotations:map(multilineCodeAnnotations,annotations=>annotations.map(annotation=>({lineNumbers:parseExtremes(annotation.focus),data:annotation.data,theme:theme,Component:annotation.Component||function(annotation,theme){let bg=theme.colors["editor.lineHighlightBackground"]||theme.colors["editor.selectionHighlightBackground"];return({children,style})=>react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",{style:Object.assign(Object.assign({},style),{background:bg,cursor:"pointer"}),onClick:_=>alert("clicked"),className:"ch-code-bg-annotation"},react__WEBPACK_IMPORTED_MODULE_0__.createElement("span",{className:"ch-code-bg-annotation-border",style:{background:"#00a2d3",width:"3px",height:"100%",position:"absolute",left:0}}),children)}(0,theme)})))}}(annotations,theme),focusedCode=function(mergedCode,focus,annotations){let{lines}=mergedCode,mergedCodeRest=__rest(mergedCode,["lines"]),focusByLineNumber=map(focus,(focus,key)=>{let stepLines="prev"===key?lines.filter(l=>"enter"!==l.move):lines.filter(l=>"exit"!==l.move);return focus?mergeToObject(splitParts(focus).map(parsePartToObject)):mergeToObject([...stepLines.keys()].map(lineIndex=>({[lineIndex+1]:!0})))}),splittedLines=lines.map(line=>{let{tokens}=line,rest=__rest(line,["tokens"]),lineFocus={prev:!!line.lineNumber.prev&&focusByLineNumber.prev[line.lineNumber.prev],next:!!line.lineNumber.next&&focusByLineNumber.next[line.lineNumber.next]},lineAnnotations={prev:line.lineNumber.prev&&annotations.prev[line.lineNumber.prev]||[],next:line.lineNumber.next&&annotations.next[line.lineNumber.next]||[]};return Object.assign({focused:map(lineFocus,focus=>!!focus),groups:function(tokens,focus,annotations){let focusExtremes=map(focus,focus=>Array.isArray(focus)?focus:[]),annotationExtremes=map(annotations,annotations=>annotations.map(({columnNumbers})=>columnNumbers)),allExtremes=[...focusExtremes.prev,...focusExtremes.next,...annotationExtremes.prev,...annotationExtremes.next],splittedTokens=function(tokens,extremes){let splitIndexes=[...extremes.map(e=>e.start-1),...extremes.map(e=>e.end)],oldTokens=tokens;return splitIndexes.forEach(splitIndex=>{let newTokens=[],i=0;oldTokens.forEach(token=>{let startIndex=i,endIndex=i+token.content.length;if(startIndex<splitIndex&&splitIndex<endIndex){let sliceIndex=splitIndex-startIndex,content0=token.content.slice(0,sliceIndex),content1=token.content.slice(sliceIndex);newTokens.push(Object.assign(Object.assign({},token),{content:content0})),newTokens.push(Object.assign(Object.assign({},token),{content:content1}))}else newTokens.push(token);i=endIndex}),oldTokens=newTokens}),oldTokens}(tokens,allExtremes),startIndex=0,currentGroup=null,groups=[];return splittedTokens.forEach(token=>{let newPrevFocus=isIn(startIndex,focus.prev),newNextFocus=isIn(startIndex,focus.next),newPrevAnnotation=getAnnotation(startIndex,annotations.prev),newNextAnnotation=getAnnotation(startIndex,annotations.next);currentGroup&&currentGroup.focused.prev===newPrevFocus&&currentGroup.focused.next===newNextFocus&&currentGroup.annotation.prev===newPrevAnnotation&&currentGroup.annotation.next===newNextAnnotation||(currentGroup={focused:{prev:newPrevFocus,next:newNextFocus},tokens:[],annotation:{prev:newPrevAnnotation,next:newNextAnnotation}},groups.push(currentGroup)),null==currentGroup||currentGroup.tokens.push(token),startIndex+=token.content.length}),groups.map(group=>({focused:group.focused,tokens:group.tokens,element:react__WEBPACK_IMPORTED_MODULE_0__.createElement(react__WEBPACK_IMPORTED_MODULE_0__.Fragment,null,group.tokens.map(({content,props},i)=>react__WEBPACK_IMPORTED_MODULE_0__.createElement("span",Object.assign({},props,{key:i+1}),content)))}))}(tokens,lineFocus,lineAnnotations)},rest)}),focusedLineNumbers=map(focusByLineNumber,focusByLineNumber=>Object.keys(focusByLineNumber).map(k=>Number(k))),firstFocusedLineNumber=map(focusedLineNumbers,focusedLineNumbers=>Math.min(...focusedLineNumbers)),lastFocusedLineNumber=map(focusedLineNumbers,focusedLineNumbers=>Math.max(...focusedLineNumbers));return Object.assign({lines:splittedLines,firstFocusedLineNumber,lastFocusedLineNumber},mergedCodeRest)}(mergedCode,withDefault(focus,null),inlineAnnotations),annotatedCode=function(_a,inlineAnnotations,annotations){var{lines}=_a,focusedCode=__rest(_a,["lines"]);let annotatedLines=lines.map(_a=>{var{groups}=_a,line=__rest(_a,["groups"]);let{lineNumber}=line,annotations={prev:lineNumber.prev&&inlineAnnotations.prev[lineNumber.prev]||[],next:lineNumber.next&&inlineAnnotations.next[lineNumber.next]||[]};return Object.assign(Object.assign({},line),{annotatedGroups:function(tokenGroups,annotations){let prevTokenGroups=[...tokenGroups],nextTokenGroups=[...tokenGroups],prevAnnotations=[...annotations.prev],nextAnnotations=[...annotations.next],annotatedGroups=[],prevColumn=1,nextColumn=1;for(;prevTokenGroups.length>0||nextTokenGroups.length>0;){let prevAnnotation=prevAnnotations[0],nextAnnotation=nextAnnotations[0],isPrevAnnotationStarting=prevAnnotation&&prevAnnotation.columnNumbers.start===prevColumn,isNextAnnotationStarting=nextAnnotation&&nextAnnotation.columnNumbers.start===nextColumn;if(prevColumn<nextColumn){if(isPrevAnnotationStarting){let end=prevAnnotation.columnNumbers.end+1;annotatedGroups.push({prev:{annotation:prevAnnotation,groups:shiftGroups(prevTokenGroups,prevColumn,end)}}),prevColumn=end,prevAnnotations.shift()}else{let end1=Math.min(nextColumn,(null==prevAnnotation?void 0:prevAnnotation.columnNumbers.start)||nextColumn);annotatedGroups.push({prev:{groups:shiftGroups(prevTokenGroups,prevColumn,end1)}}),prevColumn=end1}}else if(prevColumn>nextColumn){if(isNextAnnotationStarting){let end2=nextAnnotation.columnNumbers.end+1;annotatedGroups.push({next:{annotation:nextAnnotation,groups:shiftGroups(nextTokenGroups,nextColumn,end2)}}),nextColumn=end2,nextAnnotations.shift()}else{let end3=Math.min(prevColumn,(null==nextAnnotation?void 0:nextAnnotation.columnNumbers.start)||prevColumn);annotatedGroups.push({next:{groups:shiftGroups(nextTokenGroups,nextColumn,end3)}}),nextColumn=end3}}else if(prevColumn==nextColumn){if(isPrevAnnotationStarting&&isNextAnnotationStarting&&prevAnnotation.columnNumbers.end===nextAnnotation.columnNumbers.end){let end4=nextAnnotation.columnNumbers.end+1;annotatedGroups.push({prev:{annotation:prevAnnotation,groups:shiftGroups(prevTokenGroups,prevColumn,end4)},next:{annotation:nextAnnotation,groups:shiftGroups(nextTokenGroups,nextColumn,end4)}}),prevColumn=end4,nextColumn=end4,prevAnnotations.shift(),nextAnnotations.shift()}else if(isPrevAnnotationStarting){let end5=prevAnnotation.columnNumbers.end+1;annotatedGroups.push({prev:{annotation:prevAnnotation,groups:shiftGroups(prevTokenGroups,prevColumn,end5)}}),prevColumn=end5,prevAnnotations.shift()}else if(isNextAnnotationStarting){let end6=nextAnnotation.columnNumbers.end+1;annotatedGroups.push({next:{annotation:nextAnnotation,groups:shiftGroups(nextTokenGroups,nextColumn,end6)}}),nextColumn=end6,nextAnnotations.shift()}else if(prevAnnotation||nextAnnotation){let end7=Math.min((null==prevAnnotation?void 0:prevAnnotation.columnNumbers.start)||Number.MAX_VALUE,(null==nextAnnotation?void 0:nextAnnotation.columnNumbers.start)||Number.MAX_VALUE);annotatedGroups.push({prev:{groups:shiftGroups(prevTokenGroups,prevColumn,end7)},next:{groups:shiftGroups(nextTokenGroups,nextColumn,end7)}}),prevColumn=end7,nextColumn=end7}else annotatedGroups.push({prev:{groups:prevTokenGroups},next:{groups:nextTokenGroups}}),prevTokenGroups=[],nextTokenGroups=[]}}return annotatedGroups}(groups,annotations)})}),lineGroups={prev:annotateMultilineSide(annotatedLines,annotations.prev,line=>line.lineNumber.prev),next:annotateMultilineSide(annotatedLines,annotations.next,line=>line.lineNumber.next)};return Object.assign(Object.assign({},focusedCode),{lineGroups:lineGroups,lineCount:{prev:lines.filter(l=>null!=l.lineNumber.prev).length,next:lines.filter(l=>null!=l.lineNumber.next).length}})}(focusedCode,inlineAnnotations,multilineAnnotations),codeStep=function(codeStep,code,lang){var enterCount,exitCount;let vInterval=(enterCount=codeStep.enterCount,exitCount=codeStep.exitCount,enterCount<=0&&exitCount<=0?[0,1]:enterCount<=0&&exitCount>=1?[.33,1]:enterCount>=1&&exitCount<=0?[0,.67]:[.25,.75]),newGroups=map(codeStep.lineGroups,groups=>groups.map(group=>Object.assign(Object.assign({},group),{lines:function(lines,verticalInterval,enterCount,exitCount){let[startY,endY]=verticalInterval;return lines.map(line=>{let lineIndex=map(line.lineNumber,ln=>ln&&ln-1),{enterIndex,exitIndex}=line,tweenY="exit"===line.move?{fixed:!0,value:lineIndex.prev}:"enter"===line.move?{fixed:!0,value:lineIndex.next}:{fixed:!1,extremes:[lineIndex.prev,lineIndex.next],interval:[startY,endY],ease:easing.easeInOutCubic},tweenX="exit"===line.move?{fixed:!1,extremes:[0,-1],ease:easing.easeInQuad,interval:stagger([0,startY],exitIndex,exitCount)}:"enter"===line.move?{fixed:!1,extremes:[1,0],ease:easing.easeOutQuad,interval:stagger([endY,1],enterIndex,enterCount)}:{fixed:!0,value:0};return Object.assign(Object.assign({},line),{tweenX,tweenY})})}(group.lines,vInterval,codeStep.enterCount,codeStep.exitCount)})));return Object.assign(Object.assign({},codeStep),{groups:newGroups,verticalInterval:vInterval,code,lang})}(annotatedCode,normalCode,lang);return codeStep})(input),[highlightedLines.prev,highlightedLines.next,focus.prev,focus.next,theme])}({highlightedLines:map(tween,tween=>tween.code.lines),theme,focus:map(tween,tween=>tween.focus),annotations:map(tween,tween=>tween.annotations),lang:(fn=tween=>{var _a;return null===(_a=null==tween?void 0:tween.code)||void 0===_a?void 0:_a.lang})(tween.prev)||fn(tween.next)})}({tween,theme:config.theme}),{element,dimensions}=function(code,focus,minColumns,lineNumbers,rows,deps){let[dimensions,setDimensions]=react__WEBPACK_IMPORTED_MODULE_0__.useState(null),windowWidth=function(){let[width,setWidth]=react__WEBPACK_IMPORTED_MODULE_0__.useState(void 0);return react__WEBPACK_IMPORTED_MODULE_0__.useEffect(()=>{function handleResize(){setWidth(window.innerWidth)}return window.addEventListener("resize",handleResize),()=>window.removeEventListener("resize",handleResize)},[]),width}(),prevLineRef=react__WEBPACK_IMPORTED_MODULE_0__.useRef(null),{prevLongestLine,nextLongestLine,element}=react__WEBPACK_IMPORTED_MODULE_0__.useMemo(()=>{let prevLongestLine=getLongestLine(code.prev,focus.prev),nextLongestLine=getLongestLine(code.next,focus.next),lines=(code.prev||code.next).trimEnd().split(newlineRe),originalLineCount=lines.length;if(rows){let heightInLines="focus"===rows?function(focus,lines){let[start,end]=function(focus,lines){if(!focus)return[0,lines.length-1];{let parsed=parseFocus(focus),focusedIndexes=Object.keys(parsed).map(i=>parseInt(i,10));return[Math.min(...focusedIndexes),Math.max(...focusedIndexes)]}}(focus.prev,lines);return end-start+1}(focus,lines):rows,i=lines.length;for(;i<heightInLines;)lines.push(""),i++;for(;i>heightInLines;)lines.pop(),i--;prevLongestLine&&!lines.includes(prevLongestLine)&&(lines[lines.length-1]=prevLongestLine)}let prevLineRefSet=!1,element=react__WEBPACK_IMPORTED_MODULE_0__.createElement("code",{className:"ch-code-scroll-parent"},react__WEBPACK_IMPORTED_MODULE_0__.createElement("br",null),lines.map((line,i)=>{let ref=prevLineRefSet||line!==prevLongestLine?void 0:prevLineRef;return prevLineRefSet=prevLineRefSet||null!=ref,react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",{ref:ref,key:i},lineNumbers?react__WEBPACK_IMPORTED_MODULE_0__.createElement("span",{className:"ch-code-line-number"},"_",originalLineCount):void 0,react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",{style:{display:"inline-block",marginLeft:16}},react__WEBPACK_IMPORTED_MODULE_0__.createElement("span",null,line)))}),react__WEBPACK_IMPORTED_MODULE_0__.createElement("br",null));return{prevLongestLine,nextLongestLine,element}},[code]),allDeps=[...deps,windowWidth,prevLongestLine,nextLongestLine,minColumns];return(useLayoutEffect$4(()=>{var _a;if(prevLineRef.current){let pll=prevLineRef.current,contentElement=null==pll?void 0:pll.parentElement,codeElement=contentElement.parentElement,lineContentDiv=null==pll?void 0:pll.querySelector(":scope > div"),lineNumberSpan=null==pll?void 0:pll.querySelector(":scope > span"),lnw=lineNumberSpan?function(element){let computedStyle=getComputedStyle(element);return parseFloat(computedStyle.width)}(lineNumberSpan):0,plw=getWidthWithoutPadding(lineContentDiv),colWidth=plw/prevLongestLine.length||1,nlw=nextLongestLine.length*colWidth,lineHeight=null!==(_a=getHeightWithoutPadding(lineContentDiv))&&void 0!==_a?_a:20,d={containerWidth:getWidthWithoutPadding(codeElement.parentElement),containerHeight:getHeightWithoutPadding(codeElement.parentElement),contentWidth:getWidthWithoutPadding(contentElement.parentElement),contentHeight:getHeightWithoutPadding(contentElement.parentElement),lineWidths:[plw||nlw||200,nlw||plw||200],lineWidth:[Math.max(plw||nlw||200,colWidth*minColumns),Math.max(nlw||plw||200,colWidth*minColumns)],lineHeight,colWidth,lineNumberWidth:lnw,deps:allDeps};setDimensions(d)}},allDeps),!dimensions||function(oldDeps,newDeps){for(let i=0;i<oldDeps.length;i++)if(oldDeps[i]!==newDeps[i])return!0;return!1}(dimensions.deps,allDeps))?{element,dimensions:null}:{element,dimensions}}(stepInfo.code,map(tween,tween=>tween.focus),config.minColumns||10,config.lineNumbers||!1,config.rows,[config.parentHeight]);return!dimensions||config.debug?react__WEBPACK_IMPORTED_MODULE_0__.createElement(BeforeDimensions,{element:element,htmlProps:preProps,debug:config.debug}):react__WEBPACK_IMPORTED_MODULE_0__.createElement(AfterDimensions,{dimensions:dimensions,stepInfo:stepInfo,config:config,progress:progress,htmlProps:preProps})}function BeforeDimensions({element,htmlProps,debug}){return react__WEBPACK_IMPORTED_MODULE_0__.createElement(Wrapper,{htmlProps:htmlProps,style:{opacity:debug?.9:0,overflow:"auto"}},element)}function AfterDimensions({config:{minZoom=1,maxZoom=1,horizontalCenter=!1,theme},dimensions,stepInfo,progress,htmlProps,config}){var _a;let{bg,fg}={fg:getColor(theme,ColorName1.CodeForeground),bg:getColor(theme,ColorName1.CodeBackground)};return react__WEBPACK_IMPORTED_MODULE_0__.createElement(Wrapper,{htmlProps:htmlProps,style:{opacity:1,backgroundColor:bg,color:fg,colorScheme:getColorScheme(theme),"--ch-selection-background":getColor(theme,ColorName1.SelectionBackground)}},react__WEBPACK_IMPORTED_MODULE_0__.createElement(SmoothLines,{codeStep:stepInfo,progress:progress,dimensions:dimensions,minZoom:minZoom,maxZoom:maxZoom,center:horizontalCenter,theme:theme}),config.showCopyButton?react__WEBPACK_IMPORTED_MODULE_0__.createElement(CopyButton,{className:"ch-code-button",content:null===(_a=null==stepInfo?void 0:stepInfo.code)||void 0===_a?void 0:_a.prev}):void 0)}function Wrapper({htmlProps,style,children}){return react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",Object.assign({className:"ch-code-wrapper"},htmlProps,{style:Object.assign(Object.assign({margin:0,padding:0,position:"relative",whiteSpace:"pre",boxSizing:"content-box"},style),null==htmlProps?void 0:htmlProps.style),children:children}))}function currentTime(){return"undefined"!=typeof window?performance.now():0}function getConfigWithDefaults(target,_ref){var stiffness=_ref.stiffness,damping=_ref.damping,mass=_ref.mass,decimals=_ref.decimals,teleport=_ref.teleport;return{X:target,k:null!=stiffness?stiffness:170,c:null!=damping?damping:26,m:null!=mass?mass:1,teleport:null!=teleport&&teleport,decimals:null!=decimals?decimals:2}}var sqrt=Math.sqrt,exp=Math.exp,sin=Math.sin,cos=Math.cos;function spring(_ref){var x0=_ref.x0,v0=_ref.v0,t0=_ref.t0,t=_ref.t,k=_ref.k,c=_ref.c,m=_ref.m,X=_ref.X,dx=x0-X,dt=(t-t0)/1e3,radicand=c*c-4*k*m;if(radicand>0){var rp=(-c+sqrt(radicand))/(2*m),rn=(-c-sqrt(radicand))/(2*m),a=(dx*rp-v0)/(rp-rn),b=(v0-dx*rn)/(rp-rn);return{x:X+a*exp(rn*dt)+b*exp(rp*dt),v:a*rn*exp(rn*dt)+b*rp*exp(rp*dt)}}if(radicand<0){var r=-c/(2*m),s=sqrt(-radicand)/(2*m),_b=(v0-r*dx)/s;return{x:X+exp(r*dt)*(dx*cos(s*dt)+_b*sin(s*dt)),v:exp(r*dt)*((_b*s+dx*r)*cos(s*dt)-(dx*s-_b*r)*sin(s*dt))}}var _r=-c/(2*m),_b2=v0-_r*dx;return{x:X+(dx+_b2*dt)*exp(_r*dt),v:(_b2+dx*_r+_b2*_r*dt)*exp(_r*dt)}}var nextFrameQueue=[],nextFrameId=null;function queueAnimationFrame(fn){var length=nextFrameQueue.push(fn);return 1===length&&(nextFrameId=requestAnimationFrame(runQueue)),[nextFrameId,length-1]}function unqueueAnimationFrame(_ref){var frameId=_ref[0],index=_ref[1];frameId===nextFrameId&&delete nextFrameQueue[index]}function runQueue(){var now=currentTime(),queue=nextFrameQueue;nextFrameQueue=[],(0,react_dom__WEBPACK_IMPORTED_MODULE_1__.unstable_batchedUpdates)(function(){return queue.forEach(function(task){return task&&task(now)})})}var useLayoutEffect$3="undefined"!=typeof window?react__WEBPACK_IMPORTED_MODULE_0__.useLayoutEffect:react__WEBPACK_IMPORTED_MODULE_0__.useEffect;function useSpring(target,config){void 0===config&&(config={});var from,initialSpeed,decimals,X,k,c,m,config1,ref,forceUpdate=react__WEBPACK_IMPORTED_MODULE_0__.useState()[1],newConfig=getConfigWithDefaults(target,config),_useSpringInstance=(config1=config,null==(ref=react__WEBPACK_IMPORTED_MODULE_0__.useRef(null)).current&&(ref.current={config:getConfigWithDefaults(target,config1),state:{x0:null!=(from=config1.from)?from:target,v0:null!=(initialSpeed=config1.initialSpeed)?initialSpeed:0,t0:currentTime(),raf:null}}),ref.current),state=_useSpringInstance.state,oldConfig=_useSpringInstance.config,t=currentTime(),x0=state.x0,v0=state.v0,t0=state.t0,k1=oldConfig.k,c1=oldConfig.c,m1=oldConfig.m,X1=oldConfig.X,_ref=newConfig.teleport?{x:X1,v:0}:spring({x0:x0,v0:v0,t0:t0,t:t,k:k1,c:c1,m:m1,X:X1}),x=_ref.x,v=_ref.v,moving=(decimals=newConfig.decimals,X=newConfig.X,k=newConfig.k,c=newConfig.c,m=newConfig.m,roundTo(x,decimals)!==roundTo(X,decimals)||roundTo(spring({x0:x,v0:v,t0:t,t:t+.016,k:k,c:c,m:m,X:X}).x,decimals)!==roundTo(X,decimals));return useLayoutEffect$3(function(){Object.assign(oldConfig,newConfig)},[newConfig.X,newConfig.k,newConfig.c,newConfig.m,newConfig.teleport]),useLayoutEffect$3(function(){state.x0=x,state.v0=v,state.t0=t},[x,v,t]),useLayoutEffect$3(function(){moving&&null==state.raf?state.raf=queueAnimationFrame(function loop(now){var x0=state.x0,v0=state.v0,t0=state.t0,k=oldConfig.k,c=oldConfig.c,m=oldConfig.m,X=oldConfig.X,decimals=oldConfig.decimals;roundTo(spring({x0:x0,v0:v0,t0:t0,t:now,k:k,c:c,m:m,X:X}).x,decimals)!==roundTo(x0,decimals)?(state.raf=null,forceUpdate(now)):state.raf=queueAnimationFrame(loop)}):moving||null==state.raf||(unqueueAnimationFrame(state.raf),state.raf=null)}),useLayoutEffect$3(function(){return function(){null!=state.raf&&unqueueAnimationFrame(state.raf)}},[]),[roundTo(x,newConfig.decimals),moving]}function roundTo(x,decimals){var p=Math.pow(10,decimals);return Math.round(x*p)/p}let defaultSpring$1={stiffness:120,damping:24,mass:.2,decimals:3};function CodeSpring(_a){var{step,config}=_a,htmlProps=__rest(_a,["step","config"]);let{tween,t}=function(step,springConfig=defaultSpring$1){let[{target,steps,index},setState]=react__WEBPACK_IMPORTED_MODULE_0__.useState({target:2,steps:[step,step,step],index:0});react__WEBPACK_IMPORTED_MODULE_0__.useEffect(()=>{let lastStep=steps[steps.length-1];lastStep!=step&&setState(s=>(function(state,newStep,progress){let{steps,target,index}=state,stepsClone=steps.slice();return progress-index<1?(stepsClone[2]=newStep,Object.assign(Object.assign({},state),{steps:stepsClone})):(stepsClone[0]=steps[1],stepsClone[1]=steps[2],stepsClone[2]=newStep,Object.assign(Object.assign({},state),{steps:stepsClone,target:target+1,index:index+1}))})(s,step,progress))},[step]);let[progress]=useSpring(target,springConfig),trioProgress=progress-index,result=trioProgress<=1?{tween:{prev:steps[0],next:steps[1]},t:trioProgress}:{tween:{prev:steps[1],next:steps[2]},t:trioProgress-1};return result}(step,config.spring);return react__WEBPACK_IMPORTED_MODULE_0__.createElement(CodeTween,Object.assign({tween:tween,progress:t,config:config},htmlProps))}let ClasserContext=(0,react__WEBPACK_IMPORTED_MODULE_0__.createContext)({});function ClasserProvider({classes,children}){let outer=(0,react__WEBPACK_IMPORTED_MODULE_0__.useContext)(ClasserContext),mixed=useMerge(outer,classes);return react__WEBPACK_IMPORTED_MODULE_0__.createElement(ClasserContext.Provider,{value:mixed,children:children})}function useClasser(libClassPrefix,innerClasses){let outerClasses=(0,react__WEBPACK_IMPORTED_MODULE_0__.useContext)(ClasserContext),classes=useMerge(outerClasses,innerClasses);return(0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)(function(...libClassSuffixList){let libClassList=libClassSuffixList.map(libClassSuffix=>libClassPrefix+(libClassPrefix&&libClassSuffix?"-":"")+libClassSuffix),outputList=libClassList.slice();return libClassList.forEach(libClass=>{libClass in classes&&outputList.push(classes[libClass])}),outputList.join(" ")},[libClassPrefix,classes])}function useMerge(outer,inner){return(0,react__WEBPACK_IMPORTED_MODULE_0__.useMemo)(()=>Object.assign(Object.assign({},outer),inner),[outer,inner])}let MiniFrame=react__WEBPACK_IMPORTED_MODULE_0__.forwardRef(function(_a,ref){var{title,children,titleBar,classes,theme,zoom=1,overflow}=_a,props=__rest(_a,["title","children","titleBar","classes","theme","zoom","overflow"]);let c=useClasser("ch-frame",classes),bar=titleBar||react__WEBPACK_IMPORTED_MODULE_0__.createElement(DefaultTitleBar,{title:title});return react__WEBPACK_IMPORTED_MODULE_0__.createElement(ClasserProvider,{classes:classes},react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",Object.assign({},props,{ref:ref}),react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",{className:c("")},react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",{className:c("title-bar"),style:{background:getColor(theme,ColorName1.EditorGroupHeaderBackground)}},bar),react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",{className:c("content")},react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",{className:c("zoom"),style:{"--ch-frame-zoom":zoom,overflow}},children)))))});function DefaultTitleBar({title}){let c=useClasser("ch-frame");return react__WEBPACK_IMPORTED_MODULE_0__.createElement(react__WEBPACK_IMPORTED_MODULE_0__.Fragment,null,react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",{className:c("left-bar")},react__WEBPACK_IMPORTED_MODULE_0__.createElement(FrameButtons,null)),react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",{className:c("middle-bar")},title),react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",{className:c("right-bar")}))}function FrameButtons(){let c=useClasser("ch-frame");return react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",{className:c("buttons")},react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",{className:c("button","button-left")}),react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",{className:c("button-space")}),react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",{className:c("button","button-middle")}),react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",{className:c("button-space")}),react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",{className:c("button","button-right")}))}react__WEBPACK_IMPORTED_MODULE_0__.forwardRef(function(_a,ref){var{title,children,titleBar,classes,overflow}=_a,props=__rest(_a,["title","children","titleBar","classes","overflow"]);let c=useClasser("ch",classes),bar=titleBar||react__WEBPACK_IMPORTED_MODULE_0__.createElement(DefaultTitleBar,{title:title});return react__WEBPACK_IMPORTED_MODULE_0__.createElement(ClasserProvider,{classes:classes},react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",Object.assign({},props,{ref:ref}),react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",{className:c("simple-frame")},react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",{className:c("frame-title-bar")},bar),children)))});let EditorFrame=react__WEBPACK_IMPORTED_MODULE_0__.forwardRef(function(_a,ref){var _b,{northPanel,southPanel,terminalPanel,style,height,northButton,southButton,theme,className,onTabClick}=_a,rest=__rest(_a,["northPanel","southPanel","terminalPanel","style","height","northButton","southButton","theme","className","onTabClick"]);return react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",Object.assign({ref:ref},rest,{className:"ch-editor-frame",style:Object.assign({background:getColor(theme,ColorName1.EditorBackground)},style)}),react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",{className:"ch-frame-title-bar",style:{color:getColor(theme,ColorName1.IconForeground),background:getColor(theme,ColorName1.EditorGroupHeaderBackground)}},react__WEBPACK_IMPORTED_MODULE_0__.createElement(TabsContainer,{tabs:northPanel.tabs,showFrameButtons:!0,button:northButton,panel:"north",theme:theme,onTabClick:onTabClick})),react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",{"data-ch-panel":"north",style:northPanel.style,children:northPanel.children}),southPanel&&react__WEBPACK_IMPORTED_MODULE_0__.createElement(react__WEBPACK_IMPORTED_MODULE_0__.Fragment,null,react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",{className:"ch-frame-title-bar",style:{transform:null===(_b=southPanel.style)||void 0===_b?void 0:_b.transform,color:getColor(theme,ColorName1.IconForeground),background:getColor(theme,ColorName1.EditorGroupHeaderBackground)}},react__WEBPACK_IMPORTED_MODULE_0__.createElement(TabsContainer,{tabs:southPanel.tabs,showFrameButtons:!1,button:southButton,topBorder:!0,panel:"south",theme:theme,onTabClick:onTabClick})),react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",{"data-ch-panel":"south",children:southPanel.children,style:southPanel.style})))});function TabsContainer({tabs,button,showFrameButtons,topBorder,panel,theme,onTabClick}){let c=useClasser("ch-editor-tab");return react__WEBPACK_IMPORTED_MODULE_0__.createElement(react__WEBPACK_IMPORTED_MODULE_0__.Fragment,null,topBorder&&react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",{style:{position:"absolute",height:"1px",background:getColor(theme,ColorName1.EditorGroupBorder),width:"100%",top:0,zIndex:1}}),showFrameButtons?react__WEBPACK_IMPORTED_MODULE_0__.createElement(FrameButtons,null):react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",null),tabs.map(({title,active,style})=>react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",{key:title,title:title,"data-ch-tab":panel,className:c("",active?"active":"inactive"),style:Object.assign(Object.assign({},style),{background:getColor(theme,active?ColorName1.ActiveTabBackground:ColorName1.InactiveTabBackground),color:getColor(theme,active?ColorName1.ActiveTabForeground:ColorName1.InactiveTabForeground),borderRightColor:getColor(theme,ColorName1.TabBorder),borderBottomColor:getColor(theme,active?ColorName1.ActiveTabBottomBorder:ColorName1.InactiveTabBackground)}),onClick:onTabClick&&(()=>onTabClick(title))},react__WEBPACK_IMPORTED_MODULE_0__.createElement(TabTitle,{title:title}))),react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",{style:{flex:1,minWidth:"0.8em"}}),button)}function TabTitle({title}){if(!title)return react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",null);let separatorIndex=title.lastIndexOf("/")+1,filename=title.substring(separatorIndex),folder=title.substring(0,separatorIndex);return react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",null,react__WEBPACK_IMPORTED_MODULE_0__.createElement("span",{style:{opacity:.5}},folder),filename)}let prompt=react__WEBPACK_IMPORTED_MODULE_0__.createElement("span",{className:"ch-terminal-prompt"},"$");function TerminalContent({text,progress=1,style}){let commands=function(text,progress){if(!text)return[];let chars=Math.round(text.length*progress),{commands}=function(text){let[,...lines]=text.split(/^\$\s*/gm),commands=lines.map(c=>{let[run,...outputLines]=c.split(/\r?\n/);return{run,output:outputLines.length>0?outputLines.join("\n"):null}}),lastCommand=commands[commands.length-1],isRunning=commands.length>0&&null!=lastCommand.output,title=isRunning?lastCommand.run.split(/(\s+)/)[0]:"bash";return{title,isRunning,commands}}(text.slice(0,chars));return commands}(text,progress);return react__WEBPACK_IMPORTED_MODULE_0__.createElement("pre",{style:style,className:"ch-terminal-content"},commands.map(({run,output},i)=>react__WEBPACK_IMPORTED_MODULE_0__.createElement(react__WEBPACK_IMPORTED_MODULE_0__.Fragment,{key:i},react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",null,prompt," ",react__WEBPACK_IMPORTED_MODULE_0__.createElement("span",null,run)),output&&react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",{className:"ch-terminal-output"},output))))}function InnerTerminalTransition({prev="",prevKey,next="",nextKey,progress}){return react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",{className:"ch-terminal"},react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",{style:{position:"relative",transform:`translateY(-${100*progress}%)`}},react__WEBPACK_IMPORTED_MODULE_0__.createElement(TerminalContent,{text:prev,progress:1,key:prevKey}),react__WEBPACK_IMPORTED_MODULE_0__.createElement(TerminalContent,{style:{position:"absolute"},text:next,progress:progress,key:nextKey})))}function InnerTerminalTransitions({steps,progress}){let textSteps=steps.map(s=>s.text),prevIndex=Math.min(Math.max(Math.floor(progress),0),steps.length-1),nextIndex=prevIndex+1;return react__WEBPACK_IMPORTED_MODULE_0__.createElement(InnerTerminalTransition,{prev:textSteps[prevIndex],prevKey:prevIndex,next:textSteps[nextIndex]||"",nextKey:nextIndex,progress:progress%1})}function TerminalPanel({prev,next,t,backward}){let height=function({prev,next,t,backward}){return prev||next?!prev&&next?MAX_HEIGHT*Math.min(4*t,1):prev&&!next?MAX_HEIGHT*Math.max(1-4*t,0):MAX_HEIGHT:0}({prev,next,t,backward});return height?react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",{className:"ch-editor-terminal",style:{height}},react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",{className:"ch-editor-terminal-tab"},react__WEBPACK_IMPORTED_MODULE_0__.createElement("span",null,"Terminal")),react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",{className:"ch-editor-terminal-content"},react__WEBPACK_IMPORTED_MODULE_0__.createElement(InnerTerminalTransitions,{steps:[{text:prev||""},{text:next||""}],progress:t}),")")):null}let MAX_HEIGHT=150;function northConfig(codeConfig){return Array.isArray(codeConfig.rows)?Object.assign(Object.assign({},codeConfig),{rows:codeConfig.rows[0]}):codeConfig}function southConfig(codeConfig){return Array.isArray(codeConfig.rows)?Object.assign(Object.assign({},codeConfig),{rows:codeConfig.rows[1]}):codeConfig}function CodeTransition({prevFile,nextFile,t,codeConfig,parentHeight}){var _a;let htmlProps=Object.assign(Object.assign({},null==codeConfig?void 0:codeConfig.htmlProps),{style:Object.assign({height:"100%"},null===(_a=null==codeConfig?void 0:codeConfig.htmlProps)||void 0===_a?void 0:_a.style)});return react__WEBPACK_IMPORTED_MODULE_0__.createElement(CodeTween,Object.assign({progress:t,tween:{prev:prevFile,next:nextFile},config:Object.assign(Object.assign({},codeConfig),{parentHeight})},htmlProps))}function getContentFromFile(file){return file?codeToText(file.code):""}function getStepFiles(prev,next,backward){var _a,_b;let pn=prev.northPanel.active,nn=next.northPanel.active,ps=null===(_a=prev.southPanel)||void 0===_a?void 0:_a.active,ns=null===(_b=next.southPanel)||void 0===_b?void 0:_b.active,pnFile=prev.files.find(f=>f.name===pn),nnFile=next.files.find(f=>f.name===nn),psFile=ps?prev.files.find(f=>f.name===ps):null,nsFile=ns?next.files.find(f=>f.name===ns):null;return ps||pn!==ns?ns||nn!==ps?{prevNorthFile:pn===nn?pnFile:backward?pnFile:nnFile,nextNorthFile:pn===nn?nnFile:backward?pnFile:nnFile,prevSouthFile:ps===ns?psFile:backward?psFile||nsFile:nsFile||psFile,nextSouthFile:ps===ns?nsFile:backward?psFile||nsFile:nsFile||psFile}:{prevNorthFile:pnFile,nextNorthFile:pnFile,prevSouthFile:psFile,nextSouthFile:nnFile}:{prevNorthFile:nnFile,nextNorthFile:nnFile,prevSouthFile:pnFile,nextSouthFile:nsFile}}function getPanelTabs(nextSnapshot,otherNextSnapshot,prevSnapshot,otherPrevSnapshot,active,t){let oldTabs=nextSnapshot?Object.keys(nextSnapshot).filter(filename=>isPresent(filename,prevSnapshot)||!prevSnapshot).map(filename=>{let prev=prevSnapshot&&prevSnapshot[filename],next=nextSnapshot[filename],dx=prev?prev.left+(next.left-prev.left)*t:next.left,width=prev?prev.width+(next.width-prev.width)*t:next.width;return{active:filename===active,title:filename,style:{position:"absolute",transform:`translateX(${dx}px)`,width}}}):[],totallyNewTabs=nextSnapshot?Object.keys(nextSnapshot).filter(filename=>prevSnapshot&&!isPresent(filename,prevSnapshot)).map(filename=>{let next=nextSnapshot[filename];return{active:filename===active,title:filename,style:{position:"absolute",transform:`translateX(${next.left}px)`,opacity:t,width:next.width}}}):[];nextSnapshot&&Object.keys(nextSnapshot).filter(filename=>isPresent(filename,otherPrevSnapshot)).map(filename=>{let prev=otherPrevSnapshot[filename],next=nextSnapshot[filename],dx=next.left-prev.left;return{active:filename===active,title:filename,style:{position:"absolute",transform:`translateX(${dx}px)`}}});let disappearingTabs=prevSnapshot?Object.keys(prevSnapshot).filter(filename=>!isPresent(filename,nextSnapshot)).map(filename=>{let prev=prevSnapshot[filename];return{active:filename===active,title:filename,style:{position:"absolute",opacity:1-t,transform:`translateX(${prev.left}px)`,width:prev.width}}}):[];return[...totallyNewTabs,...oldTabs,...disappearingTabs]}function isPresent(filename,snapshot){return snapshot&&filename&&filename in snapshot}let useLayoutEffect$2="undefined"!=typeof window?react__WEBPACK_IMPORTED_MODULE_0__.useLayoutEffect:react__WEBPACK_IMPORTED_MODULE_0__.useEffect;function getPanelSnapshot(parent,step){var _a;let northElement=parent.querySelector("[data-ch-panel='north']"),southElement=parent.querySelector("[data-ch-panel='south']"),bar=parent.querySelector(".ch-frame-title-bar");return{titleBarHeight:bar.getBoundingClientRect().height,northHeight:northElement.getBoundingClientRect().height,northKey:step.northPanel.active,southHeight:(null==southElement?void 0:southElement.getBoundingClientRect().height)||null,southKey:null===(_a=step.southPanel)||void 0===_a?void 0:_a.active}}function getTabsSnapshot(parent,step){var _a;let northTabs=Array.from(parent.querySelectorAll("[data-ch-tab='north']")),southTabs=Array.from(parent.querySelectorAll("[data-ch-tab='south']"));return{northTabs:getTabsDimensions(northTabs,step.northPanel.active),southTabs:getTabsDimensions(southTabs,null===(_a=step.southPanel)||void 0===_a?void 0:_a.active)}}function getTabsDimensions(tabElements,active){if(!tabElements[0])return null;let parent=tabElements[0].parentElement,parentLeft=parent.getBoundingClientRect().left,dimensions={};return tabElements.forEach(child=>{let filename=child.getAttribute("title"),rect=child.getBoundingClientRect();dimensions[filename]={left:rect.left-parentLeft,width:rect.width,active:filename===active}}),dimensions}function CodeBrowser({files,theme,startingFileName}){let[activeFile,setActiveFile]=react__WEBPACK_IMPORTED_MODULE_0__.useState(()=>files.find(f=>f.name===startingFileName));return react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",{className:"ch-code-browser",style:{color:getColor(theme,ColorName1.EditorForeground)}},react__WEBPACK_IMPORTED_MODULE_0__.createElement(Sidebar,{files:files,theme:theme,activeFile:activeFile,setActiveFile:setActiveFile}),react__WEBPACK_IMPORTED_MODULE_0__.createElement(Content,{file:activeFile,theme:theme}))}function Sidebar({theme,files,activeFile,setActiveFile}){let tree=react__WEBPACK_IMPORTED_MODULE_0__.useMemo(()=>(function(files){let tree=[];for(let file of files){let parts=file.name.split("/"),current=tree;for(let i=0;i<parts.length;i++){let part=parts[i],isLastPart=i===parts.length-1,index=current.findIndex(f=>f.name===part);if(-1===index){let sub={name:part,children:[],codeFile:void 0};isLastPart&&(sub.codeFile=file),current.push(sub),current=sub.children}else current=current[index].children}}return function sortTree(tree){for(let child of tree)child.children=sortTree(child.children);return tree.sort((a,b)=>{let aIsFolder=a.children&&a.children.length>0,bIsFolder=b.children&&b.children.length>0;return aIsFolder&&bIsFolder||!aIsFolder&&!bIsFolder?a.name.localeCompare(b.name):aIsFolder?-1:1})}(tree)})(files),[files]);return react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",{className:"ch-code-browser-sidebar",style:{borderColor:getColor(theme,ColorName1.SideBarBorder),background:getColor(theme,ColorName1.SideBarBackground),color:getColor(theme,ColorName1.SideBarForeground),"--ch-list-selection-background":getColor(theme,ColorName1.ListActiveSelectionBackground),"--ch-list-selection-foreground":getColor(theme,ColorName1.ListActiveSelectionForeground),"--ch-hover-background":getColor(theme,ColorName1.ListHoverBackground),"--ch-hover-foreground":getColor(theme,ColorName1.ListHoverForeground)}},react__WEBPACK_IMPORTED_MODULE_0__.createElement(SidebarNodes,{tree:tree,activeFile:activeFile,setActiveFile:setActiveFile}))}function SidebarNodes({tree,activeFile,setActiveFile,level=0}){return react__WEBPACK_IMPORTED_MODULE_0__.createElement(react__WEBPACK_IMPORTED_MODULE_0__.Fragment,null,tree.map(node=>react__WEBPACK_IMPORTED_MODULE_0__.createElement(SidebarNode,{key:node.name,node:node,activeFile:activeFile,setActiveFile:setActiveFile,level:level})))}function SidebarNode({node,activeFile,setActiveFile,level}){let isFolder=node.children&&node.children.length>0,isSelected=node.codeFile===activeFile;return isFolder?react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",null,react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",{className:"ch-code-browser-sidebar-folder"},react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",{style:{paddingLeft:1.5*level+"ch"}},node.name)),react__WEBPACK_IMPORTED_MODULE_0__.createElement(SidebarNodes,{tree:node.children,activeFile:activeFile,setActiveFile:setActiveFile,level:level+1})):react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",null,react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",{className:"ch-code-browser-sidebar-file",onClick:()=>setActiveFile(node.codeFile),style:isSelected?{color:"var(--ch-list-selection-foreground)",background:"var(--ch-list-selection-background)"}:{}},react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",{style:{paddingLeft:1.5*level+"ch"}},node.name)))}function Content({file,theme}){return react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",{className:"ch-code-browser-content",style:{background:getColor(theme,ColorName1.CodeBackground),color:getColor(theme,ColorName1.CodeForeground),"--ch-selection-background":getColor(theme,ColorName1.SelectionBackground),colorScheme:getColorScheme(theme)}},react__WEBPACK_IMPORTED_MODULE_0__.createElement(CopyButton,{className:"ch-code-browser-button",content:codeToText(file.code)}),file.code.lines.map((line,i)=>react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",{key:i},0===line.tokens.length?react__WEBPACK_IMPORTED_MODULE_0__.createElement("br",null):line.tokens.map((token,i)=>react__WEBPACK_IMPORTED_MODULE_0__.createElement("span",Object.assign({key:i},token.props),token.content)))))}function ExpandButton({style,step,theme,className}){let[expanded,setExpanded]=react__WEBPACK_IMPORTED_MODULE_0__.useState(!1),[dialogSupported,setDialogSupported]=react__WEBPACK_IMPORTED_MODULE_0__.useState(!0),ref=react__WEBPACK_IMPORTED_MODULE_0__.useRef(null),files=step.files;return(react__WEBPACK_IMPORTED_MODULE_0__.useEffect(()=>{ref.current&&!ref.current.showModal&&setDialogSupported(!1)},[]),dialogSupported)?react__WEBPACK_IMPORTED_MODULE_0__.createElement(react__WEBPACK_IMPORTED_MODULE_0__.Fragment,null,react__WEBPACK_IMPORTED_MODULE_0__.createElement(ExpandIcon,{className:className,style:style,onClick(){ref.current.showModal(),document.body.classList.add("ch-no-scroll"),setExpanded(!0)}}),react__WEBPACK_IMPORTED_MODULE_0__.createElement("dialog",{ref:ref,className:"ch-expand-dialog",onClose(){setExpanded(!1)},onClick(e){e.currentTarget===e.target&&(ref.current.close(),document.body.classList.remove("ch-no-scroll"))}},react__WEBPACK_IMPORTED_MODULE_0__.createElement(CloseButton,{onClick(){ref.current.close(),document.body.classList.remove("ch-no-scroll")}}),expanded?react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",{className:"ch-expand-dialog-content",style:{borderColor:getColor(theme,ColorName1.SideBarBorder)}},react__WEBPACK_IMPORTED_MODULE_0__.createElement(CodeBrowser,{files:files,theme:theme,startingFileName:step.northPanel.active})):void 0)):null}function ExpandIcon({onClick,style,className}){return react__WEBPACK_IMPORTED_MODULE_0__.createElement("svg",{style:style,onClick:onClick,className:className,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",role:"button"},react__WEBPACK_IMPORTED_MODULE_0__.createElement("title",null,"Expand"),react__WEBPACK_IMPORTED_MODULE_0__.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 8V4m0 0h4M4 4l5 5m11-1V4m0 0h-4m4 0l-5 5M4 16v4m0 0h4m-4 0l5-5m11 5l-5-5m5 5v-4m0 4h-4"}))}function CloseButton({onClick}){return react__WEBPACK_IMPORTED_MODULE_0__.createElement("svg",{onClick:onClick,className:"ch-expand-close",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",role:"button"},react__WEBPACK_IMPORTED_MODULE_0__.createElement("title",null,"Close"),react__WEBPACK_IMPORTED_MODULE_0__.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"}))}let DEFAULT_STEP={files:[{code:{lines:[],lang:"js"},focus:"",name:""}],northPanel:{active:"",tabs:[""],heightRatio:1}};function EditorTween(_a){var{prev=DEFAULT_STEP,next,t,backward,codeConfig,frameProps={}}=_a,divProps=__rest(_a,["prev","next","t","backward","codeConfig","frameProps"]);let ref=react__WEBPACK_IMPORTED_MODULE_0__.createRef(),{showCopyButton,showExpandButton}=codeConfig,config=__rest(codeConfig,["showCopyButton","showExpandButton"]),{northPanel,southPanel,northContent,southContent}=function(ref,prev,next,t,backward,codeConfig){var a,a1,a2,a3,a4,a5,a6,northActive,southActive;let{prevSnapshot,nextSnapshot}=function(ref,prev,next){let[{prevSnapshot,nextSnapshot},setState]=react__WEBPACK_IMPORTED_MODULE_0__.useState({prevSnapshot:null,nextSnapshot:null});return useLayoutEffect$2(()=>{(prevSnapshot||nextSnapshot)&&setState({prevSnapshot:null,nextSnapshot:null})},[prev,next]),useLayoutEffect$2(()=>{if(prevSnapshot){if(!nextSnapshot){let parent=ref.current;setState(s=>Object.assign(Object.assign({},s),{nextSnapshot:Object.assign(Object.assign({},getPanelSnapshot(parent,next)),getTabsSnapshot(parent,next))}))}}else{let parent1=ref.current;setState(s=>Object.assign(Object.assign({},s),{prevSnapshot:Object.assign(Object.assign({},getPanelSnapshot(parent1,prev)),getTabsSnapshot(parent1,prev))}))}}),{prevSnapshot,nextSnapshot}}(ref,prev,next);if(!prevSnapshot)return function(prev,next,codeConfig){let inputNorthPanel=prev.northPanel,inputSouthPanel=prev.southPanel,{prevNorthFile,prevSouthFile,nextNorthFile,nextSouthFile}=getStepFiles(prev,next,!0);return{northContent:getContentFromFile(prevNorthFile),northPanel:{tabs:inputNorthPanel.tabs.map(title=>({title,active:title===inputNorthPanel.active,style:{}})),style:{flexGrow:1,overflow:"hidden"},children:react__WEBPACK_IMPORTED_MODULE_0__.createElement(CodeTransition,{codeConfig:northConfig(codeConfig),prevFile:prevNorthFile,nextFile:prevNorthFile,t:0,parentHeight:"0"})},southContent:getContentFromFile(prevSouthFile),southPanel:inputSouthPanel&&{tabs:inputSouthPanel.tabs.map(title=>({title,active:title===inputSouthPanel.active,style:{}})),style:{flexGrow:1,overflow:"hidden"},children:react__WEBPACK_IMPORTED_MODULE_0__.createElement(CodeTransition,{codeConfig:southConfig(codeConfig),prevFile:prevSouthFile,nextFile:prevSouthFile,t:0,parentHeight:"0"})}}}(prev,next,codeConfig);if(!nextSnapshot||1===t)return function(prev,next,codeConfig){var _a;let inputNorthPanel=next.northPanel,inputSouthPanel=next.southPanel,{prevNorthFile,prevSouthFile,nextNorthFile,nextSouthFile}=getStepFiles(prev,next,!1),isTwoToOneSouth=!inputSouthPanel&&inputNorthPanel.active===(null===(_a=null==prev?void 0:prev.southPanel)||void 0===_a?void 0:_a.active);return isTwoToOneSouth&&(nextNorthFile=nextSouthFile),{northContent:getContentFromFile(nextNorthFile),northPanel:{tabs:inputNorthPanel.tabs.map(title=>({title,active:title===inputNorthPanel.active,style:{}})),style:{flexGrow:1,overflow:"hidden"},children:react__WEBPACK_IMPORTED_MODULE_0__.createElement(CodeTransition,{codeConfig:northConfig(codeConfig),prevFile:nextNorthFile,nextFile:nextNorthFile,t:1,parentHeight:"1"})},southContent:getContentFromFile(nextSouthFile),southPanel:inputSouthPanel&&{tabs:inputSouthPanel.tabs.map(title=>({title,active:title===inputSouthPanel.active,style:{}})),style:{flexGrow:1,overflow:"hidden"},children:react__WEBPACK_IMPORTED_MODULE_0__.createElement(CodeTransition,{codeConfig:southConfig(codeConfig),prevFile:nextSouthFile,nextFile:nextSouthFile,t:1,parentHeight:"1"})}}}(prev,next,codeConfig);let inputSouthPanel=prev.southPanel||next.southPanel,{prevNorthFile,prevSouthFile,nextNorthFile,nextSouthFile}=getStepFiles(prev,next,0==t||backward),{northStyle,southStyle}=null===prevSnapshot.southHeight&&null===nextSnapshot.southHeight?{northStyle:{minHeight:prevSnapshot.northHeight}}:null!==prevSnapshot.southHeight&&null===nextSnapshot.southHeight&&nextSnapshot.northKey!==prevSnapshot.southKey?{northStyle:{minHeight:(a=prevSnapshot.northHeight,a+(nextSnapshot.northHeight-a)*t)},southStyle:{minHeight:prevSnapshot.southHeight}}:null!==prevSnapshot.southHeight&&null===nextSnapshot.southHeight&&prevSnapshot.southKey===nextSnapshot.northKey?{northStyle:{minHeight:prevSnapshot.northHeight},southStyle:{position:"relative",minHeight:(a1=prevSnapshot.southHeight,a1+(nextSnapshot.northHeight-a1)*t),transform:`translateY(${0+(-(prevSnapshot.northHeight+prevSnapshot.titleBarHeight)-0)*t}px)`}}:null===prevSnapshot.southHeight&&null!==nextSnapshot.southHeight&&prevSnapshot.northKey!==nextSnapshot.southKey?{northStyle:{minHeight:(a2=prevSnapshot.northHeight,a2+(nextSnapshot.northHeight-a2)*t)},southStyle:{position:"relative",minHeight:nextSnapshot.southHeight}}:null===prevSnapshot.southHeight&&null!==nextSnapshot.southHeight&&prevSnapshot.northKey===nextSnapshot.southKey?{northStyle:{minHeight:nextSnapshot.northHeight},southStyle:{position:"relative",minHeight:(a3=prevSnapshot.northHeight,a3+(nextSnapshot.southHeight-a3)*t),transform:`translateY(${(a4=-(nextSnapshot.northHeight+nextSnapshot.titleBarHeight))+(0-a4)*t}px)`}}:{northStyle:{minHeight:(a5=prevSnapshot.northHeight,a5+(nextSnapshot.northHeight-a5)*t)},southStyle:{minHeight:(a6=prevSnapshot.southHeight,a6+(nextSnapshot.southHeight-a6)*t)}},{northTabs,southTabs}=(northActive=prevNorthFile.name,southActive=null==prevSouthFile?void 0:prevSouthFile.name,!prevSnapshot.southTabs&&isPresent(southActive,prevSnapshot.northTabs)?{northTabs:getPanelTabs(nextSnapshot.northTabs,nextSnapshot.southTabs,prevSnapshot.southTabs,prevSnapshot.northTabs,northActive,t),southTabs:getPanelTabs(nextSnapshot.southTabs,nextSnapshot.northTabs,prevSnapshot.northTabs,prevSnapshot.southTabs,southActive,t)}:!nextSnapshot.southTabs&&isPresent(southActive,nextSnapshot.northTabs)?{northTabs:getPanelTabs(nextSnapshot.southTabs,nextSnapshot.northTabs,prevSnapshot.northTabs,prevSnapshot.southTabs,northActive,t),southTabs:getPanelTabs(nextSnapshot.northTabs,nextSnapshot.southTabs,prevSnapshot.southTabs,prevSnapshot.northTabs,southActive,t)}:{northTabs:getPanelTabs(nextSnapshot.northTabs,nextSnapshot.southTabs,prevSnapshot.northTabs,prevSnapshot.southTabs,northActive,t),southTabs:getPanelTabs(nextSnapshot.southTabs,nextSnapshot.northTabs,prevSnapshot.southTabs,prevSnapshot.northTabs,southActive,t)});return{northContent:getContentFromFile(nextNorthFile),northPanel:{tabs:northTabs,style:northStyle,children:react__WEBPACK_IMPORTED_MODULE_0__.createElement(CodeTransition,{codeConfig:northConfig(codeConfig),prevFile:prevNorthFile,nextFile:nextNorthFile,t:t,parentHeight:northStyle.height||northStyle.minHeight})},southContent:getContentFromFile(nextSouthFile),southPanel:inputSouthPanel&&{tabs:southTabs,style:southStyle,children:react__WEBPACK_IMPORTED_MODULE_0__.createElement(CodeTransition,{codeConfig:southConfig(codeConfig),prevFile:prevSouthFile,nextFile:nextSouthFile,t:t,parentHeight:(null==southStyle?void 0:southStyle.height)||(null==southStyle?void 0:southStyle.minHeight)})}}}(ref,prev,next||prev,t,backward,config),[frozenHeight,freezeHeight]=react__WEBPACK_IMPORTED_MODULE_0__.useState(void 0);useLayoutEffect$4(()=>{var _a;let height=null===(_a=ref.current)||void 0===_a?void 0:_a.getBoundingClientRect().height;freezeHeight(height)},[]);let framePropsWithHeight=Object.assign(Object.assign(Object.assign({},frameProps),divProps),{style:Object.assign(Object.assign({},null==frameProps?void 0:frameProps.style),null==divProps?void 0:divProps.style)});frozenHeight&&(framePropsWithHeight.style.height=frozenHeight,framePropsWithHeight.style.maxHeight=frozenHeight);let northButtons=react__WEBPACK_IMPORTED_MODULE_0__.createElement(react__WEBPACK_IMPORTED_MODULE_0__.Fragment,null,showCopyButton?react__WEBPACK_IMPORTED_MODULE_0__.createElement(CopyButton,{className:"ch-editor-button",content:northContent}):void 0,showExpandButton?react__WEBPACK_IMPORTED_MODULE_0__.createElement(ExpandButton,{className:"ch-editor-button",step:next||prev,theme:codeConfig.theme}):void 0),southCopyButton=showCopyButton?react__WEBPACK_IMPORTED_MODULE_0__.createElement(CopyButton,{className:"ch-editor-button",content:southContent}):void 0,terminalPanel=react__WEBPACK_IMPORTED_MODULE_0__.createElement(TerminalPanel,{prev:prev.terminal,next:(next||prev).terminal,t:t,backward:backward});return react__WEBPACK_IMPORTED_MODULE_0__.createElement(EditorFrame,Object.assign({ref:ref},framePropsWithHeight,{northPanel:northPanel,southPanel:southPanel,terminalPanel:terminalPanel,theme:codeConfig.theme,northButton:northButtons,southButton:southCopyButton}))}let defaultSpring={stiffness:120,damping:24,mass:.2,decimals:3};function EditorSpring(_a){var{northPanel,southPanel,files,terminal,springConfig}=_a,props=__rest(_a,["northPanel","southPanel","files","terminal","springConfig"]);let step=react__WEBPACK_IMPORTED_MODULE_0__.useMemo(()=>({northPanel,southPanel,files,terminal}),[northPanel,southPanel,files,terminal]),{prev,next,t}=function(step,springConfig=defaultSpring){let[{target,steps,index},setState]=react__WEBPACK_IMPORTED_MODULE_0__.useState({target:2,steps:[step,step,step],index:0});react__WEBPACK_IMPORTED_MODULE_0__.useEffect(()=>{let lastStep=steps[steps.length-1];lastStep!=step&&setState(s=>(function(state,newStep,progress){let{steps,target,index}=state,stepsClone=steps.slice();return progress-index<1?(stepsClone[2]=newStep,Object.assign(Object.assign({},state),{steps:stepsClone})):(stepsClone[0]=steps[1],stepsClone[1]=steps[2],stepsClone[2]=newStep,Object.assign(Object.assign({},state),{steps:stepsClone,target:target+1,index:index+1}))})(s,step,progress))},[step]);let[progress]=useSpring(target,springConfig),trioProgress=progress-index,result=trioProgress<=1?{prev:steps[0],next:steps[1],t:trioProgress}:{prev:steps[1],next:steps[2],t:trioProgress-1};return result}(step,springConfig);return react__WEBPACK_IMPORTED_MODULE_0__.createElement(EditorTween,Object.assign({t:t,backward:!1,prev:prev,next:next},props))}function InnerCode(_a){var{onTabClick}=_a,props=__rest(_a,["onTabClick"]);let _b=function(props){var _a,_b,_c,_d,_e,_f,_g,_h,_j;let{lineNumbers,showCopyButton,showExpandButton,minZoom,maxZoom}=props,rest=__rest(props,["lineNumbers","showCopyButton","showExpandButton","minZoom","maxZoom"]),codeConfig=Object.assign(Object.assign({},props.codeConfig),{maxZoom:null==maxZoom?null===(_a=props.codeConfig)||void 0===_a?void 0:_a.maxZoom:maxZoom,minZoom:null==minZoom?null===(_b=props.codeConfig)||void 0===_b?void 0:_b.minZoom:minZoom,horizontalCenter:null!==(_d=null===(_c=props.codeConfig)||void 0===_c?void 0:_c.horizontalCenter)&&void 0!==_d?_d:props.horizontalCenter,lineNumbers:null==lineNumbers?null===(_e=props.codeConfig)||void 0===_e?void 0:_e.lineNumbers:lineNumbers,showCopyButton:null==showCopyButton?null===(_f=props.codeConfig)||void 0===_f?void 0:_f.showCopyButton:showCopyButton,showExpandButton:null==showExpandButton?null===(_g=props.codeConfig)||void 0===_g?void 0:_g.showExpandButton:showExpandButton,rows:props.rows,debug:null!==(_h=props.debug)&&void 0!==_h?_h:null===(_j=props.codeConfig)||void 0===_j?void 0:_j.debug});return Object.assign(Object.assign({},rest),{codeConfig})}(props),{className,style,codeConfig}=_b,editorProps=__rest(_b,["className","style","codeConfig"]);if(!props.southPanel&&1===props.files.length&&!props.files[0].name)return react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",{className:`ch-codeblock not-prose ${className||""}`,style:style},react__WEBPACK_IMPORTED_MODULE_0__.createElement(CodeSpring,{className:"ch-code",config:codeConfig,step:editorProps.files[0]}));{let frameProps=Object.assign(Object.assign({},null==editorProps?void 0:editorProps.frameProps),{onTabClick});return react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",{className:`ch-codegroup not-prose ${className||""}`,style:style},react__WEBPACK_IMPORTED_MODULE_0__.createElement(EditorSpring,Object.assign({},editorProps,{frameProps:frameProps,codeConfig:codeConfig})))}}function updateEditorStep(step,filename,focus){let name=filename||step.northPanel.active,newFiles=step.files.map(file=>file.name===name?Object.assign(Object.assign({},file),{focus:null===focus?file.focus:focus}):file),northPanel=Object.assign({},step.northPanel),southPanel=step.southPanel&&Object.assign({},step.southPanel);return step.northPanel.tabs.includes(name)?northPanel.active=name:southPanel&&(southPanel.active=name),{files:newFiles,northPanel,southPanel}}let SectionContext=react__WEBPACK_IMPORTED_MODULE_0__.createContext({props:null,setFocus(){}}),LinkableContext=react__WEBPACK_IMPORTED_MODULE_0__.createContext({activatedId:void 0,activate(){},reset(){}});function LinkableSection({onActivation,onReset,children}){let[activatedId,setActivatedId]=react__WEBPACK_IMPORTED_MODULE_0__.useState(void 0),activate=react__WEBPACK_IMPORTED_MODULE_0__.useCallback(x=>{setActivatedId(x.id),onActivation(x)},[onActivation]),reset=react__WEBPACK_IMPORTED_MODULE_0__.useCallback(()=>{setActivatedId(void 0),onReset()},[onReset]);return react__WEBPACK_IMPORTED_MODULE_0__.createElement(LinkableContext.Provider,{value:{activate,reset,activatedId}},children)}function Back(){let c=useClasser("ch-browser");return react__WEBPACK_IMPORTED_MODULE_0__.createElement("svg",{fill:"currentColor",preserveAspectRatio:"xMidYMid meet",height:"1em",viewBox:"13 10 14 23",className:c("button","back-button")},react__WEBPACK_IMPORTED_MODULE_0__.createElement("g",null,react__WEBPACK_IMPORTED_MODULE_0__.createElement("path",{d:"m26.5 12.1q0 0.3-0.2 0.6l-8.8 8.7 8.8 8.8q0.2 0.2 0.2 0.5t-0.2 0.5l-1.1 1.1q-0.3 0.3-0.6 0.3t-0.5-0.3l-10.4-10.4q-0.2-0.2-0.2-0.5t0.2-0.5l10.4-10.4q0.3-0.2 0.5-0.2t0.6 0.2l1.1 1.1q0.2 0.2 0.2 0.5z"})))}function Forward(){let c=useClasser("ch-browser");return react__WEBPACK_IMPORTED_MODULE_0__.createElement("svg",{fill:"currentColor",preserveAspectRatio:"xMidYMid meet",height:"1em",viewBox:"13 10 14 23",className:c("button","forward-button")},react__WEBPACK_IMPORTED_MODULE_0__.createElement("g",null,react__WEBPACK_IMPORTED_MODULE_0__.createElement("path",{d:"m26.3 21.4q0 0.3-0.2 0.5l-10.4 10.4q-0.3 0.3-0.6 0.3t-0.5-0.3l-1.1-1.1q-0.2-0.2-0.2-0.5t0.2-0.5l8.8-8.8-8.8-8.7q-0.2-0.3-0.2-0.6t0.2-0.5l1.1-1.1q0.3-0.2 0.5-0.2t0.6 0.2l10.4 10.4q0.2 0.2 0.2 0.5z"})))}function Open({href,style}){let c=useClasser("ch-browser");return react__WEBPACK_IMPORTED_MODULE_0__.createElement("a",{className:c("button","open-button"),title:"Open in new tab",href:href,style:style,target:"_blank",rel:"noopener noreferrer"},react__WEBPACK_IMPORTED_MODULE_0__.createElement("svg",{stroke:"currentColor",fill:"currentColor",strokeWidth:"0",viewBox:"3 3 18 18",height:"1em",width:"1em",className:c("open-icon"),xmlns:"http://www.w3.org/2000/svg"},react__WEBPACK_IMPORTED_MODULE_0__.createElement("path",{d:"M19 19H5V5h7V3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2v-7h-2v7zM14 3v2h3.59l-9.83 9.83 1.41 1.41L19 6.41V10h2V3h-7z"})))}function TitleBar({url,linkUrl,theme}){let inputBorder=getColor(theme,ColorName1.InputBorder);return react__WEBPACK_IMPORTED_MODULE_0__.createElement(react__WEBPACK_IMPORTED_MODULE_0__.Fragment,null,react__WEBPACK_IMPORTED_MODULE_0__.createElement(FrameButtons,null),react__WEBPACK_IMPORTED_MODULE_0__.createElement(Back,null),react__WEBPACK_IMPORTED_MODULE_0__.createElement(Forward,null),react__WEBPACK_IMPORTED_MODULE_0__.createElement("input",{value:url||"",readOnly:!0,style:{background:getColor(theme,ColorName1.InputBackground),color:getColor(theme,ColorName1.InputForeground),border:inputBorder?`1px solid ${inputBorder}`:void 0}}),react__WEBPACK_IMPORTED_MODULE_0__.createElement(Open,{href:linkUrl,style:{color:getColor(theme,ColorName1.EditorForeground)}}))}let MiniBrowserHike=react__WEBPACK_IMPORTED_MODULE_0__.forwardRef(function(_a,ref){var{progress=0,backward=!1,steps:ogSteps,transition="none",classes,theme}=_a,props=__rest(_a,["progress","backward","steps","transition","classes","theme"]);let c=useClasser("ch-mini-browser",classes),steps=react__WEBPACK_IMPORTED_MODULE_0__.useMemo(()=>ogSteps?ogSteps.map(step=>{let{displayUrl,loadUrl}=function(url,loadUrl,prependOrigin){let currentOrigin="undefined"!=typeof window?window.origin:"",displayUrl=url&&!0===prependOrigin?currentOrigin+url:url;return{displayUrl,loadUrl:loadUrl||displayUrl}}(step.url,step.loadUrl,step.prependOrigin);return{zoom:step.zoom||1,displayUrl,loadUrl,children:step.children}}):[{zoom:1}],[ogSteps]),{zoom,displayUrl,loadUrl,children}=steps[Math.round(progress)];return react__WEBPACK_IMPORTED_MODULE_0__.createElement(MiniFrame,Object.assign({},props,{zoom:zoom,className:`${c("")} ${props.className||""}`,style:Object.assign(Object.assign({},function({progress,transition}){if("slide"===transition){let t=progress-Math.floor(progress),o=2*Math.abs(t-.5);return{transform:`translateX(${t<=.5?-50*t:50-50*t}px)`,opacity:o*o}}return{}}({progress,transition})),props.style),classes:classes,titleBar:react__WEBPACK_IMPORTED_MODULE_0__.createElement(TitleBar,{url:displayUrl,linkUrl:loadUrl,theme:theme}),theme:theme}),children||react__WEBPACK_IMPORTED_MODULE_0__.createElement("iframe",{ref:ref,src:loadUrl}))});function MiniBrowser(_a){var{url,loadUrl,prependOrigin,children,zoom}=_a,rest=__rest(_a,["url","loadUrl","prependOrigin","children","zoom"]);let[steps,progress]=function({url,loadUrl,prependOrigin,children,zoom}){let[state,setState]=react__WEBPACK_IMPORTED_MODULE_0__.useState({target:0,steps:[{url,loadUrl,prependOrigin,children,zoom}]});react__WEBPACK_IMPORTED_MODULE_0__.useEffect(()=>{let last=state.steps[state.steps.length-1];(last.url!==url||last.loadUrl!==loadUrl||last.prependOrigin!==prependOrigin||last.children!==children)&&setState(s=>({target:s.target+1,steps:[...s.steps,{url,loadUrl,prependOrigin,children,zoom}]}))},[url,loadUrl,prependOrigin,children,zoom]);let[progress]=useSpring(state.target,{stiffness:100,decimals:3});return[state.steps,progress]}({url,loadUrl,prependOrigin,children,zoom});return react__WEBPACK_IMPORTED_MODULE_0__.createElement(MiniBrowserHike,Object.assign({},rest,{steps:steps,progress:progress}))}var commonjsGlobal="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},templates={};Object.defineProperty(templates,"__esModule",{value:!0}),templates.getMainFile=function(template){return"vue-cli"===template?"src/main.js":"angular-cli"===template?"src/main.ts":"create-react-app-typescript"===template?"src/index.tsx":"parcel"===template?"index.html":"gatsby"===template?"src/pages/index.js":"nuxt"===template||"next"===template||"apollo"===template||"reason"===template||"sapper"===template?"package.json":"nest"===template?"src/main.ts":"static"===template?"index.html":"src/index.js"};var SANDBOX_CONFIG="sandbox.config.json",getTemplate_1=templates.getTemplate=function(packageJSONPackage,modules){var sandboxConfig=modules[SANDBOX_CONFIG]||modules["/"+SANDBOX_CONFIG];if(sandboxConfig)try{var config=JSON.parse(sandboxConfig.content);if(config.template)return config.template}catch(e){}var _a=packageJSONPackage.dependencies,_b=packageJSONPackage.devDependencies,totalDependencies=Object.keys(void 0===_a?{}:_a).concat(Object.keys(void 0===_b?{}:_b)),nuxt=["nuxt","nuxt-edge"];if(totalDependencies.some(function(dep){return nuxt.indexOf(dep)>-1}))return"nuxt";if(totalDependencies.indexOf("next")>-1)return"next";var apollo=["apollo-server","apollo-server-express","apollo-server-hapi","apollo-server-koa","apollo-server-lambda","apollo-server-micro"];if(totalDependencies.some(function(dep){return apollo.indexOf(dep)>-1}))return"apollo";if(totalDependencies.indexOf("ember-cli")>-1)return"ember";if(totalDependencies.indexOf("sapper")>-1)return"sapper";var moduleNames=Object.keys(modules);if(moduleNames.some(function(m){return m.endsWith(".vue")}))return"vue-cli";if(moduleNames.some(function(m){return m.endsWith(".re")}))return"reason";if(totalDependencies.indexOf("gatsby")>-1)return"gatsby";if(totalDependencies.indexOf("parcel-bundler")>-1)return"parcel";if(totalDependencies.indexOf("react-scripts")>-1)return"create-react-app";if(totalDependencies.indexOf("react-scripts-ts")>-1)return"create-react-app-typescript";if(totalDependencies.indexOf("@angular/core")>-1)return"angular-cli";if(totalDependencies.indexOf("preact-cli")>-1)return"preact-cli";if(totalDependencies.indexOf("svelte")>-1)return"svelte";if(totalDependencies.indexOf("vue")>-1)return"vue-cli";var dojo=["@dojo/core","@dojo/framework"];return totalDependencies.some(function(dep){return dojo.indexOf(dep)>-1})?"@dojo/cli-create-app":totalDependencies.indexOf("cx")>-1?"cxjs":totalDependencies.indexOf("@nestjs/core")>-1||totalDependencies.indexOf("@nestjs/common")>-1?"nest":void 0},lodash_isequal={exports:{}};!function(module,exports){var uid,func,transform,HASH_UNDEFINED="__lodash_hash_undefined__",argsTag="[object Arguments]",arrayTag="[object Array]",boolTag="[object Boolean]",dateTag="[object Date]",errorTag="[object Error]",funcTag="[object Function]",mapTag="[object Map]",numberTag="[object Number]",objectTag="[object Object]",promiseTag="[object Promise]",regexpTag="[object RegExp]",setTag="[object Set]",stringTag="[object String]",weakMapTag="[object WeakMap]",arrayBufferTag="[object ArrayBuffer]",dataViewTag="[object DataView]",reIsHostCtor=/^\[object .+?Constructor\]$/,reIsUint=/^(?:0|[1-9]\d*)$/,typedArrayTags={};typedArrayTags["[object Float32Array]"]=typedArrayTags["[object Float64Array]"]=typedArrayTags["[object Int8Array]"]=typedArrayTags["[object Int16Array]"]=typedArrayTags["[object Int32Array]"]=typedArrayTags["[object Uint8Array]"]=typedArrayTags["[object Uint8ClampedArray]"]=typedArrayTags["[object Uint16Array]"]=typedArrayTags["[object Uint32Array]"]=!0,typedArrayTags[argsTag]=typedArrayTags[arrayTag]=typedArrayTags[arrayBufferTag]=typedArrayTags[boolTag]=typedArrayTags[dataViewTag]=typedArrayTags[dateTag]=typedArrayTags[errorTag]=typedArrayTags[funcTag]=typedArrayTags[mapTag]=typedArrayTags[numberTag]=typedArrayTags[objectTag]=typedArrayTags[regexpTag]=typedArrayTags[setTag]=typedArrayTags[stringTag]=typedArrayTags[weakMapTag]=!1;var freeGlobal="object"==typeof commonjsGlobal&&commonjsGlobal&&commonjsGlobal.Object===Object&&commonjsGlobal,freeSelf="object"==typeof self&&self&&self.Object===Object&&self,root=freeGlobal||freeSelf||Function("return this")(),freeExports=exports&&!exports.nodeType&&exports,freeModule=freeExports&&module&&!module.nodeType&&module,moduleExports=freeModule&&freeModule.exports===freeExports,freeProcess=moduleExports&&freeGlobal.process,nodeUtil=function(){try{return freeProcess&&freeProcess.binding&&freeProcess.binding("util")}catch(e){}}(),nodeIsTypedArray=nodeUtil&&nodeUtil.isTypedArray;function mapToArray(map){var index=-1,result=Array(map.size);return map.forEach(function(value,key){result[++index]=[key,value]}),result}function setToArray(set){var index=-1,result=Array(set.size);return set.forEach(function(value){result[++index]=value}),result}var arrayProto=Array.prototype,funcProto=Function.prototype,objectProto=Object.prototype,coreJsData=root["__core-js_shared__"],funcToString=funcProto.toString,hasOwnProperty=objectProto.hasOwnProperty,maskSrcKey=(uid=/[^.]+$/.exec(coreJsData&&coreJsData.keys&&coreJsData.keys.IE_PROTO||""))?"Symbol(src)_1."+uid:"",nativeObjectToString=objectProto.toString,reIsNative=RegExp("^"+funcToString.call(hasOwnProperty).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Buffer=moduleExports?root.Buffer:void 0,Symbol1=root.Symbol,Uint8Array=root.Uint8Array,propertyIsEnumerable=objectProto.propertyIsEnumerable,splice=arrayProto.splice,symToStringTag=Symbol1?Symbol1.toStringTag:void 0,nativeGetSymbols=Object.getOwnPropertySymbols,nativeIsBuffer=Buffer?Buffer.isBuffer:void 0,nativeKeys=(func=Object.keys,transform=Object,function(arg){return func(transform(arg))}),DataView=getNative(root,"DataView"),Map=getNative(root,"Map"),Promise1=getNative(root,"Promise"),Set1=getNative(root,"Set"),WeakMap=getNative(root,"WeakMap"),nativeCreate=getNative(Object,"create"),dataViewCtorString=toSource(DataView),mapCtorString=toSource(Map),promiseCtorString=toSource(Promise1),setCtorString=toSource(Set1),weakMapCtorString=toSource(WeakMap),symbolProto=Symbol1?Symbol1.prototype:void 0,symbolValueOf=symbolProto?symbolProto.valueOf:void 0;function Hash(entries){var index=-1,length=null==entries?0:entries.length;for(this.clear();++index<length;){var entry=entries[index];this.set(entry[0],entry[1])}}function ListCache(entries){var index=-1,length=null==entries?0:entries.length;for(this.clear();++index<length;){var entry=entries[index];this.set(entry[0],entry[1])}}function MapCache(entries){var index=-1,length=null==entries?0:entries.length;for(this.clear();++index<length;){var entry=entries[index];this.set(entry[0],entry[1])}}function SetCache(values){var index=-1,length=null==values?0:values.length;for(this.__data__=new MapCache;++index<length;)this.add(values[index])}function Stack(entries){var data=this.__data__=new ListCache(entries);this.size=data.size}function assocIndexOf(array,key){for(var length=array.length;length--;)if(eq(array[length][0],key))return length;return -1}function baseGetTag(value){return null==value?void 0===value?"[object Undefined]":"[object Null]":symToStringTag&&symToStringTag in Object(value)?function(value){var isOwn=hasOwnProperty.call(value,symToStringTag),tag=value[symToStringTag];try{value[symToStringTag]=void 0;var unmasked=!0}catch(e){}var result=nativeObjectToString.call(value);return unmasked&&(isOwn?value[symToStringTag]=tag:delete value[symToStringTag]),result}(value):nativeObjectToString.call(value)}function baseIsArguments(value){return isObjectLike(value)&&baseGetTag(value)==argsTag}function equalArrays(array,other,bitmask,customizer,equalFunc,stack){var isPartial=1&bitmask,arrLength=array.length,othLength=other.length;if(arrLength!=othLength&&!(isPartial&&othLength>arrLength))return!1;var stacked=stack.get(array);if(stacked&&stack.get(other))return stacked==other;var index=-1,result=!0,seen=2&bitmask?new SetCache:void 0;for(stack.set(array,other),stack.set(other,array);++index<arrLength;){var arrValue=array[index],othValue=other[index];if(customizer)var compared=isPartial?customizer(othValue,arrValue,index,other,array,stack):customizer(arrValue,othValue,index,array,other,stack);if(void 0!==compared){if(compared)continue;result=!1;break}if(seen){if(!function(array,predicate){for(var index=-1,length=null==array?0:array.length;++index<length;)if(predicate(array[index],index,array))return!0;return!1}(other,function(othValue,othIndex){if(!seen.has(othIndex)&&(arrValue===othValue||equalFunc(arrValue,othValue,bitmask,customizer,stack)))return seen.push(othIndex)})){result=!1;break}}else if(!(arrValue===othValue||equalFunc(arrValue,othValue,bitmask,customizer,stack))){result=!1;break}}return stack.delete(array),stack.delete(other),result}function getAllKeys(object){var result;return result=function(object){return null!=object&&isLength(object.length)&&!isFunction(object)?function(value,inherited){var value1,length,isArr=isArray(value),isArg=!isArr&&isArguments(value),isBuff=!isArr&&!isArg&&isBuffer(value),isType=!isArr&&!isArg&&!isBuff&&isTypedArray(value),skipIndexes=isArr||isArg||isBuff||isType,result=skipIndexes?function(n,iteratee){for(var index=-1,result=Array(n);++index<n;)result[index]=iteratee(index);return result}(value.length,String):[],length1=result.length;for(var key in value)hasOwnProperty.call(value,key)&&!(skipIndexes&&("length"==key||isBuff&&("offset"==key||"parent"==key)||isType&&("buffer"==key||"byteLength"==key||"byteOffset"==key)||(value1=key,(length=null==(length=length1)?9007199254740991:length)&&("number"==typeof value1||reIsUint.test(value1))&&value1>-1&&value1%1==0&&value1<length)))&&result.push(key);return result}(object):function(object){if(proto="function"==typeof(Ctor=object&&object.constructor)&&Ctor.prototype||objectProto,object!==proto)return nativeKeys(object);var Ctor,proto,result=[];for(var key in Object(object))hasOwnProperty.call(object,key)&&"constructor"!=key&&result.push(key);return result}(object)}(object),isArray(object)?result:function(array,values){for(var index=-1,length=values.length,offset=array.length;++index<length;)array[offset+index]=values[index];return array}(result,getSymbols(object))}function getMapData(map,key){var type,data=map.__data__;return("string"==(type=typeof key)||"number"==type||"symbol"==type||"boolean"==type?"__proto__"!==key:null===key)?data["string"==typeof key?"string":"hash"]:data.map}function getNative(object,key){var value=null==object?void 0:object[key];return!(!isObject(value)||maskSrcKey&&maskSrcKey in value)&&(isFunction(value)?reIsNative:reIsHostCtor).test(toSource(value))?value:void 0}Hash.prototype.clear=function(){this.__data__=nativeCreate?nativeCreate(null):{},this.size=0},Hash.prototype.delete=function(key){var result=this.has(key)&&delete this.__data__[key];return this.size-=result?1:0,result},Hash.prototype.get=function(key){var data=this.__data__;if(nativeCreate){var result=data[key];return result===HASH_UNDEFINED?void 0:result}return hasOwnProperty.call(data,key)?data[key]:void 0},Hash.prototype.has=function(key){var data=this.__data__;return nativeCreate?void 0!==data[key]:hasOwnProperty.call(data,key)},Hash.prototype.set=function(key,value){var data=this.__data__;return this.size+=this.has(key)?0:1,data[key]=nativeCreate&&void 0===value?HASH_UNDEFINED:value,this},ListCache.prototype.clear=function(){this.__data__=[],this.size=0},ListCache.prototype.delete=function(key){var data=this.__data__,index=assocIndexOf(data,key);return!(index<0)&&(index==data.length-1?data.pop():splice.call(data,index,1),--this.size,!0)},ListCache.prototype.get=function(key){var data=this.__data__,index=assocIndexOf(data,key);return index<0?void 0:data[index][1]},ListCache.prototype.has=function(key){return assocIndexOf(this.__data__,key)>-1},ListCache.prototype.set=function(key,value){var data=this.__data__,index=assocIndexOf(data,key);return index<0?(++this.size,data.push([key,value])):data[index][1]=value,this},MapCache.prototype.clear=function(){this.size=0,this.__data__={hash:new Hash,map:new(Map||ListCache),string:new Hash}},MapCache.prototype.delete=function(key){var result=getMapData(this,key).delete(key);return this.size-=result?1:0,result},MapCache.prototype.get=function(key){return getMapData(this,key).get(key)},MapCache.prototype.has=function(key){return getMapData(this,key).has(key)},MapCache.prototype.set=function(key,value){var data=getMapData(this,key),size=data.size;return data.set(key,value),this.size+=data.size==size?0:1,this},SetCache.prototype.add=SetCache.prototype.push=function(value){return this.__data__.set(value,HASH_UNDEFINED),this},SetCache.prototype.has=function(value){return this.__data__.has(value)},Stack.prototype.clear=function(){this.__data__=new ListCache,this.size=0},Stack.prototype.delete=function(key){var data=this.__data__,result=data.delete(key);return this.size=data.size,result},Stack.prototype.get=function(key){return this.__data__.get(key)},Stack.prototype.has=function(key){return this.__data__.has(key)},Stack.prototype.set=function(key,value){var data=this.__data__;if(data instanceof ListCache){var pairs=data.__data__;if(!Map||pairs.length<199)return pairs.push([key,value]),this.size=++data.size,this;data=this.__data__=new MapCache(pairs)}return data.set(key,value),this.size=data.size,this};var getSymbols=nativeGetSymbols?function(object){return null==object?[]:function(array,predicate){for(var index=-1,length=null==array?0:array.length,resIndex=0,result=[];++index<length;){var value=array[index];predicate(value,index,array)&&(result[resIndex++]=value)}return result}(nativeGetSymbols(object=Object(object)),function(symbol){return propertyIsEnumerable.call(object,symbol)})}:function(){return[]},getTag=baseGetTag;function toSource(func){if(null!=func){try{return funcToString.call(func)}catch(e){}try{return func+""}catch(e1){}}return""}function eq(value,other){return value===other||value!=value&&other!=other}(DataView&&getTag(new DataView(new ArrayBuffer(1)))!=dataViewTag||Map&&getTag(new Map)!=mapTag||Promise1&&getTag(Promise1.resolve())!=promiseTag||Set1&&getTag(new Set1)!=setTag||WeakMap&&getTag(new WeakMap)!=weakMapTag)&&(getTag=function(value){var result=baseGetTag(value),Ctor=result==objectTag?value.constructor:void 0,ctorString=Ctor?toSource(Ctor):"";if(ctorString)switch(ctorString){case dataViewCtorString:return dataViewTag;case mapCtorString:return mapTag;case promiseCtorString:return promiseTag;case setCtorString:return setTag;case weakMapCtorString:return weakMapTag}return result});var isArguments=baseIsArguments(function(){return arguments}())?baseIsArguments:function(value){return isObjectLike(value)&&hasOwnProperty.call(value,"callee")&&!propertyIsEnumerable.call(value,"callee")},isArray=Array.isArray,isBuffer=nativeIsBuffer||function(){return!1};function isFunction(value){if(!isObject(value))return!1;var tag=baseGetTag(value);return tag==funcTag||"[object GeneratorFunction]"==tag||"[object AsyncFunction]"==tag||"[object Proxy]"==tag}function isLength(value){return"number"==typeof value&&value>-1&&value%1==0&&value<=9007199254740991}function isObject(value){var type=typeof value;return null!=value&&("object"==type||"function"==type)}function isObjectLike(value){return null!=value&&"object"==typeof value}var isTypedArray=nodeIsTypedArray?function(value){return nodeIsTypedArray(value)}:function(value){return isObjectLike(value)&&isLength(value.length)&&!!typedArrayTags[baseGetTag(value)]};module.exports=function(value,other){return function baseIsEqual(value,other,bitmask,customizer,stack){return value===other||(null!=value&&null!=other&&(isObjectLike(value)||isObjectLike(other))?function(object,other,bitmask,customizer,equalFunc,stack){var objIsArr=isArray(object),othIsArr=isArray(other),objTag=objIsArr?arrayTag:getTag(object),othTag=othIsArr?arrayTag:getTag(other);objTag=objTag==argsTag?objectTag:objTag,othTag=othTag==argsTag?objectTag:othTag;var objIsObj=objTag==objectTag,othIsObj=othTag==objectTag,isSameTag=objTag==othTag;if(isSameTag&&isBuffer(object)){if(!isBuffer(other))return!1;objIsArr=!0,objIsObj=!1}if(isSameTag&&!objIsObj)return stack||(stack=new Stack),objIsArr||isTypedArray(object)?equalArrays(object,other,bitmask,customizer,equalFunc,stack):function(object,other,tag,bitmask,customizer,equalFunc,stack){switch(tag){case dataViewTag:if(object.byteLength!=other.byteLength||object.byteOffset!=other.byteOffset)break;object=object.buffer,other=other.buffer;case arrayBufferTag:if(object.byteLength!=other.byteLength||!equalFunc(new Uint8Array(object),new Uint8Array(other)))break;return!0;case boolTag:case dateTag:case numberTag:return eq(+object,+other);case errorTag:return object.name==other.name&&object.message==other.message;case regexpTag:case stringTag:return object==other+"";case mapTag:var convert=mapToArray;case setTag:var isPartial=1&bitmask;if(convert||(convert=setToArray),object.size!=other.size&&!isPartial)break;var stacked=stack.get(object);if(stacked)return stacked==other;bitmask|=2,stack.set(object,other);var result=equalArrays(convert(object),convert(other),bitmask,customizer,equalFunc,stack);return stack.delete(object),result;case"[object Symbol]":if(symbolValueOf)return symbolValueOf.call(object)==symbolValueOf.call(other)}return!1}(object,other,objTag,bitmask,customizer,equalFunc,stack);if(!(1&bitmask)){var objIsWrapped=objIsObj&&hasOwnProperty.call(object,"__wrapped__"),othIsWrapped=othIsObj&&hasOwnProperty.call(other,"__wrapped__");if(objIsWrapped||othIsWrapped){var objUnwrapped=objIsWrapped?object.value():object,othUnwrapped=othIsWrapped?other.value():other;return stack||(stack=new Stack),equalFunc(objUnwrapped,othUnwrapped,bitmask,customizer,stack)}}return!!isSameTag&&(stack||(stack=new Stack),function(object,other,bitmask,customizer,equalFunc,stack){var isPartial=1&bitmask,objProps=getAllKeys(object),objLength=objProps.length;if(objLength!=getAllKeys(other).length&&!isPartial)return!1;for(var index=objLength;index--;){var key=objProps[index];if(!(isPartial?key in other:hasOwnProperty.call(other,key)))return!1}var stacked=stack.get(object);if(stacked&&stack.get(other))return stacked==other;var result=!0;stack.set(object,other),stack.set(other,object);for(var skipCtor=isPartial;++index<objLength;){var objValue=object[key=objProps[index]],othValue=other[key];if(customizer)var compared=isPartial?customizer(othValue,objValue,key,other,object,stack):customizer(objValue,othValue,key,object,other,stack);if(!(void 0===compared?objValue===othValue||equalFunc(objValue,othValue,bitmask,customizer,stack):compared)){result=!1;break}skipCtor||(skipCtor="constructor"==key)}if(result&&!skipCtor){var objCtor=object.constructor,othCtor=other.constructor;objCtor!=othCtor&&"constructor"in object&&"constructor"in other&&!("function"==typeof objCtor&&objCtor instanceof objCtor&&"function"==typeof othCtor&&othCtor instanceof othCtor)&&(result=!1)}return stack.delete(object),stack.delete(other),result}(object,other,bitmask,customizer,equalFunc,stack))}(value,other,bitmask,customizer,baseIsEqual,stack):value!=value&&other!=other)}(value,other)}}(lodash_isequal,lodash_isequal.exports);var isEqual=lodash_isequal.exports,generateId=()=>Math.floor(1e6*Math.random()+1e6*Math.random()),getConstructorName=x=>{try{return x.constructor.name}catch(e){return""}},Protocol=class{constructor(type,handleMessage,target){this.type=type,this.handleMessage=handleMessage,this.target=target,this.outgoingMessages=new Set,this._messageListener=async e=>{var _a;let{data}=e;if(data.$type!==this.getTypeId()||this.outgoingMessages.has(data.$id))return;let returnMessage={$originId:this.internalId,$type:this.getTypeId(),$id:data.$id};try{let result=await this.handleMessage(data.$data);returnMessage.$data=result}catch(err){err.message||console.error(err),returnMessage.$error={message:null!=(_a=err.message)?_a:"Unknown error"}}e.source?e.source.postMessage(returnMessage,"*"):this._postMessage(returnMessage)},this.createConnection(),this.internalId=generateId(),this.isWorker="Worker"===getConstructorName(target)}getTypeId(){return`p-${this.type}`}createConnection(){self.addEventListener("message",this._messageListener)}dispose(){self.removeEventListener("message",this._messageListener)}sendMessage(data){return new Promise(resolve=>{let messageId=generateId(),message={$originId:this.internalId,$type:this.getTypeId(),$data:data,$id:messageId};this.outgoingMessages.add(messageId);let listenFunction=e=>{let{data:data2}=e;data2.$type===this.getTypeId()&&data2.$id===messageId&&data2.$originId!==this.internalId&&(resolve(data2.$data),self.removeEventListener("message",listenFunction))};self.addEventListener("message",listenFunction),this._postMessage(message)})}_postMessage(m){this.isWorker||"undefined"!=typeof DedicatedWorkerGlobalScope&&this.target instanceof DedicatedWorkerGlobalScope?this.target.postMessage(m):this.target.postMessage(m,"*")}},IFrameProtocol=class{constructor(iframe,origin){this.globalListeners={},this.globalListenersCount=0,this.channelListeners={},this.channelListenersCount=0,this.channelId=Math.floor(1e6*Math.random()),this.frameWindow=iframe.contentWindow,this.origin=origin,this.globalListeners=[],this.channelListeners=[],this.eventListener=this.eventListener.bind(this),"undefined"!=typeof window&&window.addEventListener("message",this.eventListener)}cleanup(){window.removeEventListener("message",this.eventListener),this.globalListeners={},this.channelListeners={},this.globalListenersCount=0,this.channelListenersCount=0}register(){this.frameWindow&&this.frameWindow.postMessage({type:"register-frame",origin:document.location.origin,id:this.channelId},this.origin)}dispatch(message){this.frameWindow&&this.frameWindow.postMessage({$id:this.channelId,codesandbox:!0,...message},this.origin)}globalListen(listener){if("function"!=typeof listener)return()=>{};let listenerId=this.globalListenersCount;return this.globalListeners[listenerId]=listener,this.globalListenersCount++,()=>{delete this.globalListeners[listenerId]}}channelListen(listener){if("function"!=typeof listener)return()=>{};let listenerId=this.channelListenersCount;return this.channelListeners[listenerId]=listener,this.channelListenersCount++,()=>{delete this.channelListeners[listenerId]}}eventListener(evt){if(evt.source!==this.frameWindow)return;let message=evt.data;message.codesandbox&&(Object.values(this.globalListeners).forEach(listener=>listener(message)),message.$id===this.channelId&&Object.values(this.channelListeners).forEach(listener=>listener(message)))}};function createPackageJSON(dependencies={},devDependencies={},entry="/index.js"){return JSON.stringify({name:"sandpack-project",main:entry,dependencies,devDependencies},null,2)}var BUNDLER_URL=`https://${"0.19.0".replace(/\./g,"-")}-sandpack.codesandbox.io/`,SandpackClient=class{constructor(selector,sandboxInfo,options={}){var _a;if(this.getTranspilerContext=()=>new Promise(resolve=>{let unsubscribe=this.listen(message=>{"transpiler-context"===message.type&&(resolve(message.data),unsubscribe())});this.dispatch({type:"get-transpiler-context"})}),this.options=options,this.sandboxInfo=sandboxInfo,this.bundlerURL=options.bundlerURL||BUNDLER_URL,this.bundlerState=void 0,this.errors=[],this.status="initializing","string"==typeof selector){this.selector=selector;let element=document.querySelector(selector);if(!element)throw Error(`No element found for selector '${selector}'`);this.element=element,this.iframe=document.createElement("iframe"),this.initializeElement()}else this.element=selector,this.iframe=selector;this.iframe.getAttribute("sandbox")||this.iframe.setAttribute("sandbox","allow-forms allow-modals allow-popups allow-presentation allow-same-origin allow-scripts");let urlSource=options.startRoute?new URL(options.startRoute,this.bundlerURL).toString():this.bundlerURL;null==(_a=this.iframe.contentWindow)||_a.location.replace(urlSource),this.iframeProtocol=new IFrameProtocol(this.iframe,this.bundlerURL),this.unsubscribeGlobalListener=this.iframeProtocol.globalListen(mes=>{"initialized"===mes.type&&this.iframe.contentWindow&&(this.iframeProtocol.register(),this.options.fileResolver&&(this.fileResolverProtocol=new Protocol("file-resolver",async data=>"isFile"===data.m?this.options.fileResolver.isFile(data.p):this.options.fileResolver.readFile(data.p),this.iframe.contentWindow)),this.updatePreview(this.sandboxInfo,!0))}),this.unsubscribeChannelListener=this.iframeProtocol.channelListen(mes=>{switch(mes.type){case"start":this.errors=[];break;case"status":this.status=mes.status;break;case"action":"show-error"===mes.action&&(this.errors=[...this.errors,function(msg){var filePath;if("SyntaxError"===msg.title){let{title,path,message,line,column}=msg;return{title,path,message,line,column}}let relevantStackFrame=function(frames){if(frames)return frames.find(frame=>!!frame._originalFileName)}(msg.payload.frames);if(!relevantStackFrame)return{message:msg.message};let errorInCode=function(errorFrame){let lastScriptLine=errorFrame._originalScriptCode[errorFrame._originalScriptCode.length-1],numberOfLineNumberCharacters=lastScriptLine.lineNumber.toString().length,extraLineLeadingSpaces=2+numberOfLineNumberCharacters+3+errorFrame._originalColumnNumber;return errorFrame._originalScriptCode.reduce((result,scriptLine)=>{let leadingChar=scriptLine.highlight?">":" ",lineNumber=scriptLine.lineNumber.toString().length===numberOfLineNumberCharacters?`${scriptLine.lineNumber}`:` ${scriptLine.lineNumber}`,extraLine=scriptLine.highlight?"\n"+" ".repeat(extraLineLeadingSpaces)+"^":"";return result+"\n"+leadingChar+" "+lineNumber+" | "+scriptLine.content+extraLine},"")}(relevantStackFrame),errorLocation=relevantStackFrame?` (${relevantStackFrame._originalLineNumber}:${relevantStackFrame._originalColumnNumber})`:"",errorMessage=(filePath=relevantStackFrame._originalFileName,`${filePath}: ${msg.message}${errorLocation}
${errorInCode}`);return{message:errorMessage,title:msg.title,path:relevantStackFrame._originalFileName,line:relevantStackFrame._originalLineNumber,column:relevantStackFrame._originalColumnNumber}}(mes)]);break;case"state":this.bundlerState=mes.state}})}cleanup(){this.unsubscribeChannelListener(),this.unsubscribeGlobalListener(),this.iframeProtocol.cleanup()}updateOptions(options){isEqual(this.options,options)||(this.options=options,this.updatePreview())}updatePreview(sandboxInfo=this.sandboxInfo,isInitializationCompile){var _a,_b,_c,_d;this.sandboxInfo={...this.sandboxInfo,...sandboxInfo};let files=this.getFiles(),modules=Object.keys(files).reduce((prev,next)=>({...prev,[next]:{code:files[next].code,path:next}}),{}),packageJSON=JSON.parse(createPackageJSON(this.sandboxInfo.dependencies,this.sandboxInfo.devDependencies,this.sandboxInfo.entry));try{packageJSON=JSON.parse(files["/package.json"].code)}catch(e){console.error("Could not parse package.json file: "+e.message)}let normalizedModules=Object.keys(files).reduce((prev,next)=>({...prev,[next]:{content:files[next].code,path:next}}),{});this.dispatch({type:"compile",codesandbox:!0,version:3,isInitializationCompile,modules,reactDevTools:this.options.reactDevTools,externalResources:this.options.externalResources||[],hasFileResolver:Boolean(this.options.fileResolver),disableDependencyPreprocessing:this.sandboxInfo.disableDependencyPreprocessing,template:this.sandboxInfo.template||getTemplate_1(packageJSON,normalizedModules),showOpenInCodeSandbox:null==(_a=this.options.showOpenInCodeSandbox)||_a,showErrorScreen:null==(_b=this.options.showErrorScreen)||_b,showLoadingScreen:null==(_c=this.options.showLoadingScreen)||_c,skipEval:this.options.skipEval||!1,clearConsoleDisabled:!this.options.clearConsoleOnFirstCompile,logLevel:null!=(_d=this.options.logLevel)?_d:SandpackLogLevel.Info})}dispatch(message){this.iframeProtocol.dispatch(message)}listen(listener){return this.iframeProtocol.channelListen(listener)}getCodeSandboxURL(){let files=this.getFiles(),paramFiles=Object.keys(files).reduce((prev,next)=>({...prev,[next.replace("/","")]:{content:files[next].code,isBinary:!1}}),{});return fetch("https://codesandbox.io/api/v1/sandboxes/define?json=1",{method:"POST",body:JSON.stringify({files:paramFiles}),headers:{Accept:"application/json","Content-Type":"application/json"}}).then(x=>x.json()).then(res=>({sandboxId:res.sandbox_id,editorUrl:`https://codesandbox.io/s/${res.sandbox_id}`,embedUrl:`https://codesandbox.io/embed/${res.sandbox_id}`}))}getFiles(){let{sandboxInfo}=this;return void 0===sandboxInfo.files["/package.json"]?function(files,dependencies,devDependencies,entry){let newFiles={...files};if(!newFiles["/package.json"]){if(!dependencies)throw Error("No dependencies specified, please specify either a package.json or dependencies.");if(!entry)throw Error("Missing 'entry' parameter. Either specify an entry point, or pass in a package.json with the 'main' field set.");newFiles["/package.json"]={code:createPackageJSON(dependencies,devDependencies,entry)}}return newFiles}(sandboxInfo.files,sandboxInfo.dependencies,sandboxInfo.devDependencies,sandboxInfo.entry):this.sandboxInfo.files}initializeElement(){if(this.iframe.style.border="0",this.iframe.style.width=this.options.width||"100%",this.iframe.style.height=this.options.height||"100%",this.iframe.style.overflow="hidden",!this.element.parentNode)throw Error("Given element does not have a parent.");this.element.parentNode.replaceChild(this.iframe,this.element)}};function Preview(_a){var{className,files,presetConfig,show,children,codeConfig,style,frameless}=_a,rest=__rest(_a,["className","files","presetConfig","show","children","codeConfig","style","frameless"]);let kids=presetConfig?react__WEBPACK_IMPORTED_MODULE_0__.createElement(SandpackPreview,{files:files,presetConfig:presetConfig}):children;return react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",{className:"ch-preview"+(className?" "+className:""),style:style},frameless?kids:react__WEBPACK_IMPORTED_MODULE_0__.createElement(MiniBrowser,Object.assign({loadUrl:show,theme:codeConfig.theme},rest,{children:kids})))}function SandpackPreview({files,presetConfig}){let iframeRef=react__WEBPACK_IMPORTED_MODULE_0__.useRef(null),clientRef=react__WEBPACK_IMPORTED_MODULE_0__.useRef(null);return react__WEBPACK_IMPORTED_MODULE_0__.useEffect(()=>{clientRef.current=new SandpackClient(iframeRef.current,Object.assign(Object.assign({},presetConfig),{files:mergeFiles(presetConfig.files,files)}),{showOpenInCodeSandbox:!1})},[]),react__WEBPACK_IMPORTED_MODULE_0__.useEffect(()=>{clientRef.current&&clientRef.current.updatePreview(Object.assign(Object.assign({},presetConfig),{files:mergeFiles(presetConfig.files,files)}))},[files]),react__WEBPACK_IMPORTED_MODULE_0__.createElement("iframe",{ref:iframeRef})}function mergeFiles(csbFiles,chFiles){let result=Object.assign({},csbFiles);return chFiles.forEach(file=>{result["/"+file.name]={code:file.code.lines.map(l=>l.tokens.map(t=>t.content).join("")).join("\n")}}),result}function extractPreviewSteps(children,hasPreviewSteps){let allChildren=react__WEBPACK_IMPORTED_MODULE_0__.Children.toArray(children),stepsChildren=hasPreviewSteps?allChildren.slice(0,allChildren.length/2):allChildren,previewChildren=hasPreviewSteps?allChildren.slice(allChildren.length/2):void 0;return{stepsChildren,previewChildren}}function showEntry(entry){var _a;let rootHeight=(null===(_a=entry.rootBounds)||void 0===_a?void 0:_a.height)||0;addFlashingRect(entry.rootBounds,{border:`${Math.min(10,rootHeight/2)}px solid ${iodOptions.rootColor}`,overflow:"hidden",boxSizing:"border-box"}),addFlashingRect(entry.boundingClientRect,{border:`${Math.min(10,entry.boundingClientRect.height/2)}px solid ${entry.isIntersecting?iodOptions.enterColor:iodOptions.exitColor}`,overflow:"hidden",boxSizing:"border-box"}),addFlashingRect(entry.intersectionRect,{backgroundColor:iodOptions.interColor,zIndex:2})}function addFlashingRect(bounds,style={}){let{width,left,height,top}=bounds,div=document.createElement("div");return div.style.position="fixed",div.style.width=width+"px",div.style.left=left+"px",div.style.top=top+"px",div.style.height=height+"px",div.style.pointerEvents="none",div.style.transition="opacity 2s ease-in",Object.assign(div.style,style),requestAnimationFrame(()=>requestAnimationFrame(()=>{div.style.opacity="0"})),div.addEventListener("transitionend",()=>{document.body.removeChild(div)}),document.body.appendChild(div),div}(SandpackLogLevel2=SandpackLogLevel||(SandpackLogLevel={}))[SandpackLogLevel2.None=0]="None",SandpackLogLevel2[SandpackLogLevel2.Error=10]="Error",SandpackLogLevel2[SandpackLogLevel2.Warning=20]="Warning",SandpackLogLevel2[SandpackLogLevel2.Info=30]="Info",SandpackLogLevel2[SandpackLogLevel2.Debug=40]="Debug";let iodOptions={rootColor:"#9428AB",enterColor:"#B35C00",exitColor:"#035570",interColor:"#9CAF00BB"},useLayoutEffect$1="undefined"!=typeof window?react__WEBPACK_IMPORTED_MODULE_0__.useLayoutEffect:react__WEBPACK_IMPORTED_MODULE_0__.useEffect,ObserverContext=react__WEBPACK_IMPORTED_MODULE_0__.createContext(void 0),useLayoutEffect="undefined"!=typeof window?react__WEBPACK_IMPORTED_MODULE_0__.useLayoutEffect:react__WEBPACK_IMPORTED_MODULE_0__.useEffect;function Scroller({onStepChange,children,getRootMargin=defaultRootMargin,debug=!1}){let[observer,setObserver]=react__WEBPACK_IMPORTED_MODULE_0__.useState(),vh=function(){let isClient="object"==typeof window;function getHeight(){return isClient?document.documentElement.clientHeight:void 0}let[windowHeight,setWindowHeight]=react__WEBPACK_IMPORTED_MODULE_0__.useState(getHeight);return react__WEBPACK_IMPORTED_MODULE_0__.useEffect(()=>{function handleResize(){setWindowHeight(getHeight())}return window.addEventListener("resize",handleResize),()=>window.removeEventListener("resize",handleResize)},[]),useLayoutEffect$1(()=>{setWindowHeight(getHeight())},[]),windowHeight}();return useLayoutEffect(()=>{var rootMargin;let handleIntersect=entries=>{(debug||window.chDebugScroller)&&function(entries){entries.forEach(showEntry)}(entries),entries.forEach(entry=>{if(entry.intersectionRatio>0){let stepElement=entry.target;onStepChange(+stepElement.stepIndex)}})},observer=(rootMargin=getRootMargin(vh||0),new IntersectionObserver(handleIntersect,{rootMargin,threshold:1e-6,root:null}));return setObserver(observer),()=>observer.disconnect()},[vh]),react__WEBPACK_IMPORTED_MODULE_0__.createElement(ObserverContext.Provider,{value:observer},children)}function Step(_a){var{as="section",index}=_a,props=__rest(_a,["as","index"]);let ref=react__WEBPACK_IMPORTED_MODULE_0__.useRef(null),observer=react__WEBPACK_IMPORTED_MODULE_0__.useContext(ObserverContext);return useLayoutEffect(()=>(observer&&observer.observe(ref.current),()=>observer&&observer.unobserve(ref.current)),[observer]),useLayoutEffect(()=>{let stepElement=ref.current;stepElement.stepIndex=index},[index]),react__WEBPACK_IMPORTED_MODULE_0__.createElement(as,Object.assign(Object.assign({},props),{ref}))}function defaultRootMargin(vh){return`-${vh/2-2}px 0px`}let suffixCounter=0;function Swap({match}){let queries=match.map(([q])=>q),{isServer,matchedIndex}=function(queries){let isServer="undefined"==typeof window,allQueries=queries.slice(0,-1);"default"!==queries[queries.length-1]&&console.warn("last media query should be 'default'");let[,setValue]=react__WEBPACK_IMPORTED_MODULE_0__.useState(0),mediaQueryLists=isServer?[]:allQueries.map(q=>window.matchMedia(q));react__WEBPACK_IMPORTED_MODULE_0__.useEffect(()=>{let handler=()=>setValue(x=>x+1);return mediaQueryLists.forEach(mql=>mql.addListener(handler)),()=>mediaQueryLists.forEach(mql=>mql.removeListener(handler))},[]);let matchedIndex=mediaQueryLists.findIndex(mql=>mql.matches);return{isServer,matchedIndex:matchedIndex<0?queries.length-1:matchedIndex}}(queries),mainClassName=isServer?"ssmq-"+suffixCounter++:"";return isServer?react__WEBPACK_IMPORTED_MODULE_0__.createElement(react__WEBPACK_IMPORTED_MODULE_0__.Fragment,null,react__WEBPACK_IMPORTED_MODULE_0__.createElement("style",{className:mainClassName,dangerouslySetInnerHTML:{__html:function(queries,mainClass){let reversedQueries=queries.slice().reverse(),style=reversedQueries.map(query=>{let currentStyle=`.${mainClass}.${getClassName(query)}{display:block}`,otherStyle=`.${mainClass}:not(.${getClassName(query)}){display: none;}`;return"default"===query?`${currentStyle}${otherStyle}`:`@media ${query}{${currentStyle}${otherStyle}}`}).join("\n");return style}(queries,mainClassName)}}),match.map(([query,element])=>react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",{key:query,className:`${mainClassName} ${getClassName(query)}`},element)),react__WEBPACK_IMPORTED_MODULE_0__.createElement("script",{className:mainClassName,dangerouslySetInnerHTML:{__html:function(match,mainClass){let queries=match.map(([query])=>query),classes=queries.map(getClassName);return`(function() {
  var qs = ${JSON.stringify(queries)};
  var clss = ${JSON.stringify(classes)};
  var mainCls = "${mainClass}";

  var scrEls = document.getElementsByTagName("script");
  var scrEl = scrEls[scrEls.length - 1];
  var parent = scrEl.parentNode;

  var el = null;
  for (var i = 0; i < qs.length - 1; i++) {
    if (window.matchMedia(qs[i]).matches) {
      el = parent.querySelector(":scope > ." + mainCls + "." + clss[i]);
      break;
    }
  }
  if (!el) {
    var defaultClass = clss.pop();
    el = parent.querySelector(":scope > ." + mainCls + "." + defaultClass);
  }
  el.removeAttribute("class");

  parent.querySelectorAll(":scope > ." + mainCls).forEach(function (e) {
    parent.removeChild(e);
  });
})();`}(match,mainClassName)}})):react__WEBPACK_IMPORTED_MODULE_0__.createElement(react__WEBPACK_IMPORTED_MODULE_0__.Fragment,null,react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",null,match[matchedIndex][1]))}function getClassName(string){return"ssmq-"+string.replace(/[!\"#$%&'\(\)\*\+,\.\/:;<=>\?\@\[\\\]\^`\{\|\}~\s]/g,"").toLowerCase()}function InnerCodeSlot({editorStep,setFocus}){let onTabClick=filename=>{setFocus({fileName:filename,focus:null,id:""})},props=__rest(editorStep,["preset","presetConfig"]);return react__WEBPACK_IMPORTED_MODULE_0__.createElement(InnerCode,Object.assign({},props,{onTabClick:onTabClick}))}function InnerPreviewSlot({previewStep,allProps,editorStep}){let props=__rest(allProps,["preset"]);return react__WEBPACK_IMPORTED_MODULE_0__.createElement(Preview,Object.assign({className:"ch-scrollycoding-preview"},props,null==previewStep?void 0:previewStep.props,{files:editorStep.files}))}let StaticStepContext=react__WEBPACK_IMPORTED_MODULE_0__.createContext(null);function StaticScrollycoding(_a){var{children,hasPreviewSteps,editorSteps}=_a,rest=__rest(_a,["children","hasPreviewSteps","editorSteps"]);let{stepsChildren,previewChildren}=extractPreviewSteps(children,hasPreviewSteps);return react__WEBPACK_IMPORTED_MODULE_0__.createElement("section",{className:"ch-scrollycoding-static"},stepsChildren.map((children,i)=>react__WEBPACK_IMPORTED_MODULE_0__.createElement(StaticSection,{key:i,editorStep:editorSteps[i],previewStep:previewChildren&&previewChildren[i],allProps:rest},children)))}function StaticSection({editorStep,previewStep,allProps,children}){let[step,setStep]=react__WEBPACK_IMPORTED_MODULE_0__.useState(Object.assign(Object.assign({},editorStep),allProps)),resetFocus=()=>setStep(Object.assign(Object.assign({},editorStep),allProps)),setFocus=({fileName,focus,id})=>{let newStep=updateEditorStep(step,fileName,focus);setStep(Object.assign(Object.assign(Object.assign({},step),newStep),{selectedId:id}))};return react__WEBPACK_IMPORTED_MODULE_0__.createElement(StaticStepContext.Provider,{value:{editorStep:step,previewStep:previewStep,allProps,setFocus}},react__WEBPACK_IMPORTED_MODULE_0__.createElement(LinkableSection,{onActivation:setFocus,onReset:resetFocus},children))}function DynamicScrollycoding(_a){var{children,editorSteps,codeConfig,presetConfig,start=0,className,style,hasPreviewSteps}=_a,rest=__rest(_a,["children","editorSteps","codeConfig","presetConfig","start","className","style","hasPreviewSteps"]);let{stepsChildren,previewChildren}=extractPreviewSteps(children,hasPreviewSteps),[state,setState]=react__WEBPACK_IMPORTED_MODULE_0__.useState({stepIndex:start,step:editorSteps[start]}),tab=state.step;function onStepChange(index){setState({stepIndex:index,step:editorSteps[index]})}return react__WEBPACK_IMPORTED_MODULE_0__.createElement("section",{className:`ch-scrollycoding ${presetConfig||hasPreviewSteps?"ch-scrollycoding-with-preview":""} ${className||""}`,style:style},react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",{className:"ch-scrollycoding-content"},react__WEBPACK_IMPORTED_MODULE_0__.createElement(Scroller,{onStepChange:onStepChange},stepsChildren.map((children,i)=>react__WEBPACK_IMPORTED_MODULE_0__.createElement(Step,{as:"div",key:i,index:i,onClick:()=>onStepChange(i),className:"ch-scrollycoding-step-content","data-selected":i===state.stepIndex?"true":void 0},react__WEBPACK_IMPORTED_MODULE_0__.createElement(LinkableSection,{onActivation({fileName,focus}){!function(stepIndex,filename,focus){let newStep=updateEditorStep(editorSteps[stepIndex],filename,focus);setState(Object.assign(Object.assign({},state),{stepIndex,step:newStep}))}(i,fileName,focus)},onReset(){onStepChange(i)}},children))))),react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",{className:"ch-scrollycoding-sticker"},react__WEBPACK_IMPORTED_MODULE_0__.createElement(InnerCode,Object.assign({showExpandButton:!0},rest,tab,{codeConfig:codeConfig,onTabClick:function(filename){let newStep=updateEditorStep(state.step,filename,null);setState(Object.assign(Object.assign({},state),{step:newStep}))}})),presetConfig?react__WEBPACK_IMPORTED_MODULE_0__.createElement(Preview,{className:"ch-scrollycoding-preview",files:tab.files,presetConfig:presetConfig,codeConfig:codeConfig}):hasPreviewSteps?react__WEBPACK_IMPORTED_MODULE_0__.createElement(Preview,Object.assign({className:"ch-scrollycoding-preview"},previewChildren[state.stepIndex].props)):null))}function MultilineMark({children,data,style,theme}){let bg=getColor(theme,ColorName1.RangeHighlightBackground),border=getColor(theme,ColorName1.EditorInfoForeground);return react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",{style:Object.assign(Object.assign({},style),{background:bg}),className:"ch-code-multiline-mark "+(null!=data?data:"")},react__WEBPACK_IMPORTED_MODULE_0__.createElement("span",{className:"ch-code-multiline-mark-border",style:{background:border}}),children)}function InlineMark({children,data,theme}){let bg=function(children){var _a,_b,_c;let child=react__WEBPACK_IMPORTED_MODULE_0__.Children.toArray(children)[0],grandChild=react__WEBPACK_IMPORTED_MODULE_0__.Children.toArray((null===(_a=null==child?void 0:child.props)||void 0===_a?void 0:_a.children)||[])[0],grandGrandChild=react__WEBPACK_IMPORTED_MODULE_0__.Children.toArray((null===(_b=null==grandChild?void 0:grandChild.props)||void 0===_b?void 0:_b.children)||[])[0],{color}=(null===(_c=null==grandGrandChild?void 0:grandGrandChild.props)||void 0===_c?void 0:_c.style)||{};if(color)return transparent(color,.2)}(children)||transparent(getColor(theme,ColorName1.CodeForeground),.2);return react__WEBPACK_IMPORTED_MODULE_0__.createElement("span",{className:"ch-code-inline-mark "+(null!=data?data:""),style:{background:bg}},children)}let CH={Code:function(props){let[step,setStep]=react__WEBPACK_IMPORTED_MODULE_0__.useState(props);return react__WEBPACK_IMPORTED_MODULE_0__.createElement(InnerCode,Object.assign({},step,{onTabClick:function(filename){let newStep=updateEditorStep(step,filename,null);setStep(Object.assign(Object.assign({},step),newStep))}}))},Section:function(_a){var{children,className,style}=_a,props=__rest(_a,["children","className","style"]);let[state,setState]=react__WEBPACK_IMPORTED_MODULE_0__.useState(props),resetFocus=()=>setState(props),setFocus=({fileName,focus,id})=>{let newStep=updateEditorStep(state,fileName,focus);setState(Object.assign(Object.assign(Object.assign({},state),newStep),{selectedId:id}))},rest=__rest(state,["selectedId"]);return react__WEBPACK_IMPORTED_MODULE_0__.createElement("section",{className:`ch-section ${className||""}`,style:style},react__WEBPACK_IMPORTED_MODULE_0__.createElement(SectionContext.Provider,{value:{props:rest,setFocus}},react__WEBPACK_IMPORTED_MODULE_0__.createElement(LinkableSection,{onActivation:setFocus,onReset:resetFocus},children)))},SectionLink:function({focus,file,children,id}){let{activate,reset,activatedId}=react__WEBPACK_IMPORTED_MODULE_0__.useContext(LinkableContext);return react__WEBPACK_IMPORTED_MODULE_0__.createElement("span",{className:"ch-section-link","data-active":activatedId===id,children:children,onMouseOver:()=>activate({fileName:file,focus,id}),onMouseOut:reset})},SectionCode:function(innerProps){let{props,setFocus}=react__WEBPACK_IMPORTED_MODULE_0__.useContext(SectionContext),onTabClick=filename=>{setFocus({fileName:filename,focus:null,id:""})};return react__WEBPACK_IMPORTED_MODULE_0__.createElement(InnerCode,Object.assign({},innerProps,props,{onTabClick:onTabClick}))},Spotlight:function(_a){var _b,{children,editorSteps,codeConfig,start=0,presetConfig,className,style,hasPreviewSteps}=_a,rest=__rest(_a,["children","editorSteps","codeConfig","start","presetConfig","className","style","hasPreviewSteps"]);let{stepsChildren,previewChildren}=extractPreviewSteps(children,hasPreviewSteps),[state,setState]=react__WEBPACK_IMPORTED_MODULE_0__.useState({stepIndex:start,step:editorSteps[start]}),tab=state.step,headerElement=stepsChildren[0];return react__WEBPACK_IMPORTED_MODULE_0__.createElement("section",{className:`ch-spotlight ${presetConfig||hasPreviewSteps?"ch-spotlight-with-preview":""} ${className||""}`,style:style},react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",{className:"ch-spotlight-tabs"},(null===(_b=null==headerElement?void 0:headerElement.props)||void 0===_b?void 0:_b.children)?react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",null,stepsChildren[0]):null,stepsChildren.map((children,i)=>0===i?null:react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",{key:i,onClick:()=>setState({stepIndex:i,step:editorSteps[i]}),className:"ch-spotlight-tab","data-selected":i===state.stepIndex?"true":void 0},children))),react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",{className:"ch-spotlight-sticker"},react__WEBPACK_IMPORTED_MODULE_0__.createElement(InnerCode,Object.assign({},rest,tab,{codeConfig:codeConfig,onTabClick:function(filename){let newStep=updateEditorStep(state.step,filename,null);setState(Object.assign(Object.assign({},state),{step:newStep}))}})),presetConfig?react__WEBPACK_IMPORTED_MODULE_0__.createElement(Preview,{className:"ch-spotlight-preview",files:tab.files,presetConfig:presetConfig,codeConfig:codeConfig}):hasPreviewSteps?react__WEBPACK_IMPORTED_MODULE_0__.createElement(Preview,Object.assign({className:"ch-spotlight-preview"},previewChildren[state.stepIndex].props)):null))},Scrollycoding:function(props){return react__WEBPACK_IMPORTED_MODULE_0__.createElement(Swap,{match:[[props.codeConfig.staticMediaQuery,react__WEBPACK_IMPORTED_MODULE_0__.createElement(StaticScrollycoding,Object.assign({},props))],["default",react__WEBPACK_IMPORTED_MODULE_0__.createElement(DynamicScrollycoding,Object.assign({},props))]]})},Preview,annotations:{box:function({children,data,theme}){var _a,_b;let border="string"==typeof data?data:(null===(_b=null===(_a=theme.tokenColors.find(tc=>{var _a;return null===(_a=tc.scope)||void 0===_a?void 0:_a.includes("string")}))||void 0===_a?void 0:_a.settings)||void 0===_b?void 0:_b.foreground)||"yellow";return react__WEBPACK_IMPORTED_MODULE_0__.createElement("span",{className:"ch-code-box-annotation",style:{outline:`2px solid ${border}`}},children)},bg:MultilineMark,label:function({children,data,style,theme}){let bg=theme.colors["editor.lineHighlightBackground"]||theme.colors["editor.selectionHighlightBackground"],[hover,setHover]=react__WEBPACK_IMPORTED_MODULE_0__.useState(!1);return react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",{style:Object.assign(Object.assign({},style),{background:hover?bg:void 0}),onMouseEnter:()=>setHover(!0),onMouseLeave:()=>setHover(!1)},children,react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",{style:{position:"absolute",right:0,paddingRight:16,display:hover?"block":"none",opacity:.7}},(null==data?void 0:data.children)||data))},link:function({children,isInline,style,data}){let url=(null==data?void 0:data.url)||data,title=null==data?void 0:data.title;return react__WEBPACK_IMPORTED_MODULE_0__.createElement("a",{href:url,title:title,className:isInline?"ch-code-inline-link":"ch-code-link",style:style},children)},mark:function(props){return props.isInline?react__WEBPACK_IMPORTED_MODULE_0__.createElement(InlineMark,Object.assign({},props)):react__WEBPACK_IMPORTED_MODULE_0__.createElement(MultilineMark,Object.assign({},props))},withClass:function({children,data,style,theme}){return react__WEBPACK_IMPORTED_MODULE_0__.createElement("span",{style:style,className:data},children)}},Annotation:function(){return react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",null,'"error: code hike remark plugin not running or annotation isn\'t at the right place"')},Slideshow:function(_a){var{children,className,code,codeConfig,editorSteps,autoFocus,hasPreviewSteps,start=0,onChange:onSlideshowChange=()=>{},presetConfig,style,autoPlay,loop=!1}=_a,rest=__rest(_a,["children","className","code","codeConfig","editorSteps","autoFocus","hasPreviewSteps","start","onChange","presetConfig","style","autoPlay","loop"]);let{stepsChildren,previewChildren}=extractPreviewSteps(children,hasPreviewSteps),hasNotes=stepsChildren.some(child=>{var _a;return null===(_a=child.props)||void 0===_a?void 0:_a.children}),maxSteps=editorSteps.length-1,[state,setState]=react__WEBPACK_IMPORTED_MODULE_0__.useState(()=>{let startIndex=clamp$2(start,0,maxSteps);return{stepIndex:startIndex,step:editorSteps[startIndex]}}),{stepIndex:currentIndex,step:tab}=state;function setIndex(newIndex){let stepIndex=clamp$2(newIndex,0,maxSteps);setState({stepIndex,step:editorSteps[stepIndex]})}function nextSlide(){setState(s=>{let stepIndex=loop?(s.stepIndex+1)%(maxSteps+1):clamp$2(s.stepIndex+1,0,maxSteps);return{stepIndex,step:editorSteps[stepIndex]}})}return react__WEBPACK_IMPORTED_MODULE_0__.useEffect(()=>{onSlideshowChange({index:currentIndex})},[currentIndex]),!function(callback,delay){let savedCallback=react__WEBPACK_IMPORTED_MODULE_0__.useRef(callback);react__WEBPACK_IMPORTED_MODULE_0__.useEffect(()=>{savedCallback.current=callback},[callback]),react__WEBPACK_IMPORTED_MODULE_0__.useEffect(()=>{if(!delay&&0!==delay)return;let id=setInterval(()=>savedCallback.current(),delay);return()=>clearInterval(id)},[delay])}(nextSlide,autoPlay),react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",{className:`ch-slideshow ${presetConfig||hasPreviewSteps?"ch-slideshow-with-preview":""} ${className||""}`,style:style},react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",{className:"ch-slideshow-slide"},react__WEBPACK_IMPORTED_MODULE_0__.createElement(InnerCode,Object.assign({},rest,tab,{codeConfig:Object.assign(Object.assign({},codeConfig),code),onTabClick:function(filename){let newStep=updateEditorStep(tab,filename,null);setState(Object.assign(Object.assign({},state),{step:newStep}))}})),presetConfig?react__WEBPACK_IMPORTED_MODULE_0__.createElement(Preview,{className:"ch-slideshow-preview",files:tab.files,presetConfig:presetConfig,codeConfig:codeConfig}):hasPreviewSteps?react__WEBPACK_IMPORTED_MODULE_0__.createElement(Preview,Object.assign({className:"ch-slideshow-preview"},previewChildren[currentIndex].props)):null),react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",{className:"ch-slideshow-notes"},react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",{className:"ch-slideshow-range"},react__WEBPACK_IMPORTED_MODULE_0__.createElement("button",{onClick:()=>setIndex(currentIndex-1),disabled:0===currentIndex},"Prev"),react__WEBPACK_IMPORTED_MODULE_0__.createElement("input",{max:maxSteps,min:0,step:1,type:"range",value:currentIndex,onChange:e=>setIndex(+e.target.value),ref:function(autoFocus){let ref=react__WEBPACK_IMPORTED_MODULE_0__.useRef(null);return react__WEBPACK_IMPORTED_MODULE_0__.useEffect(()=>{autoFocus&&ref.current.focus()},[]),ref}(autoFocus),autoFocus:autoFocus}),react__WEBPACK_IMPORTED_MODULE_0__.createElement("button",{onClick:nextSlide,disabled:currentIndex===maxSteps},"Next")),hasNotes&&react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",{className:"ch-slideshow-note"},stepsChildren[currentIndex])))},InlineCode:function(_a){var{className,codeConfig,children,code}=_a,rest=__rest(_a,["className","codeConfig","children","code"]);let{theme}=codeConfig,{lines}=code,allTokens=lines.flatMap(line=>line.tokens),foreground=getColor(theme,ColorName1.CodeForeground);return react__WEBPACK_IMPORTED_MODULE_0__.createElement("span",Object.assign({className:"ch-inline-code not-prose"+(className?" "+className:"")},rest),react__WEBPACK_IMPORTED_MODULE_0__.createElement("code",{style:{"--ch-code-foreground":foreground,background:transparent(getColor(theme,ColorName1.CodeBackground),.9),color:foreground}},allTokens.map((token,j)=>react__WEBPACK_IMPORTED_MODULE_0__.createElement("span",Object.assign({key:j},token.props),token.content))))},CodeSlot:function(){let context=react__WEBPACK_IMPORTED_MODULE_0__.useContext(StaticStepContext);return context?react__WEBPACK_IMPORTED_MODULE_0__.createElement(InnerCodeSlot,Object.assign({},context)):null},PreviewSlot:function(){let context=react__WEBPACK_IMPORTED_MODULE_0__.useContext(StaticStepContext);return context?react__WEBPACK_IMPORTED_MODULE_0__.createElement(InnerPreviewSlot,Object.assign({},context)):null}}}}]);