@use '../base/mdc-customize';
@use '../base/theme';
@use '../base/form-input';
@use '@material/form-field/mdc-form-field';
@use '@material/checkbox/mdc-checkbox';
@use '@material/checkbox';

$primary-dark: #2c02ff;
$primary-base: #4b4eff;
$primary-light: #2d5dff4d;
$grey: #abb1cc;
$grey-light: #cbd0e0;
$white: #fff;

$unchecked-color: $grey;
$checked-color: $primary-dark;
$hover-color: $primary-base;
$disabled-color: $grey-light;
$ink-color: $white;
$focus-shadow-color: $primary-light;
$focus-border-color: $primary-base;
$label-color: rgba(0, 0, 0, 0.6);

@mixin labelHint() {
  label {
    &.show-hint {
      &:after {
        content: '*';
      }
    }
  }

  &:not(.ino-checkbox--required) label.show-hint:after {
    content: ' - Optional' + '\a0';
    font-style: italic;
    color: lighten($label-color, 30);
  }
}

@mixin invalid() {
  label {
    color: var(--inovex-elements-error);
  }

  .mdc-checkbox {
    .mdc-checkbox__native-control {
      ~ .mdc-checkbox__background {
        --mdc-checkbox-unchecked-color: var(--inovex-elements-error);
        --mdc-checkbox-checked-color: var(--inovex-elements-error);
      }
    }
  }
}

:host {
  .mdc-form-field {
    @include labelHint();
    @include form-input.helperText($textPadding: 10px);

    &:has(.mdc-checkbox__native-control:invalid) {
      @include invalid();
    }

    .mdc-checkbox {
      @include checkbox.container-colors(
        $unchecked-color,
        $white,
        $checked-color,
        $checked-color
      );
      @include checkbox.disabled-container-colors(
        $disabled-color,
        $white,
        $disabled-color,
        $disabled-color
      );

      &:before,
      &:after {
        display: none; // Remove ripple effect
      }

      &__native-control {
        &:invalid {
          label {
            color: var(--inovex-elements-error);
          }
        }
      }

      &__background {
        border: 1.5px solid;
        border-radius: 5px;
        width: 21px;
        height: 21px;
        top: calc((var(--mdc-checkbox-ripple-size, 37px) - 18px) / 2);
        left: calc((var(--mdc-checkbox-ripple-size, 37px) - 18px) / 2);
      }

      &__checkmark {
        inset: 3.3px 0 0 2.5px;
        width: 13px;
        path {
          stroke-linejoin: round;
          stroke-linecap: round;
        }
      }

      &__mixedmark {
        @include checkbox.ink-color($white);
        width: 65%;
        background-color: $white;
        border-radius: 50px;
      }

      &--disabled ~ label {
        color: $disabled-color;
      }
    }
  }

  .ino-checkbox-selection {
    .mdc-checkbox__background {
      border-radius: 50px;
    }
  }
}

:host(:hover) {
  .mdc-checkbox {
    @include checkbox.container-colors(
      $primary-base,
      $white,
      $checked-color,
      $checked-color
    );
  }
}

:host(:active) .mdc-checkbox:not(.checked),
:host(:focus),
:host(:active) .mdc-checkbox:not(.mdc-checkbox--disabled) {
  .mdc-checkbox__background {
    box-shadow: 0px 0px 0px 4px $primary-light;
  }
}
