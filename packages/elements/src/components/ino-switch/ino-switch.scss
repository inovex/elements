@use 'base/mdc-customize';
@use '@material/switch';
@use '@material/switch/styles';
@use 'base/new-theme' as theme;
@use 'base/theme' as old-theme;

@mixin set-track-border-color {
  .mdc-switch__track {
    border: 1.5px solid white;
    margin: -1.5px;
    box-shadow: 0 0 0 5px theme.$primary-focus;
  }
}

@mixin set-hover-handle($margin-left: 0) {
  .handle-hover {
    height: 28px;
    width: 48px;
    border-radius: 14px;
    position: absolute;
    background: theme.$n-7;
    margin-left: $margin-left;
  }
}

ino-switch {
  @include switch.theme(
    (
      selected-handle-color: white,
      selected-hover-handle-color: white,
      selected-focus-handle-color: white,
      selected-pressed-handle-color: white,
      disabled-selected-handle-color: theme.$n-6,
      selected-track-color: theme.$primary,
      selected-hover-track-color: theme.$primary,
      selected-focus-track-color: theme.$primary,
      selected-pressed-track-color: theme.$primary,
      unselected-focus-track-color: theme.$n-5,
      unselected-hover-track-color: theme.$n-5,
      disabled-selected-track-color: transparent,
    )
  );
  .mdc-switch--selected:focus,
  .mdc-switch--unselected:focus {
    @include set-track-border-color;
  }

  .mdc-switch {
    &--selected:not(.ino-switch-icon) {
      .mdc-switch__handle {
        margin-left: -2px;
      }
    }
    &--unselected:not(.ino-switch-icon) {
      .mdc-switch__handle {
        margin-left: 2px;
      }
    }
  }

  // custom disabled state styling
  .mdc-switch:disabled:not(.ino-switch-icon) {
    opacity: 1;
    .mdc-switch__track {
      opacity: 1;
      border: 2px solid theme.$n-6;
      margin: -1.5px;
      background: transparent;
    }
    .mdc-switch__handle::after {
      background: theme.$n-6 !important;
      opacity: 1;
    }
  }

  .mdc-switch:disabled {
    opacity: 1;
    ino-icon {
      &:first-child {
        --icon-color: #{theme.$n-6} !important;
      }
      --icon-color: #{theme.$n-5};
    }
    .mdc-switch__track {
      opacity: 1;
      background: #f3f3f5;
    }
    .mdc-switch__handle::after {
      opacity: 1;
      background: white !important;
      box-shadow: 0px 1px 2px #0000000f;
    }
  }
}

ino-switch {
  display: flex;
  gap: 10px;
  align-items: center;
  height: 30px;
  height: 30px;
  cursor: pointer;

  &.ino-switch-disabled {
    cursor: default;
    pointer-events: none;
  }

  // set basic styles, DOES NOT SUPPORT CSS-VARS
  @include switch.theme(
    (
      track-height: 20px,
      track-width: 36px,
      track-shape: 18px,
      handle-height: 16px,
      handle-width: 16px,
      handle-shape: 14px,
      selected-icon-size: 10px,
      unselected-icon-size: 10px,
      handle-surface-color: white,
      unselected-handle-color: white,
      unselected-track-color: theme.$n-6,
      disabled-unselected-handle-color: theme.$n-6,
      disabled-unselected-track-color: transparent,
      unselected-hover-handle-color: white,
      unselected-focus-handle-color: white,
      unselected-pressed-handle-color: white,
    )
  );

  // hide ripple effect
  .mdc-switch__ripple {
    display: none;
  }
}

ino-switch .ino-switch-icon {
  display: flex;
  gap: 10px;
  align-items: center;
  height: 30px;
  cursor: pointer;
  &.ino-switch-icon__toRight {
    @include set-hover-handle($margin-left: 52px);
  }

  &.ino-switch-icon__toLeft {
    @include set-hover-handle($margin-left: 4px);
  }
  ino-icon {
    position: absolute;
    --icon-width: 20px;
    --icon-height: 20px;
    &:first-child {
      margin-left: -24px;
    }
    &:last-child {
      margin-left: 24px;
    }
  }
  &.mdc-switch {
    .mdc-switch__track {
      position: absolute;
    }
    &--selected {
      ino-icon {
        &:first-child {
          --icon-color: #{theme.$n-3};
        }
        &:last-child {
          --icon-color: #{old-theme.color(primary, dark)};
        }
      }
      .mdc-switch__handle {
        margin-left: -4px;
      }
    }
    &--unselected {
      ino-icon {
        &:first-child {
          --icon-color: #{old-theme.color(primary, dark)};
        }
        &:last-child {
          --icon-color: #{theme.$n-3};
        }
      }
      .mdc-switch__handle {
        margin-left: 4px;
      }
    }
  }
  @include switch.theme(
    (
      selected-handle-color: white,
      selected-hover-handle-color: white,
      selected-focus-handle-color: white,
      selected-pressed-handle-color: white,
      disabled-selected-handle-color: theme.$n-6,
      selected-track-color: theme.$n-6,
      selected-hover-track-color: theme.$n-6,
      selected-focus-track-color: theme.$n-6,
      selected-pressed-track-color: theme.$n-6,
      unselected-focus-track-color: theme.$n-6,
      unselected-hover-track-color: theme.$n-6,
      disabled-selected-track-color: transparent,
    )
  );

  @include switch.theme(
    (
      track-height: 36px,
      track-width: 104px,
      track-shape: 18px,
      handle-height: 28px,
      handle-width: 48px,
      handle-shape: 14px,
      selected-icon-size: 20px,
      unselected-icon-size: 20px,
      handle-surface-color: white,
      unselected-handle-color: white,
      unselected-track-color: theme.$n-7,
      disabled-unselected-handle-color: theme.$n-7,
      disabled-unselected-track-color: transparent,
      unselected-hover-handle-color: white,
      unselected-focus-handle-color: white,
      unselected-pressed-handle-color: white,
    )
  );

  .mdc-switch__ripple {
    display: none;
  }
}
